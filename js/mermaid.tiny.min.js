/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/@mermaid-js/tiny@11.12.2/dist/mermaid.tiny.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";var __esbuild_esm_mermaid_nm;(__esbuild_esm_mermaid_nm||={}).mermaid=(()=>{var t,e,r,i,n,a,s,o,l=Object.create,h=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,p=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,g=(t,e)=>h(t,"name",{value:e,configurable:!0}),y=(t,e)=>()=>(t&&(e=t(t=0)),e),m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),x=(t,e)=>{for(var r in e)h(t,r,{get:e[r],enumerable:!0})},b=(t,e,r,i)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let n of d(e))!f.call(t,n)&&n!==r&&h(t,n,{get:()=>e[n],enumerable:!(i=u(e,n))||i.enumerable});return t},k=(t,e,r)=>(b(t,e,"default"),r&&b(r,e,"default")),v=(t,e,r)=>(r=null!=t?l(p(t)):{},b(!e&&t&&t.__esModule?r:h(r,"default",{value:t,enumerable:!0}),t)),T=y((()=>{t=Object.freeze({left:0,top:0,width:16,height:16}),e=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),r=Object.freeze({...t,...e}),i=Object.freeze({...r,body:"",hidden:!1})})),w=y((()=>{T(),n=Object.freeze({width:null,height:null}),a=Object.freeze({...n,...e})})),_=y((()=>{s=g(((t,e,r,i="")=>{let n=t.split(":");if("@"===t.slice(0,1)){if(n.length<2||n.length>3)return null;i=n.shift().slice(1)}if(n.length>3||!n.length)return null;if(n.length>1){let t=n.pop(),r=n.pop(),a={provider:n.length>0?n[0]:i,prefix:r,name:t};return e&&!o(a)?null:a}let a=n[0],s=a.split("-");if(s.length>1){let t={provider:i,prefix:s.shift(),name:s.join("-")};return e&&!o(t)?null:t}if(r&&""===i){let t={provider:i,prefix:"",name:a};return e&&!o(t,r)?null:t}return null}),"stringToIcon"),o=g(((t,e)=>!!t&&!(!(e&&""===t.prefix||t.prefix)||!t.name)),"validateIconName")}));function S(t,e){let r={};!t.hFlip!=!e.hFlip&&(r.hFlip=!0),!t.vFlip!=!e.vFlip&&(r.vFlip=!0);let i=((t.rotate||0)+(e.rotate||0))%4;return i&&(r.rotate=i),r}var C=y((()=>{g(S,"mergeIconTransformations")}));function E(t,r){let n=S(t,r);for(let a in i)a in e?a in t&&!(a in n)&&(n[a]=e[a]):a in r?n[a]=r[a]:a in t&&(n[a]=t[a]);return n}var A=y((()=>{T(),C(),g(E,"mergeIconData")}));function $(t,e){let r=t.icons,i=t.aliases||Object.create(null),n=Object.create(null);function a(t){if(r[t])return n[t]=[];if(!(t in n)){n[t]=null;let e=i[t]&&i[t].parent,r=e&&a(e);r&&(n[t]=[e].concat(r))}return n[t]}return g(a,"resolve"),(e||Object.keys(r).concat(Object.keys(i))).forEach(a),n}var L=y((()=>{g($,"getIconsTree")}));function R(t,e,r){let i=t.icons,n=t.aliases||Object.create(null),a={};function s(t){a=E(i[t]||n[t],a)}return g(s,"parse"),s(e),r.forEach(s),E(t,a)}function I(t,e){if(t.icons[e])return R(t,e,[]);let r=$(t,[e])[e];return r?R(t,e,r):null}var N=y((()=>{A(),L(),g(R,"internalGetIconData"),g(I,"getIconData")}));function D(t,e,r){if(1===e)return t;if(r=r||100,"number"==typeof t)return Math.ceil(t*e*r)/r;if("string"!=typeof t)return t;let i=t.split(M);if(null===i||!i.length)return t;let n=[],a=i.shift(),s=O.test(a);for(;;){if(s){let t=parseFloat(a);isNaN(t)?n.push(a):n.push(Math.ceil(t*e*r)/r)}else n.push(a);if(a=i.shift(),void 0===a)return n.join("");s=!s}}var M,O,P=y((()=>{M=/(-?[0-9.]*[0-9]+[0-9.]*)/g,O=/^-?[0-9.]*[0-9]+[0-9.]*$/g,g(D,"calculateSize")}));function B(t,e="defs"){let r="",i=t.indexOf("<"+e);for(;i>=0;){let n=t.indexOf(">",i),a=t.indexOf("</"+e);if(-1===n||-1===a)break;let s=t.indexOf(">",a);if(-1===s)break;r+=t.slice(n+1,a).trim(),t=t.slice(0,i).trim()+t.slice(s+1)}return{defs:r,content:t}}function F(t,e){return t?"<defs>"+t+"</defs>"+e:e}function z(t,e,r){let i=B(t);return F(i.defs,e+i.content+r)}var j=y((()=>{g(B,"splitSVGDefs"),g(F,"mergeDefsAndContent"),g(z,"wrapSVGContent")}));function U(t,e){let i={...r,...t},n={...a,...e},s={left:i.left,top:i.top,width:i.width,height:i.height},o=i.body;[i,n].forEach((t=>{let e,r=[],i=t.hFlip,n=t.vFlip,a=t.rotate;switch(i?n?a+=2:(r.push("translate("+(s.width+s.left).toString()+" "+(0-s.top).toString()+")"),r.push("scale(-1 1)"),s.top=s.left=0):n&&(r.push("translate("+(0-s.left).toString()+" "+(s.height+s.top).toString()+")"),r.push("scale(1 -1)"),s.top=s.left=0),a<0&&(a-=4*Math.floor(a/4)),a%=4,a){case 1:e=s.height/2+s.top,r.unshift("rotate(90 "+e.toString()+" "+e.toString()+")");break;case 2:r.unshift("rotate(180 "+(s.width/2+s.left).toString()+" "+(s.height/2+s.top).toString()+")");break;case 3:e=s.width/2+s.left,r.unshift("rotate(-90 "+e.toString()+" "+e.toString()+")")}a%2==1&&(s.left!==s.top&&(e=s.left,s.left=s.top,s.top=e),s.width!==s.height&&(e=s.width,s.width=s.height,s.height=e)),r.length&&(o=z(o,'<g transform="'+r.join(" ")+'">',"</g>"))}));let l,c,h=n.width,u=n.height,d=s.width,p=s.height;null===h?(c=null===u?"1em":"auto"===u?p:u,l=D(c,d/p)):(l="auto"===h?d:h,c=null===u?D(l,p/d):"auto"===u?p:u);let f={},y=g(((t,e)=>{W(e)||(f[t]=e.toString())}),"setAttr");y("width",l),y("height",c);let m=[s.left,s.top,d,p];return f.viewBox=m.join(" "),{attributes:f,viewBox:m,body:o}}var W,q=y((()=>{T(),w(),P(),j(),W=g((t=>"unset"===t||"undefined"===t||"none"===t),"isUnsetKeyword"),g(U,"iconToSVG")}));function Y(t,e=H){let r,i=[];for(;r=G.exec(t);)i.push(r[1]);if(!i.length)return t;let n="suffix"+(16777216*Math.random()|Date.now()).toString(16);return i.forEach((r=>{let i="function"==typeof e?e(r):e+(V++).toString(),a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+a+')([")]|\\.[a-z])',"g"),"$1"+i+n+"$3")})),t=t.replace(new RegExp(n,"g"),"")}var G,H,V,X=y((()=>{G=/\sid="(\S+)"/g,H="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16),V=0,g(Y,"replaceIDs")}));function K(t,e){let r=-1===t.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(let t in e)r+=" "+t+'="'+e[t]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+r+">"+t+"</svg>"}var Q,Z,J,tt,et,rt,it,nt,at,st,ot,lt,ct,ht,ut,dt,pt,ft,gt,yt,mt,xt,bt,kt,vt,Tt,wt,_t,St,Ct,Et,At,$t,Lt,Rt,It,Nt,Dt,Mt,Ot,Pt,Bt,Ft,zt,jt,Ut,Wt,qt,Yt,Gt,Ht,Vt,Xt,Kt,Qt,Zt,Jt,te,ee,re,ie,ne,ae,se,oe,le,ce,he,ue,de,pe,fe,ge,ye,me,xe,be,ke,ve,Te,we,_e,Se,Ce,Ee,Ae,$e,Le,Re,Ie,Ne,De,Me,Oe,Pe,Be,Fe=y((()=>{g(K,"iconToHTML")})),ze=y((()=>{_(),N(),q(),X(),Fe()})),je=y((()=>{Q=g(((t,e,{depth:r=2,clobber:i=!1}={})=>{let n={depth:r,clobber:i};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach((e=>Q(t,e,n))),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach((e=>{t.includes(e)||t.push(e)})),t):void 0===t||r<=0?null!=t&&"object"==typeof t&&"object"==typeof e?Object.assign(t,e):e:(void 0!==e&&"object"==typeof t&&"object"==typeof e&&Object.keys(e).forEach((n=>{"object"!=typeof e[n]||void 0!==t[n]&&"object"!=typeof t[n]?(i||"object"!=typeof t[n]&&"object"!=typeof e[n])&&(t[n]=e[n]):(void 0===t[n]&&(t[n]=Array.isArray(e[n])?[]:{}),t[n]=Q(t[n],e[n],{depth:r-1,clobber:i}))})),t)}),"assignWithDepth"),Z=Q})),Ue=m(((t,e)=>{var r,i;r=t,i=function(){var t=6e4,e=36e5,r="millisecond",i="second",n="minute",a="hour",s="day",o="week",l="month",c="quarter",h="year",u="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:g((function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||e[0])+"]"}),"ordinal")},m=g((function(t,e,r){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(r)+t}),"m"),x={s:m,z:g((function(t){var e=-t.utcOffset(),r=Math.abs(e),i=Math.floor(r/60),n=r%60;return(e<=0?"+":"-")+m(i,2,"0")+":"+m(n,2,"0")}),"z"),m:g((function t(e,r){if(e.date()<r.date())return-t(r,e);var i=12*(r.year()-e.year())+(r.month()-e.month()),n=e.clone().add(i,l),a=r-n<0,s=e.clone().add(i+(a?-1:1),l);return+(-(i+(r-n)/(a?n-s:s-n))||0)}),"t"),a:g((function(t){return t<0?Math.ceil(t)||0:Math.floor(t)}),"a"),p:g((function(t){return{M:l,y:h,w:o,d:s,D:u,h:a,m:n,s:i,ms:r,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")}),"p"),u:g((function(t){return void 0===t}),"u")},b="en",k={};k[b]=y;var v="$isDayjsObject",T=g((function(t){return t instanceof C||!(!t||!t[v])}),"S"),w=g((function t(e,r,i){var n;if(!e)return b;if("string"==typeof e){var a=e.toLowerCase();k[a]&&(n=a),r&&(k[a]=r,n=a);var s=e.split("-");if(!n&&s.length>1)return t(s[0])}else{var o=e.name;k[o]=e,n=o}return!i&&n&&(b=n),n||!i&&b}),"t"),_=g((function(t,e){if(T(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new C(r)}),"O"),S=x;S.l=w,S.i=T,S.w=function(t,e){return _(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var C=function(){function y(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[v]=!0}g(y,"M");var m=y.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(p);if(i){var n=i[2]-1||0,a=(i[7]||"0").substring(0,3);return r?new Date(Date.UTC(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)):new Date(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return S},m.isValid=function(){return this.$d.toString()!==d},m.isSame=function(t,e){var r=_(t);return this.startOf(e)<=r&&r<=this.endOf(e)},m.isAfter=function(t,e){return _(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<_(t)},m.$g=function(t,e,r){return S.u(t)?this[e]:this.set(r,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var r=this,c=!!S.u(e)||e,d=S.p(t),p=g((function(t,e){var i=S.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return c?i:i.endOf(s)}),"l"),f=g((function(t,e){return S.w(r.toDate()[t].apply(r.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),r)}),"$"),y=this.$W,m=this.$M,x=this.$D,b="set"+(this.$u?"UTC":"");switch(d){case h:return c?p(1,0):p(31,11);case l:return c?p(1,m):p(0,m+1);case o:var k=this.$locale().weekStart||0,v=(y<k?y+7:y)-k;return p(c?x-v:x+(6-v),m);case s:case u:return f(b+"Hours",0);case a:return f(b+"Minutes",1);case n:return f(b+"Seconds",2);case i:return f(b+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var o,c=S.p(t),d="set"+(this.$u?"UTC":""),p=(o={},o[s]=d+"Date",o[u]=d+"Date",o[l]=d+"Month",o[h]=d+"FullYear",o[a]=d+"Hours",o[n]=d+"Minutes",o[i]=d+"Seconds",o[r]=d+"Milliseconds",o)[c],f=c===s?this.$D+(e-this.$W):e;if(c===l||c===h){var g=this.clone().set(u,1);g.$d[p](f),g.init(),this.$d=g.set(u,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[S.p(t)]()},m.add=function(r,c){var u,d=this;r=Number(r);var p=S.p(c),f=g((function(t){var e=_(d);return S.w(e.date(e.date()+Math.round(t*r)),d)}),"y");if(p===l)return this.set(l,this.$M+r);if(p===h)return this.set(h,this.$y+r);if(p===s)return f(1);if(p===o)return f(7);var y=(u={},u[n]=t,u[a]=e,u[i]=1e3,u)[p]||1,m=this.$d.getTime()+r*y;return S.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||d;var i=t||"YYYY-MM-DDTHH:mm:ssZ",n=S.z(this),a=this.$H,s=this.$m,o=this.$M,l=r.weekdays,c=r.months,h=r.meridiem,u=g((function(t,r,n,a){return t&&(t[r]||t(e,i))||n[r].slice(0,a)}),"h"),p=g((function(t){return S.s(a%12||12,t,"0")}),"d"),y=h||function(t,e,r){var i=t<12?"AM":"PM";return r?i.toLowerCase():i};return i.replace(f,(function(t,i){return i||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return S.s(e.$y,4,"0");case"M":return o+1;case"MM":return S.s(o+1,2,"0");case"MMM":return u(r.monthsShort,o,c,3);case"MMMM":return u(c,o);case"D":return e.$D;case"DD":return S.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return u(r.weekdaysMin,e.$W,l,2);case"ddd":return u(r.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(a);case"HH":return S.s(a,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return y(a,s,!0);case"A":return y(a,s,!1);case"m":return String(s);case"mm":return S.s(s,2,"0");case"s":return String(e.$s);case"ss":return S.s(e.$s,2,"0");case"SSS":return S.s(e.$ms,3,"0");case"Z":return n}return null}(t)||n.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,u,d){var p,f=this,y=S.p(u),m=_(r),x=(m.utcOffset()-this.utcOffset())*t,b=this-m,k=g((function(){return S.m(f,m)}),"D");switch(y){case h:p=k()/12;break;case l:p=k();break;case c:p=k()/3;break;case o:p=(b-x)/6048e5;break;case s:p=(b-x)/864e5;break;case a:p=b/e;break;case n:p=b/t;break;case i:p=b/1e3;break;default:p=b}return d?p:S.a(p)},m.daysInMonth=function(){return this.endOf(l).$D},m.$locale=function(){return k[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),i=w(t,e,!0);return i&&(r.$L=i),r},m.clone=function(){return S.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},y}(),E=C.prototype;return _.prototype=E,[["$ms",r],["$s",i],["$m",n],["$H",a],["$W",s],["$M",l],["$y",h],["$D",u]].forEach((function(t){E[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),_.extend=function(t,e){return t.$i||(t(e,C,_),t.$i=!0),_},_.locale=w,_.isDayjs=T,_.unix=function(t){return _(1e3*t)},_.en=k[b],_.Ls=k,_.p={},_},"object"==typeof t&&typeof e<"u"?e.exports=i():"function"==typeof define&&define.amd?define(i):(r=typeof globalThis<"u"?globalThis:r||self).dayjs=i()})),We=y((()=>{J=v(Ue(),1),tt={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},et={trace:g(((...t)=>{}),"trace"),debug:g(((...t)=>{}),"debug"),info:g(((...t)=>{}),"info"),warn:g(((...t)=>{}),"warn"),error:g(((...t)=>{}),"error"),fatal:g(((...t)=>{}),"fatal")},rt=g((function(t="fatal"){let e=tt.fatal;"string"==typeof t?t.toLowerCase()in tt&&(e=tt[t]):"number"==typeof t&&(e=t),et.trace=()=>{},et.debug=()=>{},et.info=()=>{},et.warn=()=>{},et.error=()=>{},et.fatal=()=>{},e<=tt.fatal&&(et.fatal=console.error?console.error.bind(console,it("FATAL"),"color: orange"):console.log.bind(console,"[35m",it("FATAL"))),e<=tt.error&&(et.error=console.error?console.error.bind(console,it("ERROR"),"color: orange"):console.log.bind(console,"[31m",it("ERROR"))),e<=tt.warn&&(et.warn=console.warn?console.warn.bind(console,it("WARN"),"color: orange"):console.log.bind(console,"[33m",it("WARN"))),e<=tt.info&&(et.info=console.info?console.info.bind(console,it("INFO"),"color: lightblue"):console.log.bind(console,"[34m",it("INFO"))),e<=tt.debug&&(et.debug=console.debug?console.debug.bind(console,it("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",it("DEBUG"))),e<=tt.trace&&(et.trace=console.debug?console.debug.bind(console,it("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",it("TRACE")))}),"setLogLevel"),it=g((t=>`%c${(0,J.default)().format("ss.SSS")} : ${t} : `),"format")})),qe=y((()=>{nt={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:g((t=>t>=255?255:t<0?0:t),"r"),g:g((t=>t>=255?255:t<0?0:t),"g"),b:g((t=>t>=255?255:t<0?0:t),"b"),h:g((t=>t%360),"h"),s:g((t=>t>=100?100:t<0?0:t),"s"),l:g((t=>t>=100?100:t<0?0:t),"l"),a:g((t=>t>=1?1:t<0?0:t),"a")},toLinear:g((t=>{let e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92}),"toLinear"),hue2rgb:g(((t,e,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?t+6*(e-t)*r:r<.5?e:r<.6666666666666666?t+(e-t)*(.6666666666666666-r)*6:t)),"hue2rgb"),hsl2rgb:g((({h:t,s:e,l:r},i)=>{if(!e)return 2.55*r;t/=360,e/=100;let n=(r/=100)<.5?r*(1+e):r+e-r*e,a=2*r-n;switch(i){case"r":return 255*nt.hue2rgb(a,n,t+.3333333333333333);case"g":return 255*nt.hue2rgb(a,n,t);case"b":return 255*nt.hue2rgb(a,n,t-.3333333333333333)}}),"hsl2rgb"),rgb2hsl:g((({r:t,g:e,b:r},i)=>{t/=255,e/=255,r/=255;let n=Math.max(t,e,r),a=Math.min(t,e,r),s=(n+a)/2;if("l"===i)return 100*s;if(n===a)return 0;let o=n-a;if("s"===i)return 100*(s>.5?o/(2-n-a):o/(n+a));switch(n){case t:return 60*((e-r)/o+(e<r?6:0));case e:return 60*((r-t)/o+2);case r:return 60*((t-e)/o+4);default:return-1}}),"rgb2hsl")},at=nt})),Ye=y((()=>{st={clamp:g(((t,e,r)=>e>r?Math.min(e,Math.max(r,t)):Math.min(r,Math.max(e,t))),"clamp"),round:g((t=>Math.round(1e10*t)/1e10),"round")},ot=st})),Ge=y((()=>{lt={dec2hex:g((t=>{let e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}),"dec2hex")},ct=lt})),He=y((()=>{qe(),Ye(),Ge(),ht={channel:at,lang:ot,unit:ct}})),Ve=y((()=>{He(),ut={};for(let t=0;t<=255;t++)ut[t]=ht.unit.dec2hex(t);dt={ALL:0,RGB:1,HSL:2}})),Xe=y((()=>{Ve(),pt=class{static{g(this,"Type")}constructor(){this.type=dt.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=dt.ALL}is(t){return this.type===t}},ft=pt})),Ke=y((()=>{He(),Xe(),Ve(),gt=class{static{g(this,"Channels")}constructor(t,e){this.color=e,this.changed=!1,this.data=t,this.type=new ft}set(t,e){return this.color=e,this.changed=!1,this.data=t,this.type.type=dt.ALL,this}_ensureHSL(){let t=this.data,{h:e,s:r,l:i}=t;void 0===e&&(t.h=ht.channel.rgb2hsl(t,"h")),void 0===r&&(t.s=ht.channel.rgb2hsl(t,"s")),void 0===i&&(t.l=ht.channel.rgb2hsl(t,"l"))}_ensureRGB(){let t=this.data,{r:e,g:r,b:i}=t;void 0===e&&(t.r=ht.channel.hsl2rgb(t,"r")),void 0===r&&(t.g=ht.channel.hsl2rgb(t,"g")),void 0===i&&(t.b=ht.channel.hsl2rgb(t,"b"))}get r(){let t=this.data,e=t.r;return this.type.is(dt.HSL)||void 0===e?(this._ensureHSL(),ht.channel.hsl2rgb(t,"r")):e}get g(){let t=this.data,e=t.g;return this.type.is(dt.HSL)||void 0===e?(this._ensureHSL(),ht.channel.hsl2rgb(t,"g")):e}get b(){let t=this.data,e=t.b;return this.type.is(dt.HSL)||void 0===e?(this._ensureHSL(),ht.channel.hsl2rgb(t,"b")):e}get h(){let t=this.data,e=t.h;return this.type.is(dt.RGB)||void 0===e?(this._ensureRGB(),ht.channel.rgb2hsl(t,"h")):e}get s(){let t=this.data,e=t.s;return this.type.is(dt.RGB)||void 0===e?(this._ensureRGB(),ht.channel.rgb2hsl(t,"s")):e}get l(){let t=this.data,e=t.l;return this.type.is(dt.RGB)||void 0===e?(this._ensureRGB(),ht.channel.rgb2hsl(t,"l")):e}get a(){return this.data.a}set r(t){this.type.set(dt.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(dt.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(dt.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(dt.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(dt.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(dt.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}},yt=gt})),Qe=y((()=>{Ke(),mt=new yt({r:0,g:0,b:0,a:0},"transparent"),xt=mt})),Ze=y((()=>{Qe(),Ve(),bt={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:g((t=>{if(35!==t.charCodeAt(0))return;let e=t.match(bt.re);if(!e)return;let r=e[1],i=parseInt(r,16),n=r.length,a=n%4==0,s=n>4,o=s?1:17,l=s?8:4,c=a?0:-1,h=s?255:15;return xt.set({r:(i>>l*(c+3)&h)*o,g:(i>>l*(c+2)&h)*o,b:(i>>l*(c+1)&h)*o,a:a?(i&h)*o/255:1},t)}),"parse"),stringify:g((t=>{let{r:e,g:r,b:i,a:n}=t;return n<1?`#${ut[Math.round(e)]}${ut[Math.round(r)]}${ut[Math.round(i)]}${ut[Math.round(255*n)]}`:`#${ut[Math.round(e)]}${ut[Math.round(r)]}${ut[Math.round(i)]}`}),"stringify")},kt=bt})),Je=y((()=>{He(),Qe(),vt={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:g((t=>{let e=t.match(vt.hueRe);if(e){let[,t,r]=e;switch(r){case"grad":return ht.channel.clamp.h(.9*parseFloat(t));case"rad":return ht.channel.clamp.h(180*parseFloat(t)/Math.PI);case"turn":return ht.channel.clamp.h(360*parseFloat(t))}}return ht.channel.clamp.h(parseFloat(t))}),"_hue2deg"),parse:g((t=>{let e=t.charCodeAt(0);if(104!==e&&72!==e)return;let r=t.match(vt.re);if(!r)return;let[,i,n,a,s,o]=r;return xt.set({h:vt._hue2deg(i),s:ht.channel.clamp.s(parseFloat(n)),l:ht.channel.clamp.l(parseFloat(a)),a:s?ht.channel.clamp.a(o?parseFloat(s)/100:parseFloat(s)):1},t)}),"parse"),stringify:g((t=>{let{h:e,s:r,l:i,a:n}=t;return n<1?`hsla(${ht.lang.round(e)}, ${ht.lang.round(r)}%, ${ht.lang.round(i)}%, ${n})`:`hsl(${ht.lang.round(e)}, ${ht.lang.round(r)}%, ${ht.lang.round(i)}%)`}),"stringify")},Tt=vt})),tr=y((()=>{Ze(),wt={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:g((t=>{t=t.toLowerCase();let e=wt.colors[t];if(e)return kt.parse(e)}),"parse"),stringify:g((t=>{let e=kt.stringify(t);for(let t in wt.colors)if(wt.colors[t]===e)return t}),"stringify")},_t=wt})),er=y((()=>{He(),Qe(),St={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:g((t=>{let e=t.charCodeAt(0);if(114!==e&&82!==e)return;let r=t.match(St.re);if(!r)return;let[,i,n,a,s,o,l,c,h]=r;return xt.set({r:ht.channel.clamp.r(n?2.55*parseFloat(i):parseFloat(i)),g:ht.channel.clamp.g(s?2.55*parseFloat(a):parseFloat(a)),b:ht.channel.clamp.b(l?2.55*parseFloat(o):parseFloat(o)),a:c?ht.channel.clamp.a(h?parseFloat(c)/100:parseFloat(c)):1},t)}),"parse"),stringify:g((t=>{let{r:e,g:r,b:i,a:n}=t;return n<1?`rgba(${ht.lang.round(e)}, ${ht.lang.round(r)}, ${ht.lang.round(i)}, ${ht.lang.round(n)})`:`rgb(${ht.lang.round(e)}, ${ht.lang.round(r)}, ${ht.lang.round(i)})`}),"stringify")},Ct=St})),rr=y((()=>{Ze(),Je(),tr(),er(),Ve(),Et={format:{keyword:_t,hex:kt,rgb:Ct,rgba:Ct,hsl:Tt,hsla:Tt},parse:g((t=>{if("string"!=typeof t)return t;let e=kt.parse(t)||Ct.parse(t)||Tt.parse(t)||_t.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)}),"parse"),stringify:g((t=>!t.changed&&t.color?t.color:t.type.is(dt.HSL)||void 0===t.data.r?Tt.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?Ct.stringify(t):kt.stringify(t)),"stringify")},At=Et})),ir=y((()=>{He(),rr(),$t=g(((t,e)=>{let r=At.parse(t);for(let t in e)r[t]=ht.channel.clamp[t](e[t]);return At.stringify(r)}),"change"),Lt=$t})),nr=y((()=>{He(),Qe(),rr(),ir(),Rt=g(((t,e,r=0,i=1)=>{if("number"!=typeof t)return Lt(t,{a:e});let n=xt.set({r:ht.channel.clamp.r(t),g:ht.channel.clamp.g(e),b:ht.channel.clamp.b(r),a:ht.channel.clamp.a(i)});return At.stringify(n)}),"rgba"),It=Rt})),ar=y((()=>{He(),rr(),Nt=g(((t,e)=>ht.lang.round(At.parse(t)[e])),"channel"),Dt=Nt})),sr=y((()=>{He(),rr(),Mt=g((t=>{let{r:e,g:r,b:i}=At.parse(t),n=.2126*ht.channel.toLinear(e)+.7152*ht.channel.toLinear(r)+.0722*ht.channel.toLinear(i);return ht.lang.round(n)}),"luminance"),Ot=Mt})),or=y((()=>{sr(),Pt=g((t=>Ot(t)>=.5),"isLight"),Bt=Pt})),lr=y((()=>{or(),Ft=g((t=>!Bt(t)),"isDark"),zt=Ft})),cr=y((()=>{He(),rr(),jt=g(((t,e,r)=>{let i=At.parse(t),n=i[e],a=ht.channel.clamp[e](n+r);return n!==a&&(i[e]=a),At.stringify(i)}),"adjustChannel"),Ut=jt})),hr=y((()=>{cr(),Wt=g(((t,e)=>Ut(t,"l",e)),"lighten"),qt=Wt})),ur=y((()=>{cr(),Yt=g(((t,e)=>Ut(t,"l",-e)),"darken"),Gt=Yt})),dr=y((()=>{rr(),ir(),Ht=g(((t,e)=>{let r=At.parse(t),i={};for(let t in e)e[t]&&(i[t]=r[t]+e[t]);return Lt(t,i)}),"adjust"),Vt=Ht})),pr=y((()=>{rr(),nr(),Xt=g(((t,e,r=50)=>{let{r:i,g:n,b:a,a:s}=At.parse(t),{r:o,g:l,b:c,a:h}=At.parse(e),u=r/100,d=2*u-1,p=s-h,f=((d*p==-1?d:(d+p)/(1+d*p))+1)/2,g=1-f;return It(i*f+o*g,n*f+l*g,a*f+c*g,s*u+h*(1-u))}),"mix"),Kt=Xt})),fr=y((()=>{rr(),pr(),Qt=g(((t,e=100)=>{let r=At.parse(t);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,Kt(r,t,e)}),"invert"),Zt=Qt})),gr=y((()=>{nr(),ar(),lr(),hr(),ur(),dr(),fr()})),yr=y((()=>{gr()})),mr=y((()=>{Jt="#ffffff",te="#f2f2f2"})),xr=y((()=>{yr(),ee=g(((t,e)=>Vt(t,e?{s:-40,l:10}:{s:-40,l:-10})),"mkBorder")})),br=y((()=>{yr(),mr(),xr(),re=class{static{g(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||Vt(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||Vt(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||ee(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||ee(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||ee(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||ee(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||Zt(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||Zt(this.tertiaryColor),this.lineColor=this.lineColor||Zt(this.background),this.arrowheadColor=this.arrowheadColor||Zt(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Gt(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Gt(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||Zt(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||qt(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||Gt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Gt(this.mainBkg,10)):(this.rowOdd=this.rowOdd||qt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||qt(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Vt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Vt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Vt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Vt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Vt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Vt(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||Vt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Vt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Vt(this.primaryColor,{h:330}),this.darkMode)for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Gt(this["cScale"+t],75);else for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Gt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||Zt(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||qt(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||Gt(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;let t=this.darkMode?-4:-1;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||Vt(this.mainBkg,{h:180,s:-15,l:t*(5+3*e)}),this["surfacePeer"+e]=this["surfacePeer"+e]||Vt(this.mainBkg,{h:180,s:-15,l:t*(8+3*e)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||Vt(this.primaryColor,{h:64}),this.fillType3=this.fillType3||Vt(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||Vt(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||Vt(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||Vt(this.primaryColor,{h:128}),this.fillType7=this.fillType7||Vt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Vt(this.primaryColor,{l:-10}),this.pie5=this.pie5||Vt(this.secondaryColor,{l:-10}),this.pie6=this.pie6||Vt(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||Vt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Vt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Vt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Vt(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||Vt(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||Vt(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Vt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Vt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Vt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Vt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Vt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Vt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zt(this.quadrant1Fill)?qt(this.quadrant1Fill):Gt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Gt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Vt(this.primaryColor,{h:-30}),this.git4=this.git4||Vt(this.primaryColor,{h:-60}),this.git5=this.git5||Vt(this.primaryColor,{h:-90}),this.git6=this.git6||Vt(this.primaryColor,{h:60}),this.git7=this.git7||Vt(this.primaryColor,{h:120}),this.darkMode?(this.git0=qt(this.git0,25),this.git1=qt(this.git1,25),this.git2=qt(this.git2,25),this.git3=qt(this.git3,25),this.git4=qt(this.git4,25),this.git5=qt(this.git5,25),this.git6=qt(this.git6,25),this.git7=qt(this.git7,25)):(this.git0=Gt(this.git0,25),this.git1=Gt(this.git1,25),this.git2=Gt(this.git2,25),this.git3=Gt(this.git3,25),this.git4=Gt(this.git4,25),this.git5=Gt(this.git5,25),this.git6=Gt(this.git6,25),this.git7=Gt(this.git7,25)),this.gitInv0=this.gitInv0||Zt(this.git0),this.gitInv1=this.gitInv1||Zt(this.git1),this.gitInv2=this.gitInv2||Zt(this.git2),this.gitInv3=this.gitInv3||Zt(this.git3),this.gitInv4=this.gitInv4||Zt(this.git4),this.gitInv5=this.gitInv5||Zt(this.git5),this.gitInv6=this.gitInv6||Zt(this.git6),this.gitInv7=this.gitInv7||Zt(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Jt,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||te}calculate(t){if("object"!=typeof t)return void this.updateColors();let e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}},ie=g((t=>{let e=new re;return e.calculate(t),e}),"getThemeVariables")})),kr=y((()=>{yr(),xr(),ne=class{static{g(this,"Theme")}constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=qt(this.primaryColor,16),this.tertiaryColor=Vt(this.primaryColor,{h:-160}),this.primaryBorderColor=Zt(this.background),this.secondaryBorderColor=ee(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ee(this.tertiaryColor,this.darkMode),this.primaryTextColor=Zt(this.primaryColor),this.secondaryTextColor=Zt(this.secondaryColor),this.tertiaryTextColor=Zt(this.tertiaryColor),this.lineColor=Zt(this.background),this.textColor=Zt(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=qt(Zt("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=It(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Gt("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Gt(this.sectionBkgColor,10),this.taskBorderColor=It(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=It(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||qt(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||Gt(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=qt(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=qt(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=qt(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Vt(this.primaryColor,{h:64}),this.fillType3=Vt(this.secondaryColor,{h:64}),this.fillType4=Vt(this.primaryColor,{h:-64}),this.fillType5=Vt(this.secondaryColor,{h:-64}),this.fillType6=Vt(this.primaryColor,{h:128}),this.fillType7=Vt(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Vt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Vt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Vt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Vt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Vt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Vt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Vt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Vt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Vt(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||Zt(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||qt(this["cScale"+t],10);for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||Vt(this.mainBkg,{h:30,s:-30,l:-(4*t-10)}),this["surfacePeer"+t]=this["surfacePeer"+t]||Vt(this.mainBkg,{h:30,s:-30,l:-(4*t-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Vt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Vt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Vt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Vt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Vt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Vt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zt(this.quadrant1Fill)?qt(this.quadrant1Fill):Gt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Gt(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=qt(this.secondaryColor,20),this.git1=qt(this.pie2||this.secondaryColor,20),this.git2=qt(this.pie3||this.tertiaryColor,20),this.git3=qt(this.pie4||Vt(this.primaryColor,{h:-30}),20),this.git4=qt(this.pie5||Vt(this.primaryColor,{h:-60}),20),this.git5=qt(this.pie6||Vt(this.primaryColor,{h:-90}),10),this.git6=qt(this.pie7||Vt(this.primaryColor,{h:60}),10),this.git7=qt(this.pie8||Vt(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||Zt(this.git0),this.gitInv1=this.gitInv1||Zt(this.git1),this.gitInv2=this.gitInv2||Zt(this.git2),this.gitInv3=this.gitInv3||Zt(this.git3),this.gitInv4=this.gitInv4||Zt(this.git4),this.gitInv5=this.gitInv5||Zt(this.git5),this.gitInv6=this.gitInv6||Zt(this.git6),this.gitInv7=this.gitInv7||Zt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Zt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Zt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||qt(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||qt(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if("object"!=typeof t)return void this.updateColors();let e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}},ae=g((t=>{let e=new ne;return e.calculate(t),e}),"getThemeVariables")})),vr=y((()=>{yr(),xr(),mr(),se=class{static{g(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=Vt(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=Vt(this.primaryColor,{h:-160}),this.primaryBorderColor=ee(this.primaryColor,this.darkMode),this.secondaryBorderColor=ee(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ee(this.tertiaryColor,this.darkMode),this.primaryTextColor=Zt(this.primaryColor),this.secondaryTextColor=Zt(this.secondaryColor),this.tertiaryTextColor=Zt(this.tertiaryColor),this.lineColor=Zt(this.background),this.textColor=Zt(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=It(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Vt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Vt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Vt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Vt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Vt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Vt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Vt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Vt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Vt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Gt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Gt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Gt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||Gt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||Vt(this["cScale"+t],{h:180});for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||Vt(this.mainBkg,{h:30,l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||Vt(this.mainBkg,{h:30,l:-(7+5*t)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||Zt(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||Zt(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=qt(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||qt(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||qt(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Vt(this.primaryColor,{h:64}),this.fillType3=Vt(this.secondaryColor,{h:64}),this.fillType4=Vt(this.primaryColor,{h:-64}),this.fillType5=Vt(this.secondaryColor,{h:-64}),this.fillType6=Vt(this.primaryColor,{h:128}),this.fillType7=Vt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||Vt(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||Vt(this.primaryColor,{l:-10}),this.pie5=this.pie5||Vt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Vt(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||Vt(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||Vt(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||Vt(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||Vt(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||Vt(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||Vt(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Vt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Vt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Vt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Vt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Vt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Vt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zt(this.quadrant1Fill)?qt(this.quadrant1Fill):Gt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Vt(this.primaryColor,{h:-30}),this.git4=this.git4||Vt(this.primaryColor,{h:-60}),this.git5=this.git5||Vt(this.primaryColor,{h:-90}),this.git6=this.git6||Vt(this.primaryColor,{h:60}),this.git7=this.git7||Vt(this.primaryColor,{h:120}),this.darkMode?(this.git0=qt(this.git0,25),this.git1=qt(this.git1,25),this.git2=qt(this.git2,25),this.git3=qt(this.git3,25),this.git4=qt(this.git4,25),this.git5=qt(this.git5,25),this.git6=qt(this.git6,25),this.git7=qt(this.git7,25)):(this.git0=Gt(this.git0,25),this.git1=Gt(this.git1,25),this.git2=Gt(this.git2,25),this.git3=Gt(this.git3,25),this.git4=Gt(this.git4,25),this.git5=Gt(this.git5,25),this.git6=Gt(this.git6,25),this.git7=Gt(this.git7,25)),this.gitInv0=this.gitInv0||Gt(Zt(this.git0),25),this.gitInv1=this.gitInv1||Zt(this.git1),this.gitInv2=this.gitInv2||Zt(this.git2),this.gitInv3=this.gitInv3||Zt(this.git3),this.gitInv4=this.gitInv4||Zt(this.git4),this.gitInv5=this.gitInv5||Zt(this.git5),this.gitInv6=this.gitInv6||Zt(this.git6),this.gitInv7=this.gitInv7||Zt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Zt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Zt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Jt,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||te}calculate(t){if(Object.keys(this).forEach((t=>{"calculated"===this[t]&&(this[t]=void 0)})),"object"!=typeof t)return void this.updateColors();let e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}},oe=g((t=>{let e=new se;return e.calculate(t),e}),"getThemeVariables")})),Tr=y((()=>{yr(),mr(),xr(),le=class{static{g(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=qt("#cde498",10),this.primaryBorderColor=ee(this.primaryColor,this.darkMode),this.secondaryBorderColor=ee(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ee(this.tertiaryColor,this.darkMode),this.primaryTextColor=Zt(this.primaryColor),this.secondaryTextColor=Zt(this.secondaryColor),this.tertiaryTextColor=Zt(this.primaryColor),this.lineColor=Zt(this.background),this.textColor=Zt(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=Gt(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||Vt(this.primaryColor,{h:30}),this.cScale4=this.cScale4||Vt(this.primaryColor,{h:60}),this.cScale5=this.cScale5||Vt(this.primaryColor,{h:90}),this.cScale6=this.cScale6||Vt(this.primaryColor,{h:120}),this.cScale7=this.cScale7||Vt(this.primaryColor,{h:150}),this.cScale8=this.cScale8||Vt(this.primaryColor,{h:210}),this.cScale9=this.cScale9||Vt(this.primaryColor,{h:270}),this.cScale10=this.cScale10||Vt(this.primaryColor,{h:300}),this.cScale11=this.cScale11||Vt(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Gt(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Gt(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=Gt(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||Gt(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||Vt(this["cScale"+t],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||Vt(this.mainBkg,{h:30,s:-30,l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||Vt(this.mainBkg,{h:30,s:-30,l:-(8+5*t)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||qt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||qt(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Vt(this.primaryColor,{h:64}),this.fillType3=Vt(this.secondaryColor,{h:64}),this.fillType4=Vt(this.primaryColor,{h:-64}),this.fillType5=Vt(this.secondaryColor,{h:-64}),this.fillType6=Vt(this.primaryColor,{h:128}),this.fillType7=Vt(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||Vt(this.primaryColor,{l:-30}),this.pie5=this.pie5||Vt(this.secondaryColor,{l:-30}),this.pie6=this.pie6||Vt(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||Vt(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||Vt(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||Vt(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||Vt(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||Vt(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||Vt(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Vt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Vt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Vt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Vt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Vt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Vt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zt(this.quadrant1Fill)?qt(this.quadrant1Fill):Gt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||Vt(this.primaryColor,{h:-30}),this.git4=this.git4||Vt(this.primaryColor,{h:-60}),this.git5=this.git5||Vt(this.primaryColor,{h:-90}),this.git6=this.git6||Vt(this.primaryColor,{h:60}),this.git7=this.git7||Vt(this.primaryColor,{h:120}),this.darkMode?(this.git0=qt(this.git0,25),this.git1=qt(this.git1,25),this.git2=qt(this.git2,25),this.git3=qt(this.git3,25),this.git4=qt(this.git4,25),this.git5=qt(this.git5,25),this.git6=qt(this.git6,25),this.git7=qt(this.git7,25)):(this.git0=Gt(this.git0,25),this.git1=Gt(this.git1,25),this.git2=Gt(this.git2,25),this.git3=Gt(this.git3,25),this.git4=Gt(this.git4,25),this.git5=Gt(this.git5,25),this.git6=Gt(this.git6,25),this.git7=Gt(this.git7,25)),this.gitInv0=this.gitInv0||Zt(this.git0),this.gitInv1=this.gitInv1||Zt(this.git1),this.gitInv2=this.gitInv2||Zt(this.git2),this.gitInv3=this.gitInv3||Zt(this.git3),this.gitInv4=this.gitInv4||Zt(this.git4),this.gitInv5=this.gitInv5||Zt(this.git5),this.gitInv6=this.gitInv6||Zt(this.git6),this.gitInv7=this.gitInv7||Zt(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Zt(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Zt(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Jt,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||te}calculate(t){if("object"!=typeof t)return void this.updateColors();let e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}},ce=g((t=>{let e=new le;return e.calculate(t),e}),"getThemeVariables")})),wr=y((()=>{yr(),xr(),mr(),he=class{static{g(this,"Theme")}constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=qt(this.contrast,55),this.background="#ffffff",this.tertiaryColor=Vt(this.primaryColor,{h:-160}),this.primaryBorderColor=ee(this.primaryColor,this.darkMode),this.secondaryBorderColor=ee(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=ee(this.tertiaryColor,this.darkMode),this.primaryTextColor=Zt(this.primaryColor),this.secondaryTextColor=Zt(this.secondaryColor),this.tertiaryTextColor=Zt(this.tertiaryColor),this.lineColor=Zt(this.background),this.textColor=Zt(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||qt(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=qt(this.contrast,55),this.border2=this.contrast,this.actorBorder=qt(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||Zt(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||qt(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||Gt(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||Vt(this.mainBkg,{l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||Vt(this.mainBkg,{l:-(8+5*t)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=qt(this.contrast,30),this.sectionBkgColor2=qt(this.contrast,30),this.taskBorderColor=Gt(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=qt(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Gt(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=Vt(this.primaryColor,{h:64}),this.fillType3=Vt(this.secondaryColor,{h:64}),this.fillType4=Vt(this.primaryColor,{h:-64}),this.fillType5=Vt(this.secondaryColor,{h:-64}),this.fillType6=Vt(this.primaryColor,{h:128}),this.fillType7=Vt(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||Vt(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||Vt(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||Vt(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||Vt(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||Vt(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||Vt(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||zt(this.quadrant1Fill)?qt(this.quadrant1Fill):Gt(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Gt(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||Vt(this.primaryColor,{h:-30}),this.git4=this.pie5||Vt(this.primaryColor,{h:-60}),this.git5=this.pie6||Vt(this.primaryColor,{h:-90}),this.git6=this.pie7||Vt(this.primaryColor,{h:60}),this.git7=this.pie8||Vt(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||Zt(this.git0),this.gitInv1=this.gitInv1||Zt(this.git1),this.gitInv2=this.gitInv2||Zt(this.git2),this.gitInv3=this.gitInv3||Zt(this.git3),this.gitInv4=this.gitInv4||Zt(this.git4),this.gitInv5=this.gitInv5||Zt(this.git5),this.gitInv6=this.gitInv6||Zt(this.git6),this.gitInv7=this.gitInv7||Zt(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Jt,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||te}calculate(t){if("object"!=typeof t)return void this.updateColors();let e=Object.keys(t);e.forEach((e=>{this[e]=t[e]})),this.updateColors(),e.forEach((e=>{this[e]=t[e]}))}},ue=g((t=>{let e=new he;return e.calculate(t),e}),"getThemeVariables")})),_r=y((()=>{br(),kr(),vr(),Tr(),wr(),de={base:{getThemeVariables:ie},dark:{getThemeVariables:ae},default:{getThemeVariables:oe},forest:{getThemeVariables:ce},neutral:{getThemeVariables:ue}}})),Sr=y((()=>{pe={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1}})),Cr=y((()=>{_r(),Sr(),fe={...pe,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:de.default.getThemeVariables(),sequence:{...pe.sequence,messageFont:g((function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}),"messageFont"),noteFont:g((function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}}),"noteFont"),actorFont:g((function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}),"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...pe.gantt,tickInterval:void 0,useWidth:void 0},c4:{...pe.c4,useWidth:void 0,personFont:g((function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}}),"personFont"),flowchart:{...pe.flowchart,inheritDir:!1},external_personFont:g((function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}}),"external_personFont"),systemFont:g((function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}}),"systemFont"),external_systemFont:g((function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}}),"external_systemFont"),system_dbFont:g((function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}}),"system_dbFont"),external_system_dbFont:g((function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}}),"external_system_dbFont"),system_queueFont:g((function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}}),"system_queueFont"),external_system_queueFont:g((function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}}),"external_system_queueFont"),containerFont:g((function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}}),"containerFont"),external_containerFont:g((function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}}),"external_containerFont"),container_dbFont:g((function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}}),"container_dbFont"),external_container_dbFont:g((function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}}),"external_container_dbFont"),container_queueFont:g((function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}}),"container_queueFont"),external_container_queueFont:g((function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}}),"external_container_queueFont"),componentFont:g((function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}}),"componentFont"),external_componentFont:g((function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}}),"external_componentFont"),component_dbFont:g((function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}}),"component_dbFont"),external_component_dbFont:g((function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}}),"external_component_dbFont"),component_queueFont:g((function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}}),"component_queueFont"),external_component_queueFont:g((function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}}),"external_component_queueFont"),boundaryFont:g((function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}}),"boundaryFont"),messageFont:g((function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}),"messageFont")},pie:{...pe.pie,useWidth:984},xyChart:{...pe.xyChart,useWidth:void 0},requirement:{...pe.requirement,useWidth:void 0},packet:{...pe.packet},radar:{...pe.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},ge=g(((t,e="")=>Object.keys(t).reduce(((r,i)=>Array.isArray(t[i])?r:"object"==typeof t[i]&&null!==t[i]?[...r,e+i,...ge(t[i],"")]:[...r,e+i]),[])),"keyify"),ye=new Set(ge(fe,"")),me=fe})),Er=y((()=>{Cr(),We(),xe=g((t=>{if(et.debug("sanitizeDirective called with",t),"object"==typeof t&&null!=t){if(Array.isArray(t))return void t.forEach((t=>xe(t)));for(let e of Object.keys(t)){if(et.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!ye.has(e)||null==t[e]){et.debug("sanitize deleting key: ",e),delete t[e];continue}if("object"==typeof t[e]){et.debug("sanitizing object",e),xe(t[e]);continue}let r=["themeCSS","fontFamily","altFontFamily"];for(let i of r)e.includes(i)&&(et.debug("sanitizing css option",e),t[e]=be(t[e]))}if(t.themeVariables)for(let e of Object.keys(t.themeVariables)){let r=t.themeVariables[e];r?.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}et.debug("After sanitization",t)}}),"sanitizeDirective"),be=g((t=>{let e=0,r=0;for(let i of t){if(e<r)return"{ /* ERROR: Unbalanced CSS */ }";"{"===i?e++:"}"===i&&r++}return e!==r?"{ /* ERROR: Unbalanced CSS */ }":t}),"sanitizeCss")})),Ar=y((()=>{je(),We(),_r(),Cr(),Er(),ke=Object.freeze(me),ve=Z({},ke),we=[],_e=Z({},ke),Se=g(((t,e)=>{let r=Z({},t),i={};for(let t of e)Ie(t),i=Z(i,t);if(r=Z(r,i),i.theme&&i.theme in de){let t=Z({},Te),e=Z(t.themeVariables||{},i.themeVariables);r.theme&&r.theme in de&&(r.themeVariables=de[r.theme].getThemeVariables(e))}return Be(_e=r),_e}),"updateCurrentConfig"),Ce=g((t=>(ve=Z({},ke),ve=Z(ve,t),t.theme&&de[t.theme]&&(ve.themeVariables=de[t.theme].getThemeVariables(t.themeVariables)),Se(ve,we),ve)),"setSiteConfig"),Ee=g((t=>{Te=Z({},t)}),"saveConfigFromInitialize"),Ae=g((t=>(ve=Z(ve,t),Se(ve,we),ve)),"updateSiteConfig"),$e=g((()=>Z({},ve)),"getSiteConfig"),Le=g((t=>(Be(t),Z(_e,t),Re())),"setConfig"),Re=g((()=>Z({},_e)),"getConfig"),Ie=g((t=>{t&&(["secure",...ve.secure??[]].forEach((e=>{Object.hasOwn(t,e)&&(et.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])})),Object.keys(t).forEach((e=>{e.startsWith("__")&&delete t[e]})),Object.keys(t).forEach((e=>{"string"==typeof t[e]&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],"object"==typeof t[e]&&Ie(t[e])})))}),"sanitize"),Ne=g((t=>{xe(t),t.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables={...t.themeVariables,fontFamily:t.fontFamily}),we.push(t),Se(ve,we)}),"addDirective"),De=g(((t=ve)=>{Se(t,we=[])}),"reset"),Me={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},Oe={},Pe=g((t=>{Oe[t]||(et.warn(Me[t]),Oe[t]=!0)}),"issueWarning"),Be=g((t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&Pe("LAZY_LOAD_DEPRECATED")}),"checkConfig")}));function $r(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return qr(t,e,i)}}function Lr(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return Yr(t,r)}}function Rr(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qr;Pr&&Pr(t,null);let i=e.length;for(;i--;){let n=e[i];if("string"==typeof n){let t=r(n);t!==n&&(Br(e)||(e[i]=t),n=t)}t[n]=!0}return t}function Ir(t){for(let e=0;e<t.length;e++)ii(t,e)||(t[e]=null);return t}function Nr(t){let e=Wr(null);for(let[r,i]of Or(t))ii(t,r)&&(Array.isArray(i)?e[r]=Ir(i):i&&"object"==typeof i&&i.constructor===Object?e[r]=Nr(i):e[r]=i);return e}function Dr(t,e){for(;null!==t;){let r=zr(t,e);if(r){if(r.get)return $r(r.get);if("function"==typeof r.value)return $r(r.value)}t=Fr(t)}function r(){return null}return g(r,"fallbackValue"),r}function Mr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$i(),e=g((t=>Mr(t)),"DOMPurify");if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==Ai.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t,i=r,n=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:o,Element:l,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:u,DOMParser:d,trustedTypes:p}=t,f=l.prototype,y=Dr(f,"cloneNode"),m=Dr(f,"remove"),x=Dr(f,"nextSibling"),b=Dr(f,"childNodes"),k=Dr(f,"parentNode");if("function"==typeof s){let t=r.createElement("template");t.content&&t.content.ownerDocument&&(r=t.content.ownerDocument)}let v,T="",{implementation:w,createNodeIterator:_,createDocumentFragment:S,getElementsByTagName:C}=r,{importNode:E}=i,A=Ri();e.isSupported="function"==typeof Or&&"function"==typeof k&&w&&void 0!==w.createHTMLDocument;let{MUSTACHE_EXPR:$,ERB_EXPR:L,TMPLIT_EXPR:R,DATA_ATTR:I,ARIA_ATTR:N,IS_SCRIPT_OR_DATA:D,ATTR_WHITESPACE:M,CUSTOM_ELEMENT:O}=Ei,{IS_ALLOWED_URI:P}=Ei,B=null,F=Rr({},[...si,...oi,...li,...hi,...di]),z=null,j=Rr({},[...pi,...fi,...gi,...yi]),U=Object.seal(Wr(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,q=null,Y=!0,G=!0,H=!1,V=!0,X=!1,K=!0,Q=!1,Z=!1,J=!1,tt=!1,et=!1,rt=!1,it=!0,nt=!1,at=!0,st=!1,ot={},lt=null,ct=Rr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ht=null,ut=Rr({},["audio","video","img","source","image","track"]),dt=null,pt=Rr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ft="http://www.w3.org/1998/Math/MathML",gt="http://www.w3.org/2000/svg",yt="http://www.w3.org/1999/xhtml",mt=yt,xt=!1,bt=null,kt=Rr({},[ft,gt,yt],Zr),vt=Rr({},["mi","mo","mn","ms","mtext"]),Tt=Rr({},["annotation-xml"]),wt=Rr({},["title","style","font","a","script"]),_t=null,St=["application/xhtml+xml","text/html"],Ct=null,Et=null,At=r.createElement("form"),$t=g((function(t){return t instanceof RegExp||t instanceof Function}),"isRegexOrFunction"),Lt=g((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Et||Et!==t){if((!t||"object"!=typeof t)&&(t={}),t=Nr(t),_t=-1===St.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,Ct="application/xhtml+xml"===_t?Zr:Qr,B=ii(t,"ALLOWED_TAGS")?Rr({},t.ALLOWED_TAGS,Ct):F,z=ii(t,"ALLOWED_ATTR")?Rr({},t.ALLOWED_ATTR,Ct):j,bt=ii(t,"ALLOWED_NAMESPACES")?Rr({},t.ALLOWED_NAMESPACES,Zr):kt,dt=ii(t,"ADD_URI_SAFE_ATTR")?Rr(Nr(pt),t.ADD_URI_SAFE_ATTR,Ct):pt,ht=ii(t,"ADD_DATA_URI_TAGS")?Rr(Nr(ut),t.ADD_DATA_URI_TAGS,Ct):ut,lt=ii(t,"FORBID_CONTENTS")?Rr({},t.FORBID_CONTENTS,Ct):ct,W=ii(t,"FORBID_TAGS")?Rr({},t.FORBID_TAGS,Ct):Nr({}),q=ii(t,"FORBID_ATTR")?Rr({},t.FORBID_ATTR,Ct):Nr({}),ot=!!ii(t,"USE_PROFILES")&&t.USE_PROFILES,Y=!1!==t.ALLOW_ARIA_ATTR,G=!1!==t.ALLOW_DATA_ATTR,H=t.ALLOW_UNKNOWN_PROTOCOLS||!1,V=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,X=t.SAFE_FOR_TEMPLATES||!1,K=!1!==t.SAFE_FOR_XML,Q=t.WHOLE_DOCUMENT||!1,tt=t.RETURN_DOM||!1,et=t.RETURN_DOM_FRAGMENT||!1,rt=t.RETURN_TRUSTED_TYPE||!1,J=t.FORCE_BODY||!1,it=!1!==t.SANITIZE_DOM,nt=t.SANITIZE_NAMED_PROPS||!1,at=!1!==t.KEEP_CONTENT,st=t.IN_PLACE||!1,P=t.ALLOWED_URI_REGEXP||Ti,mt=t.NAMESPACE||yt,vt=t.MATHML_TEXT_INTEGRATION_POINTS||vt,Tt=t.HTML_INTEGRATION_POINTS||Tt,U=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&$t(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&$t(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(U.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(G=!1),et&&(tt=!0),ot&&(B=Rr({},di),z=[],!0===ot.html&&(Rr(B,si),Rr(z,pi)),!0===ot.svg&&(Rr(B,oi),Rr(z,fi),Rr(z,yi)),!0===ot.svgFilters&&(Rr(B,li),Rr(z,fi),Rr(z,yi)),!0===ot.mathMl&&(Rr(B,hi),Rr(z,gi),Rr(z,yi))),t.ADD_TAGS&&(B===F&&(B=Nr(B)),Rr(B,t.ADD_TAGS,Ct)),t.ADD_ATTR&&(z===j&&(z=Nr(z)),Rr(z,t.ADD_ATTR,Ct)),t.ADD_URI_SAFE_ATTR&&Rr(dt,t.ADD_URI_SAFE_ATTR,Ct),t.FORBID_CONTENTS&&(lt===ct&&(lt=Nr(lt)),Rr(lt,t.FORBID_CONTENTS,Ct)),at&&(B["#text"]=!0),Q&&Rr(B,["html","head","body"]),B.table&&(Rr(B,["tbody"]),delete W.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw ai('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw ai('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=t.TRUSTED_TYPES_POLICY,T=v.createHTML("")}else void 0===v&&(v=Li(p,n)),null!==v&&"string"==typeof T&&(T=v.createHTML(""));jr&&jr(t),Et=t}}),"_parseConfig"),Rt=Rr({},[...oi,...li,...ci]),It=Rr({},[...hi,...ui]),Nt=g((function(t){let e=k(t);(!e||!e.tagName)&&(e={namespaceURI:mt,tagName:"template"});let r=Qr(t.tagName),i=Qr(e.tagName);return!!bt[t.namespaceURI]&&(t.namespaceURI===gt?e.namespaceURI===yt?"svg"===r:e.namespaceURI===ft?"svg"===r&&("annotation-xml"===i||vt[i]):!!Rt[r]:t.namespaceURI===ft?e.namespaceURI===yt?"math"===r:e.namespaceURI===gt?"math"===r&&Tt[i]:!!It[r]:t.namespaceURI===yt?!(e.namespaceURI===gt&&!Tt[i]||e.namespaceURI===ft&&!vt[i])&&(!It[r]&&(wt[r]||!Rt[r])):!("application/xhtml+xml"!==_t||!bt[t.namespaceURI]))}),"_checkValidNamespace"),Dt=g((function(t){Xr(e.removed,{element:t});try{k(t).removeChild(t)}catch{m(t)}}),"_forceRemove"),Mt=g((function(t,r){try{Xr(e.removed,{attribute:r.getAttributeNode(t),from:r})}catch{Xr(e.removed,{attribute:null,from:r})}if(r.removeAttribute(t),"is"===t)if(tt||et)try{Dt(r)}catch{}else try{r.setAttribute(t,"")}catch{}}),"_removeAttribute"),Ot=g((function(t){let e=null,i=null;if(J)t="<remove></remove>"+t;else{let e=Jr(t,/^[\r\n\t ]+/);i=e&&e[0]}"application/xhtml+xml"===_t&&mt===yt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");let n=v?v.createHTML(t):t;if(mt===yt)try{e=(new d).parseFromString(n,_t)}catch{}if(!e||!e.documentElement){e=w.createDocument(mt,"template",null);try{e.documentElement.innerHTML=xt?T:n}catch{}}let a=e.body||e.documentElement;return t&&i&&a.insertBefore(r.createTextNode(i),a.childNodes[0]||null),mt===yt?C.call(e,Q?"html":"body")[0]:Q?e.documentElement:a}),"_initDocument"),Pt=g((function(t){return _.call(t.ownerDocument||t,t,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)}),"_createNodeIterator"),Bt=g((function(t){return t instanceof u&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof h)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)}),"_isClobbered"),Ft=g((function(t){return"function"==typeof o&&t instanceof o}),"_isNode");function zt(t,r,i){Gr(t,(t=>{t.call(e,r,i,Et)}))}g(zt,"_executeHooks");let jt=g((function(t){let r=null;if(zt(A.beforeSanitizeElements,t,null),Bt(t))return Dt(t),!0;let i=Ct(t.nodeName);if(zt(A.uponSanitizeElement,t,{tagName:i,allowedTags:B}),K&&t.hasChildNodes()&&!Ft(t.firstElementChild)&&ni(/<[/\w!]/g,t.innerHTML)&&ni(/<[/\w!]/g,t.textContent)||t.nodeType===Ai.progressingInstruction||K&&t.nodeType===Ai.comment&&ni(/<[/\w]/g,t.data))return Dt(t),!0;if(!B[i]||W[i]){if(!W[i]&&Wt(i)&&(U.tagNameCheck instanceof RegExp&&ni(U.tagNameCheck,i)||U.tagNameCheck instanceof Function&&U.tagNameCheck(i)))return!1;if(at&&!lt[i]){let e=k(t)||t.parentNode,r=b(t)||t.childNodes;if(r&&e){for(let i=r.length-1;i>=0;--i){let n=y(r[i],!0);n.__removalCount=(t.__removalCount||0)+1,e.insertBefore(n,x(t))}}}return Dt(t),!0}return t instanceof l&&!Nt(t)||("noscript"===i||"noembed"===i||"noframes"===i)&&ni(/<\/no(script|embed|frames)/i,t.innerHTML)?(Dt(t),!0):(X&&t.nodeType===Ai.text&&(r=t.textContent,Gr([$,L,R],(t=>{r=ti(r,t," ")})),t.textContent!==r&&(Xr(e.removed,{element:t.cloneNode()}),t.textContent=r)),zt(A.afterSanitizeElements,t,null),!1)}),"_sanitizeElements"),Ut=g((function(t,e,i){if(it&&("id"===e||"name"===e)&&(i in r||i in At))return!1;if((!G||q[e]||!ni(I,e))&&(!Y||!ni(N,e)))if(!z[e]||q[e]){if(!(Wt(t)&&(U.tagNameCheck instanceof RegExp&&ni(U.tagNameCheck,t)||U.tagNameCheck instanceof Function&&U.tagNameCheck(t))&&(U.attributeNameCheck instanceof RegExp&&ni(U.attributeNameCheck,e)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(e))||"is"===e&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&ni(U.tagNameCheck,i)||U.tagNameCheck instanceof Function&&U.tagNameCheck(i))))return!1}else if(!dt[e]&&!ni(P,ti(i,M,""))&&("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==ei(i,"data:")||!ht[t])&&(!H||ni(D,ti(i,M,"")))&&i)return!1;return!0}),"_isValidAttribute"),Wt=g((function(t){return"annotation-xml"!==t&&Jr(t,O)}),"_isBasicCustomElement"),qt=g((function(t){zt(A.beforeSanitizeAttributes,t,null);let{attributes:r}=t;if(!r||Bt(t))return;let i={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z,forceKeepAttr:void 0},n=r.length;for(;n--;){let a=r[n],{name:s,namespaceURI:o,value:l}=a,c=Ct(s),h=l,u="value"===s?h:ri(h);if(i.attrName=c,i.attrValue=u,i.keepAttr=!0,i.forceKeepAttr=void 0,zt(A.uponSanitizeAttribute,t,i),u=i.attrValue,nt&&("id"===c||"name"===c)&&(Mt(s,t),u="user-content-"+u),K&&ni(/((--!?|])>)|<\/(style|title)/i,u)){Mt(s,t);continue}if(i.forceKeepAttr)continue;if(!i.keepAttr){Mt(s,t);continue}if(!V&&ni(/\/>/i,u)){Mt(s,t);continue}X&&Gr([$,L,R],(t=>{u=ti(u,t," ")}));let d=Ct(t.nodeName);if(Ut(d,c,u)){if(v&&"object"==typeof p&&"function"==typeof p.getAttributeType&&!o)switch(p.getAttributeType(d,c)){case"TrustedHTML":u=v.createHTML(u);break;case"TrustedScriptURL":u=v.createScriptURL(u)}if(u!==h)try{o?t.setAttributeNS(o,s,u):t.setAttribute(s,u),Bt(t)?Dt(t):Vr(e.removed)}catch{Mt(s,t)}}else Mt(s,t)}zt(A.afterSanitizeAttributes,t,null)}),"_sanitizeAttributes"),Yt=g((function t(e){let r=null,i=Pt(e);for(zt(A.beforeSanitizeShadowDOM,e,null);r=i.nextNode();)zt(A.uponSanitizeShadowNode,r,null),jt(r),qt(r),r.content instanceof a&&t(r.content);zt(A.afterSanitizeShadowDOM,e,null)}),"_sanitizeShadowDOM");return e.sanitize=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,s=null,l=null,c=null;if(xt=!t,xt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Ft(t)){if("function"!=typeof t.toString)throw ai("toString is not a function");if("string"!=typeof(t=t.toString()))throw ai("dirty is not a string, aborting")}if(!e.isSupported)return t;if(Z||Lt(r),e.removed=[],"string"==typeof t&&(st=!1),st){if(t.nodeName){let e=Ct(t.nodeName);if(!B[e]||W[e])throw ai("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof o)n=Ot("\x3c!----\x3e"),s=n.ownerDocument.importNode(t,!0),s.nodeType===Ai.element&&"BODY"===s.nodeName||"HTML"===s.nodeName?n=s:n.appendChild(s);else{if(!tt&&!X&&!Q&&-1===t.indexOf("<"))return v&&rt?v.createHTML(t):t;if(n=Ot(t),!n)return tt?null:rt?T:""}n&&J&&Dt(n.firstChild);let h=Pt(st?t:n);for(;l=h.nextNode();)jt(l),qt(l),l.content instanceof a&&Yt(l.content);if(st)return t;if(tt){if(et)for(c=S.call(n.ownerDocument);n.firstChild;)c.appendChild(n.firstChild);else c=n;return(z.shadowroot||z.shadowrootmode)&&(c=E.call(i,c,!0)),c}let u=Q?n.outerHTML:n.innerHTML;return Q&&B["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&ni(Si,n.ownerDocument.doctype.name)&&(u="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+u),X&&Gr([$,L,R],(t=>{u=ti(u,t," ")})),v&&rt?v.createHTML(u):u},e.setConfig=function(){Lt(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Z=!0},e.clearConfig=function(){Et=null,Z=!1},e.isValidAttribute=function(t,e,r){Et||Lt({});let i=Ct(t),n=Ct(e);return Ut(i,n,r)},e.addHook=function(t,e){"function"==typeof e&&Xr(A[t],e)},e.removeHook=function(t,e){if(void 0!==e){let r=Hr(A[t],e);return-1===r?void 0:Kr(A[t],r,1)[0]}return Vr(A[t])},e.removeHooks=function(t){A[t]=[]},e.removeAllHooks=function(){A=Ri()},e}var Or,Pr,Br,Fr,zr,jr,Ur,Wr,qr,Yr,Gr,Hr,Vr,Xr,Kr,Qr,Zr,Jr,ti,ei,ri,ii,ni,ai,si,oi,li,ci,hi,ui,di,pi,fi,gi,yi,mi,xi,bi,ki,vi,Ti,wi,_i,Si,Ci,Ei,Ai,$i,Li,Ri,Ii,Ni=y((()=>{({entries:Or,setPrototypeOf:Pr,isFrozen:Br,getPrototypeOf:Fr,getOwnPropertyDescriptor:zr}=Object),({freeze:jr,seal:Ur,create:Wr}=Object),({apply:qr,construct:Yr}=typeof Reflect<"u"&&Reflect),jr||(jr=g((function(t){return t}),"freeze")),Ur||(Ur=g((function(t){return t}),"seal")),qr||(qr=g((function(t,e,r){return t.apply(e,r)}),"apply")),Yr||(Yr=g((function(t,e){return new t(...e)}),"construct")),Gr=$r(Array.prototype.forEach),Hr=$r(Array.prototype.lastIndexOf),Vr=$r(Array.prototype.pop),Xr=$r(Array.prototype.push),Kr=$r(Array.prototype.splice),Qr=$r(String.prototype.toLowerCase),Zr=$r(String.prototype.toString),Jr=$r(String.prototype.match),ti=$r(String.prototype.replace),ei=$r(String.prototype.indexOf),ri=$r(String.prototype.trim),ii=$r(Object.prototype.hasOwnProperty),ni=$r(RegExp.prototype.test),ai=Lr(TypeError),g($r,"unapply"),g(Lr,"unconstruct"),g(Rr,"addToSet"),g(Ir,"cleanArray"),g(Nr,"clone"),g(Dr,"lookupGetter"),si=jr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),oi=jr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),li=jr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ci=jr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hi=jr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ui=jr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),di=jr(["#text"]),pi=jr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),fi=jr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),gi=jr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),yi=jr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mi=Ur(/\{\{[\w\W]*|[\w\W]*\}\}/gm),xi=Ur(/<%[\w\W]*|[\w\W]*%>/gm),bi=Ur(/\$\{[\w\W]*/gm),ki=Ur(/^data-[\-\w.\u00B7-\uFFFF]+$/),vi=Ur(/^aria-[\-\w]+$/),Ti=Ur(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),wi=Ur(/^(?:\w+script|data):/i),_i=Ur(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Si=Ur(/^html$/i),Ci=Ur(/^[a-z][.\w]*(-[.\w]+)+$/i),Ei=Object.freeze({__proto__:null,ARIA_ATTR:vi,ATTR_WHITESPACE:_i,CUSTOM_ELEMENT:Ci,DATA_ATTR:ki,DOCTYPE_NAME:Si,ERB_EXPR:xi,IS_ALLOWED_URI:Ti,IS_SCRIPT_OR_DATA:wi,MUSTACHE_EXPR:mi,TMPLIT_EXPR:bi}),Ai={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},$i=g((function(){return typeof window>"u"?null:window}),"getGlobal"),Li=g((function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let r=null,i="data-tt-policy-suffix";e&&e.hasAttribute(i)&&(r=e.getAttribute(i));let n="dompurify"+(r?"#"+r:"");try{return t.createPolicy(n,{createHTML:t=>t,createScriptURL:t=>t})}catch{return console.warn("TrustedTypes policy "+n+" could not be created."),null}}),"_createTrustedTypesPolicy"),Ri=g((function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}}),"_createHooksMap"),g(Mr,"createDOMPurify"),Ii=Mr()}));function Di(){let t="data-temp-href-target";Ii.addHook("beforeSanitizeAttributes",(e=>{"A"===e.tagName&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")??"")})),Ii.addHook("afterSanitizeAttributes",(e=>{"A"===e.tagName&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)??""),e.removeAttribute(t),"_blank"===e.getAttribute("target")&&e.setAttribute("rel","noopener"))}))}var Mi,Oi,Pi,Bi,Fi,zi,ji,Ui,Wi,qi,Yi,Gi,Hi,Vi,Xi,Ki,Qi,Zi,Ji,tn,en,rn,nn,an,sn,on,ln,cn,hn,un,dn,pn,fn,gn=y((()=>{Ni(),Mi=/<br\s*\/?>/gi,Oi=g((t=>t?Yi(t).replace(/\\n/g,"#br#").split("#br#"):[""]),"getRows"),Pi=(()=>{let t=!1;return()=>{t||(Di(),t=!0)}})(),g(Di,"setupDompurifyHooks"),Bi=g((t=>(Pi(),Ii.sanitize(t))),"removeScript"),Fi=g(((t,e)=>{if(!1!==e.flowchart?.htmlLabels){let r=e.securityLevel;"antiscript"===r||"strict"===r?t=Bi(t):"loose"!==r&&(t=(t=(t=Yi(t)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),t=qi(t))}return t}),"sanitizeMore"),zi=g(((t,e)=>t&&(t=e.dompurifyConfig?Ii.sanitize(Fi(t,e),e.dompurifyConfig).toString():Ii.sanitize(Fi(t,e),{FORBID_TAGS:["style"]}).toString())),"sanitizeText"),ji=g(((t,e)=>"string"==typeof t?zi(t,e):t.flat().map((t=>zi(t,e)))),"sanitizeTextOrArray"),Ui=g((t=>Mi.test(t)),"hasBreaks"),Wi=g((t=>t.split(Mi)),"splitBreaks"),qi=g((t=>t.replace(/#br#/g,"<br/>")),"placeholderToBreak"),Yi=g((t=>t.replace(Mi,"#br#")),"breakToPlaceholder"),Gi=g((t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=CSS.escape(e)),e}),"getUrl"),Hi=g((t=>!(!1===t||["false","null","0"].includes(String(t).trim().toLowerCase()))),"evaluate"),Vi=g((function(...t){let e=t.filter((t=>!isNaN(t)));return Math.max(...e)}),"getMax"),Xi=g((function(...t){let e=t.filter((t=>!isNaN(t)));return Math.min(...e)}),"getMin"),Ki=g((function(t){let e=t.split(/(,)/),r=[];for(let t=0;t<e.length;t++){let i=e[t];if(","===i&&t>0&&t+1<e.length){let n=e[t-1],a=e[t+1];Zi(n,a)&&(i=n+","+a,t++,r.pop())}r.push(Ji(i))}return r.join("")}),"parseGenericTypes"),Qi=g(((t,e)=>Math.max(0,t.split(e).length-1)),"countOccurrence"),Zi=g(((t,e)=>{let r=Qi(t,"~"),i=Qi(e,"~");return 1===r&&1===i}),"shouldCombineSets"),Ji=g((t=>{let e=Qi(t,"~"),r=!1;if(e<=1)return t;e%2!=0&&t.startsWith("~")&&(t=t.substring(1),r=!0);let i=[...t],n=i.indexOf("~"),a=i.lastIndexOf("~");for(;-1!==n&&-1!==a&&n!==a;)i[n]="<",i[a]=">",n=i.indexOf("~"),a=i.lastIndexOf("~");return r&&i.unshift("~"),i.join("")}),"processSet"),tn=g((()=>void 0!==window.MathMLElement),"isMathMLSupported"),en=/\$\$(.*)\$\$/g,rn=g((t=>(t.match(en)?.length??0)>0),"hasKatex"),nn=g((async(t,e)=>{let r=document.createElement("div");r.innerHTML=await sn(t,e),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0",document.querySelector("body")?.insertAdjacentElement("beforeend",r);let i={width:r.clientWidth,height:r.clientHeight};return r.remove(),i}),"calculateMathMLDimensions"),an=g((async(t,e)=>rn(t)?tn()||e.legacyMathML||e.forceLegacyMathML?t.replace(en,"Katex is not supported in @mermaid-js/tiny. Please use the full mermaid library."):t.replace(en,"MathML is unsupported in this environment."):t),"renderKatexUnsanitized"),sn=g((async(t,e)=>zi(await an(t,e),e)),"renderKatexSanitized"),on={getRows:Oi,sanitizeText:zi,sanitizeTextOrArray:ji,hasBreaks:Ui,splitBreaks:Wi,lineBreakRegex:Mi,removeScript:Bi,getUrl:Gi,evaluate:Hi,getMax:Vi,getMin:Xi}})),yn=y((()=>{ze(),Ar(),gn(),We(),ln={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},cn=new Map,hn=new Map,un=g((t=>{for(let e of t){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(et.debug("Registering icon pack:",e.name),"loader"in e)hn.set(e.name,e.loader);else{if(!("icons"in e))throw et.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.');cn.set(e.name,e.icons)}}}),"registerIconPacks"),dn=g((async(t,e)=>{let r=s(t,!0,void 0!==e);if(!r)throw new Error(`Invalid icon name: ${t}`);let i=r.prefix||e;if(!i)throw new Error(`Icon name must contain a prefix: ${t}`);let n=cn.get(i);if(!n){let t=hn.get(i);if(!t)throw new Error(`Icon set not found: ${r.prefix}`);try{n={...await t(),prefix:i},cn.set(i,n)}catch(t){throw et.error(t),new Error(`Failed to load icon set: ${r.prefix}`)}}let a=I(n,r.name);if(!a)throw new Error(`Icon not found: ${t}`);return a}),"getRegisteredIconData"),pn=g((async t=>{try{return await dn(t),!0}catch{return!1}}),"isIconAvailable"),fn=g((async(t,e,r)=>{let i;try{i=await dn(t,e?.fallbackPrefix)}catch(t){et.error(t),i=ln}let n=U(i,e),a=K(Y(n.body),{...n.attributes,...r});return zi(a,Re())}),"getIconSVG")}));function mn(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var i=Array.from("string"==typeof t?[t]:t);i[i.length-1]=i[i.length-1].replace(/\r?\n([\t ]*)$/,"");var n=i.reduce((function(t,e){var r=e.match(/\n([\t ]+|(?!\s).)/g);return r?t.concat(r.map((function(t){var e,r;return null!==(r=null===(e=t.match(/[\t ]/g))||void 0===e?void 0:e.length)&&void 0!==r?r:0}))):t}),[]);if(n.length){var a=new RegExp("\n[\t ]{"+Math.min.apply(Math,n)+"}","g");i=i.map((function(t){return t.replace(a,"\n")}))}i[0]=i[0].replace(/^\r?\n/,"");var s=i[0];return e.forEach((function(t,e){var r=s.match(/(?:^|\n)( *)$/),n=r?r[1]:"",a=t;"string"==typeof t&&t.includes("\n")&&(a=String(t).split("\n").map((function(t,e){return 0===e?t:""+n+t})).join("\n")),s+=a+i[e+1]})),s}var xn,bn,kn,vn,Tn,wn,_n,Sn,Cn,En,An,$n,Ln,Rn,In,Nn,Dn,Mn,On,Pn=y((()=>{g(mn,"dedent")})),Bn=y((()=>{xn=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,bn=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,kn=/\s*%%.*\n/gm})),Fn=y((()=>{vn=class extends Error{static{g(this,"UnknownDiagramError")}constructor(t){super(t),this.name="UnknownDiagramError"}}})),zn=y((()=>{We(),Bn(),Fn(),Tn={},wn=g((function(t,e){t=t.replace(xn,"").replace(bn,"").replace(kn,"\n");for(let[r,{detector:i}]of Object.entries(Tn))if(i(t,e))return r;throw new vn(`No diagram type detected matching given configuration for text: ${t}`)}),"detectType"),_n=g(((...t)=>{for(let{id:e,detector:r,loader:i}of t)Sn(e,r,i)}),"registerLazyLoadedDiagrams"),Sn=g(((t,e,r)=>{Tn[t]&&et.warn(`Detector with key ${t} already exists. Overwriting.`),Tn[t]={detector:e,loader:r},et.debug(`Detector with key ${t} added${r?" with loader":""}`)}),"addDetector"),Cn=g((t=>Tn[t].loader),"getDiagramLoader")})),jn=y((()=>{(En=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[1,24],r=[1,25],i=[1,26],n=[1,27],a=[1,28],s=[1,63],o=[1,64],l=[1,65],h=[1,66],u=[1,67],d=[1,68],p=[1,69],f=[1,29],y=[1,30],m=[1,31],x=[1,32],b=[1,33],k=[1,34],v=[1,35],T=[1,36],w=[1,37],_=[1,38],S=[1,39],C=[1,40],E=[1,41],A=[1,42],$=[1,43],L=[1,44],R=[1,45],I=[1,46],N=[1,47],D=[1,48],M=[1,50],O=[1,51],P=[1,52],B=[1,53],F=[1,54],z=[1,55],j=[1,56],U=[1,57],W=[1,58],q=[1,59],Y=[1,60],G=[14,42],H=[14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],V=[12,14,34,36,37,38,39,40,41,42,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],X=[1,82],K=[1,83],Q=[1,84],Z=[1,85],J=[12,14,42],tt=[12,14,33,42],et=[12,14,33,42,76,77,79,80],rt=[12,33],it=[34,36,37,38,39,40,41,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],nt={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,direction:5,direction_tb:6,direction_bt:7,direction_rl:8,direction_lr:9,graphConfig:10,C4_CONTEXT:11,NEWLINE:12,statements:13,EOF:14,C4_CONTAINER:15,C4_COMPONENT:16,C4_DYNAMIC:17,C4_DEPLOYMENT:18,otherStatements:19,diagramStatements:20,otherStatement:21,title:22,accDescription:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,boundaryStatement:29,boundaryStartStatement:30,boundaryStopStatement:31,boundaryStart:32,LBRACE:33,ENTERPRISE_BOUNDARY:34,attributes:35,SYSTEM_BOUNDARY:36,BOUNDARY:37,CONTAINER_BOUNDARY:38,NODE:39,NODE_L:40,NODE_R:41,RBRACE:42,diagramStatement:43,PERSON:44,PERSON_EXT:45,SYSTEM:46,SYSTEM_DB:47,SYSTEM_QUEUE:48,SYSTEM_EXT:49,SYSTEM_EXT_DB:50,SYSTEM_EXT_QUEUE:51,CONTAINER:52,CONTAINER_DB:53,CONTAINER_QUEUE:54,CONTAINER_EXT:55,CONTAINER_EXT_DB:56,CONTAINER_EXT_QUEUE:57,COMPONENT:58,COMPONENT_DB:59,COMPONENT_QUEUE:60,COMPONENT_EXT:61,COMPONENT_EXT_DB:62,COMPONENT_EXT_QUEUE:63,REL:64,BIREL:65,REL_U:66,REL_D:67,REL_L:68,REL_R:69,REL_B:70,REL_INDEX:71,UPDATE_EL_STYLE:72,UPDATE_REL_STYLE:73,UPDATE_LAYOUT_CONFIG:74,attribute:75,STR:76,STR_KEY:77,STR_VALUE:78,ATTRIBUTE:79,ATTRIBUTE_EMPTY:80,$accept:0,$end:1},terminals_:{2:"error",6:"direction_tb",7:"direction_bt",8:"direction_rl",9:"direction_lr",11:"C4_CONTEXT",12:"NEWLINE",14:"EOF",15:"C4_CONTAINER",16:"C4_COMPONENT",17:"C4_DYNAMIC",18:"C4_DEPLOYMENT",22:"title",23:"accDescription",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"LBRACE",34:"ENTERPRISE_BOUNDARY",36:"SYSTEM_BOUNDARY",37:"BOUNDARY",38:"CONTAINER_BOUNDARY",39:"NODE",40:"NODE_L",41:"NODE_R",42:"RBRACE",44:"PERSON",45:"PERSON_EXT",46:"SYSTEM",47:"SYSTEM_DB",48:"SYSTEM_QUEUE",49:"SYSTEM_EXT",50:"SYSTEM_EXT_DB",51:"SYSTEM_EXT_QUEUE",52:"CONTAINER",53:"CONTAINER_DB",54:"CONTAINER_QUEUE",55:"CONTAINER_EXT",56:"CONTAINER_EXT_DB",57:"CONTAINER_EXT_QUEUE",58:"COMPONENT",59:"COMPONENT_DB",60:"COMPONENT_QUEUE",61:"COMPONENT_EXT",62:"COMPONENT_EXT_DB",63:"COMPONENT_EXT_QUEUE",64:"REL",65:"BIREL",66:"REL_U",67:"REL_D",68:"REL_L",69:"REL_R",70:"REL_B",71:"REL_INDEX",72:"UPDATE_EL_STYLE",73:"UPDATE_REL_STYLE",74:"UPDATE_LAYOUT_CONFIG",76:"STR",77:"STR_KEY",78:"STR_VALUE",79:"ATTRIBUTE",80:"ATTRIBUTE_EMPTY"},productions_:[0,[3,1],[3,1],[5,1],[5,1],[5,1],[5,1],[4,1],[10,4],[10,4],[10,4],[10,4],[10,4],[13,1],[13,1],[13,2],[19,1],[19,2],[19,3],[21,1],[21,1],[21,2],[21,2],[21,1],[29,3],[30,3],[30,3],[30,4],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[32,2],[31,1],[20,1],[20,2],[20,3],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,1],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[43,2],[35,1],[35,2],[75,1],[75,2],[75,1],[75,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 3:i.setDirection("TB");break;case 4:i.setDirection("BT");break;case 5:i.setDirection("RL");break;case 6:i.setDirection("LR");break;case 8:case 9:case 10:case 11:case 12:i.setC4Type(a[o-3]);break;case 19:i.setTitle(a[o].substring(6)),this.$=a[o].substring(6);break;case 20:i.setAccDescription(a[o].substring(15)),this.$=a[o].substring(15);break;case 21:this.$=a[o].trim(),i.setTitle(this.$);break;case 22:case 23:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 28:a[o].splice(2,0,"ENTERPRISE"),i.addPersonOrSystemBoundary(...a[o]),this.$=a[o];break;case 29:a[o].splice(2,0,"SYSTEM"),i.addPersonOrSystemBoundary(...a[o]),this.$=a[o];break;case 30:i.addPersonOrSystemBoundary(...a[o]),this.$=a[o];break;case 31:a[o].splice(2,0,"CONTAINER"),i.addContainerBoundary(...a[o]),this.$=a[o];break;case 32:i.addDeploymentNode("node",...a[o]),this.$=a[o];break;case 33:i.addDeploymentNode("nodeL",...a[o]),this.$=a[o];break;case 34:i.addDeploymentNode("nodeR",...a[o]),this.$=a[o];break;case 35:i.popBoundaryParseStack();break;case 39:i.addPersonOrSystem("person",...a[o]),this.$=a[o];break;case 40:i.addPersonOrSystem("external_person",...a[o]),this.$=a[o];break;case 41:i.addPersonOrSystem("system",...a[o]),this.$=a[o];break;case 42:i.addPersonOrSystem("system_db",...a[o]),this.$=a[o];break;case 43:i.addPersonOrSystem("system_queue",...a[o]),this.$=a[o];break;case 44:i.addPersonOrSystem("external_system",...a[o]),this.$=a[o];break;case 45:i.addPersonOrSystem("external_system_db",...a[o]),this.$=a[o];break;case 46:i.addPersonOrSystem("external_system_queue",...a[o]),this.$=a[o];break;case 47:i.addContainer("container",...a[o]),this.$=a[o];break;case 48:i.addContainer("container_db",...a[o]),this.$=a[o];break;case 49:i.addContainer("container_queue",...a[o]),this.$=a[o];break;case 50:i.addContainer("external_container",...a[o]),this.$=a[o];break;case 51:i.addContainer("external_container_db",...a[o]),this.$=a[o];break;case 52:i.addContainer("external_container_queue",...a[o]),this.$=a[o];break;case 53:i.addComponent("component",...a[o]),this.$=a[o];break;case 54:i.addComponent("component_db",...a[o]),this.$=a[o];break;case 55:i.addComponent("component_queue",...a[o]),this.$=a[o];break;case 56:i.addComponent("external_component",...a[o]),this.$=a[o];break;case 57:i.addComponent("external_component_db",...a[o]),this.$=a[o];break;case 58:i.addComponent("external_component_queue",...a[o]),this.$=a[o];break;case 60:i.addRel("rel",...a[o]),this.$=a[o];break;case 61:i.addRel("birel",...a[o]),this.$=a[o];break;case 62:i.addRel("rel_u",...a[o]),this.$=a[o];break;case 63:i.addRel("rel_d",...a[o]),this.$=a[o];break;case 64:i.addRel("rel_l",...a[o]),this.$=a[o];break;case 65:i.addRel("rel_r",...a[o]),this.$=a[o];break;case 66:i.addRel("rel_b",...a[o]),this.$=a[o];break;case 67:a[o].splice(0,1),i.addRel("rel",...a[o]),this.$=a[o];break;case 68:i.updateElStyle("update_el_style",...a[o]),this.$=a[o];break;case 69:i.updateRelStyle("update_rel_style",...a[o]),this.$=a[o];break;case 70:i.updateLayoutConfig("update_layout_config",...a[o]),this.$=a[o];break;case 71:this.$=[a[o]];break;case 72:a[o].unshift(a[o-1]),this.$=a[o];break;case 73:case 75:this.$=a[o].trim();break;case 74:let t={};t[a[o-1].trim()]=a[o].trim(),this.$=t;break;case 76:this.$=""}}),"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],7:[1,6],8:[1,7],9:[1,8],10:4,11:[1,9],15:[1,10],16:[1,11],17:[1,12],18:[1,13]},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,7]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{12:[1,14]},{12:[1,15]},{12:[1,16]},{12:[1,17]},{12:[1,18]},{13:19,19:20,20:21,21:22,22:e,23:r,24:i,26:n,28:a,29:49,30:61,32:62,34:s,36:o,37:l,38:h,39:u,40:d,41:p,43:23,44:f,45:y,46:m,47:x,48:b,49:k,50:v,51:T,52:w,53:_,54:S,55:C,56:E,57:A,58:$,59:L,60:R,61:I,62:N,63:D,64:M,65:O,66:P,67:B,68:F,69:z,70:j,71:U,72:W,73:q,74:Y},{13:70,19:20,20:21,21:22,22:e,23:r,24:i,26:n,28:a,29:49,30:61,32:62,34:s,36:o,37:l,38:h,39:u,40:d,41:p,43:23,44:f,45:y,46:m,47:x,48:b,49:k,50:v,51:T,52:w,53:_,54:S,55:C,56:E,57:A,58:$,59:L,60:R,61:I,62:N,63:D,64:M,65:O,66:P,67:B,68:F,69:z,70:j,71:U,72:W,73:q,74:Y},{13:71,19:20,20:21,21:22,22:e,23:r,24:i,26:n,28:a,29:49,30:61,32:62,34:s,36:o,37:l,38:h,39:u,40:d,41:p,43:23,44:f,45:y,46:m,47:x,48:b,49:k,50:v,51:T,52:w,53:_,54:S,55:C,56:E,57:A,58:$,59:L,60:R,61:I,62:N,63:D,64:M,65:O,66:P,67:B,68:F,69:z,70:j,71:U,72:W,73:q,74:Y},{13:72,19:20,20:21,21:22,22:e,23:r,24:i,26:n,28:a,29:49,30:61,32:62,34:s,36:o,37:l,38:h,39:u,40:d,41:p,43:23,44:f,45:y,46:m,47:x,48:b,49:k,50:v,51:T,52:w,53:_,54:S,55:C,56:E,57:A,58:$,59:L,60:R,61:I,62:N,63:D,64:M,65:O,66:P,67:B,68:F,69:z,70:j,71:U,72:W,73:q,74:Y},{13:73,19:20,20:21,21:22,22:e,23:r,24:i,26:n,28:a,29:49,30:61,32:62,34:s,36:o,37:l,38:h,39:u,40:d,41:p,43:23,44:f,45:y,46:m,47:x,48:b,49:k,50:v,51:T,52:w,53:_,54:S,55:C,56:E,57:A,58:$,59:L,60:R,61:I,62:N,63:D,64:M,65:O,66:P,67:B,68:F,69:z,70:j,71:U,72:W,73:q,74:Y},{14:[1,74]},t(G,[2,13],{43:23,29:49,30:61,32:62,20:75,34:s,36:o,37:l,38:h,39:u,40:d,41:p,44:f,45:y,46:m,47:x,48:b,49:k,50:v,51:T,52:w,53:_,54:S,55:C,56:E,57:A,58:$,59:L,60:R,61:I,62:N,63:D,64:M,65:O,66:P,67:B,68:F,69:z,70:j,71:U,72:W,73:q,74:Y}),t(G,[2,14]),t(H,[2,16],{12:[1,76]}),t(G,[2,36],{12:[1,77]}),t(V,[2,19]),t(V,[2,20]),{25:[1,78]},{27:[1,79]},t(V,[2,23]),{35:80,75:81,76:X,77:K,79:Q,80:Z},{35:86,75:81,76:X,77:K,79:Q,80:Z},{35:87,75:81,76:X,77:K,79:Q,80:Z},{35:88,75:81,76:X,77:K,79:Q,80:Z},{35:89,75:81,76:X,77:K,79:Q,80:Z},{35:90,75:81,76:X,77:K,79:Q,80:Z},{35:91,75:81,76:X,77:K,79:Q,80:Z},{35:92,75:81,76:X,77:K,79:Q,80:Z},{35:93,75:81,76:X,77:K,79:Q,80:Z},{35:94,75:81,76:X,77:K,79:Q,80:Z},{35:95,75:81,76:X,77:K,79:Q,80:Z},{35:96,75:81,76:X,77:K,79:Q,80:Z},{35:97,75:81,76:X,77:K,79:Q,80:Z},{35:98,75:81,76:X,77:K,79:Q,80:Z},{35:99,75:81,76:X,77:K,79:Q,80:Z},{35:100,75:81,76:X,77:K,79:Q,80:Z},{35:101,75:81,76:X,77:K,79:Q,80:Z},{35:102,75:81,76:X,77:K,79:Q,80:Z},{35:103,75:81,76:X,77:K,79:Q,80:Z},{35:104,75:81,76:X,77:K,79:Q,80:Z},t(J,[2,59]),{35:105,75:81,76:X,77:K,79:Q,80:Z},{35:106,75:81,76:X,77:K,79:Q,80:Z},{35:107,75:81,76:X,77:K,79:Q,80:Z},{35:108,75:81,76:X,77:K,79:Q,80:Z},{35:109,75:81,76:X,77:K,79:Q,80:Z},{35:110,75:81,76:X,77:K,79:Q,80:Z},{35:111,75:81,76:X,77:K,79:Q,80:Z},{35:112,75:81,76:X,77:K,79:Q,80:Z},{35:113,75:81,76:X,77:K,79:Q,80:Z},{35:114,75:81,76:X,77:K,79:Q,80:Z},{35:115,75:81,76:X,77:K,79:Q,80:Z},{20:116,29:49,30:61,32:62,34:s,36:o,37:l,38:h,39:u,40:d,41:p,43:23,44:f,45:y,46:m,47:x,48:b,49:k,50:v,51:T,52:w,53:_,54:S,55:C,56:E,57:A,58:$,59:L,60:R,61:I,62:N,63:D,64:M,65:O,66:P,67:B,68:F,69:z,70:j,71:U,72:W,73:q,74:Y},{12:[1,118],33:[1,117]},{35:119,75:81,76:X,77:K,79:Q,80:Z},{35:120,75:81,76:X,77:K,79:Q,80:Z},{35:121,75:81,76:X,77:K,79:Q,80:Z},{35:122,75:81,76:X,77:K,79:Q,80:Z},{35:123,75:81,76:X,77:K,79:Q,80:Z},{35:124,75:81,76:X,77:K,79:Q,80:Z},{35:125,75:81,76:X,77:K,79:Q,80:Z},{14:[1,126]},{14:[1,127]},{14:[1,128]},{14:[1,129]},{1:[2,8]},t(G,[2,15]),t(H,[2,17],{21:22,19:130,22:e,23:r,24:i,26:n,28:a}),t(G,[2,37],{19:20,20:21,21:22,43:23,29:49,30:61,32:62,13:131,22:e,23:r,24:i,26:n,28:a,34:s,36:o,37:l,38:h,39:u,40:d,41:p,44:f,45:y,46:m,47:x,48:b,49:k,50:v,51:T,52:w,53:_,54:S,55:C,56:E,57:A,58:$,59:L,60:R,61:I,62:N,63:D,64:M,65:O,66:P,67:B,68:F,69:z,70:j,71:U,72:W,73:q,74:Y}),t(V,[2,21]),t(V,[2,22]),t(J,[2,39]),t(tt,[2,71],{75:81,35:132,76:X,77:K,79:Q,80:Z}),t(et,[2,73]),{78:[1,133]},t(et,[2,75]),t(et,[2,76]),t(J,[2,40]),t(J,[2,41]),t(J,[2,42]),t(J,[2,43]),t(J,[2,44]),t(J,[2,45]),t(J,[2,46]),t(J,[2,47]),t(J,[2,48]),t(J,[2,49]),t(J,[2,50]),t(J,[2,51]),t(J,[2,52]),t(J,[2,53]),t(J,[2,54]),t(J,[2,55]),t(J,[2,56]),t(J,[2,57]),t(J,[2,58]),t(J,[2,60]),t(J,[2,61]),t(J,[2,62]),t(J,[2,63]),t(J,[2,64]),t(J,[2,65]),t(J,[2,66]),t(J,[2,67]),t(J,[2,68]),t(J,[2,69]),t(J,[2,70]),{31:134,42:[1,135]},{12:[1,136]},{33:[1,137]},t(rt,[2,28]),t(rt,[2,29]),t(rt,[2,30]),t(rt,[2,31]),t(rt,[2,32]),t(rt,[2,33]),t(rt,[2,34]),{1:[2,9]},{1:[2,10]},{1:[2,11]},{1:[2,12]},t(H,[2,18]),t(G,[2,38]),t(tt,[2,72]),t(et,[2,74]),t(J,[2,24]),t(J,[2,35]),t(it,[2,25]),t(it,[2,26],{12:[1,138]}),t(it,[2,27])],defaultActions:{2:[2,1],3:[2,2],4:[2,7],5:[2,3],6:[2,4],7:[2,5],8:[2,6],74:[2,8],126:[2,9],127:[2,10],128:[2,11],129:[2,12]},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},at={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{},performAction:g((function(t,e,r,i){switch(r){case 0:return 6;case 1:return 7;case 2:return 8;case 3:return 9;case 4:return 22;case 5:return 23;case 6:return this.begin("acc_title"),24;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),26;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 73:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 16:case 70:break;case 14:c;break;case 15:return 12;case 17:return 11;case 18:return 15;case 19:return 16;case 20:return 17;case 21:return 18;case 22:return this.begin("person_ext"),45;case 23:return this.begin("person"),44;case 24:return this.begin("system_ext_queue"),51;case 25:return this.begin("system_ext_db"),50;case 26:return this.begin("system_ext"),49;case 27:return this.begin("system_queue"),48;case 28:return this.begin("system_db"),47;case 29:return this.begin("system"),46;case 30:return this.begin("boundary"),37;case 31:return this.begin("enterprise_boundary"),34;case 32:return this.begin("system_boundary"),36;case 33:return this.begin("container_ext_queue"),57;case 34:return this.begin("container_ext_db"),56;case 35:return this.begin("container_ext"),55;case 36:return this.begin("container_queue"),54;case 37:return this.begin("container_db"),53;case 38:return this.begin("container"),52;case 39:return this.begin("container_boundary"),38;case 40:return this.begin("component_ext_queue"),63;case 41:return this.begin("component_ext_db"),62;case 42:return this.begin("component_ext"),61;case 43:return this.begin("component_queue"),60;case 44:return this.begin("component_db"),59;case 45:return this.begin("component"),58;case 46:case 47:return this.begin("node"),39;case 48:return this.begin("node_l"),40;case 49:return this.begin("node_r"),41;case 50:return this.begin("rel"),64;case 51:return this.begin("birel"),65;case 52:case 53:return this.begin("rel_u"),66;case 54:case 55:return this.begin("rel_d"),67;case 56:case 57:return this.begin("rel_l"),68;case 58:case 59:return this.begin("rel_r"),69;case 60:return this.begin("rel_b"),70;case 61:return this.begin("rel_index"),71;case 62:return this.begin("update_el_style"),72;case 63:return this.begin("update_rel_style"),73;case 64:return this.begin("update_layout_config"),74;case 65:return"EOF_IN_STRUCT";case 66:return this.begin("attribute"),"ATTRIBUTE_EMPTY";case 67:this.begin("attribute");break;case 68:case 79:this.popState(),this.popState();break;case 69:case 71:return 80;case 72:this.begin("string");break;case 74:case 80:return"STR";case 75:this.begin("string_kv");break;case 76:return this.begin("string_kv_key"),"STR_KEY";case 77:this.popState(),this.begin("string_kv_value");break;case 78:return"STR_VALUE";case 81:return"LBRACE";case 82:return"RBRACE";case 83:return"SPACE";case 84:return"EOL";case 85:return 14}}),"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:title\s[^#\n;]+)/,/^(?:accDescription\s[^#\n;]+)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:C4Context\b)/,/^(?:C4Container\b)/,/^(?:C4Component\b)/,/^(?:C4Dynamic\b)/,/^(?:C4Deployment\b)/,/^(?:Person_Ext\b)/,/^(?:Person\b)/,/^(?:SystemQueue_Ext\b)/,/^(?:SystemDb_Ext\b)/,/^(?:System_Ext\b)/,/^(?:SystemQueue\b)/,/^(?:SystemDb\b)/,/^(?:System\b)/,/^(?:Boundary\b)/,/^(?:Enterprise_Boundary\b)/,/^(?:System_Boundary\b)/,/^(?:ContainerQueue_Ext\b)/,/^(?:ContainerDb_Ext\b)/,/^(?:Container_Ext\b)/,/^(?:ContainerQueue\b)/,/^(?:ContainerDb\b)/,/^(?:Container\b)/,/^(?:Container_Boundary\b)/,/^(?:ComponentQueue_Ext\b)/,/^(?:ComponentDb_Ext\b)/,/^(?:Component_Ext\b)/,/^(?:ComponentQueue\b)/,/^(?:ComponentDb\b)/,/^(?:Component\b)/,/^(?:Deployment_Node\b)/,/^(?:Node\b)/,/^(?:Node_L\b)/,/^(?:Node_R\b)/,/^(?:Rel\b)/,/^(?:BiRel\b)/,/^(?:Rel_Up\b)/,/^(?:Rel_U\b)/,/^(?:Rel_Down\b)/,/^(?:Rel_D\b)/,/^(?:Rel_Left\b)/,/^(?:Rel_L\b)/,/^(?:Rel_Right\b)/,/^(?:Rel_R\b)/,/^(?:Rel_Back\b)/,/^(?:RelIndex\b)/,/^(?:UpdateElementStyle\b)/,/^(?:UpdateRelStyle\b)/,/^(?:UpdateLayoutConfig\b)/,/^(?:$)/,/^(?:[(][ ]*[,])/,/^(?:[(])/,/^(?:[)])/,/^(?:,,)/,/^(?:,)/,/^(?:[ ]*["]["])/,/^(?:[ ]*["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:[ ]*[\$])/,/^(?:[^=]*)/,/^(?:[=][ ]*["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:[^,]+)/,/^(?:\{)/,/^(?:\})/,/^(?:[\s]+)/,/^(?:[\n\r]+)/,/^(?:$)/],conditions:{acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},string_kv_value:{rules:[78,79],inclusive:!1},string_kv_key:{rules:[77],inclusive:!1},string_kv:{rules:[76],inclusive:!1},string:{rules:[73,74],inclusive:!1},attribute:{rules:[68,69,70,71,72,75,80],inclusive:!1},update_layout_config:{rules:[65,66,67,68],inclusive:!1},update_rel_style:{rules:[65,66,67,68],inclusive:!1},update_el_style:{rules:[65,66,67,68],inclusive:!1},rel_b:{rules:[65,66,67,68],inclusive:!1},rel_r:{rules:[65,66,67,68],inclusive:!1},rel_l:{rules:[65,66,67,68],inclusive:!1},rel_d:{rules:[65,66,67,68],inclusive:!1},rel_u:{rules:[65,66,67,68],inclusive:!1},rel_bi:{rules:[],inclusive:!1},rel:{rules:[65,66,67,68],inclusive:!1},node_r:{rules:[65,66,67,68],inclusive:!1},node_l:{rules:[65,66,67,68],inclusive:!1},node:{rules:[65,66,67,68],inclusive:!1},index:{rules:[],inclusive:!1},rel_index:{rules:[65,66,67,68],inclusive:!1},component_ext_queue:{rules:[],inclusive:!1},component_ext_db:{rules:[65,66,67,68],inclusive:!1},component_ext:{rules:[65,66,67,68],inclusive:!1},component_queue:{rules:[65,66,67,68],inclusive:!1},component_db:{rules:[65,66,67,68],inclusive:!1},component:{rules:[65,66,67,68],inclusive:!1},container_boundary:{rules:[65,66,67,68],inclusive:!1},container_ext_queue:{rules:[65,66,67,68],inclusive:!1},container_ext_db:{rules:[65,66,67,68],inclusive:!1},container_ext:{rules:[65,66,67,68],inclusive:!1},container_queue:{rules:[65,66,67,68],inclusive:!1},container_db:{rules:[65,66,67,68],inclusive:!1},container:{rules:[65,66,67,68],inclusive:!1},birel:{rules:[65,66,67,68],inclusive:!1},system_boundary:{rules:[65,66,67,68],inclusive:!1},enterprise_boundary:{rules:[65,66,67,68],inclusive:!1},boundary:{rules:[65,66,67,68],inclusive:!1},system_ext_queue:{rules:[65,66,67,68],inclusive:!1},system_ext_db:{rules:[65,66,67,68],inclusive:!1},system_ext:{rules:[65,66,67,68],inclusive:!1},system_queue:{rules:[65,66,67,68],inclusive:!1},system_db:{rules:[65,66,67,68],inclusive:!1},system:{rules:[65,66,67,68],inclusive:!1},person_ext:{rules:[65,66,67,68],inclusive:!1},person:{rules:[65,66,67,68],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,81,82,83,84,85],inclusive:!0}}};function st(){this.yy={}}return nt.lexer=at,g(st,"Parser"),st.prototype=nt,nt.Parser=st,new st}()).parser=En,An=En})),Un=y((()=>{We(),$n=g((function(t,e){for(let r of e)t.attr(r[0],r[1])}),"d3Attrs"),Ln=g((function(t,e,r){let i=new Map;return r?(i.set("width","100%"),i.set("style",`max-width: ${e}px;`)):(i.set("height",t),i.set("width",e)),i}),"calculateSvgSizeAttrs"),Rn=g((function(t,e,r,i){let n=Ln(e,r,i);$n(t,n)}),"configureSvgSize"),In=g((function(t,e,r,i){let n=e.node().getBBox(),a=n.width,s=n.height;et.info(`SVG bounds: ${a}x${s}`,n);let o=0,l=0;et.info(`Graph bounds: ${o}x${l}`,t),o=a+2*r,l=s+2*r,et.info(`Calculated bounds: ${o}x${l}`),Rn(e,l,o,i);let c=`${n.x-r} ${n.y-r} ${n.width+2*r} ${n.height+2*r}`;e.attr("viewBox",c)}),"setupGraphViewbox")})),Wn=y((()=>{We(),Nn={},Dn=g(((t,e,r)=>{let i="";return t in Nn&&Nn[t]?i=Nn[t](r):et.warn(`No theme found for ${t}`),` & {\n    font-family: ${r.fontFamily};\n    font-size: ${r.fontSize};\n    fill: ${r.textColor}\n  }\n  @keyframes edge-animation-frame {\n    from {\n      stroke-dashoffset: 0;\n    }\n  }\n  @keyframes dash {\n    to {\n      stroke-dashoffset: 0;\n    }\n  }\n  & .edge-animation-slow {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 50s linear infinite;\n    stroke-linecap: round;\n  }\n  & .edge-animation-fast {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 20s linear infinite;\n    stroke-linecap: round;\n  }\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${r.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${r.errorTextColor};\n    stroke: ${r.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 1px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n  & .edge-thickness-invisible {\n    stroke-width: 0;\n    fill: none;\n  }\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${r.lineColor};\n    stroke: ${r.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${r.lineColor};\n  }\n\n  & svg {\n    font-family: ${r.fontFamily};\n    font-size: ${r.fontSize};\n  }\n   & p {\n    margin: 0\n   }\n\n  ${i}\n\n  ${e}\n`}),"getStyles"),Mn=g(((t,e)=>{void 0!==e&&(Nn[t]=e)}),"addStylesForDiagram"),On=Dn})),qn={};x(qn,{clear:()=>Xn,getAccDescription:()=>Jn,getAccTitle:()=>Qn,getDiagramTitle:()=>ea,setAccDescription:()=>Zn,setAccTitle:()=>Kn,setDiagramTitle:()=>ta});var Yn,Gn,Hn,Vn,Xn,Kn,Qn,Zn,Jn,ta,ea,ra,ia,na,aa,sa,oa,la,ca,ha,ua,da,pa,fa,ga,ya,ma,xa,ba,ka,va,Ta,wa,_a,Sa,Ca,Ea,Aa,$a,La,Ra,Ia,Na,Da,Ma,Oa,Pa,Ba,Fa,za,ja,Ua,Wa,qa,Ya,Ga,Ha,Va,Xa,Ka,Qa,Za,Ja,ts,es,rs,is=y((()=>{gn(),Ar(),Yn="",Gn="",Hn="",Vn=g((t=>zi(t,Re())),"sanitizeText"),Xn=g((()=>{Yn="",Hn="",Gn=""}),"clear"),Kn=g((t=>{Yn=Vn(t).replace(/^\s+/g,"")}),"setAccTitle"),Qn=g((()=>Yn),"getAccTitle"),Zn=g((t=>{Hn=Vn(t).replace(/\n\s+/g,"\n")}),"setAccDescription"),Jn=g((()=>Hn),"getAccDescription"),ta=g((t=>{Gn=Vn(t)}),"setDiagramTitle"),ea=g((()=>Gn),"getDiagramTitle")})),ns=y((()=>{zn(),We(),Ar(),gn(),Un(),Wn(),is(),ra=et,ia=rt,na=Re,aa=Le,sa=ke,oa=g((t=>zi(t,na())),"sanitizeText"),la=In,ca=g((()=>qn),"getCommonDb"),ha={},ua=g(((t,e,r)=>{ha[t]&&ra.warn(`Diagram with id ${t} already registered. Overwriting.`),ha[t]=e,r&&Sn(t,r),Mn(t,e.styles),e.injectUtils?.(ra,ia,na,oa,la,ca(),(()=>{}))}),"registerDiagram"),da=g((t=>{if(t in ha)return ha[t];throw new pa(t)}),"getDiagram"),pa=class extends Error{static{g(this,"DiagramNotFoundError")}constructor(t){super(`Diagram ${t} not found.`)}}})),as=y((()=>{ns(),gn(),is(),fa=[],ga=[""],ya="global",ma="",xa=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],ba=[],ka="",va=!1,Ta=4,wa=2,Sa=g((function(){return _a}),"getC4Type"),Ca=g((function(t){_a=zi(t,na())}),"setC4Type"),Ea=g((function(t,e,r,i,n,a,s,o,l){if(null==t||null==e||null==r||null==i)return;let c={},h=ba.find((t=>t.from===e&&t.to===r));if(h?c=h:ba.push(c),c.type=t,c.from=e,c.to=r,c.label={text:i},null==n)c.techn={text:""};else if("object"==typeof n){let[t,e]=Object.entries(n)[0];c[t]={text:e}}else c.techn={text:n};if(null==a)c.descr={text:""};else if("object"==typeof a){let[t,e]=Object.entries(a)[0];c[t]={text:e}}else c.descr={text:a};if("object"==typeof s){let[t,e]=Object.entries(s)[0];c[t]=e}else c.sprite=s;if("object"==typeof o){let[t,e]=Object.entries(o)[0];c[t]=e}else c.tags=o;if("object"==typeof l){let[t,e]=Object.entries(l)[0];c[t]=e}else c.link=l;c.wrap=Ka()}),"addRel"),Aa=g((function(t,e,r,i,n,a,s){if(null===e||null===r)return;let o={},l=fa.find((t=>t.alias===e));if(l&&e===l.alias?o=l:(o.alias=e,fa.push(o)),o.label=null==r?{text:""}:{text:r},null==i)o.descr={text:""};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];o[t]={text:e}}else o.descr={text:i};if("object"==typeof n){let[t,e]=Object.entries(n)[0];o[t]=e}else o.sprite=n;if("object"==typeof a){let[t,e]=Object.entries(a)[0];o[t]=e}else o.tags=a;if("object"==typeof s){let[t,e]=Object.entries(s)[0];o[t]=e}else o.link=s;o.typeC4Shape={text:t},o.parentBoundary=ya,o.wrap=Ka()}),"addPersonOrSystem"),$a=g((function(t,e,r,i,n,a,s,o){if(null===e||null===r)return;let l={},c=fa.find((t=>t.alias===e));if(c&&e===c.alias?l=c:(l.alias=e,fa.push(l)),l.label=null==r?{text:""}:{text:r},null==i)l.techn={text:""};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];l[t]={text:e}}else l.techn={text:i};if(null==n)l.descr={text:""};else if("object"==typeof n){let[t,e]=Object.entries(n)[0];l[t]={text:e}}else l.descr={text:n};if("object"==typeof a){let[t,e]=Object.entries(a)[0];l[t]=e}else l.sprite=a;if("object"==typeof s){let[t,e]=Object.entries(s)[0];l[t]=e}else l.tags=s;if("object"==typeof o){let[t,e]=Object.entries(o)[0];l[t]=e}else l.link=o;l.wrap=Ka(),l.typeC4Shape={text:t},l.parentBoundary=ya}),"addContainer"),La=g((function(t,e,r,i,n,a,s,o){if(null===e||null===r)return;let l={},c=fa.find((t=>t.alias===e));if(c&&e===c.alias?l=c:(l.alias=e,fa.push(l)),l.label=null==r?{text:""}:{text:r},null==i)l.techn={text:""};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];l[t]={text:e}}else l.techn={text:i};if(null==n)l.descr={text:""};else if("object"==typeof n){let[t,e]=Object.entries(n)[0];l[t]={text:e}}else l.descr={text:n};if("object"==typeof a){let[t,e]=Object.entries(a)[0];l[t]=e}else l.sprite=a;if("object"==typeof s){let[t,e]=Object.entries(s)[0];l[t]=e}else l.tags=s;if("object"==typeof o){let[t,e]=Object.entries(o)[0];l[t]=e}else l.link=o;l.wrap=Ka(),l.typeC4Shape={text:t},l.parentBoundary=ya}),"addComponent"),Ra=g((function(t,e,r,i,n){if(null===t||null===e)return;let a={},s=xa.find((e=>e.alias===t));if(s&&t===s.alias?a=s:(a.alias=t,xa.push(a)),a.label=null==e?{text:""}:{text:e},null==r)a.type={text:"system"};else if("object"==typeof r){let[t,e]=Object.entries(r)[0];a[t]={text:e}}else a.type={text:r};if("object"==typeof i){let[t,e]=Object.entries(i)[0];a[t]=e}else a.tags=i;if("object"==typeof n){let[t,e]=Object.entries(n)[0];a[t]=e}else a.link=n;a.parentBoundary=ya,a.wrap=Ka(),ma=ya,ya=t,ga.push(ma)}),"addPersonOrSystemBoundary"),Ia=g((function(t,e,r,i,n){if(null===t||null===e)return;let a={},s=xa.find((e=>e.alias===t));if(s&&t===s.alias?a=s:(a.alias=t,xa.push(a)),a.label=null==e?{text:""}:{text:e},null==r)a.type={text:"container"};else if("object"==typeof r){let[t,e]=Object.entries(r)[0];a[t]={text:e}}else a.type={text:r};if("object"==typeof i){let[t,e]=Object.entries(i)[0];a[t]=e}else a.tags=i;if("object"==typeof n){let[t,e]=Object.entries(n)[0];a[t]=e}else a.link=n;a.parentBoundary=ya,a.wrap=Ka(),ma=ya,ya=t,ga.push(ma)}),"addContainerBoundary"),Na=g((function(t,e,r,i,n,a,s,o){if(null===e||null===r)return;let l={},c=xa.find((t=>t.alias===e));if(c&&e===c.alias?l=c:(l.alias=e,xa.push(l)),l.label=null==r?{text:""}:{text:r},null==i)l.type={text:"node"};else if("object"==typeof i){let[t,e]=Object.entries(i)[0];l[t]={text:e}}else l.type={text:i};if(null==n)l.descr={text:""};else if("object"==typeof n){let[t,e]=Object.entries(n)[0];l[t]={text:e}}else l.descr={text:n};if("object"==typeof s){let[t,e]=Object.entries(s)[0];l[t]=e}else l.tags=s;if("object"==typeof o){let[t,e]=Object.entries(o)[0];l[t]=e}else l.link=o;l.nodeType=t,l.parentBoundary=ya,l.wrap=Ka(),ma=ya,ya=e,ga.push(ma)}),"addDeploymentNode"),Da=g((function(){ya=ma,ga.pop(),ma=ga.pop(),ga.push(ma)}),"popBoundaryParseStack"),Ma=g((function(t,e,r,i,n,a,s,o,l,c,h){let u=fa.find((t=>t.alias===e));if(void 0!==u||(u=xa.find((t=>t.alias===e)),void 0!==u)){if(null!=r)if("object"==typeof r){let[t,e]=Object.entries(r)[0];u[t]=e}else u.bgColor=r;if(null!=i)if("object"==typeof i){let[t,e]=Object.entries(i)[0];u[t]=e}else u.fontColor=i;if(null!=n)if("object"==typeof n){let[t,e]=Object.entries(n)[0];u[t]=e}else u.borderColor=n;if(null!=a)if("object"==typeof a){let[t,e]=Object.entries(a)[0];u[t]=e}else u.shadowing=a;if(null!=s)if("object"==typeof s){let[t,e]=Object.entries(s)[0];u[t]=e}else u.shape=s;if(null!=o)if("object"==typeof o){let[t,e]=Object.entries(o)[0];u[t]=e}else u.sprite=o;if(null!=l)if("object"==typeof l){let[t,e]=Object.entries(l)[0];u[t]=e}else u.techn=l;if(null!=c)if("object"==typeof c){let[t,e]=Object.entries(c)[0];u[t]=e}else u.legendText=c;if(null!=h)if("object"==typeof h){let[t,e]=Object.entries(h)[0];u[t]=e}else u.legendSprite=h}}),"updateElStyle"),Oa=g((function(t,e,r,i,n,a,s){let o=ba.find((t=>t.from===e&&t.to===r));if(void 0!==o){if(null!=i)if("object"==typeof i){let[t,e]=Object.entries(i)[0];o[t]=e}else o.textColor=i;if(null!=n)if("object"==typeof n){let[t,e]=Object.entries(n)[0];o[t]=e}else o.lineColor=n;if(null!=a)if("object"==typeof a){let[t,e]=Object.entries(a)[0];o[t]=parseInt(e)}else o.offsetX=parseInt(a);if(null!=s)if("object"==typeof s){let[t,e]=Object.entries(s)[0];o[t]=parseInt(e)}else o.offsetY=parseInt(s)}}),"updateRelStyle"),Pa=g((function(t,e,r){let i=Ta,n=wa;if("object"==typeof e){let t=Object.values(e)[0];i=parseInt(t)}else i=parseInt(e);if("object"==typeof r){let t=Object.values(r)[0];n=parseInt(t)}else n=parseInt(r);i>=1&&(Ta=i),n>=1&&(wa=n)}),"updateLayoutConfig"),Ba=g((function(){return Ta}),"getC4ShapeInRow"),Fa=g((function(){return wa}),"getC4BoundaryInRow"),za=g((function(){return ya}),"getCurrentBoundaryParse"),ja=g((function(){return ma}),"getParentBoundaryParse"),Ua=g((function(t){return null==t?fa:fa.filter((e=>e.parentBoundary===t))}),"getC4ShapeArray"),Wa=g((function(t){return fa.find((e=>e.alias===t))}),"getC4Shape"),qa=g((function(t){return Object.keys(Ua(t))}),"getC4ShapeKeys"),Ya=g((function(t){return null==t?xa:xa.filter((e=>e.parentBoundary===t))}),"getBoundaries"),Ga=Ya,Ha=g((function(){return ba}),"getRels"),Va=g((function(){return ka}),"getTitle"),Xa=g((function(t){va=t}),"setWrap"),Ka=g((function(){return va}),"autoWrap"),Qa=g((function(){fa=[],xa=[{alias:"global",label:{text:"global"},type:{text:"global"},tags:null,link:null,parentBoundary:""}],ma="",ya="global",ga=[""],ba=[],ga=[""],ka="",va=!1,Ta=4,wa=2}),"clear"),Za={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25},Ja={FILLED:0,OPEN:1},ts={LEFTOF:0,RIGHTOF:1,OVER:2},es=g((function(t){ka=zi(t,na())}),"setTitle"),rs={addPersonOrSystem:Aa,addPersonOrSystemBoundary:Ra,addContainer:$a,addContainerBoundary:Ia,addComponent:La,addDeploymentNode:Na,popBoundaryParseStack:Da,addRel:Ea,updateElStyle:Ma,updateRelStyle:Oa,updateLayoutConfig:Pa,autoWrap:Ka,setWrap:Xa,getC4ShapeArray:Ua,getC4Shape:Wa,getC4ShapeKeys:qa,getBoundaries:Ya,getBoundarys:Ga,getCurrentBoundaryParse:za,getParentBoundaryParse:ja,getRels:Ha,getTitle:Va,getC4Type:Sa,getC4ShapeInRow:Ba,getC4BoundaryInRow:Fa,setAccTitle:Kn,getAccTitle:Qn,getAccDescription:Jn,setAccDescription:Zn,getConfig:g((()=>na().c4),"getConfig"),clear:Qa,LINETYPE:Za,ARROWTYPE:Ja,PLACEMENT:ts,setTitle:es,setC4Type:Ca}}));function ss(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}var os=y((()=>{g(ss,"ascending")}));function ls(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}var cs=y((()=>{g(ls,"descending")}));function hs(t){let e,r,i;function n(t,i,n=0,a=t.length){if(n<a){if(0!==e(i,i))return a;do{let e=n+a>>>1;r(t[e],i)<0?n=e+1:a=e}while(n<a)}return n}function a(t,i,n=0,a=t.length){if(n<a){if(0!==e(i,i))return a;do{let e=n+a>>>1;r(t[e],i)<=0?n=e+1:a=e}while(n<a)}return n}function s(t,e,r=0,a=t.length){let s=n(t,e,r,a-1);return s>r&&i(t[s-1],e)>-i(t[s],e)?s-1:s}return 2!==t.length?(e=ss,r=g(((e,r)=>ss(t(e),r)),"compare2"),i=g(((e,r)=>t(e)-r),"delta")):(e=t===ss||t===ls?t:us,r=t,i=t),g(n,"left"),g(a,"right"),g(s,"center"),{left:n,center:s,right:a}}function us(){return 0}var ds=y((()=>{os(),cs(),g(hs,"bisector"),g(us,"zero")}));function ps(t){return null===t?NaN:+t}var fs,gs,ys,ms=y((()=>{g(ps,"number")})),xs=y((()=>{os(),ds(),ms(),fs=hs(ss),gs=fs.right,fs.left,hs(ps).center,ys=gs}));function bs({_intern:t,_key:e},r){let i=e(r);return t.has(i)?t.get(i):r}function ks({_intern:t,_key:e},r){let i=e(r);return t.has(i)?t.get(i):(t.set(i,r),r)}function vs({_intern:t,_key:e},r){let i=e(r);return t.has(i)&&(r=t.get(i),t.delete(i)),r}function Ts(t){return null!==t&&"object"==typeof t?t.valueOf():t}var ws,_s=y((()=>{ws=class extends Map{static{g(this,"InternMap")}constructor(t,e=Ts){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(let[e,r]of t)this.set(e,r)}get(t){return super.get(bs(this,t))}has(t){return super.has(bs(this,t))}set(t,e){return super.set(ks(this,t),e)}delete(t){return super.delete(vs(this,t))}},g(bs,"intern_get"),g(ks,"intern_set"),g(vs,"intern_delete"),g(Ts,"keyof")}));function Ss(t,e,r){let i,n,a,s=(e-t)/Math.max(0,r),o=Math.floor(Math.log10(s)),l=s/Math.pow(10,o),c=l>=$s?10:l>=Ls?5:l>=Rs?2:1;return o<0?(a=Math.pow(10,-o)/c,i=Math.round(t*a),n=Math.round(e*a),i/a<t&&++i,n/a>e&&--n,a=-a):(a=Math.pow(10,o)*c,i=Math.round(t/a),n=Math.round(e/a),i*a<t&&++i,n*a>e&&--n),n<i&&.5<=r&&r<2?Ss(t,e,2*r):[i,n,a]}function Cs(t,e,r){if(!((r=+r)>0))return[];if((t=+t)===(e=+e))return[t];let i=e<t,[n,a,s]=i?Ss(e,t,r):Ss(t,e,r);if(!(a>=n))return[];let o=a-n+1,l=new Array(o);if(i)if(s<0)for(let t=0;t<o;++t)l[t]=(a-t)/-s;else for(let t=0;t<o;++t)l[t]=(a-t)*s;else if(s<0)for(let t=0;t<o;++t)l[t]=(n+t)/-s;else for(let t=0;t<o;++t)l[t]=(n+t)*s;return l}function Es(t,e,r){return Ss(t=+t,e=+e,r=+r)[2]}function As(t,e,r){r=+r;let i=(e=+e)<(t=+t),n=i?Es(e,t,r):Es(t,e,r);return(i?-1:1)*(n<0?1/-n:n)}var $s,Ls,Rs,Is=y((()=>{$s=Math.sqrt(50),Ls=Math.sqrt(10),Rs=Math.sqrt(2),g(Ss,"tickSpec"),g(Cs,"ticks"),g(Es,"tickIncrement"),g(As,"tickStep")}));function Ns(t,e){let r;if(void 0===e)for(let e of t)null!=e&&(r<e||void 0===r&&e>=e)&&(r=e);else{let i=-1;for(let n of t)null!=(n=e(n,++i,t))&&(r<n||void 0===r&&n>=n)&&(r=n)}return r}var Ds=y((()=>{g(Ns,"max")}));function Ms(t,e){let r;if(void 0===e)for(let e of t)null!=e&&(r>e||void 0===r&&e>=e)&&(r=e);else{let i=-1;for(let n of t)null!=(n=e(n,++i,t))&&(r>n||void 0===r&&n>=n)&&(r=n)}return r}var Os=y((()=>{g(Ms,"min")}));function Ps(t,e,r){t=+t,e=+e,r=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+r;for(var i=-1,n=0|Math.max(0,Math.ceil((e-t)/r)),a=new Array(n);++i<n;)a[i]=t+i*r;return a}var Bs=y((()=>{g(Ps,"range")})),Fs=y((()=>{xs(),ds(),Ds(),Os(),Bs(),Is(),_s()}));function zs(t){return t}var js=y((()=>{g(zs,"default")}));function Us(t){return"translate("+t+",0)"}function Ws(t){return"translate(0,"+t+")"}function qs(t){return e=>+t(e)}function Ys(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function Gs(){return!this.__axis}function Hs(t,e){var r=[],i=null,n=null,a=6,s=6,o=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===Ks||t===Js?-1:1,h=t===Js||t===Qs?"x":"y",u=t===Ks||t===Zs?Us:Ws;function d(d){var p=i??(e.ticks?e.ticks.apply(e,r):e.domain()),f=n??(e.tickFormat?e.tickFormat.apply(e,r):zs),g=Math.max(a,0)+o,y=e.range(),m=+y[0]+l,x=+y[y.length-1]+l,b=(e.bandwidth?Ys:qs)(e.copy(),l),k=d.selection?d.selection():d,v=k.selectAll(".domain").data([null]),T=k.selectAll(".tick").data(p,e).order(),w=T.exit(),_=T.enter().append("g").attr("class","tick"),S=T.select("line"),C=T.select("text");v=v.merge(v.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(_),S=S.merge(_.append("line").attr("stroke","currentColor").attr(h+"2",c*a)),C=C.merge(_.append("text").attr("fill","currentColor").attr(h,c*g).attr("dy",t===Ks?"0em":t===Zs?"0.71em":"0.32em")),d!==k&&(v=v.transition(d),T=T.transition(d),S=S.transition(d),C=C.transition(d),w=w.transition(d).attr("opacity",to).attr("transform",(function(t){return isFinite(t=b(t))?u(t+l):this.getAttribute("transform")})),_.attr("opacity",to).attr("transform",(function(t){var e=this.parentNode.__axis;return u((e&&isFinite(e=e(t))?e:b(t))+l)}))),w.remove(),v.attr("d",t===Js||t===Qs?s?"M"+c*s+","+m+"H"+l+"V"+x+"H"+c*s:"M"+l+","+m+"V"+x:s?"M"+m+","+c*s+"V"+l+"H"+x+"V"+c*s:"M"+m+","+l+"H"+x),T.attr("opacity",1).attr("transform",(function(t){return u(b(t)+l)})),S.attr(h+"2",c*a),C.attr(h,c*g).text(f),k.filter(Gs).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Qs?"start":t===Js?"end":"middle"),k.each((function(){this.__axis=b}))}return g(d,"axis"),d.scale=function(t){return arguments.length?(e=t,d):e},d.ticks=function(){return r=Array.from(arguments),d},d.tickArguments=function(t){return arguments.length?(r=null==t?[]:Array.from(t),d):r.slice()},d.tickValues=function(t){return arguments.length?(i=null==t?null:Array.from(t),d):i&&i.slice()},d.tickFormat=function(t){return arguments.length?(n=t,d):n},d.tickSize=function(t){return arguments.length?(a=s=+t,d):a},d.tickSizeInner=function(t){return arguments.length?(a=+t,d):a},d.tickSizeOuter=function(t){return arguments.length?(s=+t,d):s},d.tickPadding=function(t){return arguments.length?(o=+t,d):o},d.offset=function(t){return arguments.length?(l=+t,d):l},d}function Vs(t){return Hs(Ks,t)}function Xs(t){return Hs(Zs,t)}var Ks,Qs,Zs,Js,to,eo=y((()=>{js(),Ks=1,Qs=2,Zs=3,Js=4,to=1e-6,g(Us,"translateX"),g(Ws,"translateY"),g(qs,"number"),g(Ys,"center"),g(Gs,"entering"),g(Hs,"axis"),g(Vs,"axisTop"),g(Xs,"axisBottom")})),ro=y((()=>{eo()}));function io(){for(var t,e=0,r=arguments.length,i={};e<r;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new no(i)}function no(t){this._=t}function ao(t,e){return t.trim().split(/^|\s+/).map((function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}}))}function so(t,e){for(var r,i=0,n=t.length;i<n;++i)if((r=t[i]).name===e)return r.value}function oo(t,e,r){for(var i=0,n=t.length;i<n;++i)if(t[i].name===e){t[i]=lo,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=r&&t.push({name:e,value:r}),t}var lo,co,ho,uo,po=y((()=>{lo={value:g((()=>{}),"value")},g(io,"dispatch"),g(no,"Dispatch"),g(ao,"parseTypenames"),no.prototype=io.prototype={constructor:no,on:g((function(t,e){var r,i=this._,n=ao(t+"",i),a=-1,s=n.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(r=(t=n[a]).type)i[r]=oo(i[r],t.name,e);else if(null==e)for(r in i)i[r]=oo(i[r],t.name,null);return this}for(;++a<s;)if((r=(t=n[a]).type)&&(r=so(i[r],t.name)))return r}),"on"),copy:g((function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new no(t)}),"copy"),call:g((function(t,e){if((r=arguments.length-2)>0)for(var r,i,n=new Array(r),a=0;a<r;++a)n[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,r=(i=this._[t]).length;a<r;++a)i[a].value.apply(e,n)}),"call"),apply:g((function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],n=0,a=i.length;n<a;++n)i[n].value.apply(e,r)}),"apply")},g(so,"get"),g(oo,"set"),co=io})),fo=y((()=>{po()})),go=y((()=>{uo={svg:"http://www.w3.org/2000/svg",xhtml:ho="http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}}));function yo(t){var e=t+="",r=e.indexOf(":");return r>=0&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),uo.hasOwnProperty(e)?{space:uo[e],local:t}:t}var mo=y((()=>{go(),g(yo,"default")}));function xo(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===ho&&e.documentElement.namespaceURI===ho?e.createElement(t):e.createElementNS(r,t)}}function bo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ko(t){var e=yo(t);return(e.local?bo:xo)(e)}var vo=y((()=>{mo(),go(),g(xo,"creatorInherit"),g(bo,"creatorFixed"),g(ko,"default")}));function To(){}function wo(t){return null==t?To:function(){return this.querySelector(t)}}var _o=y((()=>{g(To,"none"),g(wo,"default")}));function So(t){"function"!=typeof t&&(t=wo(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var a,s,o=e[n],l=o.length,c=i[n]=new Array(l),h=0;h<l;++h)(a=o[h])&&(s=t.call(a,a.__data__,h,o))&&("__data__"in a&&(s.__data__=a.__data__),c[h]=s);return new Zc(i,this._parents)}var Co=y((()=>{ih(),_o(),g(So,"default")}));function Eo(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}var Ao=y((()=>{g(Eo,"array")}));function $o(){return[]}function Lo(t){return null==t?$o:function(){return this.querySelectorAll(t)}}var Ro=y((()=>{g($o,"empty"),g(Lo,"default")}));function Io(t){return function(){return Eo(t.apply(this,arguments))}}function No(t){t="function"==typeof t?Io(t):Lo(t);for(var e=this._groups,r=e.length,i=[],n=[],a=0;a<r;++a)for(var s,o=e[a],l=o.length,c=0;c<l;++c)(s=o[c])&&(i.push(t.call(s,s.__data__,c,o)),n.push(s));return new Zc(i,n)}var Do=y((()=>{ih(),Ao(),Ro(),g(Io,"arrayAll"),g(No,"default")}));function Mo(t){return function(){return this.matches(t)}}function Oo(t){return function(e){return e.matches(t)}}var Po=y((()=>{g(Mo,"default"),g(Oo,"childMatcher")}));function Bo(t){return function(){return jo.call(this.children,t)}}function Fo(){return this.firstElementChild}function zo(t){return this.select(null==t?Fo:Bo("function"==typeof t?t:Oo(t)))}var jo,Uo=y((()=>{Po(),jo=Array.prototype.find,g(Bo,"childFind"),g(Fo,"childFirst"),g(zo,"default")}));function Wo(){return Array.from(this.children)}function qo(t){return function(){return Go.call(this.children,t)}}function Yo(t){return this.selectAll(null==t?Wo:qo("function"==typeof t?t:Oo(t)))}var Go,Ho=y((()=>{Po(),Go=Array.prototype.filter,g(Wo,"children"),g(qo,"childrenFilter"),g(Yo,"default")}));function Vo(t){"function"!=typeof t&&(t=Mo(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var a,s=e[n],o=s.length,l=i[n]=[],c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new Zc(i,this._parents)}var Xo=y((()=>{ih(),Po(),g(Vo,"default")}));function Ko(t){return new Array(t.length)}var Qo=y((()=>{g(Ko,"default")}));function Zo(){return new Zc(this._enter||this._groups.map(Ko),this._parents)}function Jo(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}var tl=y((()=>{Qo(),ih(),g(Zo,"default"),g(Jo,"EnterNode"),Jo.prototype={constructor:Jo,appendChild:g((function(t){return this._parent.insertBefore(t,this._next)}),"appendChild"),insertBefore:g((function(t,e){return this._parent.insertBefore(t,e)}),"insertBefore"),querySelector:g((function(t){return this._parent.querySelector(t)}),"querySelector"),querySelectorAll:g((function(t){return this._parent.querySelectorAll(t)}),"querySelectorAll")}}));function el(t){return function(){return t}}var rl=y((()=>{g(el,"default")}));function il(t,e,r,i,n,a){for(var s,o=0,l=e.length,c=a.length;o<c;++o)(s=e[o])?(s.__data__=a[o],i[o]=s):r[o]=new Jo(t,a[o]);for(;o<l;++o)(s=e[o])&&(n[o]=s)}function nl(t,e,r,i,n,a,s){var o,l,c,h=new Map,u=e.length,d=a.length,p=new Array(u);for(o=0;o<u;++o)(l=e[o])&&(p[o]=c=s.call(l,l.__data__,o,e)+"",h.has(c)?n[o]=l:h.set(c,l));for(o=0;o<d;++o)c=s.call(t,a[o],o,a)+"",(l=h.get(c))?(i[o]=l,l.__data__=a[o],h.delete(c)):r[o]=new Jo(t,a[o]);for(o=0;o<u;++o)(l=e[o])&&h.get(p[o])===l&&(n[o]=l)}function al(t){return t.__data__}function sl(t,e){if(!arguments.length)return Array.from(this,al);var r=e?nl:il,i=this._parents,n=this._groups;"function"!=typeof t&&(t=el(t));for(var a=n.length,s=new Array(a),o=new Array(a),l=new Array(a),c=0;c<a;++c){var h=i[c],u=n[c],d=u.length,p=ol(t.call(h,h&&h.__data__,c,i)),f=p.length,g=o[c]=new Array(f),y=s[c]=new Array(f);r(h,u,g,y,l[c]=new Array(d),p,e);for(var m,x,b=0,k=0;b<f;++b)if(m=g[b]){for(b>=k&&(k=b+1);!(x=y[k])&&++k<f;);m._next=x||null}}return(s=new Zc(s,i))._enter=o,s._exit=l,s}function ol(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}var ll=y((()=>{ih(),tl(),rl(),g(il,"bindIndex"),g(nl,"bindKey"),g(al,"datum"),g(sl,"default"),g(ol,"arraylike")}));function cl(){return new Zc(this._exit||this._groups.map(Ko),this._parents)}var hl=y((()=>{Qo(),ih(),g(cl,"default")}));function ul(t,e,r){var i=this.enter(),n=this,a=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&((n=e(n))&&(n=n.selection())),null==r?a.remove():r(a),i&&n?i.merge(n).order():n}var dl=y((()=>{g(ul,"default")}));function pl(t){for(var e=t.selection?t.selection():t,r=this._groups,i=e._groups,n=r.length,a=i.length,s=Math.min(n,a),o=new Array(n),l=0;l<s;++l)for(var c,h=r[l],u=i[l],d=h.length,p=o[l]=new Array(d),f=0;f<d;++f)(c=h[f]||u[f])&&(p[f]=c);for(;l<n;++l)o[l]=r[l];return new Zc(o,this._parents)}var fl=y((()=>{ih(),g(pl,"default")}));function gl(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var i,n=t[e],a=n.length-1,s=n[a];--a>=0;)(i=n[a])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this}var yl=y((()=>{g(gl,"default")}));function ml(t){function e(e,r){return e&&r?t(e.__data__,r.__data__):!e-!r}t||(t=xl),g(e,"compareNode");for(var r=this._groups,i=r.length,n=new Array(i),a=0;a<i;++a){for(var s,o=r[a],l=o.length,c=n[a]=new Array(l),h=0;h<l;++h)(s=o[h])&&(c[h]=s);c.sort(e)}return new Zc(n,this._parents).order()}function xl(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var bl=y((()=>{ih(),g(ml,"default"),g(xl,"ascending")}));function kl(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}var vl=y((()=>{g(kl,"default")}));function Tl(){return Array.from(this)}var wl=y((()=>{g(Tl,"default")}));function _l(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,a=i.length;n<a;++n){var s=i[n];if(s)return s}return null}var Sl=y((()=>{g(_l,"default")}));function Cl(){let t=0;for(let e of this)++t;return t}var El=y((()=>{g(Cl,"default")}));function Al(){return!this.node()}var $l=y((()=>{g(Al,"default")}));function Ll(t){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var n,a=e[r],s=0,o=a.length;s<o;++s)(n=a[s])&&t.call(n,n.__data__,s,a);return this}var Rl=y((()=>{g(Ll,"default")}));function Il(t){return function(){this.removeAttribute(t)}}function Nl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Dl(t,e){return function(){this.setAttribute(t,e)}}function Ml(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ol(t,e){return function(){var r=e.apply(this,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}}function Pl(t,e){return function(){var r=e.apply(this,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function Bl(t,e){var r=yo(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==e?r.local?Nl:Il:"function"==typeof e?r.local?Pl:Ol:r.local?Ml:Dl)(r,e))}var Fl=y((()=>{mo(),g(Il,"attrRemove"),g(Nl,"attrRemoveNS"),g(Dl,"attrConstant"),g(Ml,"attrConstantNS"),g(Ol,"attrFunction"),g(Pl,"attrFunctionNS"),g(Bl,"default")}));function zl(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}var jl=y((()=>{g(zl,"default")}));function Ul(t){return function(){this.style.removeProperty(t)}}function Wl(t,e,r){return function(){this.style.setProperty(t,e,r)}}function ql(t,e,r){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,r)}}function Yl(t,e,r){return arguments.length>1?this.each((null==e?Ul:"function"==typeof e?ql:Wl)(t,e,r??"")):Gl(this.node(),t)}function Gl(t,e){return t.style.getPropertyValue(e)||zl(t).getComputedStyle(t,null).getPropertyValue(e)}var Hl=y((()=>{jl(),g(Ul,"styleRemove"),g(Wl,"styleConstant"),g(ql,"styleFunction"),g(Yl,"default"),g(Gl,"styleValue")}));function Vl(t){return function(){delete this[t]}}function Xl(t,e){return function(){this[t]=e}}function Kl(t,e){return function(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}}function Ql(t,e){return arguments.length>1?this.each((null==e?Vl:"function"==typeof e?Kl:Xl)(t,e)):this.node()[t]}var Zl=y((()=>{g(Vl,"propertyRemove"),g(Xl,"propertyConstant"),g(Kl,"propertyFunction"),g(Ql,"default")}));function Jl(t){return t.trim().split(/^|\s+/)}function tc(t){return t.classList||new ec(t)}function ec(t){this._node=t,this._names=Jl(t.getAttribute("class")||"")}function rc(t,e){for(var r=tc(t),i=-1,n=e.length;++i<n;)r.add(e[i])}function ic(t,e){for(var r=tc(t),i=-1,n=e.length;++i<n;)r.remove(e[i])}function nc(t){return function(){rc(this,t)}}function ac(t){return function(){ic(this,t)}}function sc(t,e){return function(){(e.apply(this,arguments)?rc:ic)(this,t)}}function oc(t,e){var r=Jl(t+"");if(arguments.length<2){for(var i=tc(this.node()),n=-1,a=r.length;++n<a;)if(!i.contains(r[n]))return!1;return!0}return this.each(("function"==typeof e?sc:e?nc:ac)(r,e))}var lc=y((()=>{g(Jl,"classArray"),g(tc,"classList"),g(ec,"ClassList"),ec.prototype={add:g((function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))}),"add"),remove:g((function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))}),"remove"),contains:g((function(t){return this._names.indexOf(t)>=0}),"contains")},g(rc,"classedAdd"),g(ic,"classedRemove"),g(nc,"classedTrue"),g(ac,"classedFalse"),g(sc,"classedFunction"),g(oc,"default")}));function cc(){this.textContent=""}function hc(t){return function(){this.textContent=t}}function uc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function dc(t){return arguments.length?this.each(null==t?cc:("function"==typeof t?uc:hc)(t)):this.node().textContent}var pc=y((()=>{g(cc,"textRemove"),g(hc,"textConstant"),g(uc,"textFunction"),g(dc,"default")}));function fc(){this.innerHTML=""}function gc(t){return function(){this.innerHTML=t}}function yc(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function mc(t){return arguments.length?this.each(null==t?fc:("function"==typeof t?yc:gc)(t)):this.node().innerHTML}var xc=y((()=>{g(fc,"htmlRemove"),g(gc,"htmlConstant"),g(yc,"htmlFunction"),g(mc,"default")}));function bc(){this.nextSibling&&this.parentNode.appendChild(this)}function kc(){return this.each(bc)}var vc=y((()=>{g(bc,"raise"),g(kc,"default")}));function Tc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function wc(){return this.each(Tc)}var _c=y((()=>{g(Tc,"lower"),g(wc,"default")}));function Sc(t){var e="function"==typeof t?t:ko(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}var Cc=y((()=>{vo(),g(Sc,"default")}));function Ec(){return null}function Ac(t,e){var r="function"==typeof t?t:ko(t),i=null==e?Ec:"function"==typeof e?e:wo(e);return this.select((function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)}))}var $c=y((()=>{vo(),_o(),g(Ec,"constantNull"),g(Ac,"default")}));function Lc(){var t=this.parentNode;t&&t.removeChild(this)}function Rc(){return this.each(Lc)}var Ic=y((()=>{g(Lc,"remove"),g(Rc,"default")}));function Nc(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Dc(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Mc(t){return this.select(t?Dc:Nc)}var Oc=y((()=>{g(Nc,"selection_cloneShallow"),g(Dc,"selection_cloneDeep"),g(Mc,"default")}));function Pc(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Bc=y((()=>{g(Pc,"default")}));function Fc(t){return function(e){t.call(this,e,this.__data__)}}function zc(t){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");return r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),{type:t,name:e}}))}function jc(t){return function(){var e=this.__on;if(e){for(var r,i=0,n=-1,a=e.length;i<a;++i)r=e[i],t.type&&r.type!==t.type||r.name!==t.name?e[++n]=r:this.removeEventListener(r.type,r.listener,r.options);++n?e.length=n:delete this.__on}}}function Uc(t,e,r){return function(){var i,n=this.__on,a=Fc(e);if(n)for(var s=0,o=n.length;s<o;++s)if((i=n[s]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=r),void(i.value=e);this.addEventListener(t.type,a,r),i={type:t.type,name:t.name,value:e,listener:a,options:r},n?n.push(i):this.__on=[i]}}function Wc(t,e,r){var i,n,a=zc(t+""),s=a.length;if(!(arguments.length<2)){for(o=e?Uc:jc,i=0;i<s;++i)this.each(o(a[i],e,r));return this}var o=this.node().__on;if(o)for(var l,c=0,h=o.length;c<h;++c)for(i=0,l=o[c];i<s;++i)if((n=a[i]).type===l.type&&n.name===l.name)return l.value}var qc=y((()=>{g(Fc,"contextListener"),g(zc,"parseTypenames"),g(jc,"onRemove"),g(Uc,"onAdd"),g(Wc,"default")}));function Yc(t,e,r){var i=zl(t),n=i.CustomEvent;"function"==typeof n?n=new n(e,r):(n=i.document.createEvent("Event"),r?(n.initEvent(e,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(e,!1,!1)),t.dispatchEvent(n)}function Gc(t,e){return function(){return Yc(this,t,e)}}function Hc(t,e){return function(){return Yc(this,t,e.apply(this,arguments))}}function Vc(t,e){return this.each(("function"==typeof e?Hc:Gc)(t,e))}var Xc=y((()=>{jl(),g(Yc,"dispatchEvent"),g(Gc,"dispatchConstant"),g(Hc,"dispatchFunction"),g(Vc,"default")}));function*Kc(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i,n=t[e],a=0,s=n.length;a<s;++a)(i=n[a])&&(yield i)}var Qc=y((()=>{g(Kc,"default")}));function Zc(t,e){this._groups=t,this._parents=e}function Jc(){return new Zc([[document.documentElement]],eh)}function th(){return this}var eh,rh,ih=y((()=>{Co(),Do(),Uo(),Ho(),Xo(),ll(),tl(),hl(),dl(),fl(),yl(),bl(),vl(),wl(),Sl(),El(),$l(),Rl(),Fl(),Hl(),Zl(),lc(),pc(),xc(),vc(),_c(),Cc(),$c(),Ic(),Oc(),Bc(),qc(),Xc(),Qc(),eh=[null],g(Zc,"Selection"),g(Jc,"selection"),g(th,"selection_selection"),Zc.prototype=Jc.prototype={constructor:Zc,select:So,selectAll:No,selectChild:zo,selectChildren:Yo,filter:Vo,data:sl,enter:Zo,exit:cl,join:ul,merge:pl,selection:th,order:gl,sort:ml,call:kl,nodes:Tl,node:_l,size:Cl,empty:Al,each:Ll,attr:Bl,style:Yl,property:Ql,classed:oc,text:dc,html:mc,raise:kc,lower:wc,append:Sc,insert:Ac,remove:Rc,clone:Mc,datum:Pc,on:Wc,dispatch:Vc,[Symbol.iterator]:Kc},rh=Jc}));function nh(t){return"string"==typeof t?new Zc([[document.querySelector(t)]],[document.documentElement]):new Zc([[t]],eh)}var ah=y((()=>{ih(),g(nh,"default")})),sh=y((()=>{Po(),mo(),ah(),ih(),_o(),Ro(),Hl()})),oh=y((()=>{}));function lh(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ch(t,e){var r=Object.create(t.prototype);for(var i in e)r[i]=e[i];return r}var hh=y((()=>{g(lh,"default"),g(ch,"extend")}));function uh(){}function dh(){return this.rgb().formatHex()}function ph(){return this.rgb().formatHex8()}function fh(){return $h(this).formatHsl()}function gh(){return this.rgb().formatRgb()}function yh(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=zh.exec(t))?(r=e[1].length,e=parseInt(e[1],16),6===r?mh(e):3===r?new vh(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===r?xh(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===r?xh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=jh.exec(t))?new vh(e[1],e[2],e[3],1):(e=Uh.exec(t))?new vh(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Wh.exec(t))?xh(e[1],e[2],e[3],e[4]):(e=qh.exec(t))?xh(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Yh.exec(t))?Ah(e[1],e[2]/100,e[3]/100,1):(e=Gh.exec(t))?Ah(e[1],e[2]/100,e[3]/100,e[4]):Hh.hasOwnProperty(t)?mh(Hh[t]):"transparent"===t?new vh(NaN,NaN,NaN,0):null}function mh(t){return new vh(t>>16&255,t>>8&255,255&t,1)}function xh(t,e,r,i){return i<=0&&(t=e=r=NaN),new vh(t,e,r,i)}function bh(t){return t instanceof uh||(t=yh(t)),t?new vh((t=t.rgb()).r,t.g,t.b,t.opacity):new vh}function kh(t,e,r,i){return 1===arguments.length?bh(t):new vh(t,e,r,i??1)}function vh(t,e,r,i){this.r=+t,this.g=+e,this.b=+r,this.opacity=+i}function Th(){return`#${Eh(this.r)}${Eh(this.g)}${Eh(this.b)}`}function wh(){return`#${Eh(this.r)}${Eh(this.g)}${Eh(this.b)}${Eh(255*(isNaN(this.opacity)?1:this.opacity))}`}function _h(){let t=Sh(this.opacity);return`${1===t?"rgb(":"rgba("}${Ch(this.r)}, ${Ch(this.g)}, ${Ch(this.b)}${1===t?")":`, ${t})`}`}function Sh(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ch(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Eh(t){return((t=Ch(t))<16?"0":"")+t.toString(16)}function Ah(t,e,r,i){return i<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Rh(t,e,r,i)}function $h(t){if(t instanceof Rh)return new Rh(t.h,t.s,t.l,t.opacity);if(t instanceof uh||(t=yh(t)),!t)return new Rh;if(t instanceof Rh)return t;var e=(t=t.rgb()).r/255,r=t.g/255,i=t.b/255,n=Math.min(e,r,i),a=Math.max(e,r,i),s=NaN,o=a-n,l=(a+n)/2;return o?(s=e===a?(r-i)/o+6*(r<i):r===a?(i-e)/o+2:(e-r)/o+4,o/=l<.5?a+n:2-a-n,s*=60):o=l>0&&l<1?0:s,new Rh(s,o,l,t.opacity)}function Lh(t,e,r,i){return 1===arguments.length?$h(t):new Rh(t,e,r,i??1)}function Rh(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}function Ih(t){return(t=(t||0)%360)<0?t+360:t}function Nh(t){return Math.max(0,Math.min(1,t||0))}function Dh(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}var Mh,Oh,Ph,Bh,Fh,zh,jh,Uh,Wh,qh,Yh,Gh,Hh,Vh,Xh,Kh=y((()=>{hh(),g(uh,"Color"),Oh=1/(Mh=.7),Ph="\\s*([+-]?\\d+)\\s*",Bh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",zh=/^#([0-9a-f]{3,8})$/,jh=new RegExp(`^rgb\\(${Ph},${Ph},${Ph}\\)$`),Uh=new RegExp(`^rgb\\(${Fh},${Fh},${Fh}\\)$`),Wh=new RegExp(`^rgba\\(${Ph},${Ph},${Ph},${Bh}\\)$`),qh=new RegExp(`^rgba\\(${Fh},${Fh},${Fh},${Bh}\\)$`),Yh=new RegExp(`^hsl\\(${Bh},${Fh},${Fh}\\)$`),Gh=new RegExp(`^hsla\\(${Bh},${Fh},${Fh},${Bh}\\)$`),Hh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},lh(uh,yh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:dh,formatHex:dh,formatHex8:ph,formatHsl:fh,formatRgb:gh,toString:gh}),g(dh,"color_formatHex"),g(ph,"color_formatHex8"),g(fh,"color_formatHsl"),g(gh,"color_formatRgb"),g(yh,"color"),g(mh,"rgbn"),g(xh,"rgba"),g(bh,"rgbConvert"),g(kh,"rgb"),g(vh,"Rgb"),lh(vh,kh,ch(uh,{brighter(t){return t=null==t?Oh:Math.pow(Oh,t),new vh(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Mh:Math.pow(Mh,t),new vh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new vh(Ch(this.r),Ch(this.g),Ch(this.b),Sh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Th,formatHex:Th,formatHex8:wh,formatRgb:_h,toString:_h})),g(Th,"rgb_formatHex"),g(wh,"rgb_formatHex8"),g(_h,"rgb_formatRgb"),g(Sh,"clampa"),g(Ch,"clampi"),g(Eh,"hex"),g(Ah,"hsla"),g($h,"hslConvert"),g(Lh,"hsl"),g(Rh,"Hsl"),lh(Rh,Lh,ch(uh,{brighter(t){return t=null==t?Oh:Math.pow(Oh,t),new Rh(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Mh:Math.pow(Mh,t),new Rh(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,n=2*r-i;return new vh(Dh(t>=240?t-240:t+120,n,i),Dh(t,n,i),Dh(t<120?t+240:t-120,n,i),this.opacity)},clamp(){return new Rh(Ih(this.h),Nh(this.s),Nh(this.l),Sh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=Sh(this.opacity);return`${1===t?"hsl(":"hsla("}${Ih(this.h)}, ${100*Nh(this.s)}%, ${100*Nh(this.l)}%${1===t?")":`, ${t})`}`}})),g(Ih,"clamph"),g(Nh,"clampt"),g(Dh,"hsl2rgb")})),Qh=y((()=>{Vh=Math.PI/180,Xh=180/Math.PI}));function Zh(t){if(t instanceof tu)return new tu(t.l,t.a,t.b,t.opacity);if(t instanceof ou)return lu(t);t instanceof vh||(t=bh(t));var e,r,i=nu(t.r),n=nu(t.g),a=nu(t.b),s=eu((.2225045*i+.7168786*n+.0606169*a)/hu);return i===n&&n===a?e=r=s:(e=eu((.4360747*i+.3850649*n+.1430804*a)/cu),r=eu((.0139322*i+.0971045*n+.7141733*a)/uu)),new tu(116*s-16,500*(e-s),200*(s-r),t.opacity)}function Jh(t,e,r,i){return 1===arguments.length?Zh(t):new tu(t,e,r,i??1)}function tu(t,e,r,i){this.l=+t,this.a=+e,this.b=+r,this.opacity=+i}function eu(t){return t>gu?Math.pow(t,1/3):t/fu+du}function ru(t){return t>pu?t*t*t:fu*(t-du)}function iu(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function nu(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function au(t){if(t instanceof ou)return new ou(t.h,t.c,t.l,t.opacity);if(t instanceof tu||(t=Zh(t)),0===t.a&&0===t.b)return new ou(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Xh;return new ou(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function su(t,e,r,i){return 1===arguments.length?au(t):new ou(t,e,r,i??1)}function ou(t,e,r,i){this.h=+t,this.c=+e,this.l=+r,this.opacity=+i}function lu(t){if(isNaN(t.h))return new tu(t.l,0,0,t.opacity);var e=t.h*Vh;return new tu(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}var cu,hu,uu,du,pu,fu,gu,yu=y((()=>{hh(),Kh(),Qh(),cu=.96422,hu=1,uu=.82521,du=4/29,fu=3*(pu=6/29)*pu,gu=pu*pu*pu,g(Zh,"labConvert"),g(Jh,"lab"),g(tu,"Lab"),lh(tu,Jh,ch(uh,{brighter(t){return new tu(this.l+18*(t??1),this.a,this.b,this.opacity)},darker(t){return new tu(this.l-18*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,r=isNaN(this.b)?t:t-this.b/200;return new vh(iu(3.1338561*(e=cu*ru(e))-1.6168667*(t=hu*ru(t))-.4906146*(r=uu*ru(r))),iu(-.9787684*e+1.9161415*t+.033454*r),iu(.0719453*e-.2289914*t+1.4052427*r),this.opacity)}})),g(eu,"xyz2lab"),g(ru,"lab2xyz"),g(iu,"lrgb2rgb"),g(nu,"rgb2lrgb"),g(au,"hclConvert"),g(su,"hcl"),g(ou,"Hcl"),g(lu,"hcl2lab"),lh(ou,su,ch(uh,{brighter(t){return new ou(this.h,this.c,this.l+18*(t??1),this.opacity)},darker(t){return new ou(this.h,this.c,this.l-18*(t??1),this.opacity)},rgb(){return lu(this).rgb()}}))})),mu=y((()=>{Kh(),yu()}));function xu(t,e,r,i,n){var a=t*t,s=a*t;return((1-3*t+3*a-s)*e+(4-6*a+3*s)*r+(1+3*t+3*a-3*s)*i+s*n)/6}function bu(t){var e=t.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),n=t[i],a=t[i+1],s=i>0?t[i-1]:2*n-a,o=i<e-1?t[i+2]:2*a-n;return xu((r-i/e)*e,s,n,a,o)}}var ku=y((()=>{g(xu,"basis"),g(bu,"default")}));function vu(t){var e=t.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*e),n=t[(i+e-1)%e],a=t[i%e],s=t[(i+1)%e],o=t[(i+2)%e];return xu((r-i/e)*e,n,a,s,o)}}var Tu,wu=y((()=>{ku(),g(vu,"default")})),_u=y((()=>{Tu=g((t=>()=>t),"default")}));function Su(t,e){return function(r){return t+r*e}}function Cu(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(i){return Math.pow(t+i*e,r)}}function Eu(t,e){var r=e-t;return r?Su(t,r>180||r<-180?r-360*Math.round(r/360):r):Tu(isNaN(t)?e:t)}function Au(t){return 1==(t=+t)?$u:function(e,r){return r-e?Cu(e,r,t):Tu(isNaN(e)?r:e)}}function $u(t,e){var r=e-t;return r?Su(t,r):Tu(isNaN(t)?e:t)}var Lu=y((()=>{_u(),g(Su,"linear"),g(Cu,"exponential"),g(Eu,"hue"),g(Au,"gamma"),g($u,"nogamma")}));function Ru(t){return function(e){var r,i,n=e.length,a=new Array(n),s=new Array(n),o=new Array(n);for(r=0;r<n;++r)i=kh(e[r]),a[r]=i.r||0,s[r]=i.g||0,o[r]=i.b||0;return a=t(a),s=t(s),o=t(o),i.opacity=1,function(t){return i.r=a(t),i.g=s(t),i.b=o(t),i+""}}}var Iu,Nu=y((()=>{mu(),ku(),wu(),Lu(),Iu=g((function t(e){var r=Au(e);function i(t,e){var i=r((t=kh(t)).r,(e=kh(e)).r),n=r(t.g,e.g),a=r(t.b,e.b),s=$u(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=n(e),t.b=a(e),t.opacity=s(e),t+""}}return g(i,"rgb"),i.gamma=t,i}),"rgbGamma")(1),g(Ru,"rgbSpline"),Ru(bu),Ru(vu)}));function Du(t,e){e||(e=[]);var r,i=t?Math.min(e.length,t.length):0,n=e.slice();return function(a){for(r=0;r<i;++r)n[r]=t[r]*(1-a)+e[r]*a;return n}}function Mu(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}var Ou=y((()=>{g(Du,"default"),g(Mu,"isNumberArray")}));function Pu(t,e){var r,i=e?e.length:0,n=t?Math.min(i,t.length):0,a=new Array(n),s=new Array(i);for(r=0;r<n;++r)a[r]=Qu(t[r],e[r]);for(;r<i;++r)s[r]=e[r];return function(t){for(r=0;r<n;++r)s[r]=a[r](t);return s}}var Bu=y((()=>{Zu(),g(Pu,"genericArray")}));function Fu(t,e){var r=new Date;return t=+t,e=+e,function(i){return r.setTime(t*(1-i)+e*i),r}}var zu=y((()=>{g(Fu,"default")}));function ju(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var Uu=y((()=>{g(ju,"default")}));function Wu(t,e){var r,i={},n={};for(r in(null===t||"object"!=typeof t)&&(t={}),(null===e||"object"!=typeof e)&&(e={}),e)r in t?i[r]=Qu(t[r],e[r]):n[r]=e[r];return function(t){for(r in i)n[r]=i[r](t);return n}}var qu=y((()=>{Zu(),g(Wu,"default")}));function Yu(t){return function(){return t}}function Gu(t){return function(e){return t(e)+""}}function Hu(t,e){var r,i,n,a=Vu.lastIndex=Xu.lastIndex=0,s=-1,o=[],l=[];for(t+="",e+="";(r=Vu.exec(t))&&(i=Xu.exec(e));)(n=i.index)>a&&(n=e.slice(a,n),o[s]?o[s]+=n:o[++s]=n),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,l.push({i:s,x:ju(r,i)})),a=Xu.lastIndex;return a<e.length&&(n=e.slice(a),o[s]?o[s]+=n:o[++s]=n),o.length<2?l[0]?Gu(l[0].x):Yu(e):(e=l.length,function(t){for(var r,i=0;i<e;++i)o[(r=l[i]).i]=r.x(t);return o.join("")})}var Vu,Xu,Ku=y((()=>{Uu(),Vu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xu=new RegExp(Vu.source,"g"),g(Yu,"zero"),g(Gu,"one"),g(Hu,"default")}));function Qu(t,e){var r,i=typeof e;return null==e||"boolean"===i?Tu(e):("number"===i?ju:"string"===i?(r=yh(e))?(e=r,Iu):Hu:e instanceof yh?Iu:e instanceof Date?Fu:Mu(e)?Du:Array.isArray(e)?Pu:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Wu:ju)(t,e)}var Zu=y((()=>{mu(),Nu(),Bu(),zu(),Uu(),qu(),Ku(),_u(),Ou(),g(Qu,"default")}));function Ju(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var td=y((()=>{g(Ju,"default")}));function ed(t,e,r,i,n,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*r+e*i)&&(r-=t*l,i-=e*l),(o=Math.sqrt(r*r+i*i))&&(r/=o,i/=o,l/=o),t*i<e*r&&(t=-t,e=-e,l=-l,s=-s),{translateX:n,translateY:a,rotate:Math.atan2(e,t)*rd,skewX:Math.atan(l)*rd,scaleX:s,scaleY:o}}var rd,id,nd=y((()=>{rd=180/Math.PI,id={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},g(ed,"default")}));function ad(t){let e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?id:ed(e.a,e.b,e.c,e.d,e.e,e.f)}function sd(t){return null==t?id:(od||(od=document.createElementNS("http://www.w3.org/2000/svg","g")),od.setAttribute("transform",t),(t=od.transform.baseVal.consolidate())?ed((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):id)}var od,ld=y((()=>{nd(),g(ad,"parseCss"),g(sd,"parseSvg")}));function cd(t,e,r,i){function n(t){return t.length?t.pop()+" ":""}function a(t,i,n,a,s,o){if(t!==n||i!==a){var l=s.push("translate(",null,e,null,r);o.push({i:l-4,x:ju(t,n)},{i:l-2,x:ju(i,a)})}else(n||a)&&s.push("translate("+n+e+a+r)}function s(t,e,r,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:r.push(n(r)+"rotate(",null,i)-2,x:ju(t,e)})):e&&r.push(n(r)+"rotate("+e+i)}function o(t,e,r,a){t!==e?a.push({i:r.push(n(r)+"skewX(",null,i)-2,x:ju(t,e)}):e&&r.push(n(r)+"skewX("+e+i)}function l(t,e,r,i,a,s){if(t!==r||e!==i){var o=a.push(n(a)+"scale(",null,",",null,")");s.push({i:o-4,x:ju(t,r)},{i:o-2,x:ju(e,i)})}else(1!==r||1!==i)&&a.push(n(a)+"scale("+r+","+i+")")}return g(n,"pop"),g(a,"translate"),g(s,"rotate"),g(o,"skewX"),g(l,"scale"),function(e,r){var i=[],n=[];return e=t(e),r=t(r),a(e.translateX,e.translateY,r.translateX,r.translateY,i,n),s(e.rotate,r.rotate,i,n),o(e.skewX,r.skewX,i,n),l(e.scaleX,e.scaleY,r.scaleX,r.scaleY,i,n),e=r=null,function(t){for(var e,r=-1,a=n.length;++r<a;)i[(e=n[r]).i]=e.x(t);return i.join("")}}}var hd,ud,dd=y((()=>{Uu(),ld(),g(cd,"interpolateTransform"),hd=cd(ad,"px, ","px)","deg)"),ud=cd(sd,", ",")",")")}));function pd(t){return function(e,r){var i=t((e=su(e)).h,(r=su(r)).h),n=$u(e.c,r.c),a=$u(e.l,r.l),s=$u(e.opacity,r.opacity);return function(t){return e.h=i(t),e.c=n(t),e.l=a(t),e.opacity=s(t),e+""}}}var fd,gd=y((()=>{mu(),Lu(),g(pd,"hcl"),fd=pd(Eu),pd($u)})),yd=y((()=>{Zu(),Uu(),td(),Ku(),dd(),Nu(),gd()}));function md(){return Nd||(Od(xd),Nd=Md.now()+Dd)}function xd(){Nd=0}function bd(){this._call=this._time=this._next=null}function kd(t,e,r){var i=new bd;return i.restart(t,e,r),i}function vd(){md(),++Cd;for(var t,e=Ld;e;)(t=Nd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Cd}function Td(){Nd=(Id=Md.now())+Dd,Cd=Ed=0;try{vd()}finally{Cd=0,_d(),Nd=0}}function wd(){var t=Md.now(),e=t-Id;e>$d&&(Dd-=e,Id=t)}function _d(){for(var t,e,r=Ld,i=1/0;r;)r._call?(i>r._time&&(i=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:Ld=e);Rd=t,Sd(i)}function Sd(t){Cd||(Ed&&(Ed=clearTimeout(Ed)),t-Nd>24?(t<1/0&&(Ed=setTimeout(Td,t-Md.now()-Dd)),Ad&&(Ad=clearInterval(Ad))):(Ad||(Id=Md.now(),Ad=setInterval(wd,$d)),Cd=1,Od(Td)))}var Cd,Ed,Ad,$d,Ld,Rd,Id,Nd,Dd,Md,Od,Pd=y((()=>{Cd=0,Ed=0,Ad=0,$d=1e3,Id=0,Nd=0,Dd=0,Md="object"==typeof performance&&performance.now?performance:Date,Od="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)},g(md,"now"),g(xd,"clearNow"),g(bd,"Timer"),bd.prototype=kd.prototype={constructor:bd,restart:g((function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?md():+r)+(null==e?0:+e),!this._next&&Rd!==this&&(Rd?Rd._next=this:Ld=this,Rd=this),this._call=t,this._time=r,Sd()}),"restart"),stop:g((function(){this._call&&(this._call=null,this._time=1/0,Sd())}),"stop")},g(kd,"timer"),g(vd,"timerFlush"),g(Td,"wake"),g(wd,"poke"),g(_d,"nap"),g(Sd,"sleep")}));function Bd(t,e,r){var i=new bd;return e=null==e?0:+e,i.restart((r=>{i.stop(),t(r+e)}),e,r),i}var Fd=y((()=>{Pd(),g(Bd,"default")})),zd=y((()=>{Pd(),Fd()}));function jd(t,e,r,i,n,a){var s=t.__transition;if(s){if(r in s)return}else t.__transition={};Yd(t,r,{name:e,index:i,group:n,on:Gd,tween:Hd,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Vd})}function Ud(t,e){var r=qd(t,e);if(r.state>Vd)throw new Error("too late; already scheduled");return r}function Wd(t,e){var r=qd(t,e);if(r.state>Qd)throw new Error("too late; already running");return r}function qd(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Yd(t,e,r){var i,n=t.__transition;function a(t){r.state=Xd,r.timer.restart(s,r.delay,r.time),r.delay<=t&&s(t-r.delay)}function s(a){var c,h,u,d;if(r.state!==Xd)return l();for(c in n)if((d=n[c]).name===r.name){if(d.state===Qd)return Bd(s);d.state===Zd?(d.state=tp,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete n[c]):+c<e&&(d.state=tp,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete n[c])}if(Bd((function(){r.state===Qd&&(r.state=Zd,r.timer.restart(o,r.delay,r.time),o(a))})),r.state=Kd,r.on.call("start",t,t.__data__,r.index,r.group),r.state===Kd){for(r.state=Qd,i=new Array(u=r.tween.length),c=0,h=-1;c<u;++c)(d=r.tween[c].value.call(t,t.__data__,r.index,r.group))&&(i[++h]=d);i.length=h+1}}function o(e){for(var n=e<r.duration?r.ease.call(null,e/r.duration):(r.timer.restart(l),r.state=Jd,1),a=-1,s=i.length;++a<s;)i[a].call(t,n);r.state===Jd&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){for(var i in r.state=tp,r.timer.stop(),delete n[e],n)return;delete t.__transition}n[e]=r,r.timer=kd(a,0,r.time),g(a,"schedule"),g(s,"start"),g(o,"tick"),g(l,"stop")}var Gd,Hd,Vd,Xd,Kd,Qd,Zd,Jd,tp,ep=y((()=>{fo(),zd(),Gd=co("start","end","cancel","interrupt"),Hd=[],Vd=0,Xd=1,Kd=2,Qd=3,Zd=4,Jd=5,tp=6,g(jd,"default"),g(Ud,"init"),g(Wd,"set"),g(qd,"get"),g(Yd,"create")}));function rp(t,e){var r,i,n,a=t.__transition,s=!0;if(a){for(n in e=null==e?null:e+"",a)(r=a[n]).name===e?(i=r.state>Kd&&r.state<Jd,r.state=tp,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete a[n]):s=!1;s&&delete t.__transition}}var ip=y((()=>{ep(),g(rp,"default")}));function np(t){return this.each((function(){rp(this,t)}))}var ap=y((()=>{ip(),g(np,"default")}));function sp(t,e){var r,i;return function(){var n=Wd(this,t),a=n.tween;if(a!==r)for(var s=0,o=(i=r=a).length;s<o;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}n.tween=i}}function op(t,e,r){var i,n;if("function"!=typeof r)throw new Error;return function(){var a=Wd(this,t),s=a.tween;if(s!==i){n=(i=s).slice();for(var o={name:e,value:r},l=0,c=n.length;l<c;++l)if(n[l].name===e){n[l]=o;break}l===c&&n.push(o)}a.tween=n}}function lp(t,e){var r=this._id;if(t+="",arguments.length<2){for(var i,n=qd(this.node(),r).tween,a=0,s=n.length;a<s;++a)if((i=n[a]).name===t)return i.value;return null}return this.each((null==e?sp:op)(r,t,e))}function cp(t,e,r){var i=t._id;return t.each((function(){var t=Wd(this,i);(t.value||(t.value={}))[e]=r.apply(this,arguments)})),function(t){return qd(t,i).value[e]}}var hp=y((()=>{ep(),g(sp,"tweenRemove"),g(op,"tweenFunction"),g(lp,"default"),g(cp,"tweenValue")}));function up(t,e){var r;return("number"==typeof e?ju:e instanceof yh?Iu:(r=yh(e))?(e=r,Iu):Hu)(t,e)}var dp=y((()=>{mu(),yd(),g(up,"default")}));function pp(t){return function(){this.removeAttribute(t)}}function fp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gp(t,e,r){var i,n,a=r+"";return function(){var s=this.getAttribute(t);return s===a?null:s===i?n:n=e(i=s,r)}}function yp(t,e,r){var i,n,a=r+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===a?null:s===i?n:n=e(i=s,r)}}function mp(t,e,r){var i,n,a;return function(){var s,o,l=r(this);return null==l?void this.removeAttribute(t):(s=this.getAttribute(t))===(o=l+"")?null:s===i&&o===n?a:(n=o,a=e(i=s,l))}}function xp(t,e,r){var i,n,a;return function(){var s,o,l=r(this);return null==l?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local))===(o=l+"")?null:s===i&&o===n?a:(n=o,a=e(i=s,l))}}function bp(t,e){var r=yo(t),i="transform"===r?ud:up;return this.attrTween(t,"function"==typeof e?(r.local?xp:mp)(r,i,cp(this,"attr."+t,e)):null==e?(r.local?fp:pp)(r):(r.local?yp:gp)(r,i,e))}var kp=y((()=>{yd(),sh(),hp(),dp(),g(pp,"attrRemove"),g(fp,"attrRemoveNS"),g(gp,"attrConstant"),g(yp,"attrConstantNS"),g(mp,"attrFunction"),g(xp,"attrFunctionNS"),g(bp,"default")}));function vp(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Tp(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function wp(t,e){var r,i;function n(){var n=e.apply(this,arguments);return n!==i&&(r=(i=n)&&Tp(t,n)),r}return g(n,"tween"),n._value=e,n}function _p(t,e){var r,i;function n(){var n=e.apply(this,arguments);return n!==i&&(r=(i=n)&&vp(t,n)),r}return g(n,"tween"),n._value=e,n}function Sp(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;var i=yo(t);return this.tween(r,(i.local?wp:_p)(i,e))}var Cp=y((()=>{sh(),g(vp,"attrInterpolate"),g(Tp,"attrInterpolateNS"),g(wp,"attrTweenNS"),g(_p,"attrTween"),g(Sp,"default")}));function Ep(t,e){return function(){Ud(this,t).delay=+e.apply(this,arguments)}}function Ap(t,e){return e=+e,function(){Ud(this,t).delay=e}}function $p(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ep:Ap)(e,t)):qd(this.node(),e).delay}var Lp=y((()=>{ep(),g(Ep,"delayFunction"),g(Ap,"delayConstant"),g($p,"default")}));function Rp(t,e){return function(){Wd(this,t).duration=+e.apply(this,arguments)}}function Ip(t,e){return e=+e,function(){Wd(this,t).duration=e}}function Np(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Rp:Ip)(e,t)):qd(this.node(),e).duration}var Dp=y((()=>{ep(),g(Rp,"durationFunction"),g(Ip,"durationConstant"),g(Np,"default")}));function Mp(t,e){if("function"!=typeof e)throw new Error;return function(){Wd(this,t).ease=e}}function Op(t){var e=this._id;return arguments.length?this.each(Mp(e,t)):qd(this.node(),e).ease}var Pp=y((()=>{ep(),g(Mp,"easeConstant"),g(Op,"default")}));function Bp(t,e){return function(){var r=e.apply(this,arguments);if("function"!=typeof r)throw new Error;Wd(this,t).ease=r}}function Fp(t){if("function"!=typeof t)throw new Error;return this.each(Bp(this._id,t))}var zp=y((()=>{ep(),g(Bp,"easeVarying"),g(Fp,"default")}));function jp(t){"function"!=typeof t&&(t=Mo(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var a,s=e[n],o=s.length,l=i[n]=[],c=0;c<o;++c)(a=s[c])&&t.call(a,a.__data__,c,s)&&l.push(a);return new $f(i,this._parents,this._name,this._id)}var Up=y((()=>{sh(),Df(),g(jp,"default")}));function Wp(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,i=e.length,n=r.length,a=Math.min(i,n),s=new Array(i),o=0;o<a;++o)for(var l,c=e[o],h=r[o],u=c.length,d=s[o]=new Array(u),p=0;p<u;++p)(l=c[p]||h[p])&&(d[p]=l);for(;o<i;++o)s[o]=e[o];return new $f(s,this._parents,this._name,this._id)}var qp=y((()=>{Df(),g(Wp,"default")}));function Yp(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}function Gp(t,e,r){var i,n,a=Yp(e)?Ud:Wd;return function(){var s=a(this,t),o=s.on;o!==i&&(n=(i=o).copy()).on(e,r),s.on=n}}function Hp(t,e){var r=this._id;return arguments.length<2?qd(this.node(),r).on.on(t):this.each(Gp(r,t,e))}var Vp=y((()=>{ep(),g(Yp,"start"),g(Gp,"onFunction"),g(Hp,"default")}));function Xp(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Kp(){return this.on("end.remove",Xp(this._id))}var Qp=y((()=>{g(Xp,"removeFunction"),g(Kp,"default")}));function Zp(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=wo(t));for(var i=this._groups,n=i.length,a=new Array(n),s=0;s<n;++s)for(var o,l,c=i[s],h=c.length,u=a[s]=new Array(h),d=0;d<h;++d)(o=c[d])&&(l=t.call(o,o.__data__,d,c))&&("__data__"in o&&(l.__data__=o.__data__),u[d]=l,jd(u[d],e,r,d,u,qd(o,r)));return new $f(a,this._parents,e,r)}var Jp=y((()=>{sh(),Df(),ep(),g(Zp,"default")}));function tf(t){var e=this._name,r=this._id;"function"!=typeof t&&(t=Lo(t));for(var i=this._groups,n=i.length,a=[],s=[],o=0;o<n;++o)for(var l,c=i[o],h=c.length,u=0;u<h;++u)if(l=c[u]){for(var d,p=t.call(l,l.__data__,u,c),f=qd(l,r),g=0,y=p.length;g<y;++g)(d=p[g])&&jd(d,e,r,g,p,f);a.push(p),s.push(l)}return new $f(a,s,e,r)}var ef=y((()=>{sh(),Df(),ep(),g(tf,"default")}));function rf(){return new nf(this._groups,this._parents)}var nf,af=y((()=>{sh(),nf=rh.prototype.constructor,g(rf,"default")}));function sf(t,e){var r,i,n;return function(){var a=Gl(this,t),s=(this.style.removeProperty(t),Gl(this,t));return a===s?null:a===r&&s===i?n:n=e(r=a,i=s)}}function of(t){return function(){this.style.removeProperty(t)}}function lf(t,e,r){var i,n,a=r+"";return function(){var s=Gl(this,t);return s===a?null:s===i?n:n=e(i=s,r)}}function cf(t,e,r){var i,n,a;return function(){var s=Gl(this,t),o=r(this),l=o+"";return null==o&&(this.style.removeProperty(t),l=o=Gl(this,t)),s===l?null:s===i&&l===n?a:(n=l,a=e(i=s,o))}}function hf(t,e){var r,i,n,a,s="style."+e,o="end."+s;return function(){var l=Wd(this,t),c=l.on,h=null==l.value[s]?a||(a=of(e)):void 0;(c!==r||n!==h)&&(i=(r=c).copy()).on(o,n=h),l.on=i}}function uf(t,e,r){var i="transform"==(t+="")?hd:up;return null==e?this.styleTween(t,sf(t,i)).on("end.style."+t,of(t)):"function"==typeof e?this.styleTween(t,cf(t,i,cp(this,"style."+t,e))).each(hf(this._id,t)):this.styleTween(t,lf(t,i,e),r).on("end.style."+t,null)}var df=y((()=>{yd(),sh(),ep(),hp(),dp(),g(sf,"styleNull"),g(of,"styleRemove"),g(lf,"styleConstant"),g(cf,"styleFunction"),g(hf,"styleMaybeRemove"),g(uf,"default")}));function pf(t,e,r){return function(i){this.style.setProperty(t,e.call(this,i),r)}}function ff(t,e,r){var i,n;function a(){var a=e.apply(this,arguments);return a!==n&&(i=(n=a)&&pf(t,a,r)),i}return g(a,"tween"),a._value=e,a}function gf(t,e,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,ff(t,e,r??""))}var yf=y((()=>{g(pf,"styleInterpolate"),g(ff,"styleTween"),g(gf,"default")}));function mf(t){return function(){this.textContent=t}}function xf(t){return function(){var e=t(this);this.textContent=e??""}}function bf(t){return this.tween("text","function"==typeof t?xf(cp(this,"text",t)):mf(null==t?"":t+""))}var kf=y((()=>{hp(),g(mf,"textConstant"),g(xf,"textFunction"),g(bf,"default")}));function vf(t){return function(e){this.textContent=t.call(this,e)}}function Tf(t){var e,r;function i(){var i=t.apply(this,arguments);return i!==r&&(e=(r=i)&&vf(i)),e}return g(i,"tween"),i._value=t,i}function wf(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Tf(t))}var _f=y((()=>{g(vf,"textInterpolate"),g(Tf,"textTween"),g(wf,"default")}));function Sf(){for(var t=this._name,e=this._id,r=Rf(),i=this._groups,n=i.length,a=0;a<n;++a)for(var s,o=i[a],l=o.length,c=0;c<l;++c)if(s=o[c]){var h=qd(s,e);jd(s,t,r,c,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new $f(i,this._parents,t,r)}var Cf=y((()=>{Df(),ep(),g(Sf,"default")}));function Ef(){var t,e,r=this,i=r._id,n=r.size();return new Promise((function(a,s){var o={value:s},l={value:g((function(){0==--n&&a()}),"value")};r.each((function(){var r=Wd(this,i),n=r.on;n!==t&&((e=(t=n).copy())._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),r.on=e})),0===n&&a()}))}var Af=y((()=>{ep(),g(Ef,"default")}));function $f(t,e,r,i){this._groups=t,this._parents=e,this._name=r,this._id=i}function Lf(t){return rh().transition(t)}function Rf(){return++If}var If,Nf,Df=y((()=>{sh(),kp(),Cp(),Lp(),Dp(),Pp(),zp(),Up(),qp(),Vp(),Qp(),Jp(),ef(),af(),df(),yf(),kf(),_f(),Cf(),hp(),Af(),If=0,g($f,"Transition"),g(Lf,"transition"),g(Rf,"newId"),Nf=rh.prototype,$f.prototype=Lf.prototype={constructor:$f,select:Zp,selectAll:tf,selectChild:Nf.selectChild,selectChildren:Nf.selectChildren,filter:jp,merge:Wp,selection:rf,transition:Sf,call:Nf.call,nodes:Nf.nodes,node:Nf.node,size:Nf.size,empty:Nf.empty,each:Nf.each,on:Hp,attr:bp,attrTween:Sp,style:uf,styleTween:gf,text:bf,textTween:wf,remove:Kp,tween:lp,delay:$p,duration:Np,ease:Op,easeVarying:Fp,end:Ef,[Symbol.iterator]:Nf[Symbol.iterator]}}));function Mf(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Of=y((()=>{g(Mf,"cubicInOut")})),Pf=y((()=>{Of()}));function Bf(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Ff(t){var e,r;t instanceof $f?(e=t._id,t=t._name):(e=Rf(),(r=zf).time=md(),t=null==t?null:t+"");for(var i=this._groups,n=i.length,a=0;a<n;++a)for(var s,o=i[a],l=o.length,c=0;c<l;++c)(s=o[c])&&jd(s,t,e,c,o,r||Bf(s,e));return new $f(i,this._parents,t,e)}var zf,jf=y((()=>{Df(),ep(),Pf(),zd(),zf={time:null,delay:0,duration:250,ease:Mf},g(Bf,"inherit"),g(Ff,"default")})),Uf=y((()=>{sh(),ap(),jf(),rh.prototype.interrupt=np,rh.prototype.transition=Ff})),Wf=y((()=>{Uf()})),qf=y((()=>{})),Yf=y((()=>{})),Gf=y((()=>{}));function Hf(t){return[+t[0],+t[1]]}function Vf(t){return[Hf(t[0]),Hf(t[1])]}function Xf(t){return{type:t}}var Kf,Qf,Zf,Jf=y((()=>{Wf(),qf(),Yf(),Gf(),({abs:Kf,max:Qf,min:Zf}=Math),g(Hf,"number1"),g(Vf,"number2"),{name:"x",handles:["w","e"].map(Xf),input:g((function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]}),"input"),output:g((function(t){return t&&[t[0][0],t[1][0]]}),"output")},{name:"y",handles:["n","s"].map(Xf),input:g((function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]}),"input"),output:g((function(t){return t&&[t[0][1],t[1][1]]}),"output")},{name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(Xf),input:g((function(t){return null==t?null:Vf(t)}),"input"),output:g((function(t){return t}),"output")},g(Xf,"type")})),tg=y((()=>{Jf()}));function eg(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function rg(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return eg;let r=10**e;return function(t){this._+=t[0];for(let e=1,i=t.length;e<i;++e)this._+=Math.round(arguments[e]*r)/r+t[e]}}function ig(){return new lg}var ng,ag,sg,og,lg,cg=y((()=>{ng=Math.PI,og=(ag=2*ng)-(sg=1e-6),g(eg,"append"),g(rg,"appendRound"),lg=class{static{g(this,"Path")}constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?eg:rg(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,r,i){this._append`Q${+t},${+e},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,e,r,i,n,a){this._append`C${+t},${+e},${+r},${+i},${this._x1=+n},${this._y1=+a}`}arcTo(t,e,r,i,n){if(t=+t,e=+e,r=+r,i=+i,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=this._x1,s=this._y1,o=r-t,l=i-e,c=a-t,h=s-e,u=c*c+h*h;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(u>sg)if(Math.abs(h*o-l*c)>sg&&n){let d=r-a,p=i-s,f=o*o+l*l,g=d*d+p*p,y=Math.sqrt(f),m=Math.sqrt(u),x=n*Math.tan((ng-Math.acos((f+u-g)/(2*y*m)))/2),b=x/m,k=x/y;Math.abs(b-1)>sg&&this._append`L${t+b*c},${e+b*h}`,this._append`A${n},${n},0,0,${+(h*d>c*p)},${this._x1=t+k*o},${this._y1=e+k*l}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,r,i,n,a){if(t=+t,e=+e,a=!!a,(r=+r)<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),o=r*Math.sin(i),l=t+s,c=e+o,h=1^a,u=a?i-n:n-i;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>sg||Math.abs(this._y1-c)>sg)&&this._append`L${l},${c}`,r&&(u<0&&(u=u%ag+ag),u>og?this._append`A${r},${r},0,1,${h},${t-s},${e-o}A${r},${r},0,1,${h},${this._x1=l},${this._y1=c}`:u>sg&&this._append`A${r},${r},0,${+(u>=ng)},${h},${this._x1=t+r*Math.cos(n)},${this._y1=e+r*Math.sin(n)}`)}rect(t,e,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}},g(ig,"path"),ig.prototype=lg.prototype})),hg=y((()=>{cg()})),ug=y((()=>{})),dg=y((()=>{})),pg=y((()=>{})),fg=y((()=>{})),gg=y((()=>{})),yg=y((()=>{})),mg=y((()=>{}));function xg(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function bg(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,i=t.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+t.slice(r+1)]}var kg=y((()=>{g(xg,"default"),g(bg,"formatDecimalParts")}));function vg(t){return(t=bg(Math.abs(t)))?t[1]:NaN}var Tg=y((()=>{kg(),g(vg,"default")}));function wg(t,e){return function(r,i){for(var n=r.length,a=[],s=0,o=t[0],l=0;n>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(r.substring(n-=o,n+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return a.reverse().join(e)}}var _g=y((()=>{g(wg,"default")}));function Sg(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var Cg=y((()=>{g(Sg,"default")}));function Eg(t){if(!(e=$g.exec(t)))throw new Error("invalid format: "+t);var e;return new Ag({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Ag(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}var $g,Lg=y((()=>{$g=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,g(Eg,"formatSpecifier"),Eg.prototype=Ag.prototype,g(Ag,"FormatSpecifier"),Ag.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}}));function Rg(t){t:for(var e,r=t.length,i=1,n=-1;i<r;++i)switch(t[i]){case".":n=e=i;break;case"0":0===n&&(n=i),e=i;break;default:if(!+t[i])break t;n>0&&(n=0)}return n>0?t.slice(0,n)+t.slice(e+1):t}var Ig=y((()=>{g(Rg,"default")}));function Ng(t,e){var r=bg(t,e);if(!r)return t+"";var i=r[0],n=r[1],a=n-(Dg=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+bg(t,Math.max(0,e+a-1))[0]}var Dg,Mg=y((()=>{kg(),g(Ng,"default")}));function Og(t,e){var r=bg(t,e);if(!r)return t+"";var i=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")}var Pg,Bg=y((()=>{kg(),g(Og,"default")})),Fg=y((()=>{kg(),Mg(),Bg(),Pg={"%":g(((t,e)=>(100*t).toFixed(e)),"%"),b:g((t=>Math.round(t).toString(2)),"b"),c:g((t=>t+""),"c"),d:xg,e:g(((t,e)=>t.toExponential(e)),"e"),f:g(((t,e)=>t.toFixed(e)),"f"),g:g(((t,e)=>t.toPrecision(e)),"g"),o:g((t=>Math.round(t).toString(8)),"o"),p:g(((t,e)=>Og(100*t,e)),"p"),r:Og,s:Ng,X:g((t=>Math.round(t).toString(16).toUpperCase()),"X"),x:g((t=>Math.round(t).toString(16)),"x")}}));function zg(t){return t}var jg=y((()=>{g(zg,"default")}));function Ug(t){var e=void 0===t.grouping||void 0===t.thousands?zg:wg(Wg.call(t.grouping,Number),t.thousands+""),r=void 0===t.currency?"":t.currency[0]+"",i=void 0===t.currency?"":t.currency[1]+"",n=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?zg:Sg(Wg.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",o=void 0===t.minus?"−":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function c(t){var c=(t=Eg(t)).fill,h=t.align,u=t.sign,d=t.symbol,p=t.zero,f=t.width,y=t.comma,m=t.precision,x=t.trim,b=t.type;"n"===b?(y=!0,b="g"):Pg[b]||(void 0===m&&(m=12),x=!0,b="g"),(p||"0"===c&&"="===h)&&(p=!0,c="0",h="=");var k="$"===d?r:"#"===d&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",v="$"===d?i:/[%p]/.test(b)?s:"",T=Pg[b],w=/[defgprs%]/.test(b);function _(t){var r,i,s,d=k,g=v;if("c"===b)g=T(t)+g,t="";else{var _=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:T(Math.abs(t),m),x&&(t=Rg(t)),_&&0==+t&&"+"!==u&&(_=!1),d=(_?"("===u?u:o:"-"===u||"("===u?"":u)+d,g=("s"===b?qg[8+Dg/3]:"")+g+(_&&"("===u?")":""),w)for(r=-1,i=t.length;++r<i;)if(48>(s=t.charCodeAt(r))||s>57){g=(46===s?n+t.slice(r+1):t.slice(r))+g,t=t.slice(0,r);break}}y&&!p&&(t=e(t,1/0));var S=d.length+t.length+g.length,C=S<f?new Array(f-S+1).join(c):"";switch(y&&p&&(t=e(C+t,C.length?f-g.length:1/0),C=""),h){case"<":t=d+t+g+C;break;case"=":t=d+C+t+g;break;case"^":t=C.slice(0,S=C.length>>1)+d+t+g+C.slice(S);break;default:t=C+d+t+g}return a(t)}return m=void 0===m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),g(_,"format"),_.toString=function(){return t+""},_}function h(t,e){var r=c(((t=Eg(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(vg(e)/3))),n=Math.pow(10,-i),a=qg[8+i/3];return function(t){return r(n*t)+a}}return g(c,"newFormat"),g(h,"formatPrefix"),{format:c,formatPrefix:h}}var Wg,qg,Yg=y((()=>{Tg(),_g(),Cg(),Lg(),Ig(),Fg(),Mg(),jg(),Wg=Array.prototype.map,qg=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],g(Ug,"default")}));function Gg(t){return Hg=Ug(t),Vg=Hg.format,Xg=Hg.formatPrefix,Hg}var Hg,Vg,Xg,Kg=y((()=>{Yg(),Gg({thousands:",",grouping:[3],currency:["$",""]}),g(Gg,"defaultLocale")}));function Qg(t){return Math.max(0,-vg(Math.abs(t)))}var Zg=y((()=>{Tg(),g(Qg,"default")}));function Jg(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(vg(e)/3)))-vg(Math.abs(t)))}var ty=y((()=>{Tg(),g(Jg,"default")}));function ey(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,vg(e)-vg(t))+1}var ry=y((()=>{Tg(),g(ey,"default")})),iy=y((()=>{Kg(),Lg(),Zg(),ty(),ry()})),ny=y((()=>{}));function ay(t){var e=0,r=t.children,i=r&&r.length;if(i)for(;--i>=0;)e+=r[i].value;else e=1;t.value=e}function sy(){return this.eachAfter(ay)}var oy=y((()=>{g(ay,"count"),g(sy,"default")}));function ly(t,e){let r=-1;for(let i of this)t.call(e,i,++r,this);return this}var cy=y((()=>{g(ly,"default")}));function hy(t,e){for(var r,i,n=this,a=[n],s=-1;n=a.pop();)if(t.call(e,n,++s,this),r=n.children)for(i=r.length-1;i>=0;--i)a.push(r[i]);return this}var uy=y((()=>{g(hy,"default")}));function dy(t,e){for(var r,i,n,a=this,s=[a],o=[],l=-1;a=s.pop();)if(o.push(a),r=a.children)for(i=0,n=r.length;i<n;++i)s.push(r[i]);for(;a=o.pop();)t.call(e,a,++l,this);return this}var py=y((()=>{g(dy,"default")}));function fy(t,e){let r=-1;for(let i of this)if(t.call(e,i,++r,this))return i}var gy=y((()=>{g(fy,"default")}));function yy(t){return this.eachAfter((function(e){for(var r=+t(e.data)||0,i=e.children,n=i&&i.length;--n>=0;)r+=i[n].value;e.value=r}))}var my=y((()=>{g(yy,"default")}));function xy(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))}var by=y((()=>{g(xy,"default")}));function ky(t){for(var e=this,r=vy(e,t),i=[e];e!==r;)e=e.parent,i.push(e);for(var n=i.length;t!==r;)i.splice(n,0,t),t=t.parent;return i}function vy(t,e){if(t===e)return t;var r=t.ancestors(),i=e.ancestors(),n=null;for(t=r.pop(),e=i.pop();t===e;)n=t,t=r.pop(),e=i.pop();return n}var Ty=y((()=>{g(ky,"default"),g(vy,"leastCommonAncestor")}));function wy(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}var _y=y((()=>{g(wy,"default")}));function Sy(){return Array.from(this)}var Cy=y((()=>{g(Sy,"default")}));function Ey(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t}var Ay=y((()=>{g(Ey,"default")}));function $y(){var t=this,e=[];return t.each((function(r){r!==t&&e.push({source:r.parent,target:r})})),e}var Ly=y((()=>{g($y,"default")}));function*Ry(){var t,e,r,i,n=this,a=[n];do{for(t=a.reverse(),a=[];n=t.pop();)if(yield n,e=n.children)for(r=0,i=e.length;r<i;++r)a.push(e[r])}while(a.length)}var Iy=y((()=>{g(Ry,"default")}));function Ny(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Oy)):void 0===e&&(e=My);for(var r,i,n,a,s,o=new Fy(t),l=[o];r=l.pop();)if((n=e(r.data))&&(s=(n=Array.from(n)).length))for(r.children=n,a=s-1;a>=0;--a)l.push(i=n[a]=new Fy(n[a])),i.parent=r,i.depth=r.depth+1;return o.eachBefore(By)}function Dy(){return Ny(this).eachBefore(Py)}function My(t){return t.children}function Oy(t){return Array.isArray(t)?t[1]:null}function Py(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function By(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Fy(t){this.data=t,this.depth=this.height=0,this.parent=null}var zy=y((()=>{oy(),cy(),uy(),py(),gy(),my(),by(),Ty(),_y(),Cy(),Ay(),Ly(),Iy(),g(Ny,"hierarchy"),g(Dy,"node_copy"),g(My,"objectChildren"),g(Oy,"mapChildren"),g(Py,"copyData"),g(By,"computeHeight"),g(Fy,"Node"),Fy.prototype=Ny.prototype={constructor:Fy,count:sy,each:ly,eachAfter:dy,eachBefore:hy,find:fy,sum:yy,sort:xy,path:ky,ancestors:wy,descendants:Sy,leaves:Ey,links:$y,copy:Dy,[Symbol.iterator]:Ry}}));function jy(t){if("function"!=typeof t)throw new Error;return t}var Uy=y((()=>{g(jy,"required")}));function Wy(){return 0}function qy(t){return function(){return t}}var Yy=y((()=>{g(Wy,"constantZero"),g(qy,"default")}));function Gy(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}var Hy=y((()=>{g(Gy,"default")}));function Vy(t,e,r,i,n){for(var a,s=t.children,o=-1,l=s.length,c=t.value&&(i-e)/t.value;++o<l;)(a=s[o]).y0=r,a.y1=n,a.x0=e,a.x1=e+=a.value*c}var Xy=y((()=>{g(Vy,"default")}));function Ky(t,e,r,i,n){for(var a,s=t.children,o=-1,l=s.length,c=t.value&&(n-r)/t.value;++o<l;)(a=s[o]).x0=e,a.x1=i,a.y0=r,a.y1=r+=a.value*c}var Qy=y((()=>{g(Ky,"default")}));function Zy(t,e,r,i,n,a){for(var s,o,l,c,h,u,d,p,f,g,y,m=[],x=e.children,b=0,k=0,v=x.length,T=e.value;b<v;){l=n-r,c=a-i;do{h=x[k++].value}while(!h&&k<v);for(u=d=h,y=h*h*(g=Math.max(c/l,l/c)/(T*t)),f=Math.max(d/y,y/u);k<v;++k){if(h+=o=x[k].value,o<u&&(u=o),o>d&&(d=o),y=h*h*g,(p=Math.max(d/y,y/u))>f){h-=o;break}f=p}m.push(s={value:h,dice:l<c,children:x.slice(b,k)}),s.dice?Vy(s,r,i,n,T?i+=c*h/T:a):Ky(s,r,i,T?r+=l*h/T:n,a),T-=h,b=k}return m}var Jy,tm,em=y((()=>{Xy(),Qy(),Jy=(1+Math.sqrt(5))/2,g(Zy,"squarifyRatio"),tm=g((function t(e){function r(t,r,i,n,a){Zy(e,t,r,i,n,a)}return g(r,"squarify"),r.ratio=function(e){return t((e=+e)>1?e:1)},r}),"custom")(Jy)}));function rm(){var t=tm,e=!1,r=1,i=1,n=[0],a=Wy,s=Wy,o=Wy,l=Wy,c=Wy;function h(t){return t.x0=t.y0=0,t.x1=r,t.y1=i,t.eachBefore(u),n=[0],e&&t.eachBefore(Gy),t}function u(e){var r=n[e.depth],i=e.x0+r,h=e.y0+r,u=e.x1-r,d=e.y1-r;u<i&&(i=u=(i+u)/2),d<h&&(h=d=(h+d)/2),e.x0=i,e.y0=h,e.x1=u,e.y1=d,e.children&&(r=n[e.depth+1]=a(e)/2,i+=c(e)-r,h+=s(e)-r,(u-=o(e)-r)<i&&(i=u=(i+u)/2),(d-=l(e)-r)<h&&(h=d=(h+d)/2),t(e,i,h,u,d))}return g(h,"treemap"),g(u,"positionNode"),h.round=function(t){return arguments.length?(e=!!t,h):e},h.size=function(t){return arguments.length?(r=+t[0],i=+t[1],h):[r,i]},h.tile=function(e){return arguments.length?(t=jy(e),h):t},h.padding=function(t){return arguments.length?h.paddingInner(t).paddingOuter(t):h.paddingInner()},h.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:qy(+t),h):a},h.paddingOuter=function(t){return arguments.length?h.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):h.paddingTop()},h.paddingTop=function(t){return arguments.length?(s="function"==typeof t?t:qy(+t),h):s},h.paddingRight=function(t){return arguments.length?(o="function"==typeof t?t:qy(+t),h):o},h.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:qy(+t),h):l},h.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:qy(+t),h):c},h}var im=y((()=>{Hy(),em(),Uy(),Yy(),g(rm,"default")})),nm=y((()=>{zy(),im()})),am=y((()=>{})),sm=y((()=>{}));function om(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}var lm=y((()=>{g(om,"initRange")}));function cm(){var t=new ws,e=[],r=[],i=hm;function n(n){let a=t.get(n);if(void 0===a){if(i!==hm)return i;t.set(n,a=e.push(n)-1)}return r[a%r.length]}return g(n,"scale"),n.domain=function(r){if(!arguments.length)return e.slice();e=[],t=new ws;for(let i of r)t.has(i)||t.set(i,e.push(i)-1);return n},n.range=function(t){return arguments.length?(r=Array.from(t),n):r.slice()},n.unknown=function(t){return arguments.length?(i=t,n):i},n.copy=function(){return cm(e,r).unknown(i)},om.apply(n,arguments),n}var hm,um=y((()=>{Fs(),lm(),hm=Symbol("implicit"),g(cm,"ordinal")}));function dm(){var t,e,r=cm().unknown(void 0),i=r.domain,n=r.range,a=0,s=1,o=!1,l=0,c=0,h=.5;function u(){var r=i().length,u=s<a,d=u?s:a,p=u?a:s;t=(p-d)/Math.max(1,r-l+2*c),o&&(t=Math.floor(t)),d+=(p-d-t*(r-l))*h,e=t*(1-l),o&&(d=Math.round(d),e=Math.round(e));var f=Ps(r).map((function(e){return d+t*e}));return n(u?f.reverse():f)}return delete r.unknown,g(u,"rescale"),r.domain=function(t){return arguments.length?(i(t),u()):i()},r.range=function(t){return arguments.length?([a,s]=t,a=+a,s=+s,u()):[a,s]},r.rangeRound=function(t){return[a,s]=t,a=+a,s=+s,o=!0,u()},r.bandwidth=function(){return e},r.step=function(){return t},r.round=function(t){return arguments.length?(o=!!t,u()):o},r.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),u()):l},r.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),u()):l},r.paddingOuter=function(t){return arguments.length?(c=+t,u()):c},r.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),u()):h},r.copy=function(){return dm(i(),[a,s]).round(o).paddingInner(l).paddingOuter(c).align(h)},om.apply(u(),arguments)}var pm=y((()=>{Fs(),lm(),um(),g(dm,"band")}));function fm(t){return function(){return t}}var gm=y((()=>{g(fm,"constants")}));function ym(t){return+t}var mm=y((()=>{g(ym,"number")}));function xm(t){return t}function bm(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:fm(isNaN(e)?NaN:.5)}function km(t,e){var r;return t>e&&(r=t,t=e,e=r),function(r){return Math.max(t,Math.min(e,r))}}function vm(t,e,r){var i=t[0],n=t[1],a=e[0],s=e[1];return n<i?(i=bm(n,i),a=r(s,a)):(i=bm(i,n),a=r(a,s)),function(t){return a(i(t))}}function Tm(t,e,r){var i=Math.min(t.length,e.length)-1,n=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)n[s]=bm(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(e){var r=ys(t,e,1,i)-1;return a[r](n[r](e))}}function wm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function _m(){var t,e,r,i,n,a,s=Cm,o=Cm,l=Qu,c=xm;function h(){var t=Math.min(s.length,o.length);return c!==xm&&(c=km(s[0],s[t-1])),i=t>2?Tm:vm,n=a=null,u}function u(e){return null==e||isNaN(e=+e)?r:(n||(n=i(s.map(t),o,l)))(t(c(e)))}return g(h,"rescale"),g(u,"scale"),u.invert=function(r){return c(e((a||(a=i(o,s.map(t),ju)))(r)))},u.domain=function(t){return arguments.length?(s=Array.from(t,ym),h()):s.slice()},u.range=function(t){return arguments.length?(o=Array.from(t),h()):o.slice()},u.rangeRound=function(t){return o=Array.from(t),l=Ju,h()},u.clamp=function(t){return arguments.length?(c=!!t||xm,h()):c!==xm},u.interpolate=function(t){return arguments.length?(l=t,h()):l},u.unknown=function(t){return arguments.length?(r=t,u):r},function(r,i){return t=r,e=i,h()}}function Sm(){return _m()(xm,xm)}var Cm,Em=y((()=>{Fs(),yd(),gm(),mm(),Cm=[0,1],g(xm,"identity"),g(bm,"normalize"),g(km,"clamper"),g(vm,"bimap"),g(Tm,"polymap"),g(wm,"copy"),g(_m,"transformer"),g(Sm,"continuous")}));function Am(t,e,r,i){var n,a=As(t,e,r);switch((i=Eg(i??",f")).type){case"s":var s=Math.max(Math.abs(t),Math.abs(e));return null==i.precision&&!isNaN(n=Jg(a,s))&&(i.precision=n),Xg(i,s);case"":case"e":case"g":case"p":case"r":null==i.precision&&!isNaN(n=ey(a,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=n-("e"===i.type));break;case"f":case"%":null==i.precision&&!isNaN(n=Qg(a))&&(i.precision=n-2*("%"===i.type))}return Vg(i)}var $m=y((()=>{Fs(),iy(),g(Am,"tickFormat")}));function Lm(t){var e=t.domain;return t.ticks=function(t){var r=e();return Cs(r[0],r[r.length-1],t??10)},t.tickFormat=function(t,r){var i=e();return Am(i[0],i[i.length-1],t??10,r)},t.nice=function(r){null==r&&(r=10);var i,n,a=e(),s=0,o=a.length-1,l=a[s],c=a[o],h=10;for(c<l&&(n=l,l=c,c=n,n=s,s=o,o=n);h-- >0;){if((n=Es(l,c,r))===i)return a[s]=l,a[o]=c,e(a);if(n>0)l=Math.floor(l/n)*n,c=Math.ceil(c/n)*n;else{if(!(n<0))break;l=Math.ceil(l*n)/n,c=Math.floor(c*n)/n}i=n}return t},t}function Rm(){var t=Sm();return t.copy=function(){return wm(t,Rm())},om.apply(t,arguments),Lm(t)}var Im=y((()=>{Fs(),Em(),lm(),$m(),g(Lm,"linearish"),g(Rm,"linear")}));function Nm(t,e){var r,i=0,n=(t=t.slice()).length-1,a=t[i],s=t[n];return s<a&&(r=i,i=n,n=r,r=a,a=s,s=r),t[i]=e.floor(a),t[n]=e.ceil(s),t}var Dm=y((()=>{g(Nm,"nice")}));function Mm(t,e,r,i){function n(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return g(n,"interval"),n.floor=e=>(t(e=new Date(+e)),e),n.ceil=r=>(t(r=new Date(r-1)),e(r,1),t(r),r),n.round=t=>{let e=n(t),r=n.ceil(t);return t-e<r-t?e:r},n.offset=(t,r)=>(e(t=new Date(+t),null==r?1:Math.floor(r)),t),n.range=(r,i,a)=>{let s,o=[];if(r=n.ceil(r),a=null==a?1:Math.floor(a),!(r<i&&a>0))return o;do{o.push(s=new Date(+r)),e(r,a),t(r)}while(s<r&&r<i);return o},n.filter=r=>Mm((e=>{if(e>=e)for(;t(e),!r(e);)e.setTime(e-1)}),((t,i)=>{if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!r(t););else for(;--i>=0;)for(;e(t,1),!r(t););})),r&&(n.count=(e,i)=>(Om.setTime(+e),Pm.setTime(+i),t(Om),t(Pm),Math.floor(r(Om,Pm))),n.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?n.filter(i?e=>i(e)%t==0:e=>n.count(0,e)%t==0):n:null)),n}var Om,Pm,Bm,Fm,zm,jm,Um,Wm,qm,Ym,Gm,Hm=y((()=>{Om=new Date,Pm=new Date,g(Mm,"timeInterval")})),Vm=y((()=>{Hm(),(Bm=Mm((()=>{}),((t,e)=>{t.setTime(+t+e)}),((t,e)=>e-t))).every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Mm((e=>{e.setTime(Math.floor(e/t)*t)}),((e,r)=>{e.setTime(+e+r*t)}),((e,r)=>(r-e)/t)):Bm:null),Bm.range})),Xm=y((()=>{Hm(),Fm=Mm((t=>{t.setTime(t-t.getMilliseconds())}),((t,e)=>{t.setTime(+t+1e3*e)}),((t,e)=>(e-t)/1e3),(t=>t.getUTCSeconds())),Fm.range})),Km=y((()=>{Hm(),zm=Mm((t=>{t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),((t,e)=>{t.setTime(+t+6e4*e)}),((t,e)=>(e-t)/6e4),(t=>t.getMinutes())),zm.range,jm=Mm((t=>{t.setUTCSeconds(0,0)}),((t,e)=>{t.setTime(+t+6e4*e)}),((t,e)=>(e-t)/6e4),(t=>t.getUTCMinutes())),jm.range})),Qm=y((()=>{Hm(),Um=Mm((t=>{t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),((t,e)=>{t.setTime(+t+36e5*e)}),((t,e)=>(e-t)/36e5),(t=>t.getHours())),Um.range,Wm=Mm((t=>{t.setUTCMinutes(0,0,0)}),((t,e)=>{t.setTime(+t+36e5*e)}),((t,e)=>(e-t)/36e5),(t=>t.getUTCHours())),Wm.range})),Zm=y((()=>{Hm(),qm=Mm((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5),(t=>t.getDate()-1)),qm.range,Ym=Mm((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/864e5),(t=>t.getUTCDate()-1)),Ym.range,Gm=Mm((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/864e5),(t=>Math.floor(t/864e5))),Gm.range}));function Jm(t){return Mm((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5))}function tx(t){return Mm((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/6048e5))}var ex,rx,ix,nx,ax,sx,ox,lx,cx,hx,ux,dx,px,fx,gx,yx,mx,xx,bx=y((()=>{Hm(),g(Jm,"timeWeekday"),ex=Jm(0),rx=Jm(1),ix=Jm(2),nx=Jm(3),ax=Jm(4),sx=Jm(5),ox=Jm(6),ex.range,rx.range,ix.range,nx.range,ax.range,sx.range,ox.range,g(tx,"utcWeekday"),lx=tx(0),cx=tx(1),hx=tx(2),ux=tx(3),dx=tx(4),px=tx(5),fx=tx(6),lx.range,cx.range,hx.range,ux.range,dx.range,px.range,fx.range})),kx=y((()=>{Hm(),gx=Mm((t=>{t.setDate(1),t.setHours(0,0,0,0)}),((t,e)=>{t.setMonth(t.getMonth()+e)}),((t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())),(t=>t.getMonth())),gx.range,yx=Mm((t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)}),((t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())),(t=>t.getUTCMonth())),yx.range})),vx=y((()=>{Hm(),(mx=Mm((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()))).every=t=>isFinite(t=Math.floor(t))&&t>0?Mm((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,r)=>{e.setFullYear(e.getFullYear()+r*t)})):null,mx.range,(xx=Mm((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()))).every=t=>isFinite(t=Math.floor(t))&&t>0?Mm((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)})):null,xx.range}));function Tx(t,e,r,i,n,a){let s=[[Fm,1,1e3],[Fm,5,5e3],[Fm,15,15e3],[Fm,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[n,1,36e5],[n,3,108e5],[n,6,216e5],[n,12,432e5],[i,1,864e5],[i,2,1728e5],[r,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];function o(t,e,r){let i=e<t;i&&([t,e]=[e,t]);let n=r&&"function"==typeof r.range?r:l(t,e,r),a=n?n.range(t,+e+1):[];return i?a.reverse():a}function l(e,r,i){let n=Math.abs(r-e)/i,a=hs((([,,t])=>t)).right(s,n);if(a===s.length)return t.every(As(e/31536e6,r/31536e6,i));if(0===a)return Bm.every(Math.max(As(e,r,i),1));let[o,l]=s[n/s[a-1][2]<s[a][2]/n?a-1:a];return o.every(l)}return g(o,"ticks"),g(l,"tickInterval"),[o,l]}var wx,_x,Sx,Cx,Ex=y((()=>{Fs(),Vm(),Xm(),Km(),Qm(),Zm(),bx(),kx(),vx(),g(Tx,"ticker"),[wx,_x]=Tx(xx,yx,lx,Gm,Wm,jm),[Sx,Cx]=Tx(mx,gx,ex,qm,Um,zm)})),Ax=y((()=>{Vm(),Xm(),Km(),Qm(),Zm(),bx(),kx(),vx(),Ex()}));function $x(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Lx(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Rx(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function Ix(t){var e=t.dateTime,r=t.date,i=t.time,n=t.periods,a=t.days,s=t.shortDays,o=t.months,l=t.shortMonths,c=Mx(n),h=Ox(n),u=Mx(a),d=Ox(a),p=Mx(s),f=Ox(s),y=Mx(o),m=Ox(o),x=Mx(l),b=Ox(l),k={a:D,A:M,b:O,B:P,c:null,d:ib,e:ib,f:lb,g:bb,G:vb,H:nb,I:ab,j:sb,L:ob,m:cb,M:hb,p:B,q:F,Q:qb,s:Yb,S:ub,u:db,U:pb,V:gb,w:yb,W:mb,x:null,X:null,y:xb,Y:kb,Z:Tb,"%":Wb},v={a:z,A:j,b:U,B:W,c:null,d:wb,e:wb,f:Ab,g:Fb,G:jb,H:_b,I:Sb,j:Cb,L:Eb,m:$b,M:Lb,p:q,q:Y,Q:qb,s:Yb,S:Rb,u:Ib,U:Nb,V:Mb,w:Ob,W:Pb,x:null,X:null,y:Bb,Y:zb,Z:Ub,"%":Wb},T={a:E,A:A,b:$,B:L,c:R,d:Hx,e:Hx,f:Jx,g:Wx,G:Ux,H:Xx,I:Xx,j:Vx,L:Zx,m:Gx,M:Kx,p:C,q:Yx,Q:eb,s:rb,S:Qx,u:Bx,U:Fx,V:zx,w:Px,W:jx,x:I,X:N,y:Wx,Y:Ux,Z:qx,"%":tb};function w(t,e){return function(r){var i,n,a,s=[],o=-1,l=0,c=t.length;for(r instanceof Date||(r=new Date(+r));++o<c;)37===t.charCodeAt(o)&&(s.push(t.slice(l,o)),null!=(n=Gb[i=t.charAt(++o)])?i=t.charAt(++o):n="e"===i?" ":"0",(a=e[i])&&(i=a(r,n)),s.push(i),l=o+1);return s.push(t.slice(l,o)),s.join("")}}function _(t,e){return function(r){var i,n,a=Rx(1900,void 0,1);if(S(a,t,r+="",0)!=r.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(n=(i=Lx(Rx(a.y,0,1))).getUTCDay(),i=n>4||0===n?cx.ceil(i):cx(i),i=Ym.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(n=(i=$x(Rx(a.y,0,1))).getDay(),i=n>4||0===n?rx.ceil(i):rx(i),i=qm.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),n="Z"in a?Lx(Rx(a.y,0,1)).getUTCDay():$x(Rx(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(n+5)%7:a.w+7*a.U-(n+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Lx(a)):$x(a)}}function S(t,e,r,i){for(var n,a,s=0,o=e.length,l=r.length;s<o;){if(i>=l)return-1;if(37===(n=e.charCodeAt(s++))){if(n=e.charAt(s++),!(a=T[n in Gb?e.charAt(s++):n])||(i=a(t,r,i))<0)return-1}else if(n!=r.charCodeAt(i++))return-1}return i}function C(t,e,r){var i=c.exec(e.slice(r));return i?(t.p=h.get(i[0].toLowerCase()),r+i[0].length):-1}function E(t,e,r){var i=p.exec(e.slice(r));return i?(t.w=f.get(i[0].toLowerCase()),r+i[0].length):-1}function A(t,e,r){var i=u.exec(e.slice(r));return i?(t.w=d.get(i[0].toLowerCase()),r+i[0].length):-1}function $(t,e,r){var i=x.exec(e.slice(r));return i?(t.m=b.get(i[0].toLowerCase()),r+i[0].length):-1}function L(t,e,r){var i=y.exec(e.slice(r));return i?(t.m=m.get(i[0].toLowerCase()),r+i[0].length):-1}function R(t,r,i){return S(t,e,r,i)}function I(t,e,i){return S(t,r,e,i)}function N(t,e,r){return S(t,i,e,r)}function D(t){return s[t.getDay()]}function M(t){return a[t.getDay()]}function O(t){return l[t.getMonth()]}function P(t){return o[t.getMonth()]}function B(t){return n[+(t.getHours()>=12)]}function F(t){return 1+~~(t.getMonth()/3)}function z(t){return s[t.getUTCDay()]}function j(t){return a[t.getUTCDay()]}function U(t){return l[t.getUTCMonth()]}function W(t){return o[t.getUTCMonth()]}function q(t){return n[+(t.getUTCHours()>=12)]}function Y(t){return 1+~~(t.getUTCMonth()/3)}return k.x=w(r,k),k.X=w(i,k),k.c=w(e,k),v.x=w(r,v),v.X=w(i,v),v.c=w(e,v),g(w,"newFormat"),g(_,"newParse"),g(S,"parseSpecifier"),g(C,"parsePeriod"),g(E,"parseShortWeekday"),g(A,"parseWeekday"),g($,"parseShortMonth"),g(L,"parseMonth"),g(R,"parseLocaleDateTime"),g(I,"parseLocaleDate"),g(N,"parseLocaleTime"),g(D,"formatShortWeekday"),g(M,"formatWeekday"),g(O,"formatShortMonth"),g(P,"formatMonth"),g(B,"formatPeriod"),g(F,"formatQuarter"),g(z,"formatUTCShortWeekday"),g(j,"formatUTCWeekday"),g(U,"formatUTCShortMonth"),g(W,"formatUTCMonth"),g(q,"formatUTCPeriod"),g(Y,"formatUTCQuarter"),{format:g((function(t){var e=w(t+="",k);return e.toString=function(){return t},e}),"format"),parse:g((function(t){var e=_(t+="",!1);return e.toString=function(){return t},e}),"parse"),utcFormat:g((function(t){var e=w(t+="",v);return e.toString=function(){return t},e}),"utcFormat"),utcParse:g((function(t){var e=_(t+="",!0);return e.toString=function(){return t},e}),"utcParse")}}function Nx(t,e,r){var i=t<0?"-":"",n=(i?-t:t)+"",a=n.length;return i+(a<r?new Array(r-a+1).join(e)+n:n)}function Dx(t){return t.replace(Xb,"\\$&")}function Mx(t){return new RegExp("^(?:"+t.map(Dx).join("|")+")","i")}function Ox(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Px(t,e,r){var i=Hb.exec(e.slice(r,r+1));return i?(t.w=+i[0],r+i[0].length):-1}function Bx(t,e,r){var i=Hb.exec(e.slice(r,r+1));return i?(t.u=+i[0],r+i[0].length):-1}function Fx(t,e,r){var i=Hb.exec(e.slice(r,r+2));return i?(t.U=+i[0],r+i[0].length):-1}function zx(t,e,r){var i=Hb.exec(e.slice(r,r+2));return i?(t.V=+i[0],r+i[0].length):-1}function jx(t,e,r){var i=Hb.exec(e.slice(r,r+2));return i?(t.W=+i[0],r+i[0].length):-1}function Ux(t,e,r){var i=Hb.exec(e.slice(r,r+4));return i?(t.y=+i[0],r+i[0].length):-1}function Wx(t,e,r){var i=Hb.exec(e.slice(r,r+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function qx(t,e,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function Yx(t,e,r){var i=Hb.exec(e.slice(r,r+1));return i?(t.q=3*i[0]-3,r+i[0].length):-1}function Gx(t,e,r){var i=Hb.exec(e.slice(r,r+2));return i?(t.m=i[0]-1,r+i[0].length):-1}function Hx(t,e,r){var i=Hb.exec(e.slice(r,r+2));return i?(t.d=+i[0],r+i[0].length):-1}function Vx(t,e,r){var i=Hb.exec(e.slice(r,r+3));return i?(t.m=0,t.d=+i[0],r+i[0].length):-1}function Xx(t,e,r){var i=Hb.exec(e.slice(r,r+2));return i?(t.H=+i[0],r+i[0].length):-1}function Kx(t,e,r){var i=Hb.exec(e.slice(r,r+2));return i?(t.M=+i[0],r+i[0].length):-1}function Qx(t,e,r){var i=Hb.exec(e.slice(r,r+2));return i?(t.S=+i[0],r+i[0].length):-1}function Zx(t,e,r){var i=Hb.exec(e.slice(r,r+3));return i?(t.L=+i[0],r+i[0].length):-1}function Jx(t,e,r){var i=Hb.exec(e.slice(r,r+6));return i?(t.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function tb(t,e,r){var i=Vb.exec(e.slice(r,r+1));return i?r+i[0].length:-1}function eb(t,e,r){var i=Hb.exec(e.slice(r));return i?(t.Q=+i[0],r+i[0].length):-1}function rb(t,e,r){var i=Hb.exec(e.slice(r));return i?(t.s=+i[0],r+i[0].length):-1}function ib(t,e){return Nx(t.getDate(),e,2)}function nb(t,e){return Nx(t.getHours(),e,2)}function ab(t,e){return Nx(t.getHours()%12||12,e,2)}function sb(t,e){return Nx(1+qm.count(mx(t),t),e,3)}function ob(t,e){return Nx(t.getMilliseconds(),e,3)}function lb(t,e){return ob(t,e)+"000"}function cb(t,e){return Nx(t.getMonth()+1,e,2)}function hb(t,e){return Nx(t.getMinutes(),e,2)}function ub(t,e){return Nx(t.getSeconds(),e,2)}function db(t){var e=t.getDay();return 0===e?7:e}function pb(t,e){return Nx(ex.count(mx(t)-1,t),e,2)}function fb(t){var e=t.getDay();return e>=4||0===e?ax(t):ax.ceil(t)}function gb(t,e){return t=fb(t),Nx(ax.count(mx(t),t)+(4===mx(t).getDay()),e,2)}function yb(t){return t.getDay()}function mb(t,e){return Nx(rx.count(mx(t)-1,t),e,2)}function xb(t,e){return Nx(t.getFullYear()%100,e,2)}function bb(t,e){return Nx((t=fb(t)).getFullYear()%100,e,2)}function kb(t,e){return Nx(t.getFullYear()%1e4,e,4)}function vb(t,e){var r=t.getDay();return Nx((t=r>=4||0===r?ax(t):ax.ceil(t)).getFullYear()%1e4,e,4)}function Tb(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Nx(e/60|0,"0",2)+Nx(e%60,"0",2)}function wb(t,e){return Nx(t.getUTCDate(),e,2)}function _b(t,e){return Nx(t.getUTCHours(),e,2)}function Sb(t,e){return Nx(t.getUTCHours()%12||12,e,2)}function Cb(t,e){return Nx(1+Ym.count(xx(t),t),e,3)}function Eb(t,e){return Nx(t.getUTCMilliseconds(),e,3)}function Ab(t,e){return Eb(t,e)+"000"}function $b(t,e){return Nx(t.getUTCMonth()+1,e,2)}function Lb(t,e){return Nx(t.getUTCMinutes(),e,2)}function Rb(t,e){return Nx(t.getUTCSeconds(),e,2)}function Ib(t){var e=t.getUTCDay();return 0===e?7:e}function Nb(t,e){return Nx(lx.count(xx(t)-1,t),e,2)}function Db(t){var e=t.getUTCDay();return e>=4||0===e?dx(t):dx.ceil(t)}function Mb(t,e){return t=Db(t),Nx(dx.count(xx(t),t)+(4===xx(t).getUTCDay()),e,2)}function Ob(t){return t.getUTCDay()}function Pb(t,e){return Nx(cx.count(xx(t)-1,t),e,2)}function Bb(t,e){return Nx(t.getUTCFullYear()%100,e,2)}function Fb(t,e){return Nx((t=Db(t)).getUTCFullYear()%100,e,2)}function zb(t,e){return Nx(t.getUTCFullYear()%1e4,e,4)}function jb(t,e){var r=t.getUTCDay();return Nx((t=r>=4||0===r?dx(t):dx.ceil(t)).getUTCFullYear()%1e4,e,4)}function Ub(){return"+0000"}function Wb(){return"%"}function qb(t){return+t}function Yb(t){return Math.floor(+t/1e3)}var Gb,Hb,Vb,Xb,Kb=y((()=>{Ax(),g($x,"localDate"),g(Lx,"utcDate"),g(Rx,"newDate"),g(Ix,"formatLocale"),Gb={"-":"",_:" ",0:"0"},Hb=/^\s*\d+/,Vb=/^%/,Xb=/[\\^$*+?|[\]().{}]/g,g(Nx,"pad"),g(Dx,"requote"),g(Mx,"formatRe"),g(Ox,"formatLookup"),g(Px,"parseWeekdayNumberSunday"),g(Bx,"parseWeekdayNumberMonday"),g(Fx,"parseWeekNumberSunday"),g(zx,"parseWeekNumberISO"),g(jx,"parseWeekNumberMonday"),g(Ux,"parseFullYear"),g(Wx,"parseYear"),g(qx,"parseZone"),g(Yx,"parseQuarter"),g(Gx,"parseMonthNumber"),g(Hx,"parseDayOfMonth"),g(Vx,"parseDayOfYear"),g(Xx,"parseHour24"),g(Kx,"parseMinutes"),g(Qx,"parseSeconds"),g(Zx,"parseMilliseconds"),g(Jx,"parseMicroseconds"),g(tb,"parseLiteralPercent"),g(eb,"parseUnixTimestamp"),g(rb,"parseUnixTimestampSeconds"),g(ib,"formatDayOfMonth"),g(nb,"formatHour24"),g(ab,"formatHour12"),g(sb,"formatDayOfYear"),g(ob,"formatMilliseconds"),g(lb,"formatMicroseconds"),g(cb,"formatMonthNumber"),g(hb,"formatMinutes"),g(ub,"formatSeconds"),g(db,"formatWeekdayNumberMonday"),g(pb,"formatWeekNumberSunday"),g(fb,"dISO"),g(gb,"formatWeekNumberISO"),g(yb,"formatWeekdayNumberSunday"),g(mb,"formatWeekNumberMonday"),g(xb,"formatYear"),g(bb,"formatYearISO"),g(kb,"formatFullYear"),g(vb,"formatFullYearISO"),g(Tb,"formatZone"),g(wb,"formatUTCDayOfMonth"),g(_b,"formatUTCHour24"),g(Sb,"formatUTCHour12"),g(Cb,"formatUTCDayOfYear"),g(Eb,"formatUTCMilliseconds"),g(Ab,"formatUTCMicroseconds"),g($b,"formatUTCMonthNumber"),g(Lb,"formatUTCMinutes"),g(Rb,"formatUTCSeconds"),g(Ib,"formatUTCWeekdayNumberMonday"),g(Nb,"formatUTCWeekNumberSunday"),g(Db,"UTCdISO"),g(Mb,"formatUTCWeekNumberISO"),g(Ob,"formatUTCWeekdayNumberSunday"),g(Pb,"formatUTCWeekNumberMonday"),g(Bb,"formatUTCYear"),g(Fb,"formatUTCYearISO"),g(zb,"formatUTCFullYear"),g(jb,"formatUTCFullYearISO"),g(Ub,"formatUTCZone"),g(Wb,"formatLiteralPercent"),g(qb,"formatUnixTimestamp"),g(Yb,"formatUnixTimestampSeconds")}));function Qb(t){return Zb=Ix(t),Jb=Zb.format,Zb.parse,Zb.utcFormat,Zb.utcParse,Zb}var Zb,Jb,tk=y((()=>{Kb(),Qb({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),g(Qb,"defaultLocale")})),ek=y((()=>{tk()}));function rk(t){return new Date(t)}function ik(t){return t instanceof Date?+t:+new Date(+t)}function nk(t,e,r,i,n,a,s,o,l,c){var h=Sm(),u=h.invert,d=h.domain,p=c(".%L"),f=c(":%S"),y=c("%I:%M"),m=c("%I %p"),x=c("%a %d"),b=c("%b %d"),k=c("%B"),v=c("%Y");function T(t){return(l(t)<t?p:o(t)<t?f:s(t)<t?y:a(t)<t?m:i(t)<t?n(t)<t?x:b:r(t)<t?k:v)(t)}return g(T,"tickFormat"),h.invert=function(t){return new Date(u(t))},h.domain=function(t){return arguments.length?d(Array.from(t,ik)):d().map(rk)},h.ticks=function(e){var r=d();return t(r[0],r[r.length-1],e??10)},h.tickFormat=function(t,e){return null==e?T:c(e)},h.nice=function(t){var r=d();return(!t||"function"!=typeof t.range)&&(t=e(r[0],r[r.length-1],t??10)),t?d(Nm(r,t)):h},h.copy=function(){return wm(h,nk(t,e,r,i,n,a,s,o,l,c))},h}function ak(){return om.apply(nk(Sx,Cx,mx,gx,ex,qm,Um,zm,Fm,Jb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var sk=y((()=>{Ax(),ek(),Em(),lm(),Dm(),g(rk,"date"),g(ik,"number"),g(nk,"calendar"),g(ak,"time")})),ok=y((()=>{pm(),Im(),um(),sk()}));function lk(t){for(var e=t.length/6|0,r=new Array(e),i=0;i<e;)r[i]="#"+t.slice(6*i,6*++i);return r}var ck,hk=y((()=>{g(lk,"default")})),uk=y((()=>{hk(),ck=lk("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab")})),dk=y((()=>{uk()}));function pk(t){return g((function(){return t}),"constant")}var fk=y((()=>{g(pk,"default")}));function gk(t){return t>1?0:t<-1?Sk:Math.acos(t)}function yk(t){return t>=1?Ck:t<=-1?-Ck:Math.asin(t)}var mk,xk,bk,kk,vk,Tk,wk,_k,Sk,Ck,Ek,Ak=y((()=>{mk=Math.abs,xk=Math.atan2,bk=Math.cos,kk=Math.max,vk=Math.min,Tk=Math.sin,wk=Math.sqrt,_k=1e-12,Sk=Math.PI,Ck=Sk/2,Ek=2*Sk,g(gk,"acos"),g(yk,"asin")}));function $k(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(null==r)e=null;else{let t=Math.floor(r);if(!(t>=0))throw new RangeError(`invalid digits: ${r}`);e=t}return t},()=>new lg(e)}var Lk=y((()=>{hg(),g($k,"withPath")}));function Rk(t){return t.innerRadius}function Ik(t){return t.outerRadius}function Nk(t){return t.startAngle}function Dk(t){return t.endAngle}function Mk(t){return t&&t.padAngle}function Ok(t,e,r,i,n,a,s,o){var l=r-t,c=i-e,h=s-n,u=o-a,d=u*l-h*c;if(!(d*d<_k))return[t+(d=(h*(e-a)-u*(t-n))/d)*l,e+d*c]}function Pk(t,e,r,i,n,a,s){var o=t-r,l=e-i,c=(s?a:-a)/wk(o*o+l*l),h=c*l,u=-c*o,d=t+h,p=e+u,f=r+h,g=i+u,y=(d+f)/2,m=(p+g)/2,x=f-d,b=g-p,k=x*x+b*b,v=n-a,T=d*g-f*p,w=(b<0?-1:1)*wk(kk(0,v*v*k-T*T)),_=(T*b-x*w)/k,S=(-T*x-b*w)/k,C=(T*b+x*w)/k,E=(-T*x+b*w)/k,A=_-y,$=S-m,L=C-y,R=E-m;return A*A+$*$>L*L+R*R&&(_=C,S=E),{cx:_,cy:S,x01:-h,y01:-u,x11:_*(n/v-1),y11:S*(n/v-1)}}function Bk(){var t=Rk,e=Ik,r=pk(0),i=null,n=Nk,a=Dk,s=Mk,o=null,l=$k(c);function c(){var c,h,u=+t.apply(this,arguments),d=+e.apply(this,arguments),p=n.apply(this,arguments)-Ck,f=a.apply(this,arguments)-Ck,g=mk(f-p),y=f>p;if(o||(o=c=l()),d<u&&(h=d,d=u,u=h),d>_k)if(g>Ek-_k)o.moveTo(d*bk(p),d*Tk(p)),o.arc(0,0,d,p,f,!y),u>_k&&(o.moveTo(u*bk(f),u*Tk(f)),o.arc(0,0,u,f,p,y));else{var m,x,b=p,k=f,v=p,T=f,w=g,_=g,S=s.apply(this,arguments)/2,C=S>_k&&(i?+i.apply(this,arguments):wk(u*u+d*d)),E=vk(mk(d-u)/2,+r.apply(this,arguments)),A=E,$=E;if(C>_k){var L=yk(C/u*Tk(S)),R=yk(C/d*Tk(S));(w-=2*L)>_k?(v+=L*=y?1:-1,T-=L):(w=0,v=T=(p+f)/2),(_-=2*R)>_k?(b+=R*=y?1:-1,k-=R):(_=0,b=k=(p+f)/2)}var I=d*bk(b),N=d*Tk(b),D=u*bk(T),M=u*Tk(T);if(E>_k){var O,P=d*bk(k),B=d*Tk(k),F=u*bk(v),z=u*Tk(v);if(g<Sk)if(O=Ok(I,N,F,z,P,B,D,M)){var j=I-O[0],U=N-O[1],W=P-O[0],q=B-O[1],Y=1/Tk(gk((j*W+U*q)/(wk(j*j+U*U)*wk(W*W+q*q)))/2),G=wk(O[0]*O[0]+O[1]*O[1]);A=vk(E,(u-G)/(Y-1)),$=vk(E,(d-G)/(Y+1))}else A=$=0}_>_k?$>_k?(m=Pk(F,z,I,N,d,$,y),x=Pk(P,B,D,M,d,$,y),o.moveTo(m.cx+m.x01,m.cy+m.y01),$<E?o.arc(m.cx,m.cy,$,xk(m.y01,m.x01),xk(x.y01,x.x01),!y):(o.arc(m.cx,m.cy,$,xk(m.y01,m.x01),xk(m.y11,m.x11),!y),o.arc(0,0,d,xk(m.cy+m.y11,m.cx+m.x11),xk(x.cy+x.y11,x.cx+x.x11),!y),o.arc(x.cx,x.cy,$,xk(x.y11,x.x11),xk(x.y01,x.x01),!y))):(o.moveTo(I,N),o.arc(0,0,d,b,k,!y)):o.moveTo(I,N),u>_k&&w>_k?A>_k?(m=Pk(D,M,P,B,u,-A,y),x=Pk(I,N,F,z,u,-A,y),o.lineTo(m.cx+m.x01,m.cy+m.y01),A<E?o.arc(m.cx,m.cy,A,xk(m.y01,m.x01),xk(x.y01,x.x01),!y):(o.arc(m.cx,m.cy,A,xk(m.y01,m.x01),xk(m.y11,m.x11),!y),o.arc(0,0,u,xk(m.cy+m.y11,m.cx+m.x11),xk(x.cy+x.y11,x.cx+x.x11),y),o.arc(x.cx,x.cy,A,xk(x.y11,x.x11),xk(x.y01,x.x01),!y))):o.arc(0,0,u,T,v,y):o.lineTo(D,M)}else o.moveTo(0,0);if(o.closePath(),c)return o=null,c+""||null}return g(c,"arc"),c.centroid=function(){var r=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+n.apply(this,arguments)+ +a.apply(this,arguments))/2-Sk/2;return[bk(i)*r,Tk(i)*r]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:pk(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:pk(+t),c):e},c.cornerRadius=function(t){return arguments.length?(r="function"==typeof t?t:pk(+t),c):r},c.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:pk(+t),c):i},c.startAngle=function(t){return arguments.length?(n="function"==typeof t?t:pk(+t),c):n},c.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:pk(+t),c):a},c.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:pk(+t),c):s},c.context=function(t){return arguments.length?(o=t??null,c):o},c}var Fk=y((()=>{fk(),Ak(),Lk(),g(Rk,"arcInnerRadius"),g(Ik,"arcOuterRadius"),g(Nk,"arcStartAngle"),g(Dk,"arcEndAngle"),g(Mk,"arcPadAngle"),g(Ok,"intersect"),g(Pk,"cornerTangents"),g(Bk,"default")}));function zk(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}var jk=y((()=>{Array.prototype.slice,g(zk,"default")}));function Uk(t){this._context=t}function Wk(t){return new Uk(t)}var qk=y((()=>{g(Uk,"Linear"),Uk.prototype={areaStart:g((function(){this._line=0}),"areaStart"),areaEnd:g((function(){this._line=NaN}),"areaEnd"),lineStart:g((function(){this._point=0}),"lineStart"),lineEnd:g((function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:g((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}),"point")},g(Wk,"default")}));function Yk(t){return t[0]}function Gk(t){return t[1]}var Hk=y((()=>{g(Yk,"x"),g(Gk,"y")}));function Vk(t,e){var r=pk(!0),i=null,n=Wk,a=null,s=$k(o);function o(o){var l,c,h,u=(o=zk(o)).length,d=!1;for(null==i&&(a=n(h=s())),l=0;l<=u;++l)!(l<u&&r(c=o[l],l,o))===d&&((d=!d)?a.lineStart():a.lineEnd()),d&&a.point(+t(c,l,o),+e(c,l,o));if(h)return a=null,h+""||null}return t="function"==typeof t?t:void 0===t?Yk:pk(t),e="function"==typeof e?e:void 0===e?Gk:pk(e),g(o,"line"),o.x=function(e){return arguments.length?(t="function"==typeof e?e:pk(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:pk(+t),o):e},o.defined=function(t){return arguments.length?(r="function"==typeof t?t:pk(!!t),o):r},o.curve=function(t){return arguments.length?(n=t,null!=i&&(a=n(i)),o):n},o.context=function(t){return arguments.length?(null==t?i=a=null:a=n(i=t),o):i},o}var Xk=y((()=>{jk(),fk(),qk(),Lk(),Hk(),g(Vk,"default")}));function Kk(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}var Qk=y((()=>{g(Kk,"default")}));function Zk(t){return t}var Jk=y((()=>{g(Zk,"default")}));function tv(){var t=Zk,e=Kk,r=null,i=pk(0),n=pk(Ek),a=pk(0);function s(s){var o,l,c,h,u,d=(s=zk(s)).length,p=0,f=new Array(d),g=new Array(d),y=+i.apply(this,arguments),m=Math.min(Ek,Math.max(-Ek,n.apply(this,arguments)-y)),x=Math.min(Math.abs(m)/d,a.apply(this,arguments)),b=x*(m<0?-1:1);for(o=0;o<d;++o)(u=g[f[o]=o]=+t(s[o],o,s))>0&&(p+=u);for(null!=e?f.sort((function(t,r){return e(g[t],g[r])})):null!=r&&f.sort((function(t,e){return r(s[t],s[e])})),o=0,c=p?(m-d*b)/p:0;o<d;++o,y=h)l=f[o],h=y+((u=g[l])>0?u*c:0)+b,g[l]={data:s[l],index:o,value:u,startAngle:y,endAngle:h,padAngle:x};return g}return g(s,"pie"),s.value=function(e){return arguments.length?(t="function"==typeof e?e:pk(+e),s):t},s.sortValues=function(t){return arguments.length?(e=t,r=null,s):e},s.sort=function(t){return arguments.length?(r=t,e=null,s):r},s.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:pk(+t),s):i},s.endAngle=function(t){return arguments.length?(n="function"==typeof t?t:pk(+t),s):n},s.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:pk(+t),s):a},s}var ev=y((()=>{jk(),fk(),Qk(),Jk(),Ak(),g(tv,"default")}));function rv(t){return new nv(t,!0)}function iv(t){return new nv(t,!1)}var nv,av=y((()=>{nv=class{static{g(this,"Bump")}constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}},g(rv,"bumpX"),g(iv,"bumpY")}));function sv(){}var ov=y((()=>{g(sv,"default")}));function lv(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function cv(t){this._context=t}function hv(t){return new cv(t)}var uv=y((()=>{g(lv,"point"),g(cv,"Basis"),cv.prototype={areaStart:g((function(){this._line=0}),"areaStart"),areaEnd:g((function(){this._line=NaN}),"areaEnd"),lineStart:g((function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0}),"lineStart"),lineEnd:g((function(){switch(this._point){case 3:lv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:g((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lv(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}),"point")},g(hv,"default")}));function dv(t){this._context=t}function pv(t){return new dv(t)}var fv=y((()=>{ov(),uv(),g(dv,"BasisClosed"),dv.prototype={areaStart:sv,areaEnd:sv,lineStart:g((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0}),"lineStart"),lineEnd:g((function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}}),"lineEnd"),point:g((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:lv(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}),"point")},g(pv,"default")}));function gv(t){this._context=t}function yv(t){return new gv(t)}var mv=y((()=>{uv(),g(gv,"BasisOpen"),gv.prototype={areaStart:g((function(){this._line=0}),"areaStart"),areaEnd:g((function(){this._line=NaN}),"areaEnd"),lineStart:g((function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0}),"lineStart"),lineEnd:g((function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:g((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:lv(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}),"point")},g(yv,"default")}));function xv(t,e){this._basis=new cv(t),this._beta=e}var bv,kv=y((()=>{uv(),g(xv,"Bundle"),xv.prototype={lineStart:g((function(){this._x=[],this._y=[],this._basis.lineStart()}),"lineStart"),lineEnd:g((function(){var t=this._x,e=this._y,r=t.length-1;if(r>0)for(var i,n=t[0],a=e[0],s=t[r]-n,o=e[r]-a,l=-1;++l<=r;)i=l/r,this._basis.point(this._beta*t[l]+(1-this._beta)*(n+i*s),this._beta*e[l]+(1-this._beta)*(a+i*o));this._x=this._y=null,this._basis.lineEnd()}),"lineEnd"),point:g((function(t,e){this._x.push(+t),this._y.push(+e)}),"point")},bv=g((function t(e){function r(t){return 1===e?new cv(t):new xv(t,e)}return g(r,"bundle"),r.beta=function(e){return t(+e)},r}),"custom")(.85)}));function vv(t,e,r){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-r),t._x2,t._y2)}function Tv(t,e){this._context=t,this._k=(1-e)/6}var wv,_v=y((()=>{g(vv,"point"),g(Tv,"Cardinal"),Tv.prototype={areaStart:g((function(){this._line=0}),"areaStart"),areaEnd:g((function(){this._line=NaN}),"areaEnd"),lineStart:g((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0}),"lineStart"),lineEnd:g((function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:vv(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:g((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:vv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")},wv=g((function t(e){function r(t){return new Tv(t,e)}return g(r,"cardinal"),r.tension=function(e){return t(+e)},r}),"custom")(0)}));function Sv(t,e){this._context=t,this._k=(1-e)/6}var Cv,Ev=y((()=>{ov(),_v(),g(Sv,"CardinalClosed"),Sv.prototype={areaStart:sv,areaEnd:sv,lineStart:g((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0}),"lineStart"),lineEnd:g((function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}}),"lineEnd"),point:g((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:vv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")},Cv=g((function t(e){function r(t){return new Sv(t,e)}return g(r,"cardinal"),r.tension=function(e){return t(+e)},r}),"custom")(0)}));function Av(t,e){this._context=t,this._k=(1-e)/6}var $v,Lv=y((()=>{_v(),g(Av,"CardinalOpen"),Av.prototype={areaStart:g((function(){this._line=0}),"areaStart"),areaEnd:g((function(){this._line=NaN}),"areaEnd"),lineStart:g((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0}),"lineStart"),lineEnd:g((function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:g((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vv(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")},$v=g((function t(e){function r(t){return new Av(t,e)}return g(r,"cardinal"),r.tension=function(e){return t(+e)},r}),"custom")(0)}));function Rv(t,e,r){var i=t._x1,n=t._y1,a=t._x2,s=t._y2;if(t._l01_a>_k){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,n=(n*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>_k){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*c+t._x1*t._l23_2a-e*t._l12_2a)/h,s=(s*c+t._y1*t._l23_2a-r*t._l12_2a)/h}t._context.bezierCurveTo(i,n,a,s,t._x2,t._y2)}function Iv(t,e){this._context=t,this._alpha=e}var Nv,Dv=y((()=>{Ak(),_v(),g(Rv,"point"),g(Iv,"CatmullRom"),Iv.prototype={areaStart:g((function(){this._line=0}),"areaStart"),areaEnd:g((function(){this._line=NaN}),"areaEnd"),lineStart:g((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:g((function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:g((function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Rv(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")},Nv=g((function t(e){function r(t){return e?new Iv(t,e):new Tv(t,0)}return g(r,"catmullRom"),r.alpha=function(e){return t(+e)},r}),"custom")(.5)}));function Mv(t,e){this._context=t,this._alpha=e}var Ov,Pv=y((()=>{Ev(),ov(),Dv(),g(Mv,"CatmullRomClosed"),Mv.prototype={areaStart:sv,areaEnd:sv,lineStart:g((function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:g((function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}}),"lineEnd"),point:g((function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Rv(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")},Ov=g((function t(e){function r(t){return e?new Mv(t,e):new Sv(t,0)}return g(r,"catmullRom"),r.alpha=function(e){return t(+e)},r}),"custom")(.5)}));function Bv(t,e){this._context=t,this._alpha=e}var Fv,zv=y((()=>{Lv(),Dv(),g(Bv,"CatmullRomOpen"),Bv.prototype={areaStart:g((function(){this._line=0}),"areaStart"),areaEnd:g((function(){this._line=NaN}),"areaEnd"),lineStart:g((function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0}),"lineStart"),lineEnd:g((function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:g((function(t,e){if(t=+t,e=+e,this._point){var r=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Rv(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}),"point")},Fv=g((function t(e){function r(t){return e?new Bv(t,e):new Av(t,0)}return g(r,"catmullRom"),r.alpha=function(e){return t(+e)},r}),"custom")(.5)}));function jv(t){this._context=t}function Uv(t){return new jv(t)}var Wv=y((()=>{ov(),g(jv,"LinearClosed"),jv.prototype={areaStart:sv,areaEnd:sv,lineStart:g((function(){this._point=0}),"lineStart"),lineEnd:g((function(){this._point&&this._context.closePath()}),"lineEnd"),point:g((function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}),"point")},g(Uv,"default")}));function qv(t){return t<0?-1:1}function Yv(t,e,r){var i=t._x1-t._x0,n=e-t._x1,a=(t._y1-t._y0)/(i||n<0&&-0),s=(r-t._y1)/(n||i<0&&-0),o=(a*n+s*i)/(i+n);return(qv(a)+qv(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function Gv(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Hv(t,e,r){var i=t._x0,n=t._y0,a=t._x1,s=t._y1,o=(a-i)/3;t._context.bezierCurveTo(i+o,n+o*e,a-o,s-o*r,a,s)}function Vv(t){this._context=t}function Xv(t){this._context=new Kv(t)}function Kv(t){this._context=t}function Qv(t){return new Vv(t)}function Zv(t){return new Xv(t)}var Jv=y((()=>{g(qv,"sign"),g(Yv,"slope3"),g(Gv,"slope2"),g(Hv,"point"),g(Vv,"MonotoneX"),Vv.prototype={areaStart:g((function(){this._line=0}),"areaStart"),areaEnd:g((function(){this._line=NaN}),"areaEnd"),lineStart:g((function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0}),"lineStart"),lineEnd:g((function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Hv(this,this._t0,Gv(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}),"lineEnd"),point:g((function(t,e){var r=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Hv(this,Gv(this,r=Yv(this,t,e)),r);break;default:Hv(this,this._t0,r=Yv(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}),"point")},g(Xv,"MonotoneY"),(Xv.prototype=Object.create(Vv.prototype)).point=function(t,e){Vv.prototype.point.call(this,e,t)},g(Kv,"ReflectContext"),Kv.prototype={moveTo:g((function(t,e){this._context.moveTo(e,t)}),"moveTo"),closePath:g((function(){this._context.closePath()}),"closePath"),lineTo:g((function(t,e){this._context.lineTo(e,t)}),"lineTo"),bezierCurveTo:g((function(t,e,r,i,n,a){this._context.bezierCurveTo(e,t,i,r,a,n)}),"bezierCurveTo")},g(Qv,"monotoneX"),g(Zv,"monotoneY")}));function tT(t){this._context=t}function eT(t){var e,r,i=t.length-1,n=new Array(i),a=new Array(i),s=new Array(i);for(n[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<i-1;++e)n[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(n[i-1]=2,a[i-1]=7,s[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)r=n[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(n[i-1]=s[i-1]/a[i-1],e=i-2;e>=0;--e)n[e]=(s[e]-n[e+1])/a[e];for(a[i-1]=(t[i]+n[i-1])/2,e=0;e<i-1;++e)a[e]=2*t[e+1]-n[e+1];return[n,a]}function rT(t){return new tT(t)}var iT=y((()=>{g(tT,"Natural"),tT.prototype={areaStart:g((function(){this._line=0}),"areaStart"),areaEnd:g((function(){this._line=NaN}),"areaEnd"),lineStart:g((function(){this._x=[],this._y=[]}),"lineStart"),lineEnd:g((function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===r)this._context.lineTo(t[1],e[1]);else for(var i=eT(t),n=eT(e),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(i[0][a],n[0][a],i[1][a],n[1][a],t[s],e[s]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null}),"lineEnd"),point:g((function(t,e){this._x.push(+t),this._y.push(+e)}),"point")},g(eT,"controlPoints"),g(rT,"default")}));function nT(t,e){this._context=t,this._t=e}function aT(t){return new nT(t,.5)}function sT(t){return new nT(t,0)}function oT(t){return new nT(t,1)}var lT=y((()=>{g(nT,"Step"),nT.prototype={areaStart:g((function(){this._line=0}),"areaStart"),areaEnd:g((function(){this._line=NaN}),"areaEnd"),lineStart:g((function(){this._x=this._y=NaN,this._point=0}),"lineStart"),lineEnd:g((function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)}),"lineEnd"),point:g((function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}}this._x=t,this._y=e}),"point")},g(aT,"default"),g(sT,"stepBefore"),g(oT,"stepAfter")})),cT=y((()=>{Fk(),Xk(),ev(),fv(),mv(),uv(),av(),kv(),Ev(),Lv(),_v(),Pv(),zv(),Dv(),Wv(),qk(),Jv(),iT(),lT()})),hT=y((()=>{})),uT=y((()=>{}));function dT(t,e,r){this.k=t,this.x=e,this.y=r}function pT(t){for(;!t.__zoom;)if(!(t=t.parentNode))return fT;return t.__zoom}var fT,gT,yT,mT,xT,bT,kT,vT,TT,wT,_T,ST,CT,ET,AT,$T,LT,RT,IT,NT,DT,MT,OT,PT,BT,FT,zT,jT,UT,WT,qT,YT,GT,HT=y((()=>{g(dT,"Transform"),dT.prototype={constructor:dT,scale:g((function(t){return 1===t?this:new dT(this.k*t,this.x,this.y)}),"scale"),translate:g((function(t,e){return 0===t&0===e?this:new dT(this.k,this.x+this.k*t,this.y+this.k*e)}),"translate"),apply:g((function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]}),"apply"),applyX:g((function(t){return t*this.k+this.x}),"applyX"),applyY:g((function(t){return t*this.k+this.y}),"applyY"),invert:g((function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]}),"invert"),invertX:g((function(t){return(t-this.x)/this.k}),"invertX"),invertY:g((function(t){return(t-this.y)/this.k}),"invertY"),rescaleX:g((function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))}),"rescaleX"),rescaleY:g((function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))}),"rescaleY"),toString:g((function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}),"toString")},fT=new dT(1,0,0),pT.prototype=dT.prototype,g(pT,"transform")})),VT=y((()=>{})),XT=y((()=>{Wf(),hT(),uT(),HT(),VT()})),KT=y((()=>{XT(),HT()})),QT=y((()=>{Fs(),ro(),tg(),ug(),mu(),dg(),pg(),fo(),oh(),fg(),Pf(),gg(),mg(),iy(),ny(),nm(),yd(),hg(),am(),yg(),sm(),ok(),dk(),sh(),cT(),Ax(),ek(),zd(),Wf(),KT()})),ZT=m((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BLANK_URL=t.relativeFirstCharacters=t.whitespaceEscapeCharsRegex=t.urlSchemeRegex=t.ctrlCharactersRegex=t.htmlCtrlEntityRegex=t.htmlEntitiesRegex=t.invalidProtocolRegex=void 0,t.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,t.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,t.htmlCtrlEntityRegex=/&(newline|tab);/gi,t.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,t.urlSchemeRegex=/^.+(:|&colon;)/gim,t.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,t.relativeFirstCharacters=[".","/"],t.BLANK_URL="about:blank"})),JT=m((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeUrl=void 0;var e=ZT();function r(t){return e.relativeFirstCharacters.indexOf(t[0])>-1}function i(t){return t.replace(e.ctrlCharactersRegex,"").replace(e.htmlEntitiesRegex,(function(t,e){return String.fromCharCode(e)}))}function n(t){return URL.canParse(t)}function a(t){try{return decodeURIComponent(t)}catch{return t}}function s(t){if(!t)return e.BLANK_URL;var s,o=a(t.trim());do{s=(o=a(o=i(o).replace(e.htmlCtrlEntityRegex,"").replace(e.ctrlCharactersRegex,"").replace(e.whitespaceEscapeCharsRegex,"").trim())).match(e.ctrlCharactersRegex)||o.match(e.htmlEntitiesRegex)||o.match(e.htmlCtrlEntityRegex)||o.match(e.whitespaceEscapeCharsRegex)}while(s&&s.length>0);var l=o;if(!l)return e.BLANK_URL;if(r(l))return l;var c=l.trimStart(),h=c.match(e.urlSchemeRegex);if(!h)return l;var u=h[0].toLowerCase().trim();if(e.invalidProtocolRegex.test(u))return e.BLANK_URL;var d=c.replace(/\\/g,"/");if("mailto:"===u||u.includes("://"))return d;if("http:"===u||"https:"===u){if(!n(d))return e.BLANK_URL;var p=new URL(d);return p.protocol=p.protocol.toLowerCase(),p.hostname=p.hostname.toLowerCase(),p.toString()}return d}g(r,"isRelativeUrlWithoutProtocol"),g(i,"decodeHtmlCharacters"),g(n,"isValidUrl"),g(a,"decodeURI"),g(s,"sanitizeUrl"),t.sanitizeUrl=s})),tw=y((()=>{gT=v(JT(),1),gn(),yT=g(((t,e)=>{let r=t.append("rect");if(r.attr("x",e.x),r.attr("y",e.y),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("width",e.width),r.attr("height",e.height),e.name&&r.attr("name",e.name),e.rx&&r.attr("rx",e.rx),e.ry&&r.attr("ry",e.ry),void 0!==e.attrs)for(let t in e.attrs)r.attr(t,e.attrs[t]);return e.class&&r.attr("class",e.class),r}),"drawRect"),mT=g(((t,e)=>{let r={x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,stroke:e.stroke,class:"rect"};yT(t,r).lower()}),"drawBackgroundRect"),xT=g(((t,e)=>{let r=e.text.replace(Mi," "),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.attr("class","legend"),i.style("text-anchor",e.anchor),e.class&&i.attr("class",e.class);let n=i.append("tspan");return n.attr("x",e.x+2*e.textMargin),n.text(r),i}),"drawText"),bT=g(((t,e,r,i)=>{let n=t.append("image");n.attr("x",e),n.attr("y",r);let a=(0,gT.sanitizeUrl)(i);n.attr("xlink:href",a)}),"drawImage"),kT=g(((t,e,r,i)=>{let n=t.append("use");n.attr("x",e),n.attr("y",r);let a=(0,gT.sanitizeUrl)(i);n.attr("xlink:href",`#${a}`)}),"drawEmbeddedImage"),vT=g((()=>({x:0,y:0,width:100,height:100,fill:"#EDF2AE",stroke:"#666",anchor:"start",rx:0,ry:0})),"getNoteRect"),TT=g((()=>({x:0,y:0,width:100,height:100,"text-anchor":"start",style:"#666",textMargin:0,rx:0,ry:0,tspan:!0})),"getTextObj")})),ew=y((()=>{gn(),tw(),wT=v(JT(),1),_T=g((function(t,e){return yT(t,e)}),"drawRect"),ST=g((function(t,e,r,i,n,a){let s=t.append("image");s.attr("width",e),s.attr("height",r),s.attr("x",i),s.attr("y",n);let o=a.startsWith("data:image/png;base64")?a:(0,wT.sanitizeUrl)(a);s.attr("xlink:href",o)}),"drawImage"),CT=g(((t,e,r)=>{let i=t.append("g"),n=0;for(let t of e){let e=t.textColor?t.textColor:"#444444",a=t.lineColor?t.lineColor:"#444444",s=t.offsetX?parseInt(t.offsetX):0,o=t.offsetY?parseInt(t.offsetY):0,l="";if(0===n){let e=i.append("line");e.attr("x1",t.startPoint.x),e.attr("y1",t.startPoint.y),e.attr("x2",t.endPoint.x),e.attr("y2",t.endPoint.y),e.attr("stroke-width","1"),e.attr("stroke",a),e.style("fill","none"),"rel_b"!==t.type&&e.attr("marker-end","url("+l+"#arrowhead)"),("birel"===t.type||"rel_b"===t.type)&&e.attr("marker-start","url("+l+"#arrowend)"),n=-1}else{let e=i.append("path");e.attr("fill","none").attr("stroke-width","1").attr("stroke",a).attr("d","Mstartx,starty Qcontrolx,controly stopx,stopy ".replaceAll("startx",t.startPoint.x).replaceAll("starty",t.startPoint.y).replaceAll("controlx",t.startPoint.x+(t.endPoint.x-t.startPoint.x)/2-(t.endPoint.x-t.startPoint.x)/4).replaceAll("controly",t.startPoint.y+(t.endPoint.y-t.startPoint.y)/2).replaceAll("stopx",t.endPoint.x).replaceAll("stopy",t.endPoint.y)),"rel_b"!==t.type&&e.attr("marker-end","url("+l+"#arrowhead)"),("birel"===t.type||"rel_b"===t.type)&&e.attr("marker-start","url("+l+"#arrowend)")}let c=r.messageFont();BT(r)(t.label.text,i,Math.min(t.startPoint.x,t.endPoint.x)+Math.abs(t.endPoint.x-t.startPoint.x)/2+s,Math.min(t.startPoint.y,t.endPoint.y)+Math.abs(t.endPoint.y-t.startPoint.y)/2+o,t.label.width,t.label.height,{fill:e},c),t.techn&&""!==t.techn.text&&(c=r.messageFont(),BT(r)("["+t.techn.text+"]",i,Math.min(t.startPoint.x,t.endPoint.x)+Math.abs(t.endPoint.x-t.startPoint.x)/2+s,Math.min(t.startPoint.y,t.endPoint.y)+Math.abs(t.endPoint.y-t.startPoint.y)/2+r.messageFontSize+5+o,Math.max(t.label.width,t.techn.width),t.techn.height,{fill:e,"font-style":"italic"},c))}}),"drawRels"),ET=g((function(t,e,r){let i=t.append("g"),n=e.bgColor?e.bgColor:"none",a=e.borderColor?e.borderColor:"#444444",s=e.fontColor?e.fontColor:"black",o={"stroke-width":1,"stroke-dasharray":"7.0,7.0"};e.nodeType&&(o={"stroke-width":1});let l={x:e.x,y:e.y,fill:n,stroke:a,width:e.width,height:e.height,rx:2.5,ry:2.5,attrs:o};_T(i,l);let c=r.boundaryFont();c.fontWeight="bold",c.fontSize=c.fontSize+2,c.fontColor=s,BT(r)(e.label.text,i,e.x,e.y+e.label.Y,e.width,e.height,{fill:"#444444"},c),e.type&&""!==e.type.text&&(c=r.boundaryFont(),c.fontColor=s,BT(r)(e.type.text,i,e.x,e.y+e.type.Y,e.width,e.height,{fill:"#444444"},c)),e.descr&&""!==e.descr.text&&(c=r.boundaryFont(),c.fontSize=c.fontSize-2,c.fontColor=s,BT(r)(e.descr.text,i,e.x,e.y+e.descr.Y,e.width,e.height,{fill:"#444444"},c))}),"drawBoundary"),AT=g((function(t,e,r){let i=e.bgColor?e.bgColor:r[e.typeC4Shape.text+"_bg_color"],n=e.borderColor?e.borderColor:r[e.typeC4Shape.text+"_border_color"],a=e.fontColor?e.fontColor:"#FFFFFF",s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";switch(e.typeC4Shape.text){case"person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=";break;case"external_person":s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAB6ElEQVR4Xu2YLY+EMBCG9+dWr0aj0Wg0Go1Go0+j8Xdv2uTCvv1gpt0ebHKPuhDaeW4605Z9mJvx4AdXUyTUdd08z+u6flmWZRnHsWkafk9DptAwDPu+f0eAYtu2PEaGWuj5fCIZrBAC2eLBAnRCsEkkxmeaJp7iDJ2QMDdHsLg8SxKFEJaAo8lAXnmuOFIhTMpxxKATebo4UiFknuNo4OniSIXQyRxEA3YsnjGCVEjVXD7yLUAqxBGUyPv/Y4W2beMgGuS7kVQIBycH0fD+oi5pezQETxdHKmQKGk1eQEYldK+jw5GxPfZ9z7Mk0Qnhf1W1m3w//EUn5BDmSZsbR44QQLBEqrBHqOrmSKaQAxdnLArCrxZcM7A7ZKs4ioRq8LFC+NpC3WCBJsvpVw5edm9iEXFuyNfxXAgSwfrFQ1c0iNda8AdejvUgnktOtJQQxmcfFzGglc5WVCj7oDgFqU18boeFSs52CUh8LE8BIVQDT1ABrB0HtgSEYlX5doJnCwv9TXocKCaKbnwhdDKPq4lf3SwU3HLq4V/+WYhHVMa/3b4IlfyikAduCkcBc7mQ3/z/Qq/cTuikhkzB12Ae/mcJC9U+Vo8Ej1gWAtgbeGgFsAMHr50BIWOLCbezvhpBFUdY6EJuJ/QDW0XoMX60zZ0AAAAASUVORK5CYII="}let o=t.append("g");o.attr("class","person-man");let l=vT();switch(e.typeC4Shape.text){case"person":case"external_person":case"system":case"external_system":case"container":case"external_container":case"component":case"external_component":l.x=e.x,l.y=e.y,l.fill=i,l.width=e.width,l.height=e.height,l.stroke=n,l.rx=2.5,l.ry=2.5,l.attrs={"stroke-width":.5},_T(o,l);break;case"system_db":case"external_system_db":case"container_db":case"external_container_db":case"component_db":case"external_component_db":o.append("path").attr("fill",i).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,-10 half,-10 half,-10c0,0 half,0 half,10l0,heightc0,10 -half,10 -half,10c0,0 -half,0 -half,-10l0,-height".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2).replaceAll("height",e.height)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc0,10 half,10 half,10c0,0 half,0 half,-10".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("half",e.width/2));break;case"system_queue":case"external_system_queue":case"container_queue":case"external_container_queue":case"component_queue":case"external_component_queue":o.append("path").attr("fill",i).attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startylwidth,0c5,0 5,half 5,halfc0,0 0,half -5,halfl-width,0c-5,0 -5,-half -5,-halfc0,0 0,-half 5,-half".replaceAll("startx",e.x).replaceAll("starty",e.y).replaceAll("width",e.width).replaceAll("half",e.height/2)),o.append("path").attr("fill","none").attr("stroke-width","0.5").attr("stroke",n).attr("d","Mstartx,startyc-5,0 -5,half -5,halfc0,half 5,half 5,half".replaceAll("startx",e.x+e.width).replaceAll("starty",e.y).replaceAll("half",e.height/2))}let c=PT(r,e.typeC4Shape.text);switch(o.append("text").attr("fill",a).attr("font-family",c.fontFamily).attr("font-size",c.fontSize-2).attr("font-style","italic").attr("lengthAdjust","spacing").attr("textLength",e.typeC4Shape.width).attr("x",e.x+e.width/2-e.typeC4Shape.width/2).attr("y",e.y+e.typeC4Shape.Y).text("<<"+e.typeC4Shape.text+">>"),e.typeC4Shape.text){case"person":case"external_person":ST(o,48,48,e.x+e.width/2-24,e.y+e.image.Y,s)}let h=r[e.typeC4Shape.text+"Font"]();return h.fontWeight="bold",h.fontSize=h.fontSize+2,h.fontColor=a,BT(r)(e.label.text,o,e.x,e.y+e.label.Y,e.width,e.height,{fill:a},h),h=r[e.typeC4Shape.text+"Font"](),h.fontColor=a,e.techn&&""!==e.techn?.text?BT(r)(e.techn.text,o,e.x,e.y+e.techn.Y,e.width,e.height,{fill:a,"font-style":"italic"},h):e.type&&""!==e.type.text&&BT(r)(e.type.text,o,e.x,e.y+e.type.Y,e.width,e.height,{fill:a,"font-style":"italic"},h),e.descr&&""!==e.descr.text&&(h=r.personFont(),h.fontColor=a,BT(r)(e.descr.text,o,e.x,e.y+e.descr.Y,e.width,e.height,{fill:a},h)),e.height}),"drawC4Shape"),$T=g((function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")}),"insertDatabaseIcon"),LT=g((function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")}),"insertComputerIcon"),RT=g((function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")}),"insertClockIcon"),IT=g((function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z")}),"insertArrowHead"),NT=g((function(t){t.append("defs").append("marker").attr("id","arrowend").attr("refX",1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 10 0 L 0 5 L 10 10 z")}),"insertArrowEnd"),DT=g((function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",18).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")}),"insertArrowFilledHead"),MT=g((function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)}),"insertDynamicNumber"),OT=g((function(t){let e=t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",16).attr("refY",4);e.append("path").attr("fill","black").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 9,2 V 6 L16,4 Z"),e.append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1px").attr("d","M 0,1 L 6,7 M 6,1 L 0,7")}),"insertArrowCrossHead"),PT=g(((t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]})),"getC4ShapeFont"),BT=function(){function t(t,e,r,n,a,s,o){i(e.append("text").attr("x",r+a/2).attr("y",n+s/2+5).style("text-anchor","middle").text(t),o)}function e(t,e,r,n,a,s,o,l){let{fontSize:c,fontFamily:h,fontWeight:u}=l,d=t.split(on.lineBreakRegex);for(let t=0;t<d.length;t++){let s=t*c-c*(d.length-1)/2,l=e.append("text").attr("x",r+a/2).attr("y",n).style("text-anchor","middle").attr("dominant-baseline","middle").style("font-size",c).style("font-weight",u).style("font-family",h);l.append("tspan").attr("dy",s).text(d[t]).attr("alignment-baseline","mathematical"),i(l,o)}}function r(t,r,n,a,s,o,l,c){let h=r.append("switch"),u=h.append("foreignObject").attr("x",n).attr("y",a).attr("width",s).attr("height",o).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,h,n,a,s,0,l,c),i(u,l)}function i(t,e){for(let r in e)e.hasOwnProperty(r)&&t.attr(r,e[r])}return g(t,"byText"),g(e,"byTspan"),g(r,"byFo"),g(i,"_setTextAttrs"),function(i){return"fo"===i.textPlacement?r:"old"===i.textPlacement?t:e}}(),FT={drawRect:_T,drawBoundary:ET,drawC4Shape:AT,drawRels:CT,drawImage:ST,insertArrowHead:IT,insertArrowEnd:NT,insertArrowFilledHead:DT,insertDynamicNumber:MT,insertArrowCrossHead:OT,insertDatabaseIcon:$T,insertComputerIcon:LT,insertClockIcon:RT}})),rw=y((()=>{zT="object"==typeof global&&global&&global.Object===Object&&global,jT=zT})),iw=y((()=>{rw(),UT="object"==typeof self&&self&&self.Object===Object&&self,WT=jT||UT||Function("return this")(),qT=WT})),nw=y((()=>{iw(),YT=qT.Symbol,GT=YT}));function aw(t){var e=ow.call(t,cw),r=t[cw];try{t[cw]=void 0;var i=!0}catch{}var n=lw.call(t);return i&&(e?t[cw]=r:delete t[cw]),n}var sw,ow,lw,cw,hw,uw=y((()=>{nw(),sw=Object.prototype,ow=sw.hasOwnProperty,lw=sw.toString,cw=GT?GT.toStringTag:void 0,g(aw,"getRawTag"),hw=aw}));function dw(t){return fw.call(t)}var pw,fw,gw,yw=y((()=>{pw=Object.prototype,fw=pw.toString,g(dw,"objectToString"),gw=dw}));function mw(t){return null==t?void 0===t?bw:xw:kw&&kw in Object(t)?hw(t):gw(t)}var xw,bw,kw,vw,Tw=y((()=>{nw(),uw(),yw(),xw="[object Null]",bw="[object Undefined]",kw=GT?GT.toStringTag:void 0,g(mw,"baseGetTag"),vw=mw}));function ww(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var _w,Sw=y((()=>{g(ww,"isObject"),_w=ww}));function Cw(t){if(!_w(t))return!1;var e=vw(t);return e==Aw||e==$w||e==Ew||e==Lw}var Ew,Aw,$w,Lw,Rw,Iw,Nw,Dw=y((()=>{Tw(),Sw(),Ew="[object AsyncFunction]",Aw="[object Function]",$w="[object GeneratorFunction]",Lw="[object Proxy]",g(Cw,"isFunction"),Rw=Cw})),Mw=y((()=>{iw(),Iw=qT["__core-js_shared__"],Nw=Iw}));function Ow(t){return!!Pw&&Pw in t}var Pw,Bw,Fw=y((()=>{var t;Mw(),t=/[^.]+$/.exec(Nw&&Nw.keys&&Nw.keys.IE_PROTO||""),Pw=t?"Symbol(src)_1."+t:"",g(Ow,"isMasked"),Bw=Ow}));function zw(t){if(null!=t){try{return Uw.call(t)}catch{}try{return t+""}catch{}}return""}var jw,Uw,Ww,qw=y((()=>{jw=Function.prototype,Uw=jw.toString,g(zw,"toSource"),Ww=zw}));function Yw(t){return!(!_w(t)||Bw(t))&&(Rw(t)?Zw:Hw).test(Ww(t))}var Gw,Hw,Vw,Xw,Kw,Qw,Zw,Jw,t_=y((()=>{Dw(),Fw(),Sw(),qw(),Gw=/[\\^$.*+?()[\]{}|]/g,Hw=/^\[object .+?Constructor\]$/,Vw=Function.prototype,Xw=Object.prototype,Kw=Vw.toString,Qw=Xw.hasOwnProperty,Zw=RegExp("^"+Kw.call(Qw).replace(Gw,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),g(Yw,"baseIsNative"),Jw=Yw}));function e_(t,e){return t?.[e]}var r_,i_=y((()=>{g(e_,"getValue"),r_=e_}));function n_(t,e){var r=r_(t,e);return Jw(r)?r:void 0}var a_,s_,o_,l_=y((()=>{t_(),i_(),g(n_,"getNative"),a_=n_})),c_=y((()=>{l_(),s_=a_(Object,"create"),o_=s_}));function h_(){this.__data__=o_?o_(null):{},this.size=0}var u_,d_=y((()=>{c_(),g(h_,"hashClear"),u_=h_}));function p_(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var f_,g_=y((()=>{g(p_,"hashDelete"),f_=p_}));function y_(t){var e=this.__data__;if(o_){var r=e[t];return r===m_?void 0:r}return b_.call(e,t)?e[t]:void 0}var m_,x_,b_,k_,v_=y((()=>{c_(),m_="__lodash_hash_undefined__",x_=Object.prototype,b_=x_.hasOwnProperty,g(y_,"hashGet"),k_=y_}));function T_(t){var e=this.__data__;return o_?void 0!==e[t]:__.call(e,t)}var w_,__,S_,C_=y((()=>{c_(),w_=Object.prototype,__=w_.hasOwnProperty,g(T_,"hashHas"),S_=T_}));function E_(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=o_&&void 0===e?A_:e,this}var A_,$_,L_=y((()=>{c_(),A_="__lodash_hash_undefined__",g(E_,"hashSet"),$_=E_}));function R_(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}var I_,N_=y((()=>{d_(),g_(),v_(),C_(),L_(),g(R_,"Hash"),R_.prototype.clear=u_,R_.prototype.delete=f_,R_.prototype.get=k_,R_.prototype.has=S_,R_.prototype.set=$_,I_=R_}));function D_(){this.__data__=[],this.size=0}var M_,O_=y((()=>{g(D_,"listCacheClear"),M_=D_}));function P_(t,e){return t===e||t!=t&&e!=e}var B_,F_=y((()=>{g(P_,"eq"),B_=P_}));function z_(t,e){for(var r=t.length;r--;)if(B_(t[r][0],e))return r;return-1}var j_,U_=y((()=>{F_(),g(z_,"assocIndexOf"),j_=z_}));function W_(t){var e=this.__data__,r=j_(e,t);return!(r<0)&&(r==e.length-1?e.pop():Y_.call(e,r,1),--this.size,!0)}var q_,Y_,G_,H_=y((()=>{U_(),q_=Array.prototype,Y_=q_.splice,g(W_,"listCacheDelete"),G_=W_}));function V_(t){var e=this.__data__,r=j_(e,t);return r<0?void 0:e[r][1]}var X_,K_=y((()=>{U_(),g(V_,"listCacheGet"),X_=V_}));function Q_(t){return j_(this.__data__,t)>-1}var Z_,J_=y((()=>{U_(),g(Q_,"listCacheHas"),Z_=Q_}));function tS(t,e){var r=this.__data__,i=j_(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}var eS,rS=y((()=>{U_(),g(tS,"listCacheSet"),eS=tS}));function iS(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}var nS,aS,sS,oS=y((()=>{O_(),H_(),K_(),J_(),rS(),g(iS,"ListCache"),iS.prototype.clear=M_,iS.prototype.delete=G_,iS.prototype.get=X_,iS.prototype.has=Z_,iS.prototype.set=eS,nS=iS})),lS=y((()=>{l_(),iw(),aS=a_(qT,"Map"),sS=aS}));function cS(){this.size=0,this.__data__={hash:new I_,map:new(sS||nS),string:new I_}}var hS,uS=y((()=>{N_(),oS(),lS(),g(cS,"mapCacheClear"),hS=cS}));function dS(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}var pS,fS=y((()=>{g(dS,"isKeyable"),pS=dS}));function gS(t,e){var r=t.__data__;return pS(e)?r["string"==typeof e?"string":"hash"]:r.map}var yS,mS=y((()=>{fS(),g(gS,"getMapData"),yS=gS}));function xS(t){var e=yS(this,t).delete(t);return this.size-=e?1:0,e}var bS,kS=y((()=>{mS(),g(xS,"mapCacheDelete"),bS=xS}));function vS(t){return yS(this,t).get(t)}var TS,wS=y((()=>{mS(),g(vS,"mapCacheGet"),TS=vS}));function _S(t){return yS(this,t).has(t)}var SS,CS=y((()=>{mS(),g(_S,"mapCacheHas"),SS=_S}));function ES(t,e){var r=yS(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}var AS,$S=y((()=>{mS(),g(ES,"mapCacheSet"),AS=ES}));function LS(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}var RS,IS=y((()=>{uS(),kS(),wS(),CS(),$S(),g(LS,"MapCache"),LS.prototype.clear=hS,LS.prototype.delete=bS,LS.prototype.get=TS,LS.prototype.has=SS,LS.prototype.set=AS,RS=LS}));function NS(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(DS);var r=g((function(){var i=arguments,n=e?e.apply(this,i):i[0],a=r.cache;if(a.has(n))return a.get(n);var s=t.apply(this,i);return r.cache=a.set(n,s)||a,s}),"memoized");return r.cache=new(NS.Cache||RS),r}var DS,MS,OS=y((()=>{IS(),DS="Expected a function",g(NS,"memoize"),NS.Cache=RS,MS=NS}));function PS(){this.__data__=new nS,this.size=0}var BS,FS=y((()=>{oS(),g(PS,"stackClear"),BS=PS}));function zS(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var jS,US=y((()=>{g(zS,"stackDelete"),jS=zS}));function WS(t){return this.__data__.get(t)}var qS,YS=y((()=>{g(WS,"stackGet"),qS=WS}));function GS(t){return this.__data__.has(t)}var HS,VS=y((()=>{g(GS,"stackHas"),HS=GS}));function XS(t,e){var r=this.__data__;if(r instanceof nS){var i=r.__data__;if(!sS||i.length<KS-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new RS(i)}return r.set(t,e),this.size=r.size,this}var KS,QS,ZS=y((()=>{oS(),lS(),IS(),KS=200,g(XS,"stackSet"),QS=XS}));function JS(t){var e=this.__data__=new nS(t);this.size=e.size}var tC,eC,rC,iC=y((()=>{oS(),FS(),US(),YS(),VS(),ZS(),g(JS,"Stack"),JS.prototype.clear=BS,JS.prototype.delete=jS,JS.prototype.get=qS,JS.prototype.has=HS,JS.prototype.set=QS,tC=JS})),nC=y((()=>{l_(),eC=function(){try{var t=a_(Object,"defineProperty");return t({},"",{}),t}catch{}}(),rC=eC}));function aC(t,e,r){"__proto__"==e&&rC?rC(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var sC,oC=y((()=>{nC(),g(aC,"baseAssignValue"),sC=aC}));function lC(t,e,r){(void 0!==r&&!B_(t[e],r)||void 0===r&&!(e in t))&&sC(t,e,r)}var cC,hC=y((()=>{oC(),F_(),g(lC,"assignMergeValue"),cC=lC}));function uC(t){return function(e,r,i){for(var n=-1,a=Object(e),s=i(e),o=s.length;o--;){var l=s[t?o:++n];if(!1===r(a[l],l,a))break}return e}}var dC,pC,fC,gC=y((()=>{g(uC,"createBaseFor"),dC=uC})),yC=y((()=>{gC(),pC=dC(),fC=pC}));function mC(t,e){if(e)return t.slice();var r=t.length,i=TC?TC(r):new t.constructor(r);return t.copy(i),i}var xC,bC,kC,vC,TC,wC,_C,SC,CC=y((()=>{iw(),xC="object"==typeof exports&&exports&&!exports.nodeType&&exports,bC=xC&&"object"==typeof module&&module&&!module.nodeType&&module,kC=bC&&bC.exports===xC,vC=kC?qT.Buffer:void 0,TC=vC?vC.allocUnsafe:void 0,g(mC,"cloneBuffer"),wC=mC})),EC=y((()=>{iw(),_C=qT.Uint8Array,SC=_C}));function AC(t){var e=new t.constructor(t.byteLength);return new SC(e).set(new SC(t)),e}var $C,LC=y((()=>{EC(),g(AC,"cloneArrayBuffer"),$C=AC}));function RC(t,e){var r=e?$C(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var IC,NC=y((()=>{LC(),g(RC,"cloneTypedArray"),IC=RC}));function DC(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}var MC,OC,PC,BC,FC=y((()=>{g(DC,"copyArray"),MC=DC})),zC=y((()=>{Sw(),OC=Object.create,PC=function(){function t(){}return g(t,"object"),function(e){if(!_w(e))return{};if(OC)return OC(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),BC=PC}));function jC(t,e){return function(r){return t(e(r))}}var UC,WC,qC,YC=y((()=>{g(jC,"overArg"),UC=jC})),GC=y((()=>{YC(),WC=UC(Object.getPrototypeOf,Object),qC=WC}));function HC(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||VC)}var VC,XC,KC=y((()=>{VC=Object.prototype,g(HC,"isPrototype"),XC=HC}));function QC(t){return"function"!=typeof t.constructor||XC(t)?{}:BC(qC(t))}var ZC,JC=y((()=>{zC(),GC(),KC(),g(QC,"initCloneObject"),ZC=QC}));function tE(t){return null!=t&&"object"==typeof t}var eE,rE=y((()=>{g(tE,"isObjectLike"),eE=tE}));function iE(t){return eE(t)&&vw(t)==nE}var nE,aE,sE,oE,lE,cE,hE,uE,dE,pE=y((()=>{Tw(),rE(),nE="[object Arguments]",g(iE,"baseIsArguments"),aE=iE})),fE=y((()=>{pE(),rE(),sE=Object.prototype,oE=sE.hasOwnProperty,lE=sE.propertyIsEnumerable,cE=aE(function(){return arguments}())?aE:function(t){return eE(t)&&oE.call(t,"callee")&&!lE.call(t,"callee")},hE=cE})),gE=y((()=>{uE=Array.isArray,dE=uE}));function yE(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=mE}var mE,xE,bE=y((()=>{mE=9007199254740991,g(yE,"isLength"),xE=yE}));function kE(t){return null!=t&&xE(t.length)&&!Rw(t)}var vE,TE=y((()=>{Dw(),bE(),g(kE,"isArrayLike"),vE=kE}));function wE(t){return eE(t)&&vE(t)}var _E,SE=y((()=>{TE(),rE(),g(wE,"isArrayLikeObject"),_E=wE}));function CE(){return!1}var EE,AE,$E,LE,RE,IE,NE,DE=y((()=>{g(CE,"stubFalse"),EE=CE})),ME=y((()=>{iw(),DE(),AE="object"==typeof exports&&exports&&!exports.nodeType&&exports,$E=AE&&"object"==typeof module&&module&&!module.nodeType&&module,LE=$E&&$E.exports===AE,RE=LE?qT.Buffer:void 0,IE=RE?RE.isBuffer:void 0,NE=IE||EE}));function OE(t){if(!eE(t)||vw(t)!=PE)return!1;var e=qC(t);if(null===e)return!0;var r=jE.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&zE.call(r)==UE}var PE,BE,FE,zE,jE,UE,WE,qE=y((()=>{Tw(),GC(),rE(),PE="[object Object]",BE=Function.prototype,FE=Object.prototype,zE=BE.toString,jE=FE.hasOwnProperty,UE=zE.call(Object),g(OE,"isPlainObject"),WE=OE}));function YE(t){return eE(t)&&xE(t.length)&&!!GE[vw(t)]}var GE,HE,VE=y((()=>{Tw(),bE(),rE(),(GE={})["[object Float32Array]"]=GE["[object Float64Array]"]=GE["[object Int8Array]"]=GE["[object Int16Array]"]=GE["[object Int32Array]"]=GE["[object Uint8Array]"]=GE["[object Uint8ClampedArray]"]=GE["[object Uint16Array]"]=GE["[object Uint32Array]"]=!0,GE["[object Arguments]"]=GE["[object Array]"]=GE["[object ArrayBuffer]"]=GE["[object Boolean]"]=GE["[object DataView]"]=GE["[object Date]"]=GE["[object Error]"]=GE["[object Function]"]=GE["[object Map]"]=GE["[object Number]"]=GE["[object Object]"]=GE["[object RegExp]"]=GE["[object Set]"]=GE["[object String]"]=GE["[object WeakMap]"]=!1,g(YE,"baseIsTypedArray"),HE=YE}));function XE(t){return function(e){return t(e)}}var KE,QE,ZE,JE,tA,eA,rA,iA,nA,aA,sA=y((()=>{g(XE,"baseUnary"),KE=XE})),oA=y((()=>{rw(),QE="object"==typeof exports&&exports&&!exports.nodeType&&exports,ZE=QE&&"object"==typeof module&&module&&!module.nodeType&&module,JE=ZE&&ZE.exports===QE,tA=JE&&jT.process,eA=function(){try{return ZE&&ZE.require&&ZE.require("util").types||tA&&tA.binding&&tA.binding("util")}catch{}}(),rA=eA})),lA=y((()=>{VE(),sA(),oA(),iA=rA&&rA.isTypedArray,nA=iA?KE(iA):HE,aA=nA}));function cA(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var hA,uA=y((()=>{g(cA,"safeGet"),hA=cA}));function dA(t,e,r){var i=t[e];(!fA.call(t,e)||!B_(i,r)||void 0===r&&!(e in t))&&sC(t,e,r)}var pA,fA,gA,yA=y((()=>{oC(),F_(),pA=Object.prototype,fA=pA.hasOwnProperty,g(dA,"assignValue"),gA=dA}));function mA(t,e,r,i){var n=!r;r||(r={});for(var a=-1,s=e.length;++a<s;){var o=e[a],l=i?i(r[o],t[o],o,r,t):void 0;void 0===l&&(l=t[o]),n?sC(r,o,l):gA(r,o,l)}return r}var xA,bA=y((()=>{yA(),oC(),g(mA,"copyObject"),xA=mA}));function kA(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var vA,TA=y((()=>{g(kA,"baseTimes"),vA=kA}));function wA(t,e){var r=typeof t;return!!(e=e??_A)&&("number"==r||"symbol"!=r&&SA.test(t))&&t>-1&&t%1==0&&t<e}var _A,SA,CA,EA=y((()=>{_A=9007199254740991,SA=/^(?:0|[1-9]\d*)$/,g(wA,"isIndex"),CA=wA}));function AA(t,e){var r=dE(t),i=!r&&hE(t),n=!r&&!i&&NE(t),a=!r&&!i&&!n&&aA(t),s=r||i||n||a,o=s?vA(t.length,String):[],l=o.length;for(var c in t)(e||LA.call(t,c))&&(!s||!("length"==c||n&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||CA(c,l)))&&o.push(c);return o}var $A,LA,RA,IA=y((()=>{TA(),fE(),gE(),ME(),EA(),lA(),$A=Object.prototype,LA=$A.hasOwnProperty,g(AA,"arrayLikeKeys"),RA=AA}));function NA(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}var DA,MA=y((()=>{g(NA,"nativeKeysIn"),DA=NA}));function OA(t){if(!_w(t))return DA(t);var e=XC(t),r=[];for(var i in t)"constructor"==i&&(e||!BA.call(t,i))||r.push(i);return r}var PA,BA,FA,zA=y((()=>{Sw(),KC(),MA(),PA=Object.prototype,BA=PA.hasOwnProperty,g(OA,"baseKeysIn"),FA=OA}));function jA(t){return vE(t)?RA(t,!0):FA(t)}var UA,WA=y((()=>{IA(),zA(),TE(),g(jA,"keysIn"),UA=jA}));function qA(t){return xA(t,UA(t))}var YA,GA=y((()=>{bA(),WA(),g(qA,"toPlainObject"),YA=qA}));function HA(t,e,r,i,n,a,s){var o=hA(t,r),l=hA(e,r),c=s.get(l);if(c)cC(t,r,c);else{var h=a?a(o,l,r+"",t,e,s):void 0,u=void 0===h;if(u){var d=dE(l),p=!d&&NE(l),f=!d&&!p&&aA(l);h=l,d||p||f?dE(o)?h=o:_E(o)?h=MC(o):p?(u=!1,h=wC(l,!0)):f?(u=!1,h=IC(l,!0)):h=[]:WE(l)||hE(l)?(h=o,hE(o)?h=YA(o):(!_w(o)||Rw(o))&&(h=ZC(l))):u=!1}u&&(s.set(l,h),n(h,l,i,a,s),s.delete(l)),cC(t,r,h)}}var VA,XA=y((()=>{hC(),CC(),NC(),FC(),JC(),fE(),gE(),SE(),ME(),Dw(),Sw(),qE(),lA(),uA(),GA(),g(HA,"baseMergeDeep"),VA=HA}));function KA(t,e,r,i,n){t!==e&&fC(e,(function(a,s){if(n||(n=new tC),_w(a))VA(t,e,s,r,KA,i,n);else{var o=i?i(hA(t,s),a,s+"",t,e,n):void 0;void 0===o&&(o=a),cC(t,s,o)}}),UA)}var QA,ZA=y((()=>{iC(),hC(),yC(),XA(),Sw(),WA(),uA(),g(KA,"baseMerge"),QA=KA}));function JA(t){return t}var t$,e$=y((()=>{g(JA,"identity"),t$=JA}));function r$(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var i$,n$=y((()=>{g(r$,"apply"),i$=r$}));function a$(t,e,r){return e=s$(void 0===e?t.length-1:e,0),function(){for(var i=arguments,n=-1,a=s$(i.length-e,0),s=Array(a);++n<a;)s[n]=i[e+n];n=-1;for(var o=Array(e+1);++n<e;)o[n]=i[n];return o[e]=r(s),i$(t,this,o)}}var s$,o$,l$=y((()=>{n$(),s$=Math.max,g(a$,"overRest"),o$=a$}));function c$(t){return function(){return t}}var h$,u$,d$=y((()=>{g(c$,"constant"),h$=c$})),p$=y((()=>{d$(),nC(),e$(),u$=rC?function(t,e){return rC(t,"toString",{configurable:!0,enumerable:!1,value:h$(e),writable:!0})}:t$}));function f$(t){var e=0,r=0;return function(){var i=m$(),n=y$-(i-r);if(r=i,n>0){if(++e>=g$)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var g$,y$,m$,x$,b$,k$,v$=y((()=>{g$=800,y$=16,m$=Date.now,g(f$,"shortOut"),x$=f$})),T$=y((()=>{p$(),v$(),b$=x$(u$),k$=b$}));function w$(t,e){return k$(o$(t,e,t$),t+"")}var _$,S$=y((()=>{e$(),l$(),T$(),g(w$,"baseRest"),_$=w$}));function C$(t,e,r){if(!_w(r))return!1;var i=typeof e;return!!("number"==i?vE(r)&&CA(e,r.length):"string"==i&&e in r)&&B_(r[e],t)}var E$,A$=y((()=>{F_(),TE(),EA(),Sw(),g(C$,"isIterateeCall"),E$=C$}));function $$(t){return _$((function(e,r){var i=-1,n=r.length,a=n>1?r[n-1]:void 0,s=n>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(n--,a):void 0,s&&E$(r[0],r[1],s)&&(a=n<3?void 0:a,n=1),e=Object(e);++i<n;){var o=r[i];o&&t(e,o,i,a)}return e}))}var L$,R$,I$,N$=y((()=>{S$(),A$(),g($$,"createAssigner"),L$=$$})),D$=y((()=>{ZA(),N$(),R$=L$((function(t,e,r){QA(t,e,r)})),I$=R$}));function M$(t,e){if(!t)return e;let r=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return Q$[r]??e}function O$(t,e){let r=t.trim();if(r)return"loose"!==e.securityLevel?(0,X$.sanitizeUrl)(r):r}function P$(t,e){return t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0}function B$(t){let e,r=0;return t.forEach((t=>{r+=P$(t,e),e=t})),aL(t,r/2)}function F$(t){return 1===t.length?t[0]:B$(t)}function z$(t,e,r){let i=structuredClone(r);et.info("our points",i),"start_left"!==e&&"start_right"!==e&&i.reverse();let n=aL(i,25+t),a=10+.5*t,s=Math.atan2(i[0].y-n.y,i[0].x-n.x),o={x:0,y:0};return"start_left"===e?(o.x=Math.sin(s+Math.PI)*a+(i[0].x+n.x)/2,o.y=-Math.cos(s+Math.PI)*a+(i[0].y+n.y)/2):"end_right"===e?(o.x=Math.sin(s-Math.PI)*a+(i[0].x+n.x)/2-5,o.y=-Math.cos(s-Math.PI)*a+(i[0].y+n.y)/2-5):"end_left"===e?(o.x=Math.sin(s)*a+(i[0].x+n.x)/2-5,o.y=-Math.cos(s)*a+(i[0].y+n.y)/2-5):(o.x=Math.sin(s)*a+(i[0].x+n.x)/2,o.y=-Math.cos(s)*a+(i[0].y+n.y)/2),o}function j$(t){let e="",r="";for(let i of t)void 0!==i&&(i.startsWith("color:")||i.startsWith("text-align:")?r=r+i+";":e=e+i+";");return{style:e,labelStyle:r}}function U$(t){let e="",r="0123456789abcdef";for(let i=0;i<t;i++)e+=r.charAt(Math.floor(16*Math.random()));return e}function W$(t,e){return fL(t,e).height}function q$(t,e){return fL(t,e).width}function Y$(t){return"str"in t}function G$(t,e){return I$({},t,e)}function H$(t){return t??null}function V$(t,e){let r=Math.round(t.x),i=Math.round(t.y),n=e.replace(/(\d+\.\d+)/g,(t=>Math.round(parseFloat(t)).toString()));return n.includes(r.toString())||n.includes(i.toString())}var X$,K$,Q$,Z$,J$,tL,eL,rL,iL,nL,aL,sL,oL,lL,cL,hL,uL,dL,pL,fL,gL,yL,mL,xL,bL,kL,vL,TL,wL,_L=y((()=>{X$=v(JT(),1),QT(),gn(),Er(),We(),zn(),je(),OS(),D$(),Bn(),K$="​",Q$={curveBasis:hv,curveBasisClosed:pv,curveBasisOpen:yv,curveBumpX:rv,curveBumpY:iv,curveBundle:bv,curveCardinalClosed:Cv,curveCardinalOpen:$v,curveCardinal:wv,curveCatmullRomClosed:Ov,curveCatmullRomOpen:Fv,curveCatmullRom:Nv,curveLinear:Wk,curveLinearClosed:Uv,curveMonotoneX:Qv,curveMonotoneY:Zv,curveNatural:rT,curveStep:aT,curveStepAfter:oT,curveStepBefore:sT},Z$=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,J$=g((function(t,e){let r=tL(t,/(?:init\b)|(?:initialize\b)/),i={};if(Array.isArray(r)){let t=r.map((t=>t.args));xe(t),i=Z(i,[...t])}else i=r.args;if(!i)return;let n=wn(t,e),a="config";return void 0!==i[a]&&("flowchart-v2"===n&&(n="flowchart"),i[n]=i[a],delete i[a]),i}),"detectInit"),tL=g((function(t,e=null){try{let r=new RegExp(`[%]{2}(?![{]${Z$.source})(?=[}][%]{2}).*\n`,"ig");t=t.trim().replace(r,"").replace(/'/gm,'"'),et.debug(`Detecting diagram directive${null!==e?" type:"+e:""} based on the text:${t}`);let i,n=[];for(;null!==(i=bn.exec(t));)if(i.index===bn.lastIndex&&bn.lastIndex++,i&&!e||e&&i[1]?.match(e)||e&&i[2]?.match(e)){let t=i[1]?i[1]:i[2],e=i[3]?i[3].trim():i[4]?JSON.parse(i[4].trim()):null;n.push({type:t,args:e})}return 0===n.length?{type:t,args:null}:1===n.length?n[0]:n}catch(r){return et.error(`ERROR: ${r.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}}),"detectDirective"),eL=g((function(t){return t.replace(bn,"")}),"removeDirectives"),rL=g((function(t,e){for(let[r,i]of e.entries())if(i.match(t))return r;return-1}),"isSubstringInArray"),g(M$,"interpolateToCurve"),g(O$,"formatUrl"),iL=g(((t,...e)=>{let r=t.split("."),i=r.length-1,n=r[i],a=window;for(let e=0;e<i;e++)if(a=a[r[e]],!a)return void et.error(`Function name: ${t} not found in window`);a[n](...e)}),"runFunc"),g(P$,"distance"),g(B$,"traverseEdge"),g(F$,"calcLabelPosition"),nL=g(((t,e=2)=>{let r=Math.pow(10,e);return Math.round(t*r)/r}),"roundNumber"),aL=g(((t,e)=>{let r,i=e;for(let e of t){if(r){let t=P$(e,r);if(0===t)return r;if(t<i)i-=t;else{let n=i/t;if(n<=0)return r;if(n>=1)return{x:e.x,y:e.y};if(n>0&&n<1)return{x:nL((1-n)*r.x+n*e.x,5),y:nL((1-n)*r.y+n*e.y,5)}}}r=e}throw new Error("Could not find a suitable point for the given distance")}),"calculatePoint"),sL=g(((t,e,r)=>{et.info(`our points ${JSON.stringify(e)}`),e[0]!==r&&(e=e.reverse());let i=aL(e,25),n=t?10:5,a=Math.atan2(e[0].y-i.y,e[0].x-i.x),s={x:0,y:0};return s.x=Math.sin(a)*n+(e[0].x+i.x)/2,s.y=-Math.cos(a)*n+(e[0].y+i.y)/2,s}),"calcCardinalityPosition"),g(z$,"calcTerminalLabelPosition"),g(j$,"getStylesFromArray"),oL=0,lL=g((()=>(oL++,"id-"+Math.random().toString(36).substr(2,12)+"-"+oL)),"generateId"),g(U$,"makeRandomHex"),cL=g((t=>U$(t.length)),"random"),hL=g((function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}}),"getTextObj"),uL=g((function(t,e){let r=e.text.replace(on.lineBreakRegex," "),[,i]=bL(e.fontSize),n=t.append("text");n.attr("x",e.x),n.attr("y",e.y),n.style("text-anchor",e.anchor),n.style("font-family",e.fontFamily),n.style("font-size",i),n.style("font-weight",e.fontWeight),n.attr("fill",e.fill),void 0!==e.class&&n.attr("class",e.class);let a=n.append("tspan");return a.attr("x",e.x+2*e.textMargin),a.attr("fill",e.fill),a.text(r),n}),"drawSimpleText"),dL=MS(((t,e,r)=>{if(!t||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),on.lineBreakRegex.test(t)))return t;let i=t.split(" ").filter(Boolean),n=[],a="";return i.forEach(((t,s)=>{let o=q$(`${t} `,r),l=q$(a,r);if(o>e){let{hyphenatedStrings:i,remainingWord:s}=pL(t,e,"-",r);n.push(a,...i),a=s}else l+o>=e?(n.push(a),a=t):a=[a,t].filter(Boolean).join(" ");s+1===i.length&&n.push(a)})),n.filter((t=>""!==t)).join(r.joinWith)}),((t,e,r)=>`${t}${e}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`)),pL=MS(((t,e,r="-",i)=>{i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},i);let n=[...t],a=[],s="";return n.forEach(((t,o)=>{let l=`${s}${t}`;if(q$(l,i)>=e){let t=o+1,e=n.length===t,i=`${l}${r}`;a.push(e?l:i),s=""}else s=l})),{hyphenatedStrings:a,remainingWord:s}}),((t,e,r="-",i)=>`${t}${e}${r}${i.fontSize}${i.fontWeight}${i.fontFamily}`)),g(W$,"calculateTextHeight"),g(q$,"calculateTextWidth"),fL=MS(((t,e)=>{let{fontSize:r=12,fontFamily:i="Arial",fontWeight:n=400}=e;if(!t)return{width:0,height:0};let[,a]=bL(r),s=["sans-serif",i],o=t.split(on.lineBreakRegex),l=[],c=nh("body");if(!c.remove)return{width:0,height:0,lineHeight:0};let h=c.append("svg");for(let t of s){let e=0,r={width:0,height:0,lineHeight:0};for(let i of o){let s=hL();s.text=i||K$;let o=uL(h,s).style("font-size",a).style("font-weight",n).style("font-family",t),l=(o._groups||o)[0][0].getBBox();if(0===l.width&&0===l.height)throw new Error("svg element not in render tree");r.width=Math.round(Math.max(r.width,l.width)),e=Math.round(l.height),r.height+=e,r.lineHeight=Math.round(Math.max(r.lineHeight,e))}l.push(r)}return h.remove(),l[isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1]}),((t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`)),gL=class{constructor(t=!1,e){this.count=0,this.count=e?e.length:0,this.next=t?()=>this.count++:()=>Date.now()}static{g(this,"InitIDGenerator")}},mL=g((function(t){return yL=yL||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),yL.innerHTML=t,unescape(yL.textContent)}),"entityDecode"),g(Y$,"isDetailedError"),xL=g(((t,e,r,i)=>{if(!i)return;let n=t.node()?.getBBox();n&&t.append("text").text(i).attr("text-anchor","middle").attr("x",n.x+n.width/2).attr("y",-r).attr("class",e)}),"insertTitle"),bL=g((t=>{if("number"==typeof t)return[t,t+"px"];let e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]}),"parseFontSize"),g(G$,"cleanAndMerge"),kL={assignWithDepth:Z,wrapLabel:dL,calculateTextHeight:W$,calculateTextWidth:q$,calculateTextDimensions:fL,cleanAndMerge:G$,detectInit:J$,detectDirective:tL,isSubstringInArray:rL,interpolateToCurve:M$,calcLabelPosition:F$,calcCardinalityPosition:sL,calcTerminalLabelPosition:z$,formatUrl:O$,getStylesFromArray:j$,generateId:lL,random:cL,runFunc:iL,entityDecode:mL,insertTitle:xL,isLabelCoordinateInPath:V$,parseFontSize:bL,InitIDGenerator:gL},vL=g((function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,(function(t){return t.substring(0,t.length-1)})),e=e.replace(/classDef.*:\S*#.*;/g,(function(t){return t.substring(0,t.length-1)})),e=e.replace(/#\w+;/g,(function(t){let e=t.substring(1,t.length-1);return/^\+?\d+$/.test(e)?"ﬂ°°"+e+"¶ß":"ﬂ°"+e+"¶ß"})),e}),"encodeEntities"),TL=g((function(t){return t.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")}),"decodeEntities"),wL=g(((t,e,{counter:r=0,prefix:i,suffix:n},a)=>a||`${i?`${i}_`:""}${t}_${e}_${r}${n?`_${n}`:""}`),"getEdgeId"),g(H$,"handleUndefinedAttr"),g(V$,"isLabelCoordinateInPath")}));function SL(t,e,r,i,n){if(!e[t].width)if(r)e[t].text=dL(e[t].text,n,i),e[t].textLines=e[t].text.split(on.lineBreakRegex).length,e[t].width=n,e[t].height=W$(e[t].text,i);else{let r=e[t].text.split(on.lineBreakRegex);e[t].textLines=r.length;let n=0;e[t].height=0,e[t].width=0;for(let a of r)e[t].width=Math.max(q$(a,i),e[t].width),n=W$(a,i),e[t].height=e[t].height+n}}function CL(t,e,r,i,n){let a=new IL(n);a.data.widthLimit=r.data.widthLimit/Math.min(LL,i.length);for(let[s,o]of i.entries()){let i=0;o.image={width:0,height:0,Y:0},o.sprite&&(o.image.width=48,o.image.height=48,o.image.Y=i,i=o.image.Y+o.image.height);let l=o.wrap&&RL.wrap,c=ML(RL);if(c.fontSize=c.fontSize+2,c.fontWeight="bold",SL("label",o,l,c,a.data.widthLimit),o.label.Y=i+8,i=o.label.Y+o.label.height,o.type&&""!==o.type.text){o.type.text="["+o.type.text+"]",SL("type",o,l,ML(RL),a.data.widthLimit),o.type.Y=i+5,i=o.type.Y+o.type.height}if(o.descr&&""!==o.descr.text){let t=ML(RL);t.fontSize=t.fontSize-2,SL("descr",o,l,t,a.data.widthLimit),o.descr.Y=i+20,i=o.descr.Y+o.descr.height}if(0==s||s%LL==0){let t=r.data.startx+RL.diagramMarginX,e=r.data.stopy+RL.diagramMarginY+i;a.setData(t,t,e,e)}else{let t=a.data.stopx!==a.data.startx?a.data.stopx+RL.diagramMarginX:a.data.startx,e=a.data.starty;a.setData(t,t,e,e)}a.name=o.alias;let h=n.db.getC4ShapeArray(o.alias),u=n.db.getC4ShapeKeys(o.alias);u.length>0&&BL(a,t,h,u),e=o.alias;let d=n.db.getBoundaries(e);d.length>0&&CL(t,e,a,d,n),"global"!==o.alias&&PL(t,o,a),r.data.stopy=Math.max(a.data.stopy+RL.c4ShapeMargin,r.data.stopy),r.data.stopx=Math.max(a.data.stopx+RL.c4ShapeMargin,r.data.stopx),EL=Math.max(EL,r.data.stopx),AL=Math.max(AL,r.data.stopy)}}var EL,AL,$L,LL,RL,IL,NL,DL,ML,OL,PL,BL,FL,zL,jL,UL,WL,qL,YL,GL,HL=y((()=>{QT(),ew(),We(),jn(),gn(),as(),ns(),je(),_L(),Un(),EL=0,AL=0,$L=4,LL=2,En.yy=rs,RL={},IL=class{static{g(this,"Bounds")}constructor(t){this.name="",this.data={},this.data.startx=void 0,this.data.stopx=void 0,this.data.starty=void 0,this.data.stopy=void 0,this.data.widthLimit=void 0,this.nextData={},this.nextData.startx=void 0,this.nextData.stopx=void 0,this.nextData.starty=void 0,this.nextData.stopy=void 0,this.nextData.cnt=0,NL(t.db.getConfig())}setData(t,e,r,i){this.nextData.startx=this.data.startx=t,this.nextData.stopx=this.data.stopx=e,this.nextData.starty=this.data.starty=r,this.nextData.stopy=this.data.stopy=i}updateVal(t,e,r,i){void 0===t[e]?t[e]=r:t[e]=i(r,t[e])}insert(t){this.nextData.cnt=this.nextData.cnt+1;let e=this.nextData.startx===this.nextData.stopx?this.nextData.stopx+t.margin:this.nextData.stopx+2*t.margin,r=e+t.width,i=this.nextData.starty+2*t.margin,n=i+t.height;(e>=this.data.widthLimit||r>=this.data.widthLimit||this.nextData.cnt>$L)&&(e=this.nextData.startx+t.margin+RL.nextLinePaddingX,i=this.nextData.stopy+2*t.margin,this.nextData.stopx=r=e+t.width,this.nextData.starty=this.nextData.stopy,this.nextData.stopy=n=i+t.height,this.nextData.cnt=1),t.x=e,t.y=i,this.updateVal(this.data,"startx",e,Math.min),this.updateVal(this.data,"starty",i,Math.min),this.updateVal(this.data,"stopx",r,Math.max),this.updateVal(this.data,"stopy",n,Math.max),this.updateVal(this.nextData,"startx",e,Math.min),this.updateVal(this.nextData,"starty",i,Math.min),this.updateVal(this.nextData,"stopx",r,Math.max),this.updateVal(this.nextData,"stopy",n,Math.max)}init(t){this.name="",this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,widthLimit:void 0},this.nextData={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0,cnt:0},NL(t.db.getConfig())}bumpLastMargin(t){this.data.stopx+=t,this.data.stopy+=t}},NL=g((function(t){Z(RL,t),t.fontFamily&&(RL.personFontFamily=RL.systemFontFamily=RL.messageFontFamily=t.fontFamily),t.fontSize&&(RL.personFontSize=RL.systemFontSize=RL.messageFontSize=t.fontSize),t.fontWeight&&(RL.personFontWeight=RL.systemFontWeight=RL.messageFontWeight=t.fontWeight)}),"setConf"),DL=g(((t,e)=>({fontFamily:t[e+"FontFamily"],fontSize:t[e+"FontSize"],fontWeight:t[e+"FontWeight"]})),"c4ShapeFont"),ML=g((t=>({fontFamily:t.boundaryFontFamily,fontSize:t.boundaryFontSize,fontWeight:t.boundaryFontWeight})),"boundaryFont"),OL=g((t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight})),"messageFont"),g(SL,"calcC4ShapeTextWH"),PL=g((function(t,e,r){e.x=r.data.startx,e.y=r.data.starty,e.width=r.data.stopx-r.data.startx,e.height=r.data.stopy-r.data.starty,e.label.y=RL.c4ShapeMargin-35;let i=e.wrap&&RL.wrap,n=ML(RL);n.fontSize=n.fontSize+2,n.fontWeight="bold",SL("label",e,i,n,q$(e.label.text,n)),FT.drawBoundary(t,e,RL)}),"drawBoundary"),BL=g((function(t,e,r,i){let n=0;for(let a of i){n=0;let i=r[a],s=DL(RL,i.typeC4Shape.text);switch(s.fontSize=s.fontSize-2,i.typeC4Shape.width=q$("«"+i.typeC4Shape.text+"»",s),i.typeC4Shape.height=s.fontSize+2,i.typeC4Shape.Y=RL.c4ShapePadding,n=i.typeC4Shape.Y+i.typeC4Shape.height-4,i.image={width:0,height:0,Y:0},i.typeC4Shape.text){case"person":case"external_person":i.image.width=48,i.image.height=48,i.image.Y=n,n=i.image.Y+i.image.height}i.sprite&&(i.image.width=48,i.image.height=48,i.image.Y=n,n=i.image.Y+i.image.height);let o=i.wrap&&RL.wrap,l=RL.width-2*RL.c4ShapePadding,c=DL(RL,i.typeC4Shape.text);if(c.fontSize=c.fontSize+2,c.fontWeight="bold",SL("label",i,o,c,l),i.label.Y=n+8,n=i.label.Y+i.label.height,i.type&&""!==i.type.text){i.type.text="["+i.type.text+"]",SL("type",i,o,DL(RL,i.typeC4Shape.text),l),i.type.Y=n+5,n=i.type.Y+i.type.height}else if(i.techn&&""!==i.techn.text){i.techn.text="["+i.techn.text+"]",SL("techn",i,o,DL(RL,i.techn.text),l),i.techn.Y=n+5,n=i.techn.Y+i.techn.height}let h=n,u=i.label.width;if(i.descr&&""!==i.descr.text){SL("descr",i,o,DL(RL,i.typeC4Shape.text),l),i.descr.Y=n+20,n=i.descr.Y+i.descr.height,u=Math.max(i.label.width,i.descr.width),h=n-5*i.descr.textLines}u+=RL.c4ShapePadding,i.width=Math.max(i.width||RL.width,u,RL.width),i.height=Math.max(i.height||RL.height,h,RL.height),i.margin=i.margin||RL.c4ShapeMargin,t.insert(i),FT.drawC4Shape(e,i,RL)}t.bumpLastMargin(RL.c4ShapeMargin)}),"drawC4ShapeArray"),FL=class{static{g(this,"Point")}constructor(t,e){this.x=t,this.y=e}},zL=g((function(t,e){let r=t.x,i=t.y,n=e.x,a=e.y,s=r+t.width/2,o=i+t.height/2,l=Math.abs(r-n),c=Math.abs(i-a),h=c/l,u=t.height/t.width,d=null;return i==a&&r<n?d=new FL(r+t.width,o):i==a&&r>n?d=new FL(r,o):r==n&&i<a?d=new FL(s,i+t.height):r==n&&i>a&&(d=new FL(s,i)),r>n&&i<a?d=u>=h?new FL(r,o+h*t.width/2):new FL(s-l/c*t.height/2,i+t.height):r<n&&i<a?d=u>=h?new FL(r+t.width,o+h*t.width/2):new FL(s+l/c*t.height/2,i+t.height):r<n&&i>a?d=u>=h?new FL(r+t.width,o-h*t.width/2):new FL(s+t.height/2*l/c,i):r>n&&i>a&&(d=u>=h?new FL(r,o-t.width/2*h):new FL(s-t.height/2*l/c,i)),d}),"getIntersectPoint"),jL=g((function(t,e){let r={x:0,y:0};r.x=e.x+e.width/2,r.y=e.y+e.height/2;let i=zL(t,r);return r.x=t.x+t.width/2,r.y=t.y+t.height/2,{startPoint:i,endPoint:zL(e,r)}}),"getIntersectPoints"),UL=g((function(t,e,r,i){let n=0;for(let t of e){n+=1;let e=t.wrap&&RL.wrap,a=OL(RL);"C4Dynamic"===i.db.getC4Type()&&(t.label.text=n+": "+t.label.text);let s=q$(t.label.text,a);SL("label",t,e,a,s),t.techn&&""!==t.techn.text&&(s=q$(t.techn.text,a),SL("techn",t,e,a,s)),t.descr&&""!==t.descr.text&&(s=q$(t.descr.text,a),SL("descr",t,e,a,s));let o=r(t.from),l=r(t.to),c=jL(o,l);t.startPoint=c.startPoint,t.endPoint=c.endPoint}FT.drawRels(t,e,RL)}),"drawRels"),g(CL,"drawInsideBoundary"),WL=g((function(t,e,r,i){RL=na().c4;let n,a=na().securityLevel;"sandbox"===a&&(n=nh("#i"+e));let s=nh("sandbox"===a?n.nodes()[0].contentDocument.body:"body"),o=i.db;i.db.setWrap(RL.wrap),$L=o.getC4ShapeInRow(),LL=o.getC4BoundaryInRow(),et.debug(`C:${JSON.stringify(RL,null,2)}`);let l="sandbox"===a?s.select(`[id="${e}"]`):nh(`[id="${e}"]`);FT.insertComputerIcon(l),FT.insertDatabaseIcon(l),FT.insertClockIcon(l);let c=new IL(i);c.setData(RL.diagramMarginX,RL.diagramMarginX,RL.diagramMarginY,RL.diagramMarginY),c.data.widthLimit=screen.availWidth,EL=RL.diagramMarginX,AL=RL.diagramMarginY;let h=i.db.getTitle();CL(l,"",c,i.db.getBoundaries(""),i),FT.insertArrowHead(l),FT.insertArrowEnd(l),FT.insertArrowCrossHead(l),FT.insertArrowFilledHead(l),UL(l,i.db.getRels(),i.db.getC4Shape,i),c.data.stopx=EL,c.data.stopy=AL;let u=c.data,d=u.stopy-u.starty+2*RL.diagramMarginY,p=u.stopx-u.startx+2*RL.diagramMarginX;h&&l.append("text").text(h).attr("x",(u.stopx-u.startx)/2-4*RL.diagramMarginX).attr("y",u.starty+RL.diagramMarginY),Rn(l,d,p,RL.useMaxWidth);let f=h?60:0;l.attr("viewBox",u.startx-RL.diagramMarginX+" -"+(RL.diagramMarginY+f)+" "+p+" "+(d+f)),et.debug("models:",u)}),"draw"),qL={drawPersonOrSystemArray:BL,drawBoundary:PL,setConf:NL,draw:WL}})),VL=y((()=>{YL=g((t=>`.person {\n    stroke: ${t.personBorder};\n    fill: ${t.personBkg};\n  }\n`),"getStyles"),GL=YL})),XL={};x(XL,{diagram:()=>KL});var KL,QL=y((()=>{jn(),as(),HL(),VL(),KL={parser:An,db:rs,renderer:qL,styles:GL,init:g((({c4:t,wrap:e})=>{qL.setConf(t),rs.setWrap(e)}),"init")}}));function ZL(t){return typeof t>"u"||null===t}function JL(t){return"object"==typeof t&&null!==t}function tR(t){return Array.isArray(t)?t:ZL(t)?[]:[t]}function eR(t,e){var r,i,n,a;if(e)for(r=0,i=(a=Object.keys(e)).length;r<i;r+=1)t[n=a[r]]=e[n];return t}function rR(t,e){var r,i="";for(r=0;r<e;r+=1)i+=t;return i}function iR(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t}function nR(t,e){var r="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+="\n\n"+t.mark.snippet),i+" "+r):i}function aR(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=nR(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}function sR(t,e,r,i,n){var a="",s="",o=Math.floor(n/2)-1;return i-e>o&&(e=i-o+(a=" ... ").length),r-i>o&&(r=i+o-(s=" ...").length),{str:a+t.slice(e,r).replace(/\t/g,"→")+s,pos:i-e+a.length}}function oR(t,e){return iN.repeat(" ",e-t.length)+t}function lR(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),"number"!=typeof e.indent&&(e.indent=1),"number"!=typeof e.linesBefore&&(e.linesBefore=3),"number"!=typeof e.linesAfter&&(e.linesAfter=2);for(var r,i=/\r?\n|\r|\0/g,n=[0],a=[],s=-1;r=i.exec(t.buffer);)a.push(r.index),n.push(r.index+r[0].length),t.position<=r.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var o,l,c="",h=Math.min(t.line+e.linesAfter,a.length).toString().length,u=e.maxLength-(e.indent+h+3);for(o=1;o<=e.linesBefore&&!(s-o<0);o++)l=sR(t.buffer,n[s-o],a[s-o],t.position-(n[s]-n[s-o]),u),c=iN.repeat(" ",e.indent)+oR((t.line-o+1).toString(),h)+" | "+l.str+"\n"+c;for(l=sR(t.buffer,n[s],a[s],t.position,u),c+=iN.repeat(" ",e.indent)+oR((t.line+1).toString(),h)+" | "+l.str+"\n",c+=iN.repeat("-",e.indent+h+3+l.pos)+"^\n",o=1;o<=e.linesAfter&&!(s+o>=a.length);o++)l=sR(t.buffer,n[s+o],a[s+o],t.position-(n[s]-n[s+o]),u),c+=iN.repeat(" ",e.indent)+oR((t.line+o+1).toString(),h)+" | "+l.str+"\n";return c.replace(/\n$/,"")}function cR(t){var e={};return null!==t&&Object.keys(t).forEach((function(r){t[r].forEach((function(t){e[String(t)]=r}))})),e}function hR(t,e){if(e=e||{},Object.keys(e).forEach((function(e){if(-1===sN.indexOf(e))throw new nN('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')})),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=cR(e.styleAliases||null),-1===oN.indexOf(this.kind))throw new nN('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}function uR(t,e){var r=[];return t[e].forEach((function(t){var e=r.length;r.forEach((function(r,i){r.tag===t.tag&&r.kind===t.kind&&r.multi===t.multi&&(e=i)})),r[e]=t})),r}function dR(){var t,e,r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function i(t){t.multi?(r.multi[t.kind].push(t),r.multi.fallback.push(t)):r[t.kind][t.tag]=r.fallback[t.tag]=t}for(g(i,"collectType"),t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(i);return r}function pR(t){return this.extend(t)}function fR(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)}function gR(){return null}function yR(t){return null===t}function mR(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)}function xR(t){return"true"===t||"True"===t||"TRUE"===t}function bR(t){return"[object Boolean]"===Object.prototype.toString.call(t)}function kR(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function vR(t){return 48<=t&&t<=55}function TR(t){return 48<=t&&t<=57}function wR(t){if(null===t)return!1;var e,r=t.length,i=0,n=!1;if(!r)return!1;if(("-"===(e=t[i])||"+"===e)&&(e=t[++i]),"0"===e){if(i+1===r)return!0;if("b"===(e=t[++i])){for(i++;i<r;i++)if("_"!==(e=t[i])){if("0"!==e&&"1"!==e)return!1;n=!0}return n&&"_"!==e}if("x"===e){for(i++;i<r;i++)if("_"!==(e=t[i])){if(!kR(t.charCodeAt(i)))return!1;n=!0}return n&&"_"!==e}if("o"===e){for(i++;i<r;i++)if("_"!==(e=t[i])){if(!vR(t.charCodeAt(i)))return!1;n=!0}return n&&"_"!==e}}if("_"===e)return!1;for(;i<r;i++)if("_"!==(e=t[i])){if(!TR(t.charCodeAt(i)))return!1;n=!0}return!(!n||"_"===e)}function _R(t){var e,r=t,i=1;if(-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),("-"===(e=r[0])||"+"===e)&&("-"===e&&(i=-1),e=(r=r.slice(1))[0]),"0"===r)return 0;if("0"===e){if("b"===r[1])return i*parseInt(r.slice(2),2);if("x"===r[1])return i*parseInt(r.slice(2),16);if("o"===r[1])return i*parseInt(r.slice(2),8)}return i*parseInt(r,10)}function SR(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!iN.isNegativeZero(t)}function CR(t){return!(null===t||!mN.test(t)||"_"===t[t.length-1])}function ER(t){var e,r;return r="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:r*parseFloat(e,10)}function AR(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(iN.isNegativeZero(t))return"-0.0";return r=t.toString(10),xN.test(r)?r.replace("e",".e"):r}function $R(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||iN.isNegativeZero(t))}function LR(t){return null!==t&&(null!==TN.exec(t)||null!==wN.exec(t))}function RR(t){var e,r,i,n,a,s,o,l,c=0,h=null;if(null===(e=TN.exec(t))&&(e=wN.exec(t)),null===e)throw new Error("Date resolve error");if(r=+e[1],i=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(r,i,n));if(a=+e[4],s=+e[5],o=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(h=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(h=-h)),l=new Date(Date.UTC(r,i,n,a,s,o,c)),h&&l.setTime(l.getTime()-h),l}function IR(t){return t.toISOString()}function NR(t){return"<<"===t||null===t}function DR(t){if(null===t)return!1;var e,r,i=0,n=t.length,a=CN;for(r=0;r<n;r++)if(!((e=a.indexOf(t.charAt(r)))>64)){if(e<0)return!1;i+=6}return i%8==0}function MR(t){var e,r,i=t.replace(/[\r\n=]/g,""),n=i.length,a=CN,s=0,o=[];for(e=0;e<n;e++)e%4==0&&e&&(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)),s=s<<6|a.indexOf(i.charAt(e));return 0===(r=n%4*6)?(o.push(s>>16&255),o.push(s>>8&255),o.push(255&s)):18===r?(o.push(s>>10&255),o.push(s>>2&255)):12===r&&o.push(s>>4&255),new Uint8Array(o)}function OR(t){var e,r,i="",n=0,a=t.length,s=CN;for(e=0;e<a;e++)e%3==0&&e&&(i+=s[n>>18&63],i+=s[n>>12&63],i+=s[n>>6&63],i+=s[63&n]),n=(n<<8)+t[e];return 0===(r=a%3)?(i+=s[n>>18&63],i+=s[n>>12&63],i+=s[n>>6&63],i+=s[63&n]):2===r?(i+=s[n>>10&63],i+=s[n>>4&63],i+=s[n<<2&63],i+=s[64]):1===r&&(i+=s[n>>2&63],i+=s[n<<4&63],i+=s[64],i+=s[64]),i}function PR(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}function BR(t){if(null===t)return!0;var e,r,i,n,a,s=[],o=t;for(e=0,r=o.length;e<r;e+=1){if(i=o[e],a=!1,"[object Object]"!==$N.call(i))return!1;for(n in i)if(AN.call(i,n)){if(a)return!1;a=!0}if(!a)return!1;if(-1!==s.indexOf(n))return!1;s.push(n)}return!0}function FR(t){return null!==t?t:[]}function zR(t){if(null===t)return!0;var e,r,i,n,a,s=t;for(a=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(i=s[e],"[object Object]"!==RN.call(i)||1!==(n=Object.keys(i)).length)return!1;a[e]=[n[0],i[n[0]]]}return!0}function jR(t){if(null===t)return[];var e,r,i,n,a,s=t;for(a=new Array(s.length),e=0,r=s.length;e<r;e+=1)i=s[e],n=Object.keys(i),a[e]=[n[0],i[n[0]]];return a}function UR(t){if(null===t)return!0;var e,r=t;for(e in r)if(NN.call(r,e)&&null!==r[e])return!1;return!0}function WR(t){return null!==t?t:{}}function qR(t){return Object.prototype.toString.call(t)}function YR(t){return 10===t||13===t}function GR(t){return 9===t||32===t}function HR(t){return 9===t||32===t||10===t||13===t}function VR(t){return 44===t||91===t||93===t||123===t||125===t}function XR(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function KR(t){return 120===t?2:117===t?4:85===t?8:0}function QR(t){return 48<=t&&t<=57?t-48:-1}function ZR(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"":95===t?" ":76===t?"\u2028":80===t?"\u2029":""}function JR(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}function tI(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||MN,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function eI(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=aN(r),new nN(e,r)}function rI(t,e){throw eI(t,e)}function iI(t,e){t.onWarning&&t.onWarning.call(null,eI(t,e))}function nI(t,e,r,i){var n,a,s,o;if(e<r){if(o=t.input.slice(e,r),i)for(n=0,a=o.length;n<a;n+=1)9===(s=o.charCodeAt(n))||32<=s&&s<=1114111||rI(t,"expected valid JSON character");else qN.test(o)&&rI(t,"the stream contains non-printable characters");t.result+=o}}function aI(t,e,r,i){var n,a,s,o;for(iN.isObject(r)||rI(t,"cannot merge mappings; the provided source object is unacceptable"),s=0,o=(n=Object.keys(r)).length;s<o;s+=1)a=n[s],ON.call(e,a)||(e[a]=r[a],i[a]=!0)}function sI(t,e,r,i,n,a,s,o,l){var c,h;if(Array.isArray(n))for(c=0,h=(n=Array.prototype.slice.call(n)).length;c<h;c+=1)Array.isArray(n[c])&&rI(t,"nested arrays are not supported inside keys"),"object"==typeof n&&"[object Object]"===qR(n[c])&&(n[c]="[object Object]");if("object"==typeof n&&"[object Object]"===qR(n)&&(n="[object Object]"),n=String(n),null===e&&(e={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(a))for(c=0,h=a.length;c<h;c+=1)aI(t,e,a[c],r);else aI(t,e,a,r);else!t.json&&!ON.call(r,n)&&ON.call(e,n)&&(t.line=s||t.line,t.lineStart=o||t.lineStart,t.position=l||t.position,rI(t,"duplicated mapping key")),"__proto__"===n?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:a}):e[n]=a,delete r[n];return e}function oI(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):rI(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function lI(t,e,r){for(var i=0,n=t.input.charCodeAt(t.position);0!==n;){for(;GR(n);)9===n&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),n=t.input.charCodeAt(++t.position);if(e&&35===n)do{n=t.input.charCodeAt(++t.position)}while(10!==n&&13!==n&&0!==n);if(!YR(n))break;for(oI(t),n=t.input.charCodeAt(t.position),i++,t.lineIndent=0;32===n;)t.lineIndent++,n=t.input.charCodeAt(++t.position)}return-1!==r&&0!==i&&t.lineIndent<r&&iI(t,"deficient indentation"),i}function cI(t){var e,r=t.position;return!(45!==(e=t.input.charCodeAt(r))&&46!==e||e!==t.input.charCodeAt(r+1)||e!==t.input.charCodeAt(r+2)||(r+=3,e=t.input.charCodeAt(r),0!==e&&!HR(e)))}function hI(t,e){1===e?t.result+=" ":e>1&&(t.result+=iN.repeat("\n",e-1))}function uI(t,e,r){var i,n,a,s,o,l,c,h,u=t.kind,d=t.result;if(HR(h=t.input.charCodeAt(t.position))||VR(h)||35===h||38===h||42===h||33===h||124===h||62===h||39===h||34===h||37===h||64===h||96===h||(63===h||45===h)&&(HR(i=t.input.charCodeAt(t.position+1))||r&&VR(i)))return!1;for(t.kind="scalar",t.result="",n=a=t.position,s=!1;0!==h;){if(58===h){if(HR(i=t.input.charCodeAt(t.position+1))||r&&VR(i))break}else if(35===h){if(HR(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&cI(t)||r&&VR(h))break;if(YR(h)){if(o=t.line,l=t.lineStart,c=t.lineIndent,lI(t,!1,-1),t.lineIndent>=e){s=!0,h=t.input.charCodeAt(t.position);continue}t.position=a,t.line=o,t.lineStart=l,t.lineIndent=c;break}}s&&(nI(t,n,a,!1),hI(t,t.line-o),n=a=t.position,s=!1),GR(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return nI(t,n,a,!1),!!t.result||(t.kind=u,t.result=d,!1)}function dI(t,e){var r,i,n;if(39!==(r=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,i=n=t.position;0!==(r=t.input.charCodeAt(t.position));)if(39===r){if(nI(t,i,t.position,!0),39!==(r=t.input.charCodeAt(++t.position)))return!0;i=t.position,t.position++,n=t.position}else YR(r)?(nI(t,i,n,!0),hI(t,lI(t,!1,e)),i=n=t.position):t.position===t.lineStart&&cI(t)?rI(t,"unexpected end of the document within a single quoted scalar"):(t.position++,n=t.position);rI(t,"unexpected end of the stream within a single quoted scalar")}function pI(t,e){var r,i,n,a,s,o;if(34!==(o=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;0!==(o=t.input.charCodeAt(t.position));){if(34===o)return nI(t,r,t.position,!0),t.position++,!0;if(92===o){if(nI(t,r,t.position,!0),YR(o=t.input.charCodeAt(++t.position)))lI(t,!1,e);else if(o<256&&XN[o])t.result+=KN[o],t.position++;else if((s=KR(o))>0){for(n=s,a=0;n>0;n--)(s=XR(o=t.input.charCodeAt(++t.position)))>=0?a=(a<<4)+s:rI(t,"expected hexadecimal character");t.result+=JR(a),t.position++}else rI(t,"unknown escape sequence");r=i=t.position}else YR(o)?(nI(t,r,i,!0),hI(t,lI(t,!1,e)),r=i=t.position):t.position===t.lineStart&&cI(t)?rI(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}rI(t,"unexpected end of the stream within a double quoted scalar")}function fI(t,e){var r,i,n,a,s,o,l,c,h,u,d,p,f=!0,g=t.tag,y=t.anchor,m=Object.create(null);if(91===(p=t.input.charCodeAt(t.position)))s=93,c=!1,a=[];else{if(123!==p)return!1;s=125,c=!0,a={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),p=t.input.charCodeAt(++t.position);0!==p;){if(lI(t,!0,e),(p=t.input.charCodeAt(t.position))===s)return t.position++,t.tag=g,t.anchor=y,t.kind=c?"mapping":"sequence",t.result=a,!0;f?44===p&&rI(t,"expected the node content, but found ','"):rI(t,"missed comma between flow collection entries"),d=null,o=l=!1,63===p&&(HR(t.input.charCodeAt(t.position+1))&&(o=l=!0,t.position++,lI(t,!0,e))),r=t.line,i=t.lineStart,n=t.position,vI(t,e,PN,!1,!0),u=t.tag,h=t.result,lI(t,!0,e),p=t.input.charCodeAt(t.position),(l||t.line===r)&&58===p&&(o=!0,p=t.input.charCodeAt(++t.position),lI(t,!0,e),vI(t,e,PN,!1,!0),d=t.result),c?sI(t,a,m,u,h,d,r,i,n):o?a.push(sI(t,null,m,u,h,d,r,i,n)):a.push(h),lI(t,!0,e),44===(p=t.input.charCodeAt(t.position))?(f=!0,p=t.input.charCodeAt(++t.position)):f=!1}rI(t,"unexpected end of the stream within a flow collection")}function gI(t,e){var r,i,n,a,s=jN,o=!1,l=!1,c=e,h=0,u=!1;if(124===(a=t.input.charCodeAt(t.position)))i=!1;else{if(62!==a)return!1;i=!0}for(t.kind="scalar",t.result="";0!==a;)if(43===(a=t.input.charCodeAt(++t.position))||45===a)jN===s?s=43===a?WN:UN:rI(t,"repeat of a chomping mode identifier");else{if(!((n=QR(a))>=0))break;0===n?rI(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?rI(t,"repeat of an indentation width identifier"):(c=e+n-1,l=!0)}if(GR(a)){do{a=t.input.charCodeAt(++t.position)}while(GR(a));if(35===a)do{a=t.input.charCodeAt(++t.position)}while(!YR(a)&&0!==a)}for(;0!==a;){for(oI(t),t.lineIndent=0,a=t.input.charCodeAt(t.position);(!l||t.lineIndent<c)&&32===a;)t.lineIndent++,a=t.input.charCodeAt(++t.position);if(!l&&t.lineIndent>c&&(c=t.lineIndent),YR(a))h++;else{if(t.lineIndent<c){s===WN?t.result+=iN.repeat("\n",o?1+h:h):s===jN&&o&&(t.result+="\n");break}for(i?GR(a)?(u=!0,t.result+=iN.repeat("\n",o?1+h:h)):u?(u=!1,t.result+=iN.repeat("\n",h+1)):0===h?o&&(t.result+=" "):t.result+=iN.repeat("\n",h):t.result+=iN.repeat("\n",o?1+h:h),o=!0,l=!0,h=0,r=t.position;!YR(a)&&0!==a;)a=t.input.charCodeAt(++t.position);nI(t,r,t.position,!1)}}return!0}function yI(t,e){var r,i,n=t.tag,a=t.anchor,s=[],o=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=s),i=t.input.charCodeAt(t.position);0!==i&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,rI(t,"tab characters must not be used in indentation")),45===i&&HR(t.input.charCodeAt(t.position+1)));)if(o=!0,t.position++,lI(t,!0,-1)&&t.lineIndent<=e)s.push(null),i=t.input.charCodeAt(t.position);else if(r=t.line,vI(t,e,FN,!1,!0),s.push(t.result),lI(t,!0,-1),i=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&0!==i)rI(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!o&&(t.tag=n,t.anchor=a,t.kind="sequence",t.result=s,!0)}function mI(t,e,r){var i,n,a,s,o,l,c,h=t.tag,u=t.anchor,d={},p=Object.create(null),f=null,g=null,y=null,m=!1,x=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=d),c=t.input.charCodeAt(t.position);0!==c;){if(!m&&-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,rI(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),a=t.line,63!==c&&58!==c||!HR(i)){if(s=t.line,o=t.lineStart,l=t.position,!vI(t,r,BN,!1,!0))break;if(t.line===a){for(c=t.input.charCodeAt(t.position);GR(c);)c=t.input.charCodeAt(++t.position);if(58===c)HR(c=t.input.charCodeAt(++t.position))||rI(t,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(sI(t,d,p,f,g,null,s,o,l),f=g=y=null),x=!0,m=!1,n=!1,f=t.tag,g=t.result;else{if(!x)return t.tag=h,t.anchor=u,!0;rI(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!x)return t.tag=h,t.anchor=u,!0;rI(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(m&&(sI(t,d,p,f,g,null,s,o,l),f=g=y=null),x=!0,m=!0,n=!0):m?(m=!1,n=!0):rI(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,c=i;if((t.line===a||t.lineIndent>e)&&(m&&(s=t.line,o=t.lineStart,l=t.position),vI(t,e,zN,!0,n)&&(m?g=t.result:y=t.result),m||(sI(t,d,p,f,g,y,s,o,l),f=g=y=null),lI(t,!0,-1),c=t.input.charCodeAt(t.position)),(t.line===a||t.lineIndent>e)&&0!==c)rI(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return m&&sI(t,d,p,f,g,null,s,o,l),x&&(t.tag=h,t.anchor=u,t.kind="mapping",t.result=d),x}function xI(t){var e,r,i,n,a=!1,s=!1;if(33!==(n=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&rI(t,"duplication of a tag property"),60===(n=t.input.charCodeAt(++t.position))?(a=!0,n=t.input.charCodeAt(++t.position)):33===n?(s=!0,r="!!",n=t.input.charCodeAt(++t.position)):r="!",e=t.position,a){do{n=t.input.charCodeAt(++t.position)}while(0!==n&&62!==n);t.position<t.length?(i=t.input.slice(e,t.position),n=t.input.charCodeAt(++t.position)):rI(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==n&&!HR(n);)33===n&&(s?rI(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(e-1,t.position+1),HN.test(r)||rI(t,"named tag handle cannot contain such characters"),s=!0,e=t.position+1)),n=t.input.charCodeAt(++t.position);i=t.input.slice(e,t.position),GN.test(i)&&rI(t,"tag suffix cannot contain flow indicator characters")}i&&!VN.test(i)&&rI(t,"tag name cannot contain such characters: "+i);try{i=decodeURIComponent(i)}catch{rI(t,"tag name is malformed: "+i)}return a?t.tag=i:ON.call(t.tagMap,r)?t.tag=t.tagMap[r]+i:"!"===r?t.tag="!"+i:"!!"===r?t.tag="tag:yaml.org,2002:"+i:rI(t,'undeclared tag handle "'+r+'"'),!0}function bI(t){var e,r;if(38!==(r=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&rI(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!HR(r)&&!VR(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&rI(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function kI(t){var e,r,i;if(42!==(i=t.input.charCodeAt(t.position)))return!1;for(i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!HR(i)&&!VR(i);)i=t.input.charCodeAt(++t.position);return t.position===e&&rI(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),ON.call(t.anchorMap,r)||rI(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],lI(t,!0,-1),!0}function vI(t,e,r,i,n){var a,s,o,l,c,h,u,d,p,f=1,g=!1,y=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,a=s=o=zN===r||FN===r,i&&lI(t,!0,-1)&&(g=!0,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)),1===f)for(;xI(t)||bI(t);)lI(t,!0,-1)?(g=!0,o=a,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)):o=!1;if(o&&(o=g||n),(1===f||zN===r)&&(d=PN===r||BN===r?e:e+1,p=t.position-t.lineStart,1===f?o&&(yI(t,p)||mI(t,p,d))||fI(t,d)?y=!0:(s&&gI(t,d)||dI(t,d)||pI(t,d)?y=!0:kI(t)?(y=!0,(null!==t.tag||null!==t.anchor)&&rI(t,"alias node should not have any properties")):uI(t,d,PN===r)&&(y=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===f&&(y=o&&yI(t,p))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&rI(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),l=0,c=t.implicitTypes.length;l<c;l+=1)if((u=t.implicitTypes[l]).resolve(t.result)){t.result=u.construct(t.result),t.tag=u.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(ON.call(t.typeMap[t.kind||"fallback"],t.tag))u=t.typeMap[t.kind||"fallback"][t.tag];else for(u=null,l=0,c=(h=t.typeMap.multi[t.kind||"fallback"]).length;l<c;l+=1)if(t.tag.slice(0,h[l].tag.length)===h[l].tag){u=h[l];break}u||rI(t,"unknown tag !<"+t.tag+">"),null!==t.result&&u.kind!==t.kind&&rI(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+u.kind+'", not "'+t.kind+'"'),u.resolve(t.result,t.tag)?(t.result=u.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):rI(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||y}function TI(t){var e,r,i,n,a=t.position,s=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(n=t.input.charCodeAt(t.position))&&(lI(t,!0,-1),n=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==n));){for(s=!0,n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!HR(n);)n=t.input.charCodeAt(++t.position);for(i=[],(r=t.input.slice(e,t.position)).length<1&&rI(t,"directive name must not be less than one character in length");0!==n;){for(;GR(n);)n=t.input.charCodeAt(++t.position);if(35===n){do{n=t.input.charCodeAt(++t.position)}while(0!==n&&!YR(n));break}if(YR(n))break;for(e=t.position;0!==n&&!HR(n);)n=t.input.charCodeAt(++t.position);i.push(t.input.slice(e,t.position))}0!==n&&oI(t),ON.call(ZN,r)?ZN[r](t,r,i):iI(t,'unknown document directive "'+r+'"')}lI(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,lI(t,!0,-1)):s&&rI(t,"directives end mark is expected"),vI(t,t.lineIndent-1,zN,!1,!0),lI(t,!0,-1),t.checkLineBreaks&&YN.test(t.input.slice(a,t.position))&&iI(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&cI(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,lI(t,!0,-1)):t.position<t.length-1&&rI(t,"end of the stream or a document separator is expected")}function wI(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var r=new tI(t,e),i=t.indexOf("\0");for(-1!==i&&(r.position=i,rI(r,"null byte is not allowed in input")),r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)TI(r);return r.documents}function _I(t,e,r){null!==e&&"object"==typeof e&&typeof r>"u"&&(r=e,e=null);var i=wI(t,r);if("function"!=typeof e)return i;for(var n=0,a=i.length;n<a;n+=1)e(i[n])}function SI(t,e){var r=wI(t,e);if(0!==r.length){if(1===r.length)return r[0];throw new nN("expected a single document in the stream, but found more")}}function CI(t,e){var r,i,n,a,s,o,l;if(null===e)return{};for(r={},n=0,a=(i=Object.keys(e)).length;n<a;n+=1)s=i[n],o=String(e[s]),"!!"===s.slice(0,2)&&(s="tag:yaml.org,2002:"+s.slice(2)),(l=t.compiledTypeMap.fallback[s])&&eD.call(l.styleAliases,o)&&(o=l.styleAliases[o]),r[s]=o;return r}function EI(t){var e,r,i;if(e=t.toString(16).toUpperCase(),t<=255)r="x",i=2;else if(t<=65535)r="u",i=4;else{if(!(t<=4294967295))throw new nN("code point within a string may not be greater than 0xFFFFFFFF");r="U",i=8}return"\\"+r+iN.repeat("0",i-e.length)+e}function AI(t){this.schema=t.schema||MN,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=iN.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=CI(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType='"'===t.quotingType?RD:LD,this.forceQuotes=t.forceQuotes||!1,this.replacer="function"==typeof t.replacer?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function $I(t,e){for(var r,i=iN.repeat(" ",e),n=0,a=-1,s="",o=t.length;n<o;)-1===(a=t.indexOf("\n",n))?(r=t.slice(n),n=o):(r=t.slice(n,a+1),n=a+1),r.length&&"\n"!==r&&(s+=i),s+=r;return s}function LI(t,e){return"\n"+iN.repeat(" ",t.indent*e)}function RI(t,e){var r,i;for(r=0,i=t.implicitTypes.length;r<i;r+=1)if(t.implicitTypes[r].resolve(e))return!0;return!1}function II(t){return t===sD||t===iD}function NI(t){return 32<=t&&t<=126||161<=t&&t<=55295&&8232!==t&&8233!==t||57344<=t&&t<=65533&&t!==rD||65536<=t&&t<=1114111}function DI(t){return NI(t)&&t!==rD&&t!==aD&&t!==nD}function MI(t,e,r){var i=DI(t),n=i&&!II(t);return(r?i:i&&t!==fD&&t!==vD&&t!==TD&&t!==_D&&t!==CD)&&t!==cD&&!(e===yD&&!n)||DI(e)&&!II(e)&&t===cD||e===yD&&n}function OI(t){return NI(t)&&t!==rD&&!II(t)&&t!==gD&&t!==bD&&t!==yD&&t!==fD&&t!==vD&&t!==TD&&t!==_D&&t!==CD&&t!==cD&&t!==uD&&t!==pD&&t!==oD&&t!==SD&&t!==mD&&t!==xD&&t!==dD&&t!==lD&&t!==hD&&t!==kD&&t!==wD}function PI(t){return!II(t)&&t!==yD}function BI(t,e){var r,i=t.charCodeAt(e);return i>=55296&&i<=56319&&e+1<t.length&&((r=t.charCodeAt(e+1))>=56320&&r<=57343)?1024*(i-55296)+r-56320+65536:i}function FI(t){return/^\n* /.test(t)}function zI(t,e,r,i,n,a,s,o){var l,c=0,h=null,u=!1,d=!1,p=-1!==i,f=-1,g=OI(BI(t,0))&&PI(BI(t,t.length-1));if(e||s)for(l=0;l<t.length;c>=65536?l+=2:l++){if(!NI(c=BI(t,l)))return OD;g=g&&MI(c,h,o),h=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if((c=BI(t,l))===nD)u=!0,p&&(d=d||l-f-1>i&&" "!==t[f+1],f=l);else if(!NI(c))return OD;g=g&&MI(c,h,o),h=c}d=d||p&&l-f-1>i&&" "!==t[f+1]}return u||d?r>9&&FI(t)?OD:s?a===RD?OD:ND:d?MD:DD:!g||s||n(t)?a===RD?OD:ND:ID}function jI(t,e,r,i,n){t.dump=function(){if(0===e.length)return t.quotingType===RD?'""':"''";if(!t.noCompatMode&&(-1!==AD.indexOf(e)||$D.test(e)))return t.quotingType===RD?'"'+e+'"':"'"+e+"'";var a=t.indent*Math.max(1,r),s=-1===t.lineWidth?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-a),o=i||t.flowLevel>-1&&r>=t.flowLevel;function l(e){return RI(t,e)}switch(g(l,"testAmbiguity"),zI(e,o,t.indent,s,l,t.quotingType,t.forceQuotes&&!i,n)){case ID:return e;case ND:return"'"+e.replace(/'/g,"''")+"'";case DD:return"|"+UI(e,t.indent)+WI($I(e,a));case MD:return">"+UI(e,t.indent)+WI($I(qI(e,s),a));case OD:return'"'+GI(e)+'"';default:throw new nN("impossible error: invalid scalar style")}}()}function UI(t,e){var r=FI(t)?String(e):"",i="\n"===t[t.length-1];return r+(i&&("\n"===t[t.length-2]||"\n"===t)?"+":i?"":"-")+"\n"}function WI(t){return"\n"===t[t.length-1]?t.slice(0,-1):t}function qI(t,e){for(var r,i,n=/(\n+)([^\n]*)/g,a=(c=void 0,c=-1!==(c=t.indexOf("\n"))?c:t.length,n.lastIndex=c,YI(t.slice(0,c),e)),s="\n"===t[0]||" "===t[0];i=n.exec(t);){var o=i[1],l=i[2];r=" "===l[0],a+=o+(s||r||""===l?"":"\n")+YI(l,e),s=r}var c;return a}function YI(t,e){if(""===t||" "===t[0])return t;for(var r,i,n=/ [^ ]/g,a=0,s=0,o=0,l="";r=n.exec(t);)(o=r.index)-a>e&&(i=s>a?s:o,l+="\n"+t.slice(a,i),a=i+1),s=o;return l+="\n",t.length-a>e&&s>a?l+=t.slice(a,s)+"\n"+t.slice(s+1):l+=t.slice(a),l.slice(1)}function GI(t){for(var e,r="",i=0,n=0;n<t.length;i>=65536?n+=2:n++)i=BI(t,n),!(e=ED[i])&&NI(i)?(r+=t[n],i>=65536&&(r+=t[n+1])):r+=e||EI(i);return r}function HI(t,e,r){var i,n,a,s="",o=t.tag;for(i=0,n=r.length;i<n;i+=1)a=r[i],t.replacer&&(a=t.replacer.call(r,String(i),a)),(ZI(t,e,a,!1,!1)||typeof a>"u"&&ZI(t,e,null,!1,!1))&&(""!==s&&(s+=","+(t.condenseFlow?"":" ")),s+=t.dump);t.tag=o,t.dump="["+s+"]"}function VI(t,e,r,i){var n,a,s,o="",l=t.tag;for(n=0,a=r.length;n<a;n+=1)s=r[n],t.replacer&&(s=t.replacer.call(r,String(n),s)),(ZI(t,e+1,s,!0,!0,!1,!0)||typeof s>"u"&&ZI(t,e+1,null,!0,!0,!1,!0))&&((!i||""!==o)&&(o+=LI(t,e)),t.dump&&nD===t.dump.charCodeAt(0)?o+="-":o+="- ",o+=t.dump);t.tag=l,t.dump=o||"[]"}function XI(t,e,r){var i,n,a,s,o,l="",c=t.tag,h=Object.keys(r);for(i=0,n=h.length;i<n;i+=1)o="",""!==l&&(o+=", "),t.condenseFlow&&(o+='"'),s=r[a=h[i]],t.replacer&&(s=t.replacer.call(r,a,s)),ZI(t,e,a,!1,!1)&&(t.dump.length>1024&&(o+="? "),o+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),ZI(t,e,s,!1,!1)&&(l+=o+=t.dump));t.tag=c,t.dump="{"+l+"}"}function KI(t,e,r,i){var n,a,s,o,l,c,h="",u=t.tag,d=Object.keys(r);if(!0===t.sortKeys)d.sort();else if("function"==typeof t.sortKeys)d.sort(t.sortKeys);else if(t.sortKeys)throw new nN("sortKeys must be a boolean or a function");for(n=0,a=d.length;n<a;n+=1)c="",(!i||""!==h)&&(c+=LI(t,e)),o=r[s=d[n]],t.replacer&&(o=t.replacer.call(r,s,o)),ZI(t,e+1,s,!0,!0,!0)&&((l=null!==t.tag&&"?"!==t.tag||t.dump&&t.dump.length>1024)&&(t.dump&&nD===t.dump.charCodeAt(0)?c+="?":c+="? "),c+=t.dump,l&&(c+=LI(t,e)),ZI(t,e+1,o,!0,l)&&(t.dump&&nD===t.dump.charCodeAt(0)?c+=":":c+=": ",h+=c+=t.dump));t.tag=u,t.dump=h||"{}"}function QI(t,e,r){var i,n,a,s,o,l;for(a=0,s=(n=r?t.explicitTypes:t.implicitTypes).length;a<s;a+=1)if(((o=n[a]).instanceOf||o.predicate)&&(!o.instanceOf||"object"==typeof e&&e instanceof o.instanceOf)&&(!o.predicate||o.predicate(e))){if(r?o.multi&&o.representName?t.tag=o.representName(e):t.tag=o.tag:t.tag="?",o.represent){if(l=t.styleMap[o.tag]||o.defaultStyle,"[object Function]"===tD.call(o.represent))i=o.represent(e,l);else{if(!eD.call(o.represent,l))throw new nN("!<"+o.tag+'> tag resolver accepts not "'+l+'" style');i=o.represent[l](e,l)}t.dump=i}return!0}return!1}function ZI(t,e,r,i,n,a,s){t.tag=null,t.dump=r,QI(t,r,!1)||QI(t,r,!0);var o,l=tD.call(t.dump),c=i;i&&(i=t.flowLevel<0||t.flowLevel>e);var h,u,d="[object Object]"===l||"[object Array]"===l;if(d&&(u=-1!==(h=t.duplicates.indexOf(r))),(null!==t.tag&&"?"!==t.tag||u||2!==t.indent&&e>0)&&(n=!1),u&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(d&&u&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),"[object Object]"===l)i&&0!==Object.keys(t.dump).length?(KI(t,e,t.dump,n),u&&(t.dump="&ref_"+h+t.dump)):(XI(t,e,t.dump),u&&(t.dump="&ref_"+h+" "+t.dump));else if("[object Array]"===l)i&&0!==t.dump.length?(t.noArrayIndent&&!s&&e>0?VI(t,e-1,t.dump,n):VI(t,e,t.dump,n),u&&(t.dump="&ref_"+h+t.dump)):(HI(t,e,t.dump),u&&(t.dump="&ref_"+h+" "+t.dump));else{if("[object String]"!==l){if("[object Undefined]"===l)return!1;if(t.skipInvalid)return!1;throw new nN("unacceptable kind of an object to dump "+l)}"?"!==t.tag&&jI(t,t.dump,e,a,c)}null!==t.tag&&"?"!==t.tag&&(o=encodeURI("!"===t.tag[0]?t.tag.slice(1):t.tag).replace(/!/g,"%21"),o="!"===t.tag[0]?"!"+o:"tag:yaml.org,2002:"===o.slice(0,18)?"!!"+o.slice(18):"!<"+o+">",t.dump=o+" "+t.dump)}return!0}function JI(t,e){var r,i,n=[],a=[];for(tN(t,n,a),r=0,i=a.length;r<i;r+=1)e.duplicates.push(n[a[r]]);e.usedDuplicates=new Array(i)}function tN(t,e,r){var i,n,a;if(null!==t&&"object"==typeof t)if(-1!==(n=e.indexOf(t)))-1===r.indexOf(n)&&r.push(n);else if(e.push(t),Array.isArray(t))for(n=0,a=t.length;n<a;n+=1)tN(t[n],e,r);else for(n=0,a=(i=Object.keys(t)).length;n<a;n+=1)tN(t[i[n]],e,r)}function eN(t,e){var r=new AI(e=e||{});r.noRefs||JI(t,r);var i=t;return r.replacer&&(i=r.replacer.call({"":i},"",i)),ZI(r,0,i,!0,!0)?r.dump+"\n":""}function rN(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var iN,nN,aN,sN,oN,lN,cN,hN,uN,dN,pN,fN,gN,yN,mN,xN,bN,kN,vN,TN,wN,_N,SN,CN,EN,AN,$N,LN,RN,IN,NN,DN,MN,ON,PN,BN,FN,zN,jN,UN,WN,qN,YN,GN,HN,VN,XN,KN,QN,ZN,JN,tD,eD,rD,iD,nD,aD,sD,oD,lD,cD,hD,uD,dD,pD,fD,gD,yD,mD,xD,bD,kD,vD,TD,wD,_D,SD,CD,ED,AD,$D,LD,RD,ID,ND,DD,MD,OD,PD,BD,FD,zD=y((()=>{for(g(ZL,"isNothing"),g(JL,"isObject"),g(tR,"toArray"),g(eR,"extend"),g(rR,"repeat"),g(iR,"isNegativeZero"),iN={isNothing:ZL,isObject:JL,toArray:tR,repeat:rR,isNegativeZero:iR,extend:eR},g(nR,"formatError"),g(aR,"YAMLException$1"),aR.prototype=Object.create(Error.prototype),aR.prototype.constructor=aR,aR.prototype.toString=g((function(t){return this.name+": "+nR(this,t)}),"toString"),nN=aR,g(sR,"getLine"),g(oR,"padStart"),g(lR,"makeSnippet"),aN=lR,sN=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],oN=["scalar","sequence","mapping"],g(cR,"compileStyleAliases"),g(hR,"Type$1"),lN=hR,g(uR,"compileList"),g(dR,"compileMap"),g(pR,"Schema$1"),pR.prototype.extend=g((function(t){var e=[],r=[];if(t instanceof lN)r.push(t);else if(Array.isArray(t))r=r.concat(t);else{if(!t||!Array.isArray(t.implicit)&&!Array.isArray(t.explicit))throw new nN("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(r=r.concat(t.explicit))}e.forEach((function(t){if(!(t instanceof lN))throw new nN("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(t.loadKind&&"scalar"!==t.loadKind)throw new nN("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(t.multi)throw new nN("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),r.forEach((function(t){if(!(t instanceof lN))throw new nN("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var i=Object.create(pR.prototype);return i.implicit=(this.implicit||[]).concat(e),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=uR(i,"implicit"),i.compiledExplicit=uR(i,"explicit"),i.compiledTypeMap=dR(i.compiledImplicit,i.compiledExplicit),i}),"extend"),cN=pR,hN=new lN("tag:yaml.org,2002:str",{kind:"scalar",construct:g((function(t){return null!==t?t:""}),"construct")}),uN=new lN("tag:yaml.org,2002:seq",{kind:"sequence",construct:g((function(t){return null!==t?t:[]}),"construct")}),dN=new lN("tag:yaml.org,2002:map",{kind:"mapping",construct:g((function(t){return null!==t?t:{}}),"construct")}),pN=new cN({explicit:[hN,uN,dN]}),g(fR,"resolveYamlNull"),g(gR,"constructYamlNull"),g(yR,"isNull"),fN=new lN("tag:yaml.org,2002:null",{kind:"scalar",resolve:fR,construct:gR,predicate:yR,represent:{canonical:g((function(){return"~"}),"canonical"),lowercase:g((function(){return"null"}),"lowercase"),uppercase:g((function(){return"NULL"}),"uppercase"),camelcase:g((function(){return"Null"}),"camelcase"),empty:g((function(){return""}),"empty")},defaultStyle:"lowercase"}),g(mR,"resolveYamlBoolean"),g(xR,"constructYamlBoolean"),g(bR,"isBoolean"),gN=new lN("tag:yaml.org,2002:bool",{kind:"scalar",resolve:mR,construct:xR,predicate:bR,represent:{lowercase:g((function(t){return t?"true":"false"}),"lowercase"),uppercase:g((function(t){return t?"TRUE":"FALSE"}),"uppercase"),camelcase:g((function(t){return t?"True":"False"}),"camelcase")},defaultStyle:"lowercase"}),g(kR,"isHexCode"),g(vR,"isOctCode"),g(TR,"isDecCode"),g(wR,"resolveYamlInteger"),g(_R,"constructYamlInteger"),g(SR,"isInteger"),yN=new lN("tag:yaml.org,2002:int",{kind:"scalar",resolve:wR,construct:_R,predicate:SR,represent:{binary:g((function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)}),"binary"),octal:g((function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)}),"octal"),decimal:g((function(t){return t.toString(10)}),"decimal"),hexadecimal:g((function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}),"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),mN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),g(CR,"resolveYamlFloat"),g(ER,"constructYamlFloat"),xN=/^[-+]?[0-9]+e/,g(AR,"representYamlFloat"),g($R,"isFloat"),bN=new lN("tag:yaml.org,2002:float",{kind:"scalar",resolve:CR,construct:ER,predicate:$R,represent:AR,defaultStyle:"lowercase"}),kN=pN.extend({implicit:[fN,gN,yN,bN]}),vN=kN,TN=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),wN=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),g(LR,"resolveYamlTimestamp"),g(RR,"constructYamlTimestamp"),g(IR,"representYamlTimestamp"),_N=new lN("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:LR,construct:RR,instanceOf:Date,represent:IR}),g(NR,"resolveYamlMerge"),SN=new lN("tag:yaml.org,2002:merge",{kind:"scalar",resolve:NR}),CN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",g(DR,"resolveYamlBinary"),g(MR,"constructYamlBinary"),g(OR,"representYamlBinary"),g(PR,"isBinary"),EN=new lN("tag:yaml.org,2002:binary",{kind:"scalar",resolve:DR,construct:MR,predicate:PR,represent:OR}),AN=Object.prototype.hasOwnProperty,$N=Object.prototype.toString,g(BR,"resolveYamlOmap"),g(FR,"constructYamlOmap"),LN=new lN("tag:yaml.org,2002:omap",{kind:"sequence",resolve:BR,construct:FR}),RN=Object.prototype.toString,g(zR,"resolveYamlPairs"),g(jR,"constructYamlPairs"),IN=new lN("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:zR,construct:jR}),NN=Object.prototype.hasOwnProperty,g(UR,"resolveYamlSet"),g(WR,"constructYamlSet"),DN=new lN("tag:yaml.org,2002:set",{kind:"mapping",resolve:UR,construct:WR}),MN=vN.extend({implicit:[_N,SN],explicit:[EN,LN,IN,DN]}),ON=Object.prototype.hasOwnProperty,PN=1,BN=2,FN=3,zN=4,jN=1,UN=2,WN=3,qN=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,YN=/[\x85\u2028\u2029]/,GN=/[,\[\]\{\}]/,HN=/^(?:!|!!|![a-z\-]+!)$/i,VN=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i,g(qR,"_class"),g(YR,"is_EOL"),g(GR,"is_WHITE_SPACE"),g(HR,"is_WS_OR_EOL"),g(VR,"is_FLOW_INDICATOR"),g(XR,"fromHexCode"),g(KR,"escapedHexLen"),g(QR,"fromDecimalCode"),g(ZR,"simpleEscapeSequence"),g(JR,"charFromCodepoint"),XN=new Array(256),KN=new Array(256),QN=0;QN<256;QN++)XN[QN]=ZR(QN)?1:0,KN[QN]=ZR(QN);g(tI,"State$1"),g(eI,"generateError"),g(rI,"throwError"),g(iI,"throwWarning"),ZN={YAML:g((function(t,e,r){var i,n,a;null!==t.version&&rI(t,"duplication of %YAML directive"),1!==r.length&&rI(t,"YAML directive accepts exactly one argument"),null===(i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&rI(t,"ill-formed argument of the YAML directive"),n=parseInt(i[1],10),a=parseInt(i[2],10),1!==n&&rI(t,"unacceptable YAML version of the document"),t.version=r[0],t.checkLineBreaks=a<2,1!==a&&2!==a&&iI(t,"unsupported YAML version of the document")}),"handleYamlDirective"),TAG:g((function(t,e,r){var i,n;2!==r.length&&rI(t,"TAG directive accepts exactly two arguments"),i=r[0],n=r[1],HN.test(i)||rI(t,"ill-formed tag handle (first argument) of the TAG directive"),ON.call(t.tagMap,i)&&rI(t,'there is a previously declared suffix for "'+i+'" tag handle'),VN.test(n)||rI(t,"ill-formed tag prefix (second argument) of the TAG directive");try{n=decodeURIComponent(n)}catch{rI(t,"tag prefix is malformed: "+n)}t.tagMap[i]=n}),"handleTagDirective")},g(nI,"captureSegment"),g(aI,"mergeMappings"),g(sI,"storeMappingPair"),g(oI,"readLineBreak"),g(lI,"skipSeparationSpace"),g(cI,"testDocumentSeparator"),g(hI,"writeFoldedLines"),g(uI,"readPlainScalar"),g(dI,"readSingleQuotedScalar"),g(pI,"readDoubleQuotedScalar"),g(fI,"readFlowCollection"),g(gI,"readBlockScalar"),g(yI,"readBlockSequence"),g(mI,"readBlockMapping"),g(xI,"readTagProperty"),g(bI,"readAnchorProperty"),g(kI,"readAlias"),g(vI,"composeNode"),g(TI,"readDocument"),g(wI,"loadDocuments"),g(_I,"loadAll$1"),g(SI,"load$1"),JN={loadAll:_I,load:SI},tD=Object.prototype.toString,eD=Object.prototype.hasOwnProperty,rD=65279,iD=9,nD=10,aD=13,sD=32,oD=33,lD=34,cD=35,hD=37,uD=38,dD=39,pD=42,fD=44,gD=45,yD=58,mD=61,xD=62,bD=63,kD=64,vD=91,TD=93,wD=96,_D=123,SD=124,CD=125,(ED={})[0]="\\0",ED[7]="\\a",ED[8]="\\b",ED[9]="\\t",ED[10]="\\n",ED[11]="\\v",ED[12]="\\f",ED[13]="\\r",ED[27]="\\e",ED[34]='\\"',ED[92]="\\\\",ED[133]="\\N",ED[160]="\\_",ED[8232]="\\L",ED[8233]="\\P",AD=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],$D=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/,g(CI,"compileStyleMap"),g(EI,"encodeHex"),LD=1,RD=2,g(AI,"State"),g($I,"indentString"),g(LI,"generateNextLine"),g(RI,"testImplicitResolving"),g(II,"isWhitespace"),g(NI,"isPrintable"),g(DI,"isNsCharOrWhitespace"),g(MI,"isPlainSafe"),g(OI,"isPlainSafeFirst"),g(PI,"isPlainSafeLast"),g(BI,"codePointAt"),g(FI,"needIndentIndicator"),ID=1,ND=2,DD=3,MD=4,OD=5,g(zI,"chooseScalarStyle"),g(jI,"writeScalar"),g(UI,"blockHeader"),g(WI,"dropEndingNewline"),g(qI,"foldString"),g(YI,"foldLine"),g(GI,"escapeString"),g(HI,"writeFlowSequence"),g(VI,"writeBlockSequence"),g(XI,"writeFlowMapping"),g(KI,"writeBlockMapping"),g(QI,"detectType"),g(ZI,"writeNode"),g(JI,"getDuplicateReferences"),g(tN,"inspectNode"),g(eN,"dump$1"),PD={dump:eN},g(rN,"renamed"),BD=kN,FD=JN.load,rN("safeLoad","load"),rN("safeLoadAll","loadAll"),rN("safeDump","dump")}));function jD(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}function UD(t){ZD=t}function WD(t,e=""){let r="string"==typeof t?t:t.source,i={replace:g(((t,e)=>{let n="string"==typeof e?e:e.source;return n=n.replace(tM.caret,"$1"),r=r.replace(t,n),i}),"replace"),getRegex:g((()=>new RegExp(r,e)),"getRegex")};return i}function qD(t,e){if(e){if(tM.escapeTest.test(t))return t.replace(tM.escapeReplace,aO)}else if(tM.escapeTestNoEncode.test(t))return t.replace(tM.escapeReplaceNoEncode,aO);return t}function YD(t){try{t=encodeURI(t).replace(tM.percentDecode,"%")}catch{return null}return t}function GD(t,e){let r=t.replace(tM.findPipe,((t,e,r)=>{let i=!1,n=e;for(;--n>=0&&"\\"===r[n];)i=!i;return i?"|":" |"})).split(tM.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(tM.slashPipe,"|");return r}function HD(t,e,r){let i=t.length;if(0===i)return"";let n=0;for(;n<i;){let a=t.charAt(i-n-1);if(a!==e||r){if(a===e||!r)break;n++}else n++}return t.slice(0,i-n)}function VD(t,e){if(-1===t.indexOf(e[1]))return-1;let r=0;for(let i=0;i<t.length;i++)if("\\"===t[i])i++;else if(t[i]===e[0])r++;else if(t[i]===e[1]&&(r--,r<0))return i;return r>0?-2:-1}function XD(t,e,r,i,n){let a=e.href,s=e.title||null,o=t[1].replace(n.other.outputLinkReplace,"$1");i.state.inLink=!0;let l={type:"!"===t[0].charAt(0)?"image":"link",raw:r,href:a,title:s,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,l}function KD(t,e,r){let i=t.match(r.other.indentCodeCompensation);if(null===i)return e;let n=i[1];return e.split("\n").map((t=>{let e=t.match(r.other.beginningSpace);if(null===e)return t;let[i]=e;return i.length>=n.length?t.slice(n.length):t})).join("\n")}function QD(t,e){return pO.parse(t,e)}var ZD,JD,tM,eM,rM,iM,nM,aM,sM,oM,lM,cM,hM,uM,dM,pM,fM,gM,yM,mM,xM,bM,kM,vM,TM,wM,_M,SM,CM,EM,AM,$M,LM,RM,IM,NM,DM,MM,OM,PM,BM,FM,zM,jM,UM,WM,qM,YM,GM,HM,VM,XM,KM,QM,ZM,JM,tO,eO,rO,iO,nO,aO,sO,oO,lO,cO,hO,uO,dO,pO,fO=y((()=>{g(jD,"L"),ZD={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null},g(UD,"G"),JD={exec:g((()=>null),"exec")},g(WD,"h"),tM={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:g((t=>new RegExp(`^( {0,3}${t})((?:[\t ][^\\n]*)?(?:\\n|$))`)),"listItemRegex"),nextBulletRegex:g((t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`)),"nextBulletRegex"),hrRegex:g((t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`)),"hrRegex"),fencesBeginRegex:g((t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`)),"fencesBeginRegex"),headingBeginRegex:g((t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`)),"headingBeginRegex"),htmlBeginRegex:g((t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")),"htmlBeginRegex")},eM=/^(?:[ \t]*(?:\n|$))+/,rM=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,iM=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,nM=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,aM=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,sM=/(?:[*+-]|\d{1,9}[.)])/,lM=WD(oM=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,sM).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),cM=WD(oM).replace(/bull/g,sM).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),hM=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,uM=/^[^\n]+/,dM=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,pM=WD(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",dM).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),fM=WD(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,sM).getRegex(),gM="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",yM=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,mM=WD("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",yM).replace("tag",gM).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),xM=WD(hM).replace("hr",nM).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gM).getRegex(),bM=WD(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",xM).getRegex(),kM={blockquote:bM,code:rM,def:pM,fences:iM,heading:aM,hr:nM,html:mM,lheading:lM,list:fM,newline:eM,paragraph:xM,table:JD,text:uM},vM=WD("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",nM).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gM).getRegex(),TM={...kM,lheading:cM,table:vM,paragraph:WD(hM).replace("hr",nM).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",vM).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gM).getRegex()},wM={...kM,html:WD("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",yM).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:JD,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:WD(hM).replace("hr",nM).replace("heading"," *#{1,6} *[^\n]").replace("lheading",lM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},_M=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,SM=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,CM=/^( {2,}|\\)\n(?!\s*$)/,EM=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,AM=/[\p{P}\p{S}]/u,$M=/[\s\p{P}\p{S}]/u,LM=/[^\s\p{P}\p{S}]/u,RM=WD(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,$M).getRegex(),IM=/(?!~)[\p{P}\p{S}]/u,NM=/(?!~)[\s\p{P}\p{S}]/u,DM=/(?:[^\s\p{P}\p{S}]|~)/u,MM=/\[[^\[\]]*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)|`[^`]*?`|<(?! )[^<>]*?>/g,PM=WD(OM=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,"u").replace(/punct/g,AM).getRegex(),BM=WD(OM,"u").replace(/punct/g,IM).getRegex(),zM=WD(FM="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)","gu").replace(/notPunctSpace/g,LM).replace(/punctSpace/g,$M).replace(/punct/g,AM).getRegex(),jM=WD(FM,"gu").replace(/notPunctSpace/g,DM).replace(/punctSpace/g,NM).replace(/punct/g,IM).getRegex(),UM=WD("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,LM).replace(/punctSpace/g,$M).replace(/punct/g,AM).getRegex(),WM=WD(/\\(punct)/,"gu").replace(/punct/g,AM).getRegex(),qM=WD(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),YM=WD(yM).replace("(?:--\x3e|$)","--\x3e").getRegex(),GM=WD("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",YM).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),HM=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`[^`]*`|[^\[\]\\`])*?/,VM=WD(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",HM).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),XM=WD(/^!?\[(label)\]\[(ref)\]/).replace("label",HM).replace("ref",dM).getRegex(),KM=WD(/^!?\[(ref)\](?:\[\])?/).replace("ref",dM).getRegex(),QM=WD("reflink|nolink(?!\\()","g").replace("reflink",XM).replace("nolink",KM).getRegex(),ZM={_backpedal:JD,anyPunctuation:WM,autolink:qM,blockSkip:MM,br:CM,code:SM,del:JD,emStrongLDelim:PM,emStrongRDelimAst:zM,emStrongRDelimUnd:UM,escape:_M,link:VM,nolink:KM,punctuation:RM,reflink:XM,reflinkSearch:QM,tag:GM,text:EM,url:JD},JM={...ZM,link:WD(/^!?\[(label)\]\((.*?)\)/).replace("label",HM).getRegex(),reflink:WD(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",HM).getRegex()},tO={...ZM,emStrongRDelimAst:jM,emStrongLDelim:BM,url:WD(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},eO={...tO,br:WD(CM).replace("{2,}","*").getRegex(),text:WD(tO.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},rO={normal:kM,gfm:TM,pedantic:wM},iO={normal:ZM,gfm:tO,breaks:eO,pedantic:JM},nO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},aO=g((t=>nO[t]),"ke"),g(qD,"w"),g(YD,"J"),g(GD,"V"),g(HD,"z"),g(VD,"ge"),g(XD,"fe"),g(KD,"Je"),sO=class{static{g(this,"y")}options;rules;lexer;constructor(t){this.options=t||ZD}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:HD(t,"\n")}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let t=e[0],r=KD(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let e=HD(t,"#");(this.options.pedantic||!e||this.rules.other.endingSpaceChar.test(e))&&(t=e.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:HD(e[0],"\n")}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let t=HD(e[0],"\n").split("\n"),r="",i="",n=[];for(;t.length>0;){let e,a=!1,s=[];for(e=0;e<t.length;e++)if(this.rules.other.blockquoteStart.test(t[e]))s.push(t[e]),a=!0;else{if(a)break;s.push(t[e])}t=t.slice(e);let o=s.join("\n"),l=o.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}\n${o}`:o,i=i?`${i}\n${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,n,!0),this.lexer.state.top=c,0===t.length)break;let h=n.at(-1);if("code"===h?.type)break;if("blockquote"===h?.type){let e=h,a=e.raw+"\n"+t.join("\n"),s=this.blockquote(a);n[n.length-1]=s,r=r.substring(0,r.length-e.raw.length)+s.raw,i=i.substring(0,i.length-e.text.length)+s.text;break}if("list"!==h?.type);else{let e=h,a=e.raw+"\n"+t.join("\n"),s=this.list(a);n[n.length-1]=s,r=r.substring(0,r.length-h.raw.length)+s.raw,i=i.substring(0,i.length-e.raw.length)+s.raw,t=a.substring(n.at(-1).raw.length).split("\n")}}return{type:"blockquote",raw:r,tokens:n,text:i}}}list(t){let e=this.rules.block.list.exec(t);if(e){let r=e[1].trim(),i=r.length>1,n={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let a=this.rules.other.listItemRegex(r),s=!1;for(;t;){let r=!1,i="",o="";if(!(e=a.exec(t))||this.rules.block.hr.test(t))break;i=e[0],t=t.substring(i.length);let l=e[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,(t=>" ".repeat(3*t.length))),c=t.split("\n",1)[0],h=!l.trim(),u=0;if(this.options.pedantic?(u=2,o=l.trimStart()):h?u=e[1].length+1:(u=e[2].search(this.rules.other.nonSpaceChar),u=u>4?1:u,o=l.slice(u),u+=e[1].length),h&&this.rules.other.blankLine.test(c)&&(i+=c+"\n",t=t.substring(c.length+1),r=!0),!r){let e=this.rules.other.nextBulletRegex(u),r=this.rules.other.hrRegex(u),n=this.rules.other.fencesBeginRegex(u),a=this.rules.other.headingBeginRegex(u),s=this.rules.other.htmlBeginRegex(u);for(;t;){let d,p=t.split("\n",1)[0];if(c=p,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),d=c):d=c.replace(this.rules.other.tabCharGlobal,"    "),n.test(c)||a.test(c)||s.test(c)||e.test(c)||r.test(c))break;if(d.search(this.rules.other.nonSpaceChar)>=u||!c.trim())o+="\n"+d.slice(u);else{if(h||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||n.test(l)||a.test(l)||r.test(l))break;o+="\n"+c}!h&&!c.trim()&&(h=!0),i+=p+"\n",t=t.substring(p.length+1),l=d.slice(u)}}n.loose||(s?n.loose=!0:this.rules.other.doubleBlankLine.test(i)&&(s=!0));let d,p=null;this.options.gfm&&(p=this.rules.other.listIsTask.exec(o),p&&(d="[ ] "!==p[0],o=o.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:i,task:!!p,checked:d,loose:!1,text:o,tokens:[]}),n.raw+=i}let o=n.items.at(-1);if(!o)return;o.raw=o.raw.trimEnd(),o.text=o.text.trimEnd(),n.raw=n.raw.trimEnd();for(let t=0;t<n.items.length;t++)if(this.lexer.state.top=!1,n.items[t].tokens=this.lexer.blockTokens(n.items[t].text,[]),!n.loose){let e=n.items[t].tokens.filter((t=>"space"===t.type)),r=e.length>0&&e.some((t=>this.rules.other.anyLine.test(t.raw)));n.loose=r}if(n.loose)for(let t=0;t<n.items.length;t++)n.items[t].loose=!0;return n}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:r,title:i}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let r=GD(e[1]),i=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],a={type:"table",raw:e[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let t of i)this.rules.other.tableAlignRight.test(t)?a.align.push("right"):this.rules.other.tableAlignCenter.test(t)?a.align.push("center"):this.rules.other.tableAlignLeft.test(t)?a.align.push("left"):a.align.push(null);for(let t=0;t<r.length;t++)a.header.push({text:r[t],tokens:this.lexer.inline(r[t]),header:!0,align:a.align[t]});for(let t of n)a.rows.push(GD(t,a.header.length).map(((t,e)=>({text:t,tokens:this.lexer.inline(t),header:!1,align:a.align[e]}))));return a}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let t="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let e=HD(t.slice(0,-1),"\\");if((t.length-e.length)%2==0)return}else{let t=VD(e[2],"()");if(-2===t)return;if(t>-1){let r=(0===e[0].indexOf("!")?5:4)+e[1].length+t;e[2]=e[2].substring(0,t),e[0]=e[0].substring(0,r).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){let t=this.rules.other.pedanticHrefTitle.exec(r);t&&(r=t[1],i=t[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(r=this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?r.slice(1):r.slice(1,-1)),XD(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let t=e[(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!t){let t=r[0].charAt(0);return{type:"text",raw:t,text:t}}return XD(r,t,r[0],this.lexer,this.rules)}}emStrong(t,e,r=""){let i=this.rules.inline.emStrongLDelim.exec(t);if(!(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))&&(!i[1]&&!i[2]||!r||this.rules.inline.punctuation.exec(r))){let r,n,a=[...i[0]].length-1,s=a,o=0,l="*"===i[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,e=e.slice(-1*t.length+a);null!=(i=l.exec(e));){if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!r)continue;if(n=[...r].length,i[3]||i[4]){s+=n;continue}if((i[5]||i[6])&&a%3&&!((a+n)%3)){o+=n;continue}if(s-=n,s>0)continue;n=Math.min(n,n+s+o);let e=[...i[0]][0].length,l=t.slice(0,a+i.index+e+n);if(Math.min(a,n)%2){let t=l.slice(1,-1);return{type:"em",raw:l,text:t,tokens:this.lexer.inlineTokens(t)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(t),i=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return r&&i&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let t,r;return"@"===e[2]?(t=e[1],r="mailto:"+t):(t=e[1],r=t),{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let t,r;if("@"===e[2])t=e[0],r="mailto:"+t;else{let i;do{i=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??""}while(i!==e[0]);t=e[0],r="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:t,href:r,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},oO=class t{static{g(this,"l")}tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||ZD,this.options.tokenizer=this.options.tokenizer||new sO,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:tM,block:rO.normal,inline:iO.normal};this.options.pedantic?(e.block=rO.pedantic,e.inline=iO.pedantic):this.options.gfm&&(e.block=rO.gfm,this.options.breaks?e.inline=iO.breaks:e.inline=iO.gfm),this.tokenizer.rules=e}static get rules(){return{block:rO,inline:iO}}static lex(e,r){return new t(r).lex(e)}static lexInline(e,r){return new t(r).inlineTokens(e)}lex(t){t=t.replace(tM.carriageReturn,"\n"),this.blockTokens(t,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],r=!1){for(this.options.pedantic&&(t=t.replace(tM.tabCharGlobal,"    ").replace(tM.spaceLine,""));t;){let i;if(this.options.extensions?.block?.some((r=>!!(i=r.call({lexer:this},t,e))&&(t=t.substring(i.raw.length),e.push(i),!0))))continue;if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length);let r=e.at(-1);1===i.raw.length&&void 0!==r?r.raw+="\n":e.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length);let r=e.at(-1);"paragraph"===r?.type||"text"===r?.type?(r.raw+=(r.raw.endsWith("\n")?"":"\n")+i.raw,r.text+="\n"+i.text,this.inlineQueue.at(-1).src=r.text):e.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length);let r=e.at(-1);"paragraph"===r?.type||"text"===r?.type?(r.raw+=(r.raw.endsWith("\n")?"":"\n")+i.raw,r.text+="\n"+i.raw,this.inlineQueue.at(-1).src=r.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title},e.push(i));continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),e.push(i);continue}let n=t;if(this.options.extensions?.startBlock){let e,r=1/0,i=t.slice(1);this.options.extensions.startBlock.forEach((t=>{e=t.call({lexer:this},i),"number"==typeof e&&e>=0&&(r=Math.min(r,e))})),r<1/0&&r>=0&&(n=t.substring(0,r+1))}if(this.state.top&&(i=this.tokenizer.paragraph(n))){let a=e.at(-1);r&&"paragraph"===a?.type?(a.raw+=(a.raw.endsWith("\n")?"":"\n")+i.raw,a.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):e.push(i),r=n.length!==t.length,t=t.substring(i.raw.length)}else if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length);let r=e.at(-1);"text"===r?.type?(r.raw+=(r.raw.endsWith("\n")?"":"\n")+i.raw,r.text+="\n"+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=r.text):e.push(i)}else if(t){let e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let r=t,i=null;if(this.tokens.links){let t=Object.keys(this.tokens.links);if(t.length>0)for(;null!=(i=this.tokenizer.rules.inline.reflinkSearch.exec(r));)t.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(i=this.tokenizer.rules.inline.anyPunctuation.exec(r));)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(i=this.tokenizer.rules.inline.blockSkip.exec(r));)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let n=!1,a="";for(;t;){let i;if(n||(a=""),n=!1,this.options.extensions?.inline?.some((r=>!!(i=r.call({lexer:this},t,e))&&(t=t.substring(i.raw.length),e.push(i),!0))))continue;if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length);let r=e.at(-1);"text"===i.type&&"text"===r?.type?(r.raw+=i.raw,r.text+=i.text):e.push(i);continue}if(i=this.tokenizer.emStrong(t,r,a)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),e.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),e.push(i);continue}let s=t;if(this.options.extensions?.startInline){let e,r=1/0,i=t.slice(1);this.options.extensions.startInline.forEach((t=>{e=t.call({lexer:this},i),"number"==typeof e&&e>=0&&(r=Math.min(r,e))})),r<1/0&&r>=0&&(s=t.substring(0,r+1))}if(i=this.tokenizer.inlineText(s)){t=t.substring(i.raw.length),"_"!==i.raw.slice(-1)&&(a=i.raw.slice(-1)),n=!0;let r=e.at(-1);"text"===r?.type?(r.raw+=i.raw,r.text+=i.text):e.push(i)}else if(t){let e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return e}},lO=class{static{g(this,"P")}options;parser;constructor(t){this.options=t||ZD}space(t){return""}code({text:t,lang:e,escaped:r}){let i=(e||"").match(tM.notSpaceStart)?.[0],n=t.replace(tM.endingNewline,"")+"\n";return i?'<pre><code class="language-'+qD(i)+'">'+(r?n:qD(n,!0))+"</code></pre>\n":"<pre><code>"+(r?n:qD(n,!0))+"</code></pre>\n"}blockquote({tokens:t}){return`<blockquote>\n${this.parser.parse(t)}</blockquote>\n`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>\n`}hr(t){return"<hr>\n"}list(t){let e=t.ordered,r=t.start,i="";for(let e=0;e<t.items.length;e++){let r=t.items[e];i+=this.listitem(r)}let n=e?"ol":"ul";return"<"+n+(e&&1!==r?' start="'+r+'"':"")+">\n"+i+"</"+n+">\n"}listitem(t){let e="";if(t.task){let r=this.checkbox({checked:!!t.checked});t.loose?"paragraph"===t.tokens[0]?.type?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&"text"===t.tokens[0].tokens[0].type&&(t.tokens[0].tokens[0].text=r+" "+qD(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>\n`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>\n`}table(t){let e="",r="";for(let e=0;e<t.header.length;e++)r+=this.tablecell(t.header[e]);e+=this.tablerow({text:r});let i="";for(let e=0;e<t.rows.length;e++){let n=t.rows[e];r="";for(let t=0;t<n.length;t++)r+=this.tablecell(n[t]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+i+"</table>\n"}tablerow({text:t}){return`<tr>\n${t}</tr>\n`}tablecell(t){let e=this.parser.parseInline(t.tokens),r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>\n`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${qD(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:r}){let i=this.parser.parseInline(r),n=YD(t);if(null===n)return i;let a='<a href="'+(t=n)+'"';return e&&(a+=' title="'+qD(e)+'"'),a+=">"+i+"</a>",a}image({href:t,title:e,text:r,tokens:i}){i&&(r=this.parser.parseInline(i,this.parser.textRenderer));let n=YD(t);if(null===n)return qD(r);let a=`<img src="${t=n}" alt="${r}"`;return e&&(a+=` title="${qD(e)}"`),a+=">",a}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:qD(t.text)}},cO=class{static{g(this,"$")}strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},hO=class t{static{g(this,"l")}options;renderer;textRenderer;constructor(t){this.options=t||ZD,this.options.renderer=this.options.renderer||new lO,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new cO}static parse(e,r){return new t(r).parse(e)}static parseInline(e,r){return new t(r).parseInline(e)}parse(t,e=!0){let r="";for(let i=0;i<t.length;i++){let n=t[i];if(this.options.extensions?.renderers?.[n.type]){let t=n,e=this.options.extensions.renderers[t.type].call({parser:this},t);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(t.type)){r+=e||"";continue}}let a=n;switch(a.type){case"space":r+=this.renderer.space(a);continue;case"hr":r+=this.renderer.hr(a);continue;case"heading":r+=this.renderer.heading(a);continue;case"code":r+=this.renderer.code(a);continue;case"table":r+=this.renderer.table(a);continue;case"blockquote":r+=this.renderer.blockquote(a);continue;case"list":r+=this.renderer.list(a);continue;case"html":r+=this.renderer.html(a);continue;case"def":r+=this.renderer.def(a);continue;case"paragraph":r+=this.renderer.paragraph(a);continue;case"text":{let n=a,s=this.renderer.text(n);for(;i+1<t.length&&"text"===t[i+1].type;)n=t[++i],s+="\n"+this.renderer.text(n);r+=e?this.renderer.paragraph({type:"paragraph",raw:s,text:s,tokens:[{type:"text",raw:s,text:s,escaped:!0}]}):s;continue}default:{let t='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return r}parseInline(t,e=this.renderer){let r="";for(let i=0;i<t.length;i++){let n=t[i];if(this.options.extensions?.renderers?.[n.type]){let t=this.options.extensions.renderers[n.type].call({parser:this},n);if(!1!==t||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){r+=t||"";continue}}let a=n;switch(a.type){case"escape":case"text":r+=e.text(a);break;case"html":r+=e.html(a);break;case"link":r+=e.link(a);break;case"image":r+=e.image(a);break;case"strong":r+=e.strong(a);break;case"em":r+=e.em(a);break;case"codespan":r+=e.codespan(a);break;case"br":r+=e.br(a);break;case"del":r+=e.del(a);break;default:{let t='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return r}},uO=class{static{g(this,"S")}options;block;constructor(t){this.options=t||ZD}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?oO.lex:oO.lexInline}provideParser(){return this.block?hO.parse:hO.parseInline}},dO=class{static{g(this,"B")}defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=hO;Renderer=lO;TextRenderer=cO;Lexer=oO;Tokenizer=sO;Hooks=uO;constructor(...t){this.use(...t)}walkTokens(t,e){let r=[];for(let i of t)switch(r=r.concat(e.call(this,i)),i.type){case"table":{let t=i;for(let i of t.header)r=r.concat(this.walkTokens(i.tokens,e));for(let i of t.rows)for(let t of i)r=r.concat(this.walkTokens(t.tokens,e));break}case"list":{let t=i;r=r.concat(this.walkTokens(t.items,e));break}default:{let t=i;this.defaults.extensions?.childTokens?.[t.type]?this.defaults.extensions.childTokens[t.type].forEach((i=>{let n=t[i].flat(1/0);r=r.concat(this.walkTokens(n,e))})):t.tokens&&(r=r.concat(this.walkTokens(t.tokens,e)))}}return r}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach((t=>{let r={...t};if(r.async=this.defaults.async||r.async||!1,t.extensions&&(t.extensions.forEach((t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){let r=e.renderers[t.name];e.renderers[t.name]=r?function(...e){let i=t.renderer.apply(this,e);return!1===i&&(i=r.apply(this,e)),i}:t.renderer}if("tokenizer"in t){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");let r=e[t.level];r?r.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)})),r.extensions=e),t.renderer){let e=this.defaults.renderer||new lO(this.defaults);for(let r in t.renderer){if(!(r in e))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;let i=r,n=t.renderer[i],a=e[i];e[i]=(...t)=>{let r=n.apply(e,t);return!1===r&&(r=a.apply(e,t)),r||""}}r.renderer=e}if(t.tokenizer){let e=this.defaults.tokenizer||new sO(this.defaults);for(let r in t.tokenizer){if(!(r in e))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;let i=r,n=t.tokenizer[i],a=e[i];e[i]=(...t)=>{let r=n.apply(e,t);return!1===r&&(r=a.apply(e,t)),r}}r.tokenizer=e}if(t.hooks){let e=this.defaults.hooks||new uO;for(let r in t.hooks){if(!(r in e))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;let i=r,n=t.hooks[i],a=e[i];uO.passThroughHooks.has(r)?e[i]=t=>{if(this.defaults.async&&uO.passThroughHooksRespectAsync.has(r))return Promise.resolve(n.call(e,t)).then((t=>a.call(e,t)));let i=n.call(e,t);return a.call(e,i)}:e[i]=(...t)=>{let r=n.apply(e,t);return!1===r&&(r=a.apply(e,t)),r}}r.hooks=e}if(t.walkTokens){let e=this.defaults.walkTokens,i=t.walkTokens;r.walkTokens=function(t){let r=[];return r.push(i.call(this,t)),e&&(r=r.concat(e.call(this,t))),r}}this.defaults={...this.defaults,...r}})),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return oO.lex(t,e??this.defaults)}parser(t,e){return hO.parse(t,e??this.defaults)}parseMarkdown(t){return(e,r)=>{let i={...r},n={...this.defaults,...i},a=this.onError(!!n.silent,!!n.async);if(!0===this.defaults.async&&!1===i.async)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||null===e)return a(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));n.hooks&&(n.hooks.options=n,n.hooks.block=t);let s=n.hooks?n.hooks.provideLexer():t?oO.lex:oO.lexInline,o=n.hooks?n.hooks.provideParser():t?hO.parse:hO.parseInline;if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(e):e).then((t=>s(t,n))).then((t=>n.hooks?n.hooks.processAllTokens(t):t)).then((t=>n.walkTokens?Promise.all(this.walkTokens(t,n.walkTokens)).then((()=>t)):t)).then((t=>o(t,n))).then((t=>n.hooks?n.hooks.postprocess(t):t)).catch(a);try{n.hooks&&(e=n.hooks.preprocess(e));let t=s(e,n);n.hooks&&(t=n.hooks.processAllTokens(t)),n.walkTokens&&this.walkTokens(t,n.walkTokens);let r=o(t,n);return n.hooks&&(r=n.hooks.postprocess(r)),r}catch(t){return a(t)}}}onError(t,e){return r=>{if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",t){let t="<p>An error occurred:</p><pre>"+qD(r.message+"",!0)+"</pre>";return e?Promise.resolve(t):t}if(e)return Promise.reject(r);throw r}}},pO=new dO,g(QD,"d"),QD.options=QD.setOptions=function(t){return pO.setOptions(t),QD.defaults=pO.defaults,UD(QD.defaults),QD},QD.getDefaults=jD,QD.defaults=ZD,QD.use=function(...t){return pO.use(...t),QD.defaults=pO.defaults,UD(QD.defaults),QD},QD.walkTokens=function(t,e){return pO.walkTokens(t,e)},QD.parseInline=pO.parseInline,QD.Parser=hO,QD.parser=hO.parse,QD.Renderer=lO,QD.TextRenderer=cO,QD.Lexer=oO,QD.lexer=oO.lex,QD.Tokenizer=sO,QD.Hooks=uO,QD.parse=QD,QD.options,QD.setOptions,QD.use,QD.walkTokens,QD.parseInline,hO.parse,oO.lex}));function gO(t,{markdownAutoWrap:e}){let r=mn(t.replace(/<br\/>/g,"\n").replace(/\n{2,}/g,"\n"));return!1===e?r.replace(/ /g,"&nbsp;"):r}function yO(t,e={}){let r=gO(t,e),i=QD.lexer(r),n=[[]],a=0;function s(t,e="normal"){"text"===t.type?t.text.split("\n").forEach(((t,r)=>{0!==r&&(a++,n.push([])),t.split(" ").forEach((t=>{(t=t.replace(/&#39;/g,"'"))&&n[a].push({content:t,type:e})}))})):"strong"===t.type||"em"===t.type?t.tokens.forEach((e=>{s(e,t.type)})):"html"===t.type&&n[a].push({content:t.text,type:"normal"})}return g(s,"processNode"),i.forEach((t=>{"paragraph"===t.type?t.tokens?.forEach((t=>{s(t)})):"html"===t.type?n[a].push({content:t.text,type:"normal"}):n[a].push({content:t.raw,type:"normal"})})),n}function mO(t,{markdownAutoWrap:e}={}){let r=QD.lexer(t);function i(t){return"text"===t.type?!1===e?t.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):t.text.replace(/\n */g,"<br/>"):"strong"===t.type?`<strong>${t.tokens?.map(i).join("")}</strong>`:"em"===t.type?`<em>${t.tokens?.map(i).join("")}</em>`:"paragraph"===t.type?`<p>${t.tokens?.map(i).join("")}</p>`:"space"===t.type?"":"html"===t.type?`${t.text}`:"escape"===t.type?t.text:(et.warn(`Unsupported markdown: ${t.type}`),t.raw)}return g(i,"output"),r.map(i).join("")}var xO=y((()=>{fO(),Pn(),We(),g(gO,"preprocessMarkdown"),g(yO,"markdownToLines"),g(mO,"markdownToHTML")}));function bO(t){return Intl.Segmenter?[...(new Intl.Segmenter).segment(t)].map((t=>t.segment)):[...t]}function kO(t,e){return vO(t,[],bO(e.content),e.type)}function vO(t,e,r,i){if(0===r.length)return[{content:e.join(""),type:i},{content:"",type:i}];let[n,...a]=r,s=[...e,n];return t([{content:s.join(""),type:i}])?vO(t,s,a,i):(0===e.length&&n&&(e.push(n),r.shift()),[{content:e.join(""),type:i},{content:r.join(""),type:i}])}function TO(t,e){if(t.some((({content:t})=>t.includes("\n"))))throw new Error("splitLineToFitWidth does not support newlines in the line");return wO(t,e)}function wO(t,e,r=[],i=[]){if(0===t.length)return i.length>0&&r.push(i),r.length>0?r:[];let n="";" "===t[0].content&&(n=" ",t.shift());let a=t.shift()??{content:" ",type:"normal"},s=[...i];if(""!==n&&s.push({content:n,type:"normal"}),s.push(a),e(s))return wO(t,e,r,s);if(i.length>0)r.push(i),t.unshift(a);else if(a.content){let[i,n]=kO(e,a);r.push([i]),n.content&&t.unshift(n)}return wO(t,e,r)}var _O=y((()=>{g(bO,"splitTextToChars"),g(kO,"splitWordToFitWidth"),g(vO,"splitWordToFitWidthRecursion"),g(TO,"splitLineToFitWidth"),g(wO,"splitLineToFitWidthRecursion")}));function SO(t,e){e&&t.attr("style",e)}async function CO(t,e,r,i,n=!1,a=Re()){let s=t.append("foreignObject");s.attr("width",10*r+"px"),s.attr("height",10*r+"px");let o=s.append("xhtml:div"),l=rn(e.label)?await sn(e.label.replace(on.lineBreakRegex,"\n"),a):zi(e.label,a),c=e.isNode?"nodeLabel":"edgeLabel",h=o.append("span");h.html(l),SO(h,e.labelStyle),h.attr("class",`${c} ${i}`),SO(o,e.labelStyle),o.style("display","table-cell"),o.style("white-space","nowrap"),o.style("line-height","1.5"),o.style("max-width",r+"px"),o.style("text-align","center"),o.attr("xmlns","http://www.w3.org/1999/xhtml"),n&&o.attr("class","labelBkg");let u=o.node().getBoundingClientRect();return u.width===r&&(o.style("display","table"),o.style("white-space","break-spaces"),o.style("width",r+"px"),u=o.node().getBoundingClientRect()),s.node()}function EO(t,e,r){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*r-.1+"em").attr("dy",r+"em")}function AO(t,e,r){let i=t.append("text"),n=EO(i,1,e);RO(n,r);let a=n.node().getComputedTextLength();return i.remove(),a}function $O(t,e,r){let i=t.append("text"),n=EO(i,1,e);RO(n,[{content:r,type:"normal"}]);let a=n.node()?.getBoundingClientRect();return a&&i.remove(),a}function LO(t,e,r,i=!1){let n=e.append("g"),a=n.insert("rect").attr("class","background").attr("style","stroke: none"),s=n.append("text").attr("y","-10.1"),o=0;for(let e of r){let r=g((e=>AO(n,1.1,e)<=t),"checkWidth"),i=r(e)?[e]:TO(e,r);for(let t of i){RO(EO(s,o,1.1),t),o++}}if(i){let t=s.node().getBBox(),e=2;return a.attr("x",t.x-e).attr("y",t.y-e).attr("width",t.width+2*e).attr("height",t.height+2*e),n.node()}return s.node()}function RO(t,e){t.text(""),e.forEach(((e,r)=>{let i=t.append("tspan").attr("font-style","em"===e.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===e.type?"bold":"normal");0===r?i.text(e.content):i.text(" "+e.content)}))}async function IO(t,e={}){let r=[];t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,((t,i,n)=>(r.push((async()=>{let r=`${i}:${n}`;return await pn(r)?await fn(r,void 0,{class:"label-icon"}):`<i class='${zi(t,e).replace(":"," ")}'></i>`})()),t)));let i=await Promise.all(r);return t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(()=>i.shift()??""))}var NO,DO=y((()=>{QT(),gn(),We(),xO(),_L(),yn(),_O(),Ar(),g(SO,"applyStyle"),g(CO,"addHtmlSpan"),g(EO,"createTspan"),g(AO,"computeWidthOfText"),g($O,"computeDimensionOfText"),g(LO,"createFormattedText"),g(RO,"updateTextContentAndStyles"),g(IO,"replaceIconSubstring"),NO=g((async(t,e="",{style:r="",isTitle:i=!1,classes:n="",useHtmlLabels:a=!0,isNode:s=!0,width:o=200,addSvgBackground:l=!1}={},c)=>{if(et.debug("XYZ createText",e,r,i,n,a,s,"addSvgBackground: ",l),a){let i=mO(e,c),a=await IO(TL(i),c),h=e.replace(/\\\\/g,"\\"),u={isNode:s,label:rn(e)?h:a,labelStyle:r.replace("fill:","color:")};return await CO(t,u,o,n,l,c)}{let i=LO(o,t,yO(e.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),c),!!e&&l);if(s){/stroke:/.exec(r)&&(r=r.replace("stroke:","lineColor:"));let t=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");nh(i).attr("style",t)}else{let t=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");nh(i).select("rect").attr("style",t.replace(/background:/g,"fill:"));let e=r.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");nh(i).select("text").attr("style",e)}return i}}),"createText")}));function MO(t){let e=t.map(((t,e)=>`${0===e?"M":"L"}${t.x},${t.y}`));return e.push("Z"),e.join(" ")}function OO(t,e,r,i,n,a){let s=[],o=r-t,l=i-e,c=o/a,h=2*Math.PI/c,u=e+l/2;for(let e=0;e<=50;e++){let r=t+e/50*o,i=u+n*Math.sin(h*(r-t));s.push({x:r,y:i})}return s}function PO(t,e,r,i,n,a){let s=[],o=n*Math.PI/180,l=(a*Math.PI/180-o)/(i-1);for(let n=0;n<i;n++){let i=o+n*l,a=t+r*Math.cos(i),c=e+r*Math.sin(i);s.push({x:-a,y:-c})}return s}var BO,FO,zO,jO,UO=y((()=>{DO(),ns(),QT(),Cr(),gn(),_L(),BO=g((async(t,e,r)=>{let i,n=e.useHtmlLabels||Hi(na()?.htmlLabels);i=r||"node default";let a,s=t.insert("g").attr("class",i).attr("id",e.domId||e.id),o=s.insert("g").attr("class","label").attr("style",H$(e.labelStyle));a=void 0===e.label?"":"string"==typeof e.label?e.label:e.label[0];let l=await NO(o,zi(TL(a),na()),{useHtmlLabels:n,width:e.width||na().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img}),c=l.getBBox(),h=(e?.padding??0)/2;if(n){let t=l.children[0],e=nh(l),r=t.getElementsByTagName("img");if(r){let t=""===a.replace(/<img[^>]*>/g,"").trim();await Promise.all([...r].map((e=>new Promise((r=>{function i(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=na().fontSize?na().fontSize:window.getComputedStyle(document.body).fontSize,r=5,[i=me.fontSize]=bL(t),n=i*r+"px";e.style.minWidth=n,e.style.maxWidth=n}else e.style.width="100%";r(e)}g(i,"setupImage"),setTimeout((()=>{e.complete&&i()})),e.addEventListener("error",i),e.addEventListener("load",i)})))))}c=t.getBoundingClientRect(),e.attr("width",c.width),e.attr("height",c.height)}return n?o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"):o.attr("transform","translate(0, "+-c.height/2+")"),e.centerLabel&&o.attr("transform","translate("+-c.width/2+", "+-c.height/2+")"),o.insert("rect",":first-child"),{shapeSvg:s,bbox:c,halfPadding:h,label:o}}),"labelHelper"),FO=g((async(t,e,r)=>{let i=r.useHtmlLabels||Hi(na()?.flowchart?.htmlLabels),n=t.insert("g").attr("class","label").attr("style",r.labelStyle||""),a=await NO(n,zi(TL(e),na()),{useHtmlLabels:i,width:r.width||na()?.flowchart?.wrappingWidth,style:r.labelStyle,addSvgBackground:!!r.icon||!!r.img}),s=a.getBBox(),o=r.padding/2;if(Hi(na()?.flowchart?.htmlLabels)){let t=a.children[0],e=nh(a);s=t.getBoundingClientRect(),e.attr("width",s.width),e.attr("height",s.height)}return i?n.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"):n.attr("transform","translate(0, "+-s.height/2+")"),r.centerLabel&&n.attr("transform","translate("+-s.width/2+", "+-s.height/2+")"),n.insert("rect",":first-child"),{shapeSvg:t,bbox:s,halfPadding:o,label:n}}),"insertLabel"),zO=g(((t,e)=>{let r=e.node().getBBox();t.width=r.width,t.height=r.height}),"updateNodeBounds"),jO=g(((t,e)=>("handDrawn"===t.look?"rough-node":"node")+" "+t.cssClasses+" "+(e||"")),"getNodeClasses"),g(MO,"createPathFromPoints"),g(OO,"generateFullSineWavePoints"),g(PO,"generateCirclePoints")}));function WO(t,e){return t.intersect(e)}var qO,YO=y((()=>{g(WO,"intersectNode"),qO=WO}));function GO(t,e,r,i){var n=t.x,a=t.y,s=n-i.x,o=a-i.y,l=Math.sqrt(e*e*o*o+r*r*s*s),c=Math.abs(e*r*s/l);i.x<n&&(c=-c);var h=Math.abs(e*r*o/l);return i.y<a&&(h=-h),{x:n+c,y:a+h}}var HO,VO=y((()=>{g(GO,"intersectEllipse"),HO=GO}));function XO(t,e,r){return HO(t,e,e,r)}var KO,QO=y((()=>{VO(),g(XO,"intersectCircle"),KO=XO}));function ZO(t,e,r,i){{let n=e.y-t.y,a=t.x-e.x,s=e.x*t.y-t.x*e.y,o=n*r.x+a*r.y+s,l=n*i.x+a*i.y+s,c=1e-6;if(0!==o&&0!==l&&JO(o,l))return;let h=i.y-r.y,u=r.x-i.x,d=i.x*r.y-r.x*i.y,p=h*t.x+u*t.y+d,f=h*e.x+u*e.y+d;if(Math.abs(p)<c&&Math.abs(f)<c&&JO(p,f))return;let g=n*u-h*a;if(0===g)return;let y=Math.abs(g/2),m=a*d-u*s,x=m<0?(m-y)/g:(m+y)/g;return m=h*s-n*d,{x:x,y:m<0?(m-y)/g:(m+y)/g}}}function JO(t,e){return t*e>0}var tP,eP=y((()=>{g(ZO,"intersectLine"),g(JO,"sameSign"),tP=ZO}));function rP(t,e,r){let i=t.x,n=t.y,a=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach((function(t){s=Math.min(s,t.x),o=Math.min(o,t.y)})):(s=Math.min(s,e.x),o=Math.min(o,e.y));let l=i-t.width/2-s,c=n-t.height/2-o;for(let i=0;i<e.length;i++){let n=e[i],s=e[i<e.length-1?i+1:0],o=tP(t,r,{x:l+n.x,y:c+n.y},{x:l+s.x,y:c+s.y});o&&a.push(o)}return a.length?(a.length>1&&a.sort((function(t,e){let i=t.x-r.x,n=t.y-r.y,a=Math.sqrt(i*i+n*n),s=e.x-r.x,o=e.y-r.y,l=Math.sqrt(s*s+o*o);return a<l?-1:a===l?0:1})),a[0]):t}var iP,nP,aP,sP,oP,lP,cP,hP,uP,dP,pP,fP=y((()=>{eP(),g(rP,"intersectPolygon"),iP=rP})),gP=y((()=>{nP=g(((t,e)=>{var r,i,n=t.x,a=t.y,s=e.x-n,o=e.y-a,l=t.width/2,c=t.height/2;return Math.abs(o)*l>Math.abs(s)*c?(o<0&&(c=-c),r=0===o?0:c*s/o,i=c):(s<0&&(l=-l),r=l,i=0===s?0:l*o/s),{x:n+r,y:a+i}}),"intersectRect"),aP=nP})),yP=y((()=>{YO(),QO(),VO(),fP(),gP(),sP={node:qO,circle:KO,ellipse:HO,polygon:iP,rect:aP}})),mP=y((()=>{ns(),oP=g((t=>{let{handDrawnSeed:e}=na();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}}),"solidStateFill"),lP=g((t=>{let e=cP([...t.cssCompiledStyles||[],...t.cssStyles||[],...t.labelStyle||[]]);return{stylesMap:e,stylesArray:[...e]}}),"compileStyles"),cP=g((t=>{let e=new Map;return t.forEach((t=>{let[r,i]=t.split(":");e.set(r.trim(),i?.trim())})),e}),"styles2Map"),hP=g((t=>"color"===t||"font-size"===t||"font-family"===t||"font-weight"===t||"font-style"===t||"text-decoration"===t||"text-align"===t||"text-transform"===t||"line-height"===t||"letter-spacing"===t||"word-spacing"===t||"text-shadow"===t||"text-overflow"===t||"white-space"===t||"word-wrap"===t||"word-break"===t||"overflow-wrap"===t||"hyphens"===t),"isLabelStyle"),uP=g((t=>{let{stylesArray:e}=lP(t),r=[],i=[],n=[],a=[];return e.forEach((t=>{let e=t[0];hP(e)?r.push(t.join(":")+" !important"):(i.push(t.join(":")+" !important"),e.includes("stroke")&&n.push(t.join(":")+" !important"),"fill"===e&&a.push(t.join(":")+" !important"))})),{labelStyles:r.join(";"),nodeStyles:i.join(";"),stylesArray:e,borderStyles:n,backgroundStyles:a}}),"styles2String"),dP=g(((t,e)=>{let{themeVariables:r,handDrawnSeed:i}=na(),{nodeBorder:n,mainBkg:a}=r,{stylesMap:s}=lP(t);return Object.assign({roughness:.7,fill:s.get("fill")||a,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:s.get("stroke")||n,seed:i,strokeWidth:s.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:pP(s.get("stroke-dasharray"))},e)}),"userNodeOverrides"),pP=g((t=>{if(!t)return[0,0];let e=t.trim().split(/\s+/).map(Number);if(1===e.length){let t=isNaN(e[0])?0:e[0];return[t,t]}return[isNaN(e[0])?0:e[0],isNaN(e[1])?0:e[1]]}),"getStrokeDashArray")}));function xP(t,e,r){if(t&&t.length){let[i,n]=e,a=Math.PI/180*r,s=Math.cos(a),o=Math.sin(a);for(let e of t){let[t,r]=e;e[0]=(t-i)*s-(r-n)*o+i,e[1]=(t-i)*o+(r-n)*s+n}}}function bP(t,e){return t[0]===e[0]&&t[1]===e[1]}function kP(t,e,r,i=1){let n=r,a=Math.max(e,.1),s=t[0]&&t[0][0]&&"number"==typeof t[0][0]?[t]:t,o=[0,0];if(n)for(let t of s)xP(t,o,n);let l=function(t,e,r){let i=[];for(let e of t){let t=[...e];bP(t[0],t[t.length-1])||t.push([t[0][0],t[0][1]]),t.length>2&&i.push(t)}let n=[];e=Math.max(e,.1);let a=[];for(let t of i)for(let e=0;e<t.length-1;e++){let r=t[e],i=t[e+1];if(r[1]!==i[1]){let t=Math.min(r[1],i[1]);a.push({ymin:t,ymax:Math.max(r[1],i[1]),x:t===r[1]?r[0]:i[0],islope:(i[0]-r[0])/(i[1]-r[1])})}}if(a.sort(((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax))),!a.length)return n;let s=[],o=a[0].ymin,l=0;for(;s.length||a.length;){if(a.length){let t=-1;for(let e=0;e<a.length&&!(a[e].ymin>o);e++)t=e;a.splice(0,t+1).forEach((t=>{s.push({s:o,edge:t})}))}if(s=s.filter((t=>!(t.edge.ymax<=o))),s.sort(((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x))),(1!==r||l%e==0)&&s.length>1)for(let t=0;t<s.length;t+=2){let e=t+1;if(e>=s.length)break;let r=s[t].edge,i=s[e].edge;n.push([[Math.round(r.x),o],[Math.round(i.x),o]])}o+=r,s.forEach((t=>{t.edge.x=t.edge.x+r*t.edge.islope})),l++}return n}(s,a,i);if(n){for(let t of s)xP(t,o,-n);!function(t,e,r){let i=[];t.forEach((t=>i.push(...t))),xP(i,e,r)}(l,o,-n)}return l}function vP(t,e){var r;let i=e.hachureAngle+90,n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.round(Math.max(n,.1));let a=1;return e.roughness>=1&&((null===(r=e.randomizer)||void 0===r?void 0:r.next())||Math.random())>.7&&(a=n),kP(t,n,i,a||1)}function TP(t){let e=t[0],r=t[1];return Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2))}function wP(t,e){return t.type===e}function _P(t){let e=[],r=function(t){let e=new Array;for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:pB,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:fB,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:gB,text:""},e}(t),i="BOD",n=0,a=r[n];for(;!wP(a,gB);){let s=0,o=[];if("BOD"===i){if("M"!==a.text&&"m"!==a.text)return _P("M0,0"+t);n++,s=yB[a.text],i=a.text}else wP(a,fB)?s=yB[i]:(n++,s=yB[a.text],i=a.text);if(!(n+s<r.length))throw new Error("Path data ended short");for(let t=n;t<n+s;t++){let e=r[t];if(!wP(e,fB))throw new Error("Param not a number: "+i+","+e.text);o[o.length]=+e.text}if("number"!=typeof yB[i])throw new Error("Bad segment: "+i);{let t={key:i,data:o};e.push(t),n+=s,a=r[n],"M"===i&&(i="L"),"m"===i&&(i="l")}}return e}function SP(t){let e=0,r=0,i=0,n=0,a=[];for(let{key:s,data:o}of t)switch(s){case"M":a.push({key:"M",data:[...o]}),[e,r]=o,[i,n]=o;break;case"m":e+=o[0],r+=o[1],a.push({key:"M",data:[e,r]}),i=e,n=r;break;case"L":a.push({key:"L",data:[...o]}),[e,r]=o;break;case"l":e+=o[0],r+=o[1],a.push({key:"L",data:[e,r]});break;case"C":a.push({key:"C",data:[...o]}),e=o[4],r=o[5];break;case"c":{let t=o.map(((t,i)=>i%2?t+r:t+e));a.push({key:"C",data:t}),e=t[4],r=t[5];break}case"Q":a.push({key:"Q",data:[...o]}),e=o[2],r=o[3];break;case"q":{let t=o.map(((t,i)=>i%2?t+r:t+e));a.push({key:"Q",data:t}),e=t[2],r=t[3];break}case"A":a.push({key:"A",data:[...o]}),e=o[5],r=o[6];break;case"a":e+=o[5],r+=o[6],a.push({key:"A",data:[o[0],o[1],o[2],o[3],o[4],e,r]});break;case"H":a.push({key:"H",data:[...o]}),e=o[0];break;case"h":e+=o[0],a.push({key:"H",data:[e]});break;case"V":a.push({key:"V",data:[...o]}),r=o[0];break;case"v":r+=o[0],a.push({key:"V",data:[r]});break;case"S":a.push({key:"S",data:[...o]}),e=o[2],r=o[3];break;case"s":{let t=o.map(((t,i)=>i%2?t+r:t+e));a.push({key:"S",data:t}),e=t[2],r=t[3];break}case"T":a.push({key:"T",data:[...o]}),e=o[0],r=o[1];break;case"t":e+=o[0],r+=o[1],a.push({key:"T",data:[e,r]});break;case"Z":case"z":a.push({key:"Z",data:[]}),e=i,r=n}return a}function CP(t){let e=[],r="",i=0,n=0,a=0,s=0,o=0,l=0;for(let{key:c,data:h}of t){switch(c){case"M":e.push({key:"M",data:[...h]}),[i,n]=h,[a,s]=h;break;case"C":e.push({key:"C",data:[...h]}),i=h[4],n=h[5],o=h[2],l=h[3];break;case"L":e.push({key:"L",data:[...h]}),[i,n]=h;break;case"H":i=h[0],e.push({key:"L",data:[i,n]});break;case"V":n=h[0],e.push({key:"L",data:[i,n]});break;case"S":{let t=0,a=0;"C"===r||"S"===r?(t=i+(i-o),a=n+(n-l)):(t=i,a=n),e.push({key:"C",data:[t,a,...h]}),o=h[0],l=h[1],i=h[2],n=h[3];break}case"T":{let[t,a]=h,s=0,c=0;"Q"===r||"T"===r?(s=i+(i-o),c=n+(n-l)):(s=i,c=n);let u=i+2*(s-i)/3,d=n+2*(c-n)/3,p=t+2*(s-t)/3,f=a+2*(c-a)/3;e.push({key:"C",data:[u,d,p,f,t,a]}),o=s,l=c,i=t,n=a;break}case"Q":{let[t,r,a,s]=h,c=i+2*(t-i)/3,u=n+2*(r-n)/3,d=a+2*(t-a)/3,p=s+2*(r-s)/3;e.push({key:"C",data:[c,u,d,p,a,s]}),o=t,l=r,i=a,n=s;break}case"A":{let t=Math.abs(h[0]),r=Math.abs(h[1]),a=h[2],s=h[3],o=h[4],l=h[5],c=h[6];0===t||0===r?(e.push({key:"C",data:[i,n,l,c,l,c]}),i=l,n=c):(i!==l||n!==c)&&(AP(i,n,l,c,t,r,a,s,o).forEach((function(t){e.push({key:"C",data:t})})),i=l,n=c);break}case"Z":e.push({key:"Z",data:[]}),i=a,n=s}r=c}return e}function EP(t,e,r){return[t*Math.cos(r)-e*Math.sin(r),t*Math.sin(r)+e*Math.cos(r)]}function AP(t,e,r,i,n,a,s,o,l,c){let h=(u=s,Math.PI*u/180);var u;let d=[],p=0,f=0,g=0,y=0;if(c)[p,f,g,y]=c;else{[t,e]=EP(t,e,-h),[r,i]=EP(r,i,-h);let s=(t-r)/2,c=(e-i)/2,u=s*s/(n*n)+c*c/(a*a);u>1&&(u=Math.sqrt(u),n*=u,a*=u);let d=n*n,m=a*a,x=d*m-d*c*c-m*s*s,b=d*c*c+m*s*s,k=(o===l?-1:1)*Math.sqrt(Math.abs(x/b));g=k*n*c/a+(t+r)/2,y=k*-a*s/n+(e+i)/2,p=Math.asin(parseFloat(((e-y)/a).toFixed(9))),f=Math.asin(parseFloat(((i-y)/a).toFixed(9))),t<g&&(p=Math.PI-p),r<g&&(f=Math.PI-f),p<0&&(p=2*Math.PI+p),f<0&&(f=2*Math.PI+f),l&&p>f&&(p-=2*Math.PI),!l&&f>p&&(f-=2*Math.PI)}let m=f-p;if(Math.abs(m)>120*Math.PI/180){let t=f,e=r,o=i;f=l&&f>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,d=AP(r=g+n*Math.cos(f),i=y+a*Math.sin(f),e,o,n,a,s,0,l,[f,t,g,y])}m=f-p;let x=Math.cos(p),b=Math.sin(p),k=Math.cos(f),v=Math.sin(f),T=Math.tan(m/4),w=4/3*n*T,_=4/3*a*T,S=[t,e],C=[t+w*b,e-_*x],E=[r+w*v,i-_*k],A=[r,i];if(C[0]=2*S[0]-C[0],C[1]=2*S[1]-C[1],c)return[C,E,A].concat(d);{d=[C,E,A].concat(d);let t=[];for(let e=0;e<d.length;e+=3){let r=EP(d[e][0],d[e][1],h),i=EP(d[e+1][0],d[e+1][1],h),n=EP(d[e+2][0],d[e+2][1],h);t.push([r[0],r[1],i[0],i[1],n[0],n[1]])}return t}}function $P(t,e,r,i,n){return{type:"path",ops:WP(t,e,r,i,n)}}function LP(t,e,r){let i=(t||[]).length;if(i>2){let n=[];for(let e=0;e<i-1;e++)n.push(...WP(t[e][0],t[e][1],t[e+1][0],t[e+1][1],r));return e&&n.push(...WP(t[i-1][0],t[i-1][1],t[0][0],t[0][1],r)),{type:"path",ops:n}}return 2===i?$P(t[0][0],t[0][1],t[1][0],t[1][1],r):{type:"path",ops:[]}}function RP(t,e,r,i,n){return LP([[t,e],[t+r,e],[t+r,e+i],[t,e+i]],!0,n)}function IP(t,e){if(t.length){let r="number"==typeof t[0][0]?[t]:t,i=YP(r[0],1*(1+.2*e.roughness),e),n=e.disableMultiStroke?[]:YP(r[0],1.5*(1+.22*e.roughness),FP(e));for(let t=1;t<r.length;t++){let a=r[t];if(a.length){let t=YP(a,1*(1+.2*e.roughness),e),r=e.disableMultiStroke?[]:YP(a,1.5*(1+.22*e.roughness),FP(e));for(let e of t)"move"!==e.op&&i.push(e);for(let t of r)"move"!==t.op&&n.push(t)}}return{type:"path",ops:i.concat(n)}}return{type:"path",ops:[]}}function NP(t,e,r){let i=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),n=Math.ceil(Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*i)),a=2*Math.PI/n,s=Math.abs(t/2),o=Math.abs(e/2),l=1-r.curveFitting;return s+=UP(s*l,r),o+=UP(o*l,r),{increment:a,rx:s,ry:o}}function DP(t,e,r,i){let[n,a]=HP(i.increment,t,e,i.rx,i.ry,1,i.increment*jP(.1,jP(.4,1,r),r),r),s=GP(n,null,r);if(!r.disableMultiStroke&&0!==r.roughness){let[n]=HP(i.increment,t,e,i.rx,i.ry,1.5,0,r),a=GP(n,null,r);s=s.concat(a)}return{estimatedPoints:a,opset:{type:"path",ops:s}}}function MP(t,e,r,i,n,a,s,o,l){let c=t,h=e,u=Math.abs(r/2),d=Math.abs(i/2);u+=UP(.01*u,l),d+=UP(.01*d,l);let p=n,f=a;for(;p<0;)p+=2*Math.PI,f+=2*Math.PI;f-p>2*Math.PI&&(p=0,f=2*Math.PI);let g=2*Math.PI/l.curveStepCount,y=Math.min(g/2,(f-p)/2),m=VP(y,c,h,u,d,p,f,1,l);if(!l.disableMultiStroke){let t=VP(y,c,h,u,d,p,f,1.5,l);m.push(...t)}return s&&(o?m.push(...WP(c,h,c+u*Math.cos(p),h+d*Math.sin(p),l),...WP(c,h,c+u*Math.cos(f),h+d*Math.sin(f),l)):m.push({op:"lineTo",data:[c,h]},{op:"lineTo",data:[c+u*Math.cos(p),h+d*Math.sin(p)]})),{type:"path",ops:m}}function OP(t,e){let r=CP(SP(_P(t))),i=[],n=[0,0],a=[0,0];for(let{key:t,data:s}of r)switch(t){case"M":a=[s[0],s[1]],n=[s[0],s[1]];break;case"L":i.push(...WP(a[0],a[1],s[0],s[1],e)),a=[s[0],s[1]];break;case"C":{let[t,r,n,o,l,c]=s;i.push(...XP(t,r,n,o,l,c,a,e)),a=[l,c];break}case"Z":i.push(...WP(a[0],a[1],n[0],n[1],e)),a=[n[0],n[1]]}return{type:"path",ops:i}}function PP(t,e){let r=[];for(let i of t)if(i.length){let t=e.maxRandomnessOffset||0,n=i.length;if(n>2){r.push({op:"move",data:[i[0][0]+UP(t,e),i[0][1]+UP(t,e)]});for(let a=1;a<n;a++)r.push({op:"lineTo",data:[i[a][0]+UP(t,e),i[a][1]+UP(t,e)]})}}return{type:"fillPath",ops:r}}function BP(t,e){return function(t,e){let r=t.fillStyle||"hachure";if(!uB[r])switch(r){case"zigzag":uB[r]||(uB[r]=new sB(e));break;case"cross-hatch":uB[r]||(uB[r]=new oB(e));break;case"dots":uB[r]||(uB[r]=new lB(e));break;case"dashed":uB[r]||(uB[r]=new cB(e));break;case"zigzag-line":uB[r]||(uB[r]=new hB(e));break;default:r="hachure",uB[r]||(uB[r]=new aB(e))}return uB[r]}(e,mB).fillPolygons(t,e)}function FP(t){let e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function zP(t){return t.randomizer||(t.randomizer=new dB(t.seed||0)),t.randomizer.next()}function jP(t,e,r,i=1){return r.roughness*i*(zP(r)*(e-t)+t)}function UP(t,e,r=1){return jP(-t,t,e,r)}function WP(t,e,r,i,n,a=!1){let s=a?n.disableMultiStrokeFill:n.disableMultiStroke,o=qP(t,e,r,i,n,!0,!1);if(s)return o;let l=qP(t,e,r,i,n,!0,!0);return o.concat(l)}function qP(t,e,r,i,n,a,s){let o=Math.pow(t-r,2)+Math.pow(e-i,2),l=Math.sqrt(o),c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=n.maxRandomnessOffset||0;h*h*100>o&&(h=l/10);let u=h/2,d=.2+.2*zP(n),p=n.bowing*n.maxRandomnessOffset*(i-e)/200,f=n.bowing*n.maxRandomnessOffset*(t-r)/200;p=UP(p,n,c),f=UP(f,n,c);let y=[],m=g((()=>UP(u,n,c)),"M"),x=g((()=>UP(h,n,c)),"k"),b=n.preserveVertices;return a&&(s?y.push({op:"move",data:[t+(b?0:m()),e+(b?0:m())]}):y.push({op:"move",data:[t+(b?0:UP(h,n,c)),e+(b?0:UP(h,n,c))]})),s?y.push({op:"bcurveTo",data:[p+t+(r-t)*d+m(),f+e+(i-e)*d+m(),p+t+2*(r-t)*d+m(),f+e+2*(i-e)*d+m(),r+(b?0:m()),i+(b?0:m())]}):y.push({op:"bcurveTo",data:[p+t+(r-t)*d+x(),f+e+(i-e)*d+x(),p+t+2*(r-t)*d+x(),f+e+2*(i-e)*d+x(),r+(b?0:x()),i+(b?0:x())]}),y}function YP(t,e,r){if(!t.length)return[];let i=[];i.push([t[0][0]+UP(e,r),t[0][1]+UP(e,r)]),i.push([t[0][0]+UP(e,r),t[0][1]+UP(e,r)]);for(let n=1;n<t.length;n++)i.push([t[n][0]+UP(e,r),t[n][1]+UP(e,r)]),n===t.length-1&&i.push([t[n][0]+UP(e,r),t[n][1]+UP(e,r)]);return GP(i,null,r)}function GP(t,e,r){let i=t.length,n=[];if(i>3){let a=[],s=1-r.curveTightness;n.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<i;e++){let r=t[e];a[0]=[r[0],r[1]],a[1]=[r[0]+(s*t[e+1][0]-s*t[e-1][0])/6,r[1]+(s*t[e+1][1]-s*t[e-1][1])/6],a[2]=[t[e+1][0]+(s*t[e][0]-s*t[e+2][0])/6,t[e+1][1]+(s*t[e][1]-s*t[e+2][1])/6],a[3]=[t[e+1][0],t[e+1][1]],n.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}if(e&&2===e.length){let t=r.maxRandomnessOffset;n.push({op:"lineTo",data:[e[0]+UP(t,r),e[1]+UP(t,r)]})}}else 3===i?(n.push({op:"move",data:[t[1][0],t[1][1]]}),n.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===i&&n.push(...qP(t[0][0],t[0][1],t[1][0],t[1][1],r,!0,!0));return n}function HP(t,e,r,i,n,a,s,o){let l=[],c=[];if(0===o.roughness){t/=4,c.push([e+i*Math.cos(-t),r+n*Math.sin(-t)]);for(let a=0;a<=2*Math.PI;a+=t){let t=[e+i*Math.cos(a),r+n*Math.sin(a)];l.push(t),c.push(t)}c.push([e+i*Math.cos(0),r+n*Math.sin(0)]),c.push([e+i*Math.cos(t),r+n*Math.sin(t)])}else{let h=UP(.5,o)-Math.PI/2;c.push([UP(a,o)+e+.9*i*Math.cos(h-t),UP(a,o)+r+.9*n*Math.sin(h-t)]);let u=2*Math.PI+h-.01;for(let s=h;s<u;s+=t){let t=[UP(a,o)+e+i*Math.cos(s),UP(a,o)+r+n*Math.sin(s)];l.push(t),c.push(t)}c.push([UP(a,o)+e+i*Math.cos(h+2*Math.PI+.5*s),UP(a,o)+r+n*Math.sin(h+2*Math.PI+.5*s)]),c.push([UP(a,o)+e+.98*i*Math.cos(h+s),UP(a,o)+r+.98*n*Math.sin(h+s)]),c.push([UP(a,o)+e+.9*i*Math.cos(h+.5*s),UP(a,o)+r+.9*n*Math.sin(h+.5*s)])}return[c,l]}function VP(t,e,r,i,n,a,s,o,l){let c=a+UP(.1,l),h=[];h.push([UP(o,l)+e+.9*i*Math.cos(c-t),UP(o,l)+r+.9*n*Math.sin(c-t)]);for(let a=c;a<=s;a+=t)h.push([UP(o,l)+e+i*Math.cos(a),UP(o,l)+r+n*Math.sin(a)]);return h.push([e+i*Math.cos(s),r+n*Math.sin(s)]),h.push([e+i*Math.cos(s),r+n*Math.sin(s)]),GP(h,null,l)}function XP(t,e,r,i,n,a,s,o){let l=[],c=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.3],h=[0,0],u=o.disableMultiStroke?1:2,d=o.preserveVertices;for(let p=0;p<u;p++)0===p?l.push({op:"move",data:[s[0],s[1]]}):l.push({op:"move",data:[s[0]+(d?0:UP(c[0],o)),s[1]+(d?0:UP(c[0],o))]}),h=d?[n,a]:[n+UP(c[p],o),a+UP(c[p],o)],l.push({op:"bcurveTo",data:[t+UP(c[p],o),e+UP(c[p],o),r+UP(c[p],o),i+UP(c[p],o),h[0],h[1]]});return l}function KP(t){return[...t]}function QP(t,e=0){let r=t.length;if(r<3)throw new Error("A curve must have at least three points.");let i=[];if(3===r)i.push(KP(t[0]),KP(t[1]),KP(t[2]),KP(t[2]));else{let r=[];r.push(t[0],t[0]);for(let e=1;e<t.length;e++)r.push(t[e]),e===t.length-1&&r.push(t[e]);let n=[],a=1-e;i.push(KP(r[0]));for(let t=1;t+2<r.length;t++){let e=r[t];n[0]=[e[0],e[1]],n[1]=[e[0]+(a*r[t+1][0]-a*r[t-1][0])/6,e[1]+(a*r[t+1][1]-a*r[t-1][1])/6],n[2]=[r[t+1][0]+(a*r[t][0]-a*r[t+2][0])/6,r[t+1][1]+(a*r[t][1]-a*r[t+2][1])/6],n[3]=[r[t+1][0],r[t+1][1]],i.push(n[1],n[2],n[3])}}return i}function ZP(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function JP(t,e,r){let i=ZP(e,r);if(0===i)return ZP(t,e);let n=((t[0]-e[0])*(r[0]-e[0])+(t[1]-e[1])*(r[1]-e[1]))/i;return n=Math.max(0,Math.min(1,n)),ZP(t,tB(e,r,n))}function tB(t,e,r){return[t[0]+(e[0]-t[0])*r,t[1]+(e[1]-t[1])*r]}function eB(t,e,r,i){let n=i||[];if(function(t,e){let r=t[e+0],i=t[e+1],n=t[e+2],a=t[e+3],s=3*i[0]-2*r[0]-a[0];s*=s;let o=3*i[1]-2*r[1]-a[1];o*=o;let l=3*n[0]-2*a[0]-r[0];l*=l;let c=3*n[1]-2*a[1]-r[1];return c*=c,s<l&&(s=l),o<c&&(o=c),s+o}(t,e)<r){let r=t[e+0];n.length?(a=n[n.length-1],s=r,Math.sqrt(ZP(a,s))>1&&n.push(r)):n.push(r),n.push(t[e+3])}else{let i=t[e+0],a=t[e+1],s=t[e+2],o=t[e+3],l=tB(i,a,.5),c=tB(a,s,.5),h=tB(s,o,.5),u=tB(l,c,.5),d=tB(c,h,.5),p=tB(u,d,.5);eB([i,l,u,p],0,r,n),eB([p,d,h,o],0,r,n)}var a,s;return n}function rB(t,e){return iB(t,0,t.length,e)}function iB(t,e,r,i,n){let a=n||[],s=t[e],o=t[r-1],l=0,c=1;for(let i=e+1;i<r-1;++i){let e=JP(t[i],s,o);e>l&&(l=e,c=i)}return Math.sqrt(l)>i?(iB(t,e,c+1,i,a),iB(t,c,r,i,a)):(a.length||a.push(s),a.push(o)),a}function nB(t,e=.15,r){let i=[],n=(t.length-1)/3;for(let r=0;r<n;r++)eB(t,3*r,e,i);return r&&r>0?iB(i,0,i.length,r):i}var aB,sB,oB,lB,cB,hB,uB,dB,pB,fB,gB,yB,mB,xB,bB,kB,vB,TB,wB,_B=y((()=>{g(xP,"t"),g(bP,"e"),g(kP,"s"),g(vP,"n"),aB=class{static{g(this,"o")}constructor(t){this.helper=t}fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){let r=vP(t,e);return{type:"fillSketch",ops:this.renderLines(r,e)}}renderLines(t,e){let r=[];for(let i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],e));return r}},g(TP,"a"),sB=class extends aB{static{g(this,"h")}fillPolygons(t,e){let r=e.hachureGap;r<0&&(r=4*e.strokeWidth),r=Math.max(r,.1);let i=vP(t,Object.assign({},e,{hachureGap:r})),n=Math.PI/180*e.hachureAngle,a=[],s=.5*r*Math.cos(n),o=.5*r*Math.sin(n);for(let[t,e]of i)TP([t,e])&&a.push([[t[0]-s,t[1]+o],[...e]],[[t[0]+s,t[1]-o],[...e]]);return{type:"fillSketch",ops:this.renderLines(a,e)}}},oB=class extends aB{static{g(this,"r")}fillPolygons(t,e){let r=this._fillPolygons(t,e),i=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),n=this._fillPolygons(t,i);return r.ops=r.ops.concat(n.ops),r}},lB=class{static{g(this,"i")}constructor(t){this.helper=t}fillPolygons(t,e){let r=vP(t,e=Object.assign({},e,{hachureAngle:0}));return this.dotsOnLines(r,e)}dotsOnLines(t,e){let r=[],i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.max(i,.1);let n=e.fillWeight;n<0&&(n=e.strokeWidth/2);let a=i/4;for(let s of t){let t=TP(s),o=t/i,l=Math.ceil(o)-1,c=t-l*i,h=(s[0][0]+s[1][0])/2-i/4,u=Math.min(s[0][1],s[1][1]);for(let t=0;t<l;t++){let s=u+c+t*i,o=h-a+2*Math.random()*a,l=s-a+2*Math.random()*a,d=this.helper.ellipse(o,l,n,n,e);r.push(...d.ops)}}return{type:"fillSketch",ops:r}}},cB=class{static{g(this,"c")}constructor(t){this.helper=t}fillPolygons(t,e){let r=vP(t,e);return{type:"fillSketch",ops:this.dashedLine(r,e)}}dashedLine(t,e){let r=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,i=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,n=[];return t.forEach((t=>{let a=TP(t),s=Math.floor(a/(r+i)),o=(a+i-s*(r+i))/2,l=t[0],c=t[1];l[0]>c[0]&&(l=t[1],c=t[0]);let h=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let t=0;t<s;t++){let a=t*(r+i),s=a+r,c=[l[0]+a*Math.cos(h)+o*Math.cos(h),l[1]+a*Math.sin(h)+o*Math.sin(h)],u=[l[0]+s*Math.cos(h)+o*Math.cos(h),l[1]+s*Math.sin(h)+o*Math.sin(h)];n.push(...this.helper.doubleLineOps(c[0],c[1],u[0],u[1],e))}})),n}},hB=class{static{g(this,"l")}constructor(t){this.helper=t}fillPolygons(t,e){let r=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,i=e.zigzagOffset<0?r:e.zigzagOffset,n=vP(t,e=Object.assign({},e,{hachureGap:r+i}));return{type:"fillSketch",ops:this.zigzagLines(n,i,e)}}zigzagLines(t,e,r){let i=[];return t.forEach((t=>{let n=TP(t),a=Math.round(n/(2*e)),s=t[0],o=t[1];s[0]>o[0]&&(s=t[1],o=t[0]);let l=Math.atan((o[1]-s[1])/(o[0]-s[0]));for(let t=0;t<a;t++){let n=2*t*e,a=2*(t+1)*e,o=Math.sqrt(2*Math.pow(e,2)),c=[s[0]+n*Math.cos(l),s[1]+n*Math.sin(l)],h=[s[0]+a*Math.cos(l),s[1]+a*Math.sin(l)],u=[c[0]+o*Math.cos(l+Math.PI/4),c[1]+o*Math.sin(l+Math.PI/4)];i.push(...this.helper.doubleLineOps(c[0],c[1],u[0],u[1],r),...this.helper.doubleLineOps(u[0],u[1],h[0],h[1],r))}})),i}},uB={},dB=class{static{g(this,"p")}constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}},pB=0,fB=1,gB=2,yB={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0},g(wP,"k"),g(_P,"b"),g(SP,"y"),g(CP,"m"),g(EP,"w"),g(AP,"x"),mB={randOffset:g((function(t,e){return UP(t,e)}),"randOffset"),randOffsetWithRange:g((function(t,e,r){return jP(t,e,r)}),"randOffsetWithRange"),ellipse:g((function(t,e,r,i,n){return DP(t,e,n,NP(r,i,n)).opset}),"ellipse"),doubleLineOps:g((function(t,e,r,i,n){return WP(t,e,r,i,n,!0)}),"doubleLineOps")},g($P,"v"),g(LP,"S"),g(RP,"O"),g(IP,"L"),g(NP,"T"),g(DP,"D"),g(MP,"A"),g(OP,"_"),g(PP,"I"),g(BP,"C"),g(FP,"z"),g(zP,"W"),g(jP,"E"),g(UP,"G"),g(WP,"$"),g(qP,"R"),g(YP,"j"),g(GP,"q"),g(HP,"F"),g(VP,"V"),g(XP,"Z"),g(KP,"Q"),g(QP,"H"),g(ZP,"N"),g(JP,"B"),g(tB,"J"),g(eB,"K"),g(rB,"U"),g(iB,"X"),g(nB,"Y"),xB="none",bB=class{static{g(this,"et")}constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,r){return{shape:t,sets:e||[],options:r||this.defaultOptions}}line(t,e,r,i,n){let a=this._o(n);return this._d("line",[$P(t,e,r,i,a)],a)}rectangle(t,e,r,i,n){let a=this._o(n),s=[],o=RP(t,e,r,i,a);if(a.fill){let n=[[t,e],[t+r,e],[t+r,e+i],[t,e+i]];"solid"===a.fillStyle?s.push(PP([n],a)):s.push(BP([n],a))}return a.stroke!==xB&&s.push(o),this._d("rectangle",s,a)}ellipse(t,e,r,i,n){let a=this._o(n),s=[],o=NP(r,i,a),l=DP(t,e,a,o);if(a.fill)if("solid"===a.fillStyle){let r=DP(t,e,a,o).opset;r.type="fillPath",s.push(r)}else s.push(BP([l.estimatedPoints],a));return a.stroke!==xB&&s.push(l.opset),this._d("ellipse",s,a)}circle(t,e,r,i){let n=this.ellipse(t,e,r,r,i);return n.shape="circle",n}linearPath(t,e){let r=this._o(e);return this._d("linearPath",[LP(t,!1,r)],r)}arc(t,e,r,i,n,a,s=!1,o){let l=this._o(o),c=[],h=MP(t,e,r,i,n,a,s,!0,l);if(s&&l.fill)if("solid"===l.fillStyle){let s=Object.assign({},l);s.disableMultiStroke=!0;let o=MP(t,e,r,i,n,a,!0,!1,s);o.type="fillPath",c.push(o)}else c.push(function(t,e,r,i,n,a,s){let o=t,l=e,c=Math.abs(r/2),h=Math.abs(i/2);c+=UP(.01*c,s),h+=UP(.01*h,s);let u=n,d=a;for(;u<0;)u+=2*Math.PI,d+=2*Math.PI;d-u>2*Math.PI&&(u=0,d=2*Math.PI);let p=(d-u)/s.curveStepCount,f=[];for(let t=u;t<=d;t+=p)f.push([o+c*Math.cos(t),l+h*Math.sin(t)]);return f.push([o+c*Math.cos(d),l+h*Math.sin(d)]),f.push([o,l]),BP([f],s)}(t,e,r,i,n,a,l));return l.stroke!==xB&&c.push(h),this._d("arc",c,l)}curve(t,e){let r=this._o(e),i=[],n=IP(t,r);if(r.fill&&r.fill!==xB)if("solid"===r.fillStyle){let e=IP(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else{let e=[],n=t;if(n.length){let t="number"==typeof n[0][0]?[n]:n;for(let i of t)i.length<3?e.push(...i):3===i.length?e.push(...nB(QP([i[0],i[0],i[1],i[2]]),10,(1+r.roughness)/2)):e.push(...nB(QP(i),10,(1+r.roughness)/2))}e.length&&i.push(BP([e],r))}return r.stroke!==xB&&i.push(n),this._d("curve",i,r)}polygon(t,e){let r=this._o(e),i=[],n=LP(t,!0,r);return r.fill&&("solid"===r.fillStyle?i.push(PP([t],r)):i.push(BP([t],r))),r.stroke!==xB&&i.push(n),this._d("polygon",i,r)}path(t,e){let r=this._o(e),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let n=r.fill&&"transparent"!==r.fill&&r.fill!==xB,a=r.stroke!==xB,s=!!(r.simplification&&r.simplification<1),o=function(t,e,r){let i=CP(SP(_P(t))),n=[],a=[],s=[0,0],o=[],l=g((()=>{o.length>=4&&a.push(...nB(o,1)),o=[]}),"i"),c=g((()=>{l(),a.length&&(n.push(a),a=[])}),"c");for(let{key:t,data:e}of i)switch(t){case"M":c(),s=[e[0],e[1]],a.push(s);break;case"L":l(),a.push([e[0],e[1]]);break;case"C":if(!o.length){let t=a.length?a[a.length-1]:s;o.push([t[0],t[1]])}o.push([e[0],e[1]]),o.push([e[2],e[3]]),o.push([e[4],e[5]]);break;case"Z":l(),a.push([s[0],s[1]])}if(c(),!r)return n;let h=[];for(let t of n){let e=rB(t,r);e.length&&h.push(e)}return h}(t,0,s?4-4*(r.simplification||1):(1+r.roughness)/2),l=OP(t,r);if(n)if("solid"===r.fillStyle)if(1===o.length){let e=OP(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else i.push(PP(o,r));else i.push(BP(o,r));return a&&(s?o.forEach((t=>{i.push(LP(t,!1,r))})):i.push(l)),this._d("path",i,r)}opsToPath(t,e){let r="";for(let i of t.ops){let t="number"==typeof e&&e>=0?i.data.map((t=>+t.toFixed(e))):i.data;switch(i.op){case"move":r+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":r+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"lineTo":r+=`L${t[0]} ${t[1]} `}}return r.trim()}toPaths(t){let e=t.sets||[],r=t.options||this.defaultOptions,i=[];for(let t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:xB};break;case"fillPath":e={d:this.opsToPath(t),stroke:xB,strokeWidth:0,fill:r.fill||xB};break;case"fillSketch":e=this.fillSketch(t,r)}e&&i.push(e)}return i}fillSketch(t,e){let r=e.fillWeight;return r<0&&(r=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||xB,strokeWidth:r,fill:xB}}_mergedShape(t){return t.filter(((t,e)=>0===e||"move"!==t.op))}},kB=class{static{g(this,"st")}constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new bB(e)}draw(t){let e=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,n=t.options.fixedDecimalPlaceDigits;for(let a of e)switch(a.type){case"path":i.save(),i.strokeStyle="none"===r.stroke?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,a,n),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";let e="curve"===t.shape||"polygon"===t.shape||"path"===t.shape?"evenodd":"nonzero";this._drawToContext(i,a,n,e),i.restore();break}case"fillSketch":this.fillSketch(i,a,r)}}fillSketch(t,e,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,e,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,e,r,i="nonzero"){t.beginPath();for(let i of e.ops){let e="number"==typeof r&&r>=0?i.data.map((t=>+t.toFixed(r))):i.data;switch(i.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,r,i,n){let a=this.gen.line(t,e,r,i,n);return this.draw(a),a}rectangle(t,e,r,i,n){let a=this.gen.rectangle(t,e,r,i,n);return this.draw(a),a}ellipse(t,e,r,i,n){let a=this.gen.ellipse(t,e,r,i,n);return this.draw(a),a}circle(t,e,r,i){let n=this.gen.circle(t,e,r,i);return this.draw(n),n}linearPath(t,e){let r=this.gen.linearPath(t,e);return this.draw(r),r}polygon(t,e){let r=this.gen.polygon(t,e);return this.draw(r),r}arc(t,e,r,i,n,a,s=!1,o){let l=this.gen.arc(t,e,r,i,n,a,s,o);return this.draw(l),l}curve(t,e){let r=this.gen.curve(t,e);return this.draw(r),r}path(t,e){let r=this.gen.path(t,e);return this.draw(r),r}},vB="http://www.w3.org/2000/svg",TB=class{static{g(this,"ot")}constructor(t,e){this.svg=t,this.gen=new bB(e)}draw(t){let e=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,n=i.createElementNS(vB,"g"),a=t.options.fixedDecimalPlaceDigits;for(let s of e){let e=null;switch(s.type){case"path":e=i.createElementNS(vB,"path"),e.setAttribute("d",this.opsToPath(s,a)),e.setAttribute("stroke",r.stroke),e.setAttribute("stroke-width",r.strokeWidth+""),e.setAttribute("fill","none"),r.strokeLineDash&&e.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&e.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break;case"fillPath":e=i.createElementNS(vB,"path"),e.setAttribute("d",this.opsToPath(s,a)),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","0"),e.setAttribute("fill",r.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||e.setAttribute("fill-rule","evenodd");break;case"fillSketch":e=this.fillSketch(i,s,r)}e&&n.appendChild(e)}return n}fillSketch(t,e,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);let n=t.createElementNS(vB,"path");return n.setAttribute("d",this.opsToPath(e,r.fixedDecimalPlaceDigits)),n.setAttribute("stroke",r.fill||""),n.setAttribute("stroke-width",i+""),n.setAttribute("fill","none"),r.fillLineDash&&n.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&n.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),n}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,e){return this.gen.opsToPath(t,e)}line(t,e,r,i,n){let a=this.gen.line(t,e,r,i,n);return this.draw(a)}rectangle(t,e,r,i,n){let a=this.gen.rectangle(t,e,r,i,n);return this.draw(a)}ellipse(t,e,r,i,n){let a=this.gen.ellipse(t,e,r,i,n);return this.draw(a)}circle(t,e,r,i){let n=this.gen.circle(t,e,r,i);return this.draw(n)}linearPath(t,e){let r=this.gen.linearPath(t,e);return this.draw(r)}polygon(t,e){let r=this.gen.polygon(t,e);return this.draw(r)}arc(t,e,r,i,n,a,s=!1,o){let l=this.gen.arc(t,e,r,i,n,a,s,o);return this.draw(l)}curve(t,e){let r=this.gen.curve(t,e);return this.draw(r)}path(t,e){let r=this.gen.path(t,e);return this.draw(r)}},wB={canvas:g(((t,e)=>new kB(t,e)),"canvas"),svg:g(((t,e)=>new TB(t,e)),"svg"),generator:g((t=>new bB(t)),"generator"),newSeed:g((()=>bB.newSeed()),"newSeed")}}));function SB(t,e){let{labelStyles:r}=uP(e);e.labelStyle=r;let i=jO(e),n=i;i||(n="anchor");let a=t.insert("g").attr("class",n).attr("id",e.domId||e.id),{cssStyles:s}=e,o=wB.svg(a),l=dP(e,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==e.look&&(l.roughness=0);let c=o.circle(0,0,2,l),h=a.insert((()=>c),":first-child");return h.attr("class","anchor").attr("style",H$(s)),zO(e,h),e.intersect=function(t){return et.info("Circle intersect",e,1,t),sP.circle(e,1,t)},a}var CB=y((()=>{We(),UO(),yP(),mP(),_B(),_L(),g(SB,"anchor")}));function EB(t,e,r,i,n,a,s){let o=(t+r)/2,l=(e+i)/2,c=Math.atan2(i-e,r-t),h=(r-t)/2/n,u=(i-e)/2/a,d=Math.sqrt(h**2+u**2);if(d>1)throw new Error("The given radii are too small to create an arc between the points.");let p=Math.sqrt(1-d**2),f=o+p*a*Math.sin(c)*(s?-1:1),g=l-p*n*Math.cos(c)*(s?-1:1),y=Math.atan2((e-g)/a,(t-f)/n),m=Math.atan2((i-g)/a,(r-f)/n)-y;s&&m<0&&(m+=2*Math.PI),!s&&m>0&&(m-=2*Math.PI);let x=[];for(let t=0;t<20;t++){let e=y+t/19*m,r=f+n*Math.cos(e),i=g+a*Math.sin(e);x.push({x:r,y:i})}return x}async function AB(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a}=await BO(t,e,jO(e)),s=a.width+e.padding+20,o=a.height+e.padding,l=o/2,c=l/(2.5+o/50),{cssStyles:h}=e,u=[{x:s/2,y:-o/2},{x:-s/2,y:-o/2},...EB(-s/2,-o/2,-s/2,o/2,c,l,!1),{x:s/2,y:o/2},...EB(s/2,o/2,s/2,-o/2,c,l,!0)],d=wB.svg(n),p=dP(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let f=MO(u),g=d.path(f,p),y=n.insert((()=>g),":first-child");return y.attr("class","basic label-container"),h&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",h),i&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",i),y.attr("transform",`translate(${c/2}, 0)`),zO(e,y),e.intersect=function(t){return sP.polygon(e,u,t)},n}var $B=y((()=>{UO(),yP(),mP(),_B(),g(EB,"generateArcPoints"),g(AB,"bowTieRect")}));function LB(t,e,r,i){return t.insert("polygon",":first-child").attr("points",i.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}var RB=y((()=>{g(LB,"insertPolygonShape")}));async function IB(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,{shapeSvg:a,bbox:s}=await BO(t,e,jO(e)),o=s.height+e.padding,l=s.width+e.padding+12,c=-o,h=[{x:12,y:c},{x:l,y:c},{x:l,y:0},{x:0,y:0},{x:0,y:c+12},{x:12,y:c}],{cssStyles:u}=e;if("handDrawn"===e.look){let t=wB.svg(a),r=dP(e,{}),i=MO(h),s=t.path(i,r);n=a.insert((()=>s),":first-child").attr("transform",`translate(${-l/2}, ${o/2})`),u&&n.attr("style",u)}else n=LB(a,l,o,h);return i&&n.attr("style",i),zO(e,n),e.intersect=function(t){return sP.polygon(e,h,t)},a}var NB=y((()=>{UO(),yP(),mP(),_B(),RB(),UO(),g(IB,"card")}));function DB(t,e){let{nodeStyles:r}=uP(e);e.label="";let i=t.insert("g").attr("class",jO(e)).attr("id",e.domId??e.id),{cssStyles:n}=e,a=Math.max(28,e.width??0),s=[{x:0,y:a/2},{x:a/2,y:0},{x:0,y:-a/2},{x:-a/2,y:0}],o=wB.svg(i),l=dP(e,{});"handDrawn"!==e.look&&(l.roughness=0,l.fillStyle="solid");let c=MO(s),h=o.path(c,l),u=i.insert((()=>h),":first-child");return n&&"handDrawn"!==e.look&&u.selectAll("path").attr("style",n),r&&"handDrawn"!==e.look&&u.selectAll("path").attr("style",r),e.width=28,e.height=28,e.intersect=function(t){return sP.polygon(e,s,t)},i}var MB=y((()=>{yP(),_B(),mP(),UO(),g(DB,"choice")}));async function OB(t,e,r){let{labelStyles:i,nodeStyles:n}=uP(e);e.labelStyle=i;let a,{shapeSvg:s,bbox:o,halfPadding:l}=await BO(t,e,jO(e)),c=r?.padding??l,h=o.width/2+c,{cssStyles:u}=e;if("handDrawn"===e.look){let t=wB.svg(s),r=dP(e,{}),i=t.circle(0,0,2*h,r);a=s.insert((()=>i),":first-child"),a.attr("class","basic label-container").attr("style",H$(u))}else a=s.insert("circle",":first-child").attr("class","basic label-container").attr("style",n).attr("r",h).attr("cx",0).attr("cy",0);return zO(e,a),e.calcIntersect=function(t,e){let r=t.width/2;return sP.circle(t,r,e)},e.intersect=function(t){return et.info("Circle intersect",e,h,t),sP.circle(e,h,t)},s}var PB=y((()=>{_B(),We(),_L(),yP(),mP(),UO(),g(OB,"circle")}));function BB(t){let e=Math.cos(Math.PI/4),r=Math.sin(Math.PI/4),i=2*t;return`M ${-i/2*e},${i/2*r} L ${i/2*e},${-i/2*r}\n                   M ${i/2*e},${i/2*r} L ${-i/2*e},${-i/2*r}`}function FB(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r,e.label="";let n=t.insert("g").attr("class",jO(e)).attr("id",e.domId??e.id),a=Math.max(30,e?.width??0),{cssStyles:s}=e,o=wB.svg(n),l=dP(e,{});"handDrawn"!==e.look&&(l.roughness=0,l.fillStyle="solid");let c=o.circle(0,0,2*a,l),h=BB(a),u=o.path(h,l),d=n.insert((()=>c),":first-child");return d.insert((()=>u)),s&&"handDrawn"!==e.look&&d.selectAll("path").attr("style",s),i&&"handDrawn"!==e.look&&d.selectAll("path").attr("style",i),zO(e,d),e.intersect=function(t){return et.info("crossedCircle intersect",e,{radius:a,point:t}),sP.circle(e,a,t)},n}var zB=y((()=>{We(),UO(),mP(),_B(),yP(),g(BB,"createLine"),g(FB,"crossedCircle")}));function jB(t,e,r,i=100,n=0,a=180){let s=[],o=n*Math.PI/180,l=(a*Math.PI/180-o)/(i-1);for(let n=0;n<i;n++){let i=o+n*l,a=t+r*Math.cos(i),c=e+r*Math.sin(i);s.push({x:-a,y:-c})}return s}async function UB(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=a.width+(e.padding??0),l=a.height+(e.padding??0),c=Math.max(5,.1*l),{cssStyles:h}=e,u=[...jB(o/2,-l/2,c,30,-90,0),{x:-o/2-c,y:c},...jB(o/2+2*c,-c,c,20,-180,-270),...jB(o/2+2*c,c,c,20,-90,-180),{x:-o/2-c,y:-l/2},...jB(o/2,l/2,c,20,0,90)],d=[{x:o/2,y:-l/2-c},{x:-o/2,y:-l/2-c},...jB(o/2,-l/2,c,20,-90,0),{x:-o/2-c,y:-c},...jB(o/2+.1*o,-c,c,20,-180,-270),...jB(o/2+.1*o,c,c,20,-90,-180),{x:-o/2-c,y:l/2},...jB(o/2,l/2,c,20,0,90),{x:-o/2,y:l/2+c},{x:o/2,y:l/2+c}],p=wB.svg(n),f=dP(e,{fill:"none"});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let g=MO(u).replace("Z",""),y=p.path(g,f),m=MO(d),x=p.path(m,{...f}),b=n.insert("g",":first-child");return b.insert((()=>x),":first-child").attr("stroke-opacity",0),b.insert((()=>y),":first-child"),b.attr("class","text"),h&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",h),i&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",i),b.attr("transform",`translate(${c}, 0)`),s.attr("transform",`translate(${-o/2+c-(a.x-(a.left??0))},${-l/2+(e.padding??0)/2-(a.y-(a.top??0))})`),zO(e,b),e.intersect=function(t){return sP.polygon(e,d,t)},n}var WB=y((()=>{UO(),yP(),mP(),_B(),g(jB,"generateCirclePoints"),g(UB,"curlyBraceLeft")}));function qB(t,e,r,i=100,n=0,a=180){let s=[],o=n*Math.PI/180,l=(a*Math.PI/180-o)/(i-1);for(let n=0;n<i;n++){let i=o+n*l,a=t+r*Math.cos(i),c=e+r*Math.sin(i);s.push({x:a,y:c})}return s}async function YB(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=a.width+(e.padding??0),l=a.height+(e.padding??0),c=Math.max(5,.1*l),{cssStyles:h}=e,u=[...qB(o/2,-l/2,c,20,-90,0),{x:o/2+c,y:-c},...qB(o/2+2*c,-c,c,20,-180,-270),...qB(o/2+2*c,c,c,20,-90,-180),{x:o/2+c,y:l/2},...qB(o/2,l/2,c,20,0,90)],d=[{x:-o/2,y:-l/2-c},{x:o/2,y:-l/2-c},...qB(o/2,-l/2,c,20,-90,0),{x:o/2+c,y:-c},...qB(o/2+2*c,-c,c,20,-180,-270),...qB(o/2+2*c,c,c,20,-90,-180),{x:o/2+c,y:l/2},...qB(o/2,l/2,c,20,0,90),{x:o/2,y:l/2+c},{x:-o/2,y:l/2+c}],p=wB.svg(n),f=dP(e,{fill:"none"});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let g=MO(u).replace("Z",""),y=p.path(g,f),m=MO(d),x=p.path(m,{...f}),b=n.insert("g",":first-child");return b.insert((()=>x),":first-child").attr("stroke-opacity",0),b.insert((()=>y),":first-child"),b.attr("class","text"),h&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",h),i&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",i),b.attr("transform",`translate(${-c}, 0)`),s.attr("transform",`translate(${-o/2+(e.padding??0)/2-(a.x-(a.left??0))},${-l/2+(e.padding??0)/2-(a.y-(a.top??0))})`),zO(e,b),e.intersect=function(t){return sP.polygon(e,d,t)},n}var GB=y((()=>{UO(),yP(),mP(),_B(),g(qB,"generateCirclePoints"),g(YB,"curlyBraceRight")}));function HB(t,e,r,i=100,n=0,a=180){let s=[],o=n*Math.PI/180,l=(a*Math.PI/180-o)/(i-1);for(let n=0;n<i;n++){let i=o+n*l,a=t+r*Math.cos(i),c=e+r*Math.sin(i);s.push({x:-a,y:-c})}return s}async function VB(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=a.width+(e.padding??0),l=a.height+(e.padding??0),c=Math.max(5,.1*l),{cssStyles:h}=e,u=[...HB(o/2,-l/2,c,30,-90,0),{x:-o/2-c,y:c},...HB(o/2+2*c,-c,c,20,-180,-270),...HB(o/2+2*c,c,c,20,-90,-180),{x:-o/2-c,y:-l/2},...HB(o/2,l/2,c,20,0,90)],d=[...HB(-o/2+c+c/2,-l/2,c,20,-90,-180),{x:o/2-c/2,y:c},...HB(-o/2-c/2,-c,c,20,0,90),...HB(-o/2-c/2,c,c,20,-90,0),{x:o/2-c/2,y:-c},...HB(-o/2+c+c/2,l/2,c,30,-180,-270)],p=[{x:o/2,y:-l/2-c},{x:-o/2,y:-l/2-c},...HB(o/2,-l/2,c,20,-90,0),{x:-o/2-c,y:-c},...HB(o/2+2*c,-c,c,20,-180,-270),...HB(o/2+2*c,c,c,20,-90,-180),{x:-o/2-c,y:l/2},...HB(o/2,l/2,c,20,0,90),{x:-o/2,y:l/2+c},{x:o/2-c-c/2,y:l/2+c},...HB(-o/2+c+c/2,-l/2,c,20,-90,-180),{x:o/2-c/2,y:c},...HB(-o/2-c/2,-c,c,20,0,90),...HB(-o/2-c/2,c,c,20,-90,0),{x:o/2-c/2,y:-c},...HB(-o/2+c+c/2,l/2,c,30,-180,-270)],f=wB.svg(n),g=dP(e,{fill:"none"});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let y=MO(u).replace("Z",""),m=f.path(y,g),x=MO(d).replace("Z",""),b=f.path(x,g),k=MO(p),v=f.path(k,{...g}),T=n.insert("g",":first-child");return T.insert((()=>v),":first-child").attr("stroke-opacity",0),T.insert((()=>m),":first-child"),T.insert((()=>b),":first-child"),T.attr("class","text"),h&&"handDrawn"!==e.look&&T.selectAll("path").attr("style",h),i&&"handDrawn"!==e.look&&T.selectAll("path").attr("style",i),T.attr("transform",`translate(${c-c/4}, 0)`),s.attr("transform",`translate(${-o/2+(e.padding??0)/2-(a.x-(a.left??0))},${-l/2+(e.padding??0)/2-(a.y-(a.top??0))})`),zO(e,T),e.intersect=function(t){return sP.polygon(e,p,t)},n}var XB=y((()=>{UO(),yP(),mP(),_B(),g(HB,"generateCirclePoints"),g(VB,"curlyBraces")}));async function KB(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a}=await BO(t,e,jO(e)),s=Math.max(80,1.25*(a.width+2*(e.padding??0)),e?.width??0),o=Math.max(20,a.height+2*(e.padding??0),e?.height??0),l=o/2,{cssStyles:c}=e,h=wB.svg(n),u=dP(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let d=s-l,p=o/4,f=[{x:d,y:0},{x:p,y:0},{x:0,y:o/2},{x:p,y:o},{x:d,y:o},...PO(-d,-o/2,l,50,270,90)],g=MO(f),y=h.path(g,u),m=n.insert((()=>y),":first-child");return m.attr("class","basic label-container"),c&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",c),i&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",i),m.attr("transform",`translate(${-s/2}, ${-o/2})`),zO(e,m),e.intersect=function(t){return sP.polygon(e,f,t)},n}var QB=y((()=>{UO(),yP(),mP(),_B(),g(KB,"curvedTrapezoid")}));async function ZB(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,{shapeSvg:a,bbox:s,label:o}=await BO(t,e,jO(e)),l=Math.max(s.width+e.padding,e.width??0),c=l/2,h=c/(2.5+l/50),u=Math.max(s.height+h+e.padding,e.height??0),{cssStyles:d}=e;if("handDrawn"===e.look){let t=wB.svg(a),r=tF(0,0,l,u,c,h),i=eF(0,h,l,u,c,h),s=t.path(r,dP(e,{})),o=t.path(i,dP(e,{fill:"none"}));n=a.insert((()=>o),":first-child"),n=a.insert((()=>s),":first-child"),n.attr("class","basic label-container"),d&&n.attr("style",d)}else{let t=JB(0,0,l,u,c,h);n=a.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",H$(d)).attr("style",i)}return n.attr("label-offset-y",h),n.attr("transform",`translate(${-l/2}, ${-(u/2+h)})`),zO(e,n),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-s.height/2+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(t){let r=sP.rect(e,t),i=r.x-(e.x??0);if(0!=c&&(Math.abs(i)<(e.width??0)/2||Math.abs(i)==(e.width??0)/2&&Math.abs(r.y-(e.y??0))>(e.height??0)/2-h)){let n=h*h*(1-i*i/(c*c));n>0&&(n=Math.sqrt(n)),n=h-n,t.y-(e.y??0)>0&&(n=-n),r.y+=n}return r},a}var JB,tF,eF,rF=y((()=>{UO(),yP(),mP(),_B(),_L(),JB=g(((t,e,r,i,n,a)=>[`M${t},${e+a}`,`a${n},${a} 0,0,0 ${r},0`,`a${n},${a} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${a} 0,0,0 ${r},0`,"l0,"+-i].join(" ")),"createCylinderPathD"),tF=g(((t,e,r,i,n,a)=>[`M${t},${e+a}`,`M${t+r},${e+a}`,`a${n},${a} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${a} 0,0,0 ${r},0`,"l0,"+-i].join(" ")),"createOuterCylinderPathD"),eF=g(((t,e,r,i,n,a)=>[`M${t-r/2},${-i/2}`,`a${n},${a} 0,0,0 ${r},0`].join(" ")),"createInnerCylinderPathD"),g(ZB,"cylinder")}));async function iF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=a.width+e.padding,l=a.height+e.padding,c=.2*l,h=-o/2,u=-l/2-c/2,{cssStyles:d}=e,p=wB.svg(n),f=dP(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let g=[{x:h,y:u+c},{x:-h,y:u+c},{x:-h,y:-u},{x:h,y:-u},{x:h,y:u},{x:-h,y:u},{x:-h,y:u+c}],y=p.polygon(g.map((t=>[t.x,t.y])),f),m=n.insert((()=>y),":first-child");return m.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",d),i&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",i),s.attr("transform",`translate(${h+(e.padding??0)/2-(a.x-(a.left??0))}, ${u+c+(e.padding??0)/2-(a.y-(a.top??0))})`),zO(e,m),e.intersect=function(t){return sP.rect(e,t)},n}var nF=y((()=>{UO(),yP(),mP(),_B(),g(iF,"dividedRectangle")}));async function aF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,{shapeSvg:a,bbox:s,halfPadding:o}=await BO(t,e,jO(e)),l=s.width/2+o+5,c=s.width/2+o,{cssStyles:h}=e;if("handDrawn"===e.look){let t=wB.svg(a),r=dP(e,{roughness:.2,strokeWidth:2.5}),i=dP(e,{roughness:.2,strokeWidth:1.5}),s=t.circle(0,0,2*l,r),o=t.circle(0,0,2*c,i);n=a.insert("g",":first-child"),n.attr("class",H$(e.cssClasses)).attr("style",H$(h)),n.node()?.appendChild(s),n.node()?.appendChild(o)}else{n=a.insert("g",":first-child");let t=n.insert("circle",":first-child"),e=n.insert("circle");n.attr("class","basic label-container").attr("style",i),t.attr("class","outer-circle").attr("style",i).attr("r",l).attr("cx",0).attr("cy",0),e.attr("class","inner-circle").attr("style",i).attr("r",c).attr("cx",0).attr("cy",0)}return zO(e,n),e.intersect=function(t){return et.info("DoubleCircle intersect",e,l,t),sP.circle(e,l,t)},a}var sF=y((()=>{We(),UO(),yP(),mP(),_B(),_L(),g(aF,"doublecircle")}));function oF(t,e,{config:{themeVariables:r}}){let{labelStyles:i,nodeStyles:n}=uP(e);e.label="",e.labelStyle=i;let a=t.insert("g").attr("class",jO(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,o=wB.svg(a),{nodeBorder:l}=r,c=dP(e,{fillStyle:"solid"});"handDrawn"!==e.look&&(c.roughness=0);let h=o.circle(0,0,14,c),u=a.insert((()=>h),":first-child");return u.selectAll("path").attr("style",`fill: ${l} !important;`),s&&s.length>0&&"handDrawn"!==e.look&&u.selectAll("path").attr("style",s),n&&"handDrawn"!==e.look&&u.selectAll("path").attr("style",n),zO(e,u),e.intersect=function(t){return et.info("filledCircle intersect",e,{radius:7,point:t}),sP.circle(e,7,t)},a}var lF=y((()=>{_B(),We(),yP(),mP(),UO(),g(oF,"filledCircle")}));async function cF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=a.width+(e.padding??0),l=o+a.height,c=o+a.height,h=[{x:0,y:-l},{x:c,y:-l},{x:c/2,y:0}],{cssStyles:u}=e,d=wB.svg(n),p=dP(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let f=MO(h),g=d.path(f,p),y=n.insert((()=>g),":first-child").attr("transform",`translate(${-l/2}, ${l/2})`);return u&&"handDrawn"!==e.look&&y.selectChildren("path").attr("style",u),i&&"handDrawn"!==e.look&&y.selectChildren("path").attr("style",i),e.width=o,e.height=l,zO(e,y),s.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-l/2+(e.padding??0)/2+(a.y-(a.top??0))})`),e.intersect=function(t){return et.info("Triangle intersect",e,h,t),sP.polygon(e,h,t)},n}var hF=y((()=>{We(),UO(),yP(),mP(),_B(),UO(),g(cF,"flippedTriangle")}));function uF(t,e,{dir:r,config:{state:i,themeVariables:n}}){let{nodeStyles:a}=uP(e);e.label="";let s=t.insert("g").attr("class",jO(e)).attr("id",e.domId??e.id),{cssStyles:o}=e,l=Math.max(70,e?.width??0),c=Math.max(10,e?.height??0);"LR"===r&&(l=Math.max(10,e?.width??0),c=Math.max(70,e?.height??0));let h=-1*l/2,u=-1*c/2,d=wB.svg(s),p=dP(e,{stroke:n.lineColor,fill:n.lineColor});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let f=d.rectangle(h,u,l,c,p),g=s.insert((()=>f),":first-child");o&&"handDrawn"!==e.look&&g.selectAll("path").attr("style",o),a&&"handDrawn"!==e.look&&g.selectAll("path").attr("style",a),zO(e,g);let y=i?.padding??0;return e.width&&e.height&&(e.width+=y/2||0,e.height+=y/2||0),e.intersect=function(t){return sP.rect(e,t)},s}var dF=y((()=>{_B(),yP(),mP(),UO(),g(uF,"forkJoin")}));async function pF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a}=await BO(t,e,jO(e)),s=Math.max(80,a.width+2*(e.padding??0),e?.width??0),o=Math.max(50,a.height+2*(e.padding??0),e?.height??0),l=o/2,{cssStyles:c}=e,h=wB.svg(n),u=dP(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let d=[{x:-s/2,y:-o/2},{x:s/2-l,y:-o/2},...PO(-s/2+l,0,l,50,90,270),{x:s/2-l,y:o/2},{x:-s/2,y:o/2}],p=MO(d),f=h.path(p,u),g=n.insert((()=>f),":first-child");return g.attr("class","basic label-container"),c&&"handDrawn"!==e.look&&g.selectChildren("path").attr("style",c),i&&"handDrawn"!==e.look&&g.selectChildren("path").attr("style",i),zO(e,g),e.intersect=function(t){return et.info("Pill intersect",e,{radius:l,point:t}),sP.polygon(e,d,t)},n}var fF=y((()=>{We(),UO(),yP(),mP(),_B(),g(pF,"halfRoundedRectangle")}));async function gF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a}=await BO(t,e,jO(e)),s=a.height+(e.padding??0),o=a.width+2.5*(e.padding??0),{cssStyles:l}=e,c=wB.svg(n),h=dP(e,{});"handDrawn"!==e.look&&(h.roughness=0,h.fillStyle="solid");let u=o/2;u+=u/6;let d=s/2,p=u-d/2,f=[{x:-p,y:-d},{x:0,y:-d},{x:p,y:-d},{x:u,y:0},{x:p,y:d},{x:0,y:d},{x:-p,y:d},{x:-u,y:0}],g=MO(f),y=c.path(g,h),m=n.insert((()=>y),":first-child");return m.attr("class","basic label-container"),l&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",l),i&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",i),e.width=o,e.height=s,zO(e,m),e.intersect=function(t){return sP.polygon(e,f,t)},n}var yF=y((()=>{UO(),yP(),mP(),_B(),g(gF,"hexagon")}));async function mF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.label="",e.labelStyle=r;let{shapeSvg:n}=await BO(t,e,jO(e)),a=Math.max(30,e?.width??0),s=Math.max(30,e?.height??0),{cssStyles:o}=e,l=wB.svg(n),c=dP(e,{});"handDrawn"!==e.look&&(c.roughness=0,c.fillStyle="solid");let h=[{x:0,y:0},{x:a,y:0},{x:0,y:s},{x:a,y:s}],u=MO(h),d=l.path(u,c),p=n.insert((()=>d),":first-child");return p.attr("class","basic label-container"),o&&"handDrawn"!==e.look&&p.selectChildren("path").attr("style",o),i&&"handDrawn"!==e.look&&p.selectChildren("path").attr("style",i),p.attr("transform",`translate(${-a/2}, ${-s/2})`),zO(e,p),e.intersect=function(t){return et.info("Pill intersect",e,{points:h}),sP.polygon(e,h,t)},n}var xF=y((()=>{We(),UO(),yP(),mP(),_B(),g(mF,"hourglass")}));async function bF(t,e,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:n}=uP(e);e.labelStyle=n;let a=e.assetHeight??48,s=e.assetWidth??48,o=Math.max(a,s),l=i?.wrappingWidth;e.width=Math.max(o,l??0);let{shapeSvg:c,bbox:h,label:u}=await BO(t,e,"icon-shape default"),d="t"===e.pos,p=o,f=o,{nodeBorder:g}=r,{stylesMap:y}=lP(e),m=-f/2,x=-p/2,b=e.label?8:0,k=wB.svg(c),v=dP(e,{stroke:"none",fill:"none"});"handDrawn"!==e.look&&(v.roughness=0,v.fillStyle="solid");let T=k.rectangle(m,x,f,p,v),w=Math.max(f,h.width),_=p+h.height+b,S=k.rectangle(-w/2,-_/2,w,_,{...v,fill:"transparent",stroke:"none"}),C=c.insert((()=>T),":first-child"),E=c.insert((()=>S));if(e.icon){let t=c.append("g");t.html(`<g>${await fn(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);let r=t.node().getBBox(),i=r.width,n=r.height,a=r.x,s=r.y;t.attr("transform",`translate(${-i/2-a},${d?h.height/2+b/2-n/2-s:-h.height/2-b/2-n/2-s})`),t.attr("style",`color: ${y.get("stroke")??g};`)}return u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${d?-_/2:_/2-h.height})`),C.attr("transform",`translate(0,${d?h.height/2+b/2:-h.height/2-b/2})`),zO(e,E),e.intersect=function(t){if(et.info("iconSquare intersect",e,t),!e.label)return sP.rect(e,t);let r=e.x??0,i=e.y??0,n=e.height??0,a=[];return a=d?[{x:r-h.width/2,y:i-n/2},{x:r+h.width/2,y:i-n/2},{x:r+h.width/2,y:i-n/2+h.height+b},{x:r+f/2,y:i-n/2+h.height+b},{x:r+f/2,y:i+n/2},{x:r-f/2,y:i+n/2},{x:r-f/2,y:i-n/2+h.height+b},{x:r-h.width/2,y:i-n/2+h.height+b}]:[{x:r-f/2,y:i-n/2},{x:r+f/2,y:i-n/2},{x:r+f/2,y:i-n/2+p},{x:r+h.width/2,y:i-n/2+p},{x:r+h.width/2/2,y:i+n/2},{x:r-h.width/2,y:i+n/2},{x:r-h.width/2,y:i-n/2+p},{x:r-f/2,y:i-n/2+p}],sP.polygon(e,a,t)},c}var kF=y((()=>{_B(),We(),yn(),yP(),mP(),UO(),g(bF,"icon")}));async function vF(t,e,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:n}=uP(e);e.labelStyle=n;let a=e.assetHeight??48,s=e.assetWidth??48,o=Math.max(a,s),l=i?.wrappingWidth;e.width=Math.max(o,l??0);let{shapeSvg:c,bbox:h,label:u}=await BO(t,e,"icon-shape default"),d=e.label?8:0,p="t"===e.pos,{nodeBorder:f,mainBkg:g}=r,{stylesMap:y}=lP(e),m=wB.svg(c),x=dP(e,{});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");let b=y.get("fill");x.stroke=b??g;let k=c.append("g");e.icon&&k.html(`<g>${await fn(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);let v=k.node().getBBox(),T=v.width,w=v.height,_=v.x,S=v.y,C=Math.max(T,w)*Math.SQRT2+40,E=m.circle(0,0,C,x),A=Math.max(C,h.width),$=C+h.height+d,L=m.rectangle(-A/2,-$/2,A,$,{...x,fill:"transparent",stroke:"none"}),R=c.insert((()=>E),":first-child"),I=c.insert((()=>L));return k.attr("transform",`translate(${-T/2-_},${p?h.height/2+d/2-w/2-S:-h.height/2-d/2-w/2-S})`),k.attr("style",`color: ${y.get("stroke")??f};`),u.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-$/2:$/2-h.height})`),R.attr("transform",`translate(0,${p?h.height/2+d/2:-h.height/2-d/2})`),zO(e,I),e.intersect=function(t){return et.info("iconSquare intersect",e,t),sP.rect(e,t)},c}var TF,wF=y((()=>{_B(),We(),yn(),yP(),mP(),UO(),g(vF,"iconCircle")})),_F=y((()=>{TF=g(((t,e,r,i,n)=>["M",t+n,e,"H",t+r-n,"A",n,n,0,0,1,t+r,e+n,"V",e+i-n,"A",n,n,0,0,1,t+r-n,e+i,"H",t+n,"A",n,n,0,0,1,t,e+i-n,"V",e+n,"A",n,n,0,0,1,t+n,e,"Z"].join(" ")),"createRoundedRectPathD")}));async function SF(t,e,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:n}=uP(e);e.labelStyle=n;let a=e.assetHeight??48,s=e.assetWidth??48,o=Math.max(a,s),l=i?.wrappingWidth;e.width=Math.max(o,l??0);let{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await BO(t,e,"icon-shape default"),p="t"===e.pos,f=o+2*u,g=o+2*u,{nodeBorder:y,mainBkg:m}=r,{stylesMap:x}=lP(e),b=-g/2,k=-f/2,v=e.label?8:0,T=wB.svg(c),w=dP(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let _=x.get("fill");w.stroke=_??m;let S=T.path(TF(b,k,g,f,5),w),C=Math.max(g,h.width),E=f+h.height+v,A=T.rectangle(-C/2,-E/2,C,E,{...w,fill:"transparent",stroke:"none"}),$=c.insert((()=>S),":first-child").attr("class","icon-shape2"),L=c.insert((()=>A));if(e.icon){let t=c.append("g");t.html(`<g>${await fn(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);let r=t.node().getBBox(),i=r.width,n=r.height,a=r.x,s=r.y;t.attr("transform",`translate(${-i/2-a},${p?h.height/2+v/2-n/2-s:-h.height/2-v/2-n/2-s})`),t.attr("style",`color: ${x.get("stroke")??y};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-E/2:E/2-h.height})`),$.attr("transform",`translate(0,${p?h.height/2+v/2:-h.height/2-v/2})`),zO(e,L),e.intersect=function(t){if(et.info("iconSquare intersect",e,t),!e.label)return sP.rect(e,t);let r=e.x??0,i=e.y??0,n=e.height??0,a=[];return a=p?[{x:r-h.width/2,y:i-n/2},{x:r+h.width/2,y:i-n/2},{x:r+h.width/2,y:i-n/2+h.height+v},{x:r+g/2,y:i-n/2+h.height+v},{x:r+g/2,y:i+n/2},{x:r-g/2,y:i+n/2},{x:r-g/2,y:i-n/2+h.height+v},{x:r-h.width/2,y:i-n/2+h.height+v}]:[{x:r-g/2,y:i-n/2},{x:r+g/2,y:i-n/2},{x:r+g/2,y:i-n/2+f},{x:r+h.width/2,y:i-n/2+f},{x:r+h.width/2/2,y:i+n/2},{x:r-h.width/2,y:i+n/2},{x:r-h.width/2,y:i-n/2+f},{x:r-g/2,y:i-n/2+f}],sP.polygon(e,a,t)},c}var CF=y((()=>{_B(),We(),yn(),yP(),mP(),_F(),UO(),g(SF,"iconRounded")}));async function EF(t,e,{config:{themeVariables:r,flowchart:i}}){let{labelStyles:n}=uP(e);e.labelStyle=n;let a=e.assetHeight??48,s=e.assetWidth??48,o=Math.max(a,s),l=i?.wrappingWidth;e.width=Math.max(o,l??0);let{shapeSvg:c,bbox:h,halfPadding:u,label:d}=await BO(t,e,"icon-shape default"),p="t"===e.pos,f=o+2*u,g=o+2*u,{nodeBorder:y,mainBkg:m}=r,{stylesMap:x}=lP(e),b=-g/2,k=-f/2,v=e.label?8:0,T=wB.svg(c),w=dP(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let _=x.get("fill");w.stroke=_??m;let S=T.path(TF(b,k,g,f,.1),w),C=Math.max(g,h.width),E=f+h.height+v,A=T.rectangle(-C/2,-E/2,C,E,{...w,fill:"transparent",stroke:"none"}),$=c.insert((()=>S),":first-child"),L=c.insert((()=>A));if(e.icon){let t=c.append("g");t.html(`<g>${await fn(e.icon,{height:o,width:o,fallbackPrefix:""})}</g>`);let r=t.node().getBBox(),i=r.width,n=r.height,a=r.x,s=r.y;t.attr("transform",`translate(${-i/2-a},${p?h.height/2+v/2-n/2-s:-h.height/2-v/2-n/2-s})`),t.attr("style",`color: ${x.get("stroke")??y};`)}return d.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))},${p?-E/2:E/2-h.height})`),$.attr("transform",`translate(0,${p?h.height/2+v/2:-h.height/2-v/2})`),zO(e,L),e.intersect=function(t){if(et.info("iconSquare intersect",e,t),!e.label)return sP.rect(e,t);let r=e.x??0,i=e.y??0,n=e.height??0,a=[];return a=p?[{x:r-h.width/2,y:i-n/2},{x:r+h.width/2,y:i-n/2},{x:r+h.width/2,y:i-n/2+h.height+v},{x:r+g/2,y:i-n/2+h.height+v},{x:r+g/2,y:i+n/2},{x:r-g/2,y:i+n/2},{x:r-g/2,y:i-n/2+h.height+v},{x:r-h.width/2,y:i-n/2+h.height+v}]:[{x:r-g/2,y:i-n/2},{x:r+g/2,y:i-n/2},{x:r+g/2,y:i-n/2+f},{x:r+h.width/2,y:i-n/2+f},{x:r+h.width/2/2,y:i+n/2},{x:r-h.width/2,y:i+n/2},{x:r-h.width/2,y:i-n/2+f},{x:r-g/2,y:i-n/2+f}],sP.polygon(e,a,t)},c}var AF=y((()=>{_B(),We(),yn(),yP(),_F(),mP(),UO(),g(EF,"iconSquare")}));async function $F(t,e,{config:{flowchart:r}}){let i=new Image;i.src=e?.img??"",await i.decode();let n=Number(i.naturalWidth.toString().replace("px","")),a=Number(i.naturalHeight.toString().replace("px",""));e.imageAspectRatio=n/a;let{labelStyles:s}=uP(e);e.labelStyle=s;let o=r?.wrappingWidth;e.defaultWidth=r?.wrappingWidth;let l=Math.max(e.label?o??0:0,e?.assetWidth??n),c="on"===e.constraint&&e?.assetHeight?e.assetHeight*e.imageAspectRatio:l,h="on"===e.constraint?c/e.imageAspectRatio:e?.assetHeight??a;e.width=Math.max(c,o??0);let{shapeSvg:u,bbox:d,label:p}=await BO(t,e,"image-shape default"),f="t"===e.pos,g=-c/2,y=-h/2,m=e.label?8:0,x=wB.svg(u),b=dP(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let k=x.rectangle(g,y,c,h,b),v=Math.max(c,d.width),T=h+d.height+m,w=x.rectangle(-v/2,-T/2,v,T,{...b,fill:"none",stroke:"none"}),_=u.insert((()=>k),":first-child"),S=u.insert((()=>w));if(e.img){let t=u.append("image");t.attr("href",e.img),t.attr("width",c),t.attr("height",h),t.attr("preserveAspectRatio","none"),t.attr("transform",`translate(${-c/2},${f?T/2-h:-T/2})`)}return p.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${f?-h/2-d.height/2-m/2:h/2-d.height/2+m/2})`),_.attr("transform",`translate(0,${f?d.height/2+m/2:-d.height/2-m/2})`),zO(e,S),e.intersect=function(t){if(et.info("iconSquare intersect",e,t),!e.label)return sP.rect(e,t);let r=e.x??0,i=e.y??0,n=e.height??0,a=[];return a=f?[{x:r-d.width/2,y:i-n/2},{x:r+d.width/2,y:i-n/2},{x:r+d.width/2,y:i-n/2+d.height+m},{x:r+c/2,y:i-n/2+d.height+m},{x:r+c/2,y:i+n/2},{x:r-c/2,y:i+n/2},{x:r-c/2,y:i-n/2+d.height+m},{x:r-d.width/2,y:i-n/2+d.height+m}]:[{x:r-c/2,y:i-n/2},{x:r+c/2,y:i-n/2},{x:r+c/2,y:i-n/2+h},{x:r+d.width/2,y:i-n/2+h},{x:r+d.width/2/2,y:i+n/2},{x:r-d.width/2,y:i+n/2},{x:r-d.width/2,y:i-n/2+h},{x:r-c/2,y:i-n/2+h}],sP.polygon(e,a,t)},u}var LF=y((()=>{_B(),We(),yP(),mP(),UO(),g($F,"imageSquare")}));async function RF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,{shapeSvg:a,bbox:s}=await BO(t,e,jO(e)),o=Math.max(s.width+2*(e.padding??0),e?.width??0),l=Math.max(s.height+2*(e.padding??0),e?.height??0),c=[{x:0,y:0},{x:o,y:0},{x:o+3*l/6,y:-l},{x:-3*l/6,y:-l}],{cssStyles:h}=e;if("handDrawn"===e.look){let t=wB.svg(a),r=dP(e,{}),i=MO(c),s=t.path(i,r);n=a.insert((()=>s),":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),h&&n.attr("style",h)}else n=LB(a,o,l,c);return i&&n.attr("style",i),e.width=o,e.height=l,zO(e,n),e.intersect=function(t){return sP.polygon(e,c,t)},a}var IF=y((()=>{UO(),yP(),mP(),_B(),RB(),g(RF,"inv_trapezoid")}));async function NF(t,e,r){let{labelStyles:i,nodeStyles:n}=uP(e);e.labelStyle=i;let a,{shapeSvg:s,bbox:o}=await BO(t,e,jO(e)),l=Math.max(o.width+2*r.labelPaddingX,e?.width||0),c=Math.max(o.height+2*r.labelPaddingY,e?.height||0),h=-l/2,u=-c/2,{rx:d,ry:p}=e,{cssStyles:f}=e;if(r?.rx&&r.ry&&(d=r.rx,p=r.ry),"handDrawn"===e.look){let t=wB.svg(s),r=dP(e,{}),i=d||p?t.path(TF(h,u,l,c,d||0),r):t.rectangle(h,u,l,c,r);a=s.insert((()=>i),":first-child"),a.attr("class","basic label-container").attr("style",H$(f))}else a=s.insert("rect",":first-child"),a.attr("class","basic label-container").attr("style",n).attr("rx",H$(d)).attr("ry",H$(p)).attr("x",h).attr("y",u).attr("width",l).attr("height",c);return zO(e,a),e.calcIntersect=function(t,e){return sP.rect(t,e)},e.intersect=function(t){return sP.rect(e,t)},s}var DF=y((()=>{UO(),yP(),_F(),mP(),_B(),_L(),g(NF,"drawRect")}));async function MF(t,e){let{shapeSvg:r,bbox:i,label:n}=await BO(t,e,"label"),a=r.insert("rect",":first-child");return a.attr("width",.1).attr("height",.1),r.attr("class","label edgeLabel"),n.attr("transform",`translate(${-i.width/2-(i.x-(i.left??0))}, ${-i.height/2-(i.y-(i.top??0))})`),zO(e,a),e.intersect=function(t){return sP.rect(e,t)},r}var OF=y((()=>{DF(),UO(),yP(),g(MF,"labelRect")}));async function PF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,{shapeSvg:a,bbox:s}=await BO(t,e,jO(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),l=Math.max(s.height+(e.padding??0),e?.height??0),c=[{x:0,y:0},{x:o+3*l/6,y:0},{x:o,y:-l},{x:-3*l/6,y:-l}],{cssStyles:h}=e;if("handDrawn"===e.look){let t=wB.svg(a),r=dP(e,{}),i=MO(c),s=t.path(i,r);n=a.insert((()=>s),":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),h&&n.attr("style",h)}else n=LB(a,o,l,c);return i&&n.attr("style",i),e.width=o,e.height=l,zO(e,n),e.intersect=function(t){return sP.polygon(e,c,t)},a}var BF=y((()=>{UO(),yP(),mP(),_B(),RB(),g(PF,"lean_left")}));async function FF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,{shapeSvg:a,bbox:s}=await BO(t,e,jO(e)),o=Math.max(s.width+(e.padding??0),e?.width??0),l=Math.max(s.height+(e.padding??0),e?.height??0),c=[{x:-3*l/6,y:0},{x:o,y:0},{x:o+3*l/6,y:-l},{x:0,y:-l}],{cssStyles:h}=e;if("handDrawn"===e.look){let t=wB.svg(a),r=dP(e,{}),i=MO(c),s=t.path(i,r);n=a.insert((()=>s),":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),h&&n.attr("style",h)}else n=LB(a,o,l,c);return i&&n.attr("style",i),e.width=o,e.height=l,zO(e,n),e.intersect=function(t){return sP.polygon(e,c,t)},a}var zF=y((()=>{UO(),yP(),mP(),_B(),RB(),g(FF,"lean_right")}));function jF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.label="",e.labelStyle=r;let n=t.insert("g").attr("class",jO(e)).attr("id",e.domId??e.id),{cssStyles:a}=e,s=Math.max(35,e?.width??0),o=Math.max(35,e?.height??0),l=[{x:s,y:0},{x:0,y:o+3.5},{x:s-14,y:o+3.5},{x:0,y:2*o},{x:s,y:o-3.5},{x:14,y:o-3.5}],c=wB.svg(n),h=dP(e,{});"handDrawn"!==e.look&&(h.roughness=0,h.fillStyle="solid");let u=MO(l),d=c.path(u,h),p=n.insert((()=>d),":first-child");return a&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",a),i&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",i),p.attr("transform",`translate(-${s/2},${-o})`),zO(e,p),e.intersect=function(t){return et.info("lightningBolt intersect",e,t),sP.polygon(e,l,t)},n}var UF=y((()=>{We(),UO(),mP(),_B(),yP(),UO(),g(jF,"lightningBolt")}));async function WF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,{shapeSvg:a,bbox:s,label:o}=await BO(t,e,jO(e)),l=Math.max(s.width+(e.padding??0),e.width??0),c=l/2,h=c/(2.5+l/50),u=Math.max(s.height+h+(e.padding??0),e.height??0),d=.1*u,{cssStyles:p}=e;if("handDrawn"===e.look){let t=wB.svg(a),r=YF(0,0,l,u,c,h,d),i=GF(0,h,l,u,c,h),s=dP(e,{}),o=t.path(r,s),f=t.path(i,s);a.insert((()=>f),":first-child").attr("class","line"),n=a.insert((()=>o),":first-child"),n.attr("class","basic label-container"),p&&n.attr("style",p)}else{let t=qF(0,0,l,u,c,h,d);n=a.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",H$(p)).attr("style",i)}return n.attr("label-offset-y",h),n.attr("transform",`translate(${-l/2}, ${-(u/2+h)})`),zO(e,n),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-s.height/2+h-(s.y-(s.top??0))})`),e.intersect=function(t){let r=sP.rect(e,t),i=r.x-(e.x??0);if(0!=c&&(Math.abs(i)<(e.width??0)/2||Math.abs(i)==(e.width??0)/2&&Math.abs(r.y-(e.y??0))>(e.height??0)/2-h)){let n=h*h*(1-i*i/(c*c));n>0&&(n=Math.sqrt(n)),n=h-n,t.y-(e.y??0)>0&&(n=-n),r.y+=n}return r},a}var qF,YF,GF,HF=y((()=>{UO(),yP(),mP(),_B(),_L(),qF=g(((t,e,r,i,n,a,s)=>[`M${t},${e+a}`,`a${n},${a} 0,0,0 ${r},0`,`a${n},${a} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${a} 0,0,0 ${r},0`,"l0,"+-i,`M${t},${e+a+s}`,`a${n},${a} 0,0,0 ${r},0`].join(" ")),"createCylinderPathD"),YF=g(((t,e,r,i,n,a,s)=>[`M${t},${e+a}`,`M${t+r},${e+a}`,`a${n},${a} 0,0,0 ${-r},0`,`l0,${i}`,`a${n},${a} 0,0,0 ${r},0`,"l0,"+-i,`M${t},${e+a+s}`,`a${n},${a} 0,0,0 ${r},0`].join(" ")),"createOuterCylinderPathD"),GF=g(((t,e,r,i,n,a)=>[`M${t-r/2},${-i/2}`,`a${n},${a} 0,0,0 ${r},0`].join(" ")),"createInnerCylinderPathD"),g(WF,"linedCylinder")}));async function VF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),l=Math.max(a.height+2*(e.padding??0),e?.height??0),c=l/4,h=l+c,{cssStyles:u}=e,d=wB.svg(n),p=dP(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let f=[{x:-o/2-o/2*.1,y:-h/2},{x:-o/2-o/2*.1,y:h/2},...OO(-o/2-o/2*.1,h/2,o/2+o/2*.1,h/2,c,.8),{x:o/2+o/2*.1,y:-h/2},{x:-o/2-o/2*.1,y:-h/2},{x:-o/2,y:-h/2},{x:-o/2,y:h/2*1.1},{x:-o/2,y:-h/2}],g=d.polygon(f.map((t=>[t.x,t.y])),p),y=n.insert((()=>g),":first-child");return y.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",u),i&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",i),y.attr("transform",`translate(0,${-c/2})`),s.attr("transform",`translate(${-o/2+(e.padding??0)+o/2*.1/2-(a.x-(a.left??0))},${-l/2+(e.padding??0)-c/2-(a.y-(a.top??0))})`),zO(e,y),e.intersect=function(t){return sP.polygon(e,f,t)},n}var XF=y((()=>{UO(),yP(),_B(),mP(),g(VF,"linedWaveEdgedRect")}));async function KF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),l=Math.max(a.height+2*(e.padding??0),e?.height??0),c=-o/2,h=-l/2,{cssStyles:u}=e,d=wB.svg(n),p=dP(e,{}),f=[{x:c-5,y:h+5},{x:c-5,y:h+l+5},{x:c+o-5,y:h+l+5},{x:c+o-5,y:h+l},{x:c+o,y:h+l},{x:c+o,y:h+l-5},{x:c+o+5,y:h+l-5},{x:c+o+5,y:h-5},{x:c+5,y:h-5},{x:c+5,y:h},{x:c,y:h},{x:c,y:h+5}],g=[{x:c,y:h+5},{x:c+o-5,y:h+5},{x:c+o-5,y:h+l},{x:c+o,y:h+l},{x:c+o,y:h},{x:c,y:h}];"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=MO(f),m=d.path(y,p),x=MO(g),b=d.path(x,{...p,fill:"none"}),k=n.insert((()=>b),":first-child");return k.insert((()=>m),":first-child"),k.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&k.selectAll("path").attr("style",u),i&&"handDrawn"!==e.look&&k.selectAll("path").attr("style",i),s.attr("transform",`translate(${-a.width/2-5-(a.x-(a.left??0))}, ${-a.height/2+5-(a.y-(a.top??0))})`),zO(e,k),e.intersect=function(t){return sP.polygon(e,f,t)},n}var QF=y((()=>{UO(),mP(),_B(),yP(),g(KF,"multiRect")}));async function ZF(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),l=Math.max(a.height+2*(e.padding??0),e?.height??0),c=l/4,h=l+c,u=-o/2,d=-h/2,{cssStyles:p}=e,f=OO(u-5,d+h+5,u+o-5,d+h+5,c,.8),g=f?.[f.length-1],y=[{x:u-5,y:d+5},{x:u-5,y:d+h+5},...f,{x:u+o-5,y:g.y-5},{x:u+o,y:g.y-5},{x:u+o,y:g.y-10},{x:u+o+5,y:g.y-10},{x:u+o+5,y:d-5},{x:u+5,y:d-5},{x:u+5,y:d},{x:u,y:d},{x:u,y:d+5}],m=[{x:u,y:d+5},{x:u+o-5,y:d+5},{x:u+o-5,y:g.y-5},{x:u+o,y:g.y-5},{x:u+o,y:d},{x:u,y:d}],x=wB.svg(n),b=dP(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let k=MO(y),v=x.path(k,b),T=MO(m),w=x.path(T,b),_=n.insert((()=>v),":first-child");return _.insert((()=>w)),_.attr("class","basic label-container"),p&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",p),i&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",i),_.attr("transform",`translate(0,${-c/2})`),s.attr("transform",`translate(${-a.width/2-5-(a.x-(a.left??0))}, ${-a.height/2+5-c/2-(a.y-(a.top??0))})`),zO(e,_),e.intersect=function(t){return sP.polygon(e,y,t)},n}var JF=y((()=>{UO(),yP(),_B(),mP(),g(ZF,"multiWaveEdgedRectangle")}));async function tz(t,e,{config:{themeVariables:r}}){let{labelStyles:i,nodeStyles:n}=uP(e);e.labelStyle=i,e.useHtmlLabels||!1!==Re().flowchart?.htmlLabels||(e.centerLabel=!0);let{shapeSvg:a,bbox:s,label:o}=await BO(t,e,jO(e)),l=Math.max(s.width+2*(e.padding??0),e?.width??0),c=Math.max(s.height+2*(e.padding??0),e?.height??0),h=-l/2,u=-c/2,{cssStyles:d}=e,p=wB.svg(a),f=dP(e,{fill:r.noteBkgColor,stroke:r.noteBorderColor});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let g=p.rectangle(h,u,l,c,f),y=a.insert((()=>g),":first-child");return y.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",d),n&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",n),o.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-s.height/2-(s.y-(s.top??0))})`),zO(e,y),e.intersect=function(t){return sP.rect(e,t)},a}var ez=y((()=>{_B(),yP(),mP(),UO(),Ar(),g(tz,"note")}));async function rz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,{shapeSvg:a,bbox:s}=await BO(t,e,jO(e)),o=s.width+e.padding+(s.height+e.padding),l=[{x:o/2,y:0},{x:o,y:-o/2},{x:o/2,y:-o},{x:0,y:-o/2}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=wB.svg(a),r=dP(e,{}),i=iz(0,0,o),s=t.path(i,r);n=a.insert((()=>s),":first-child").attr("transform",`translate(${-o/2+.5}, ${o/2})`),c&&n.attr("style",c)}else n=LB(a,o,o,l),n.attr("transform",`translate(${-o/2+.5}, ${o/2})`);return i&&n.attr("style",i),zO(e,n),e.calcIntersect=function(t,e){let r=t.width,i=[{x:r/2,y:0},{x:r,y:-r/2},{x:r/2,y:-r},{x:0,y:-r/2}],n=sP.polygon(t,i,e);return{x:n.x-.5,y:n.y-.5}},e.intersect=function(t){return this.calcIntersect(e,t)},a}var iz,nz=y((()=>{UO(),yP(),mP(),_B(),RB(),iz=g(((t,e,r)=>[`M${t+r/2},${e}`,`L${t+r},${e-r/2}`,`L${t+r/2},${e-r}`,`L${t},${e-r/2}`,"Z"].join(" ")),"createDecisionBoxPathD"),g(rz,"question")}));async function az(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=-Math.max(a.width+(e.padding??0),e?.width??0)/2,l=-Math.max(a.height+(e.padding??0),e?.height??0)/2,c=l/2,h=[{x:o+c,y:l},{x:o,y:0},{x:o+c,y:-l},{x:-o,y:-l},{x:-o,y:l}],{cssStyles:u}=e,d=wB.svg(n),p=dP(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let f=MO(h),g=d.path(f,p),y=n.insert((()=>g),":first-child");return y.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",u),i&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",i),y.attr("transform",`translate(${-c/2},0)`),s.attr("transform",`translate(${-c/2-a.width/2-(a.x-(a.left??0))}, ${-a.height/2-(a.y-(a.top??0))})`),zO(e,y),e.intersect=function(t){return sP.polygon(e,h,t)},n}var sz=y((()=>{UO(),yP(),mP(),_B(),g(az,"rect_left_inv_arrow")}));function oz(t,e){e&&t.attr("style",e)}async function lz(t){let e=nh(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),r=e.append("xhtml:div"),i=na(),n=t.label;t.label&&rn(t.label)&&(n=await sn(t.label.replace(on.lineBreakRegex,"\n"),i));let a='<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+n+"</span>";return r.html(zi(a,i)),oz(r,t.labelStyle),r.style("display","inline-block"),r.style("padding-right","1px"),r.style("white-space","nowrap"),r.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}var cz,hz,uz=y((()=>{QT(),ns(),gn(),We(),_L(),g(oz,"applyStyle"),g(lz,"addHtmlLabel"),cz=g((async(t,e,r,i)=>{let n=t||"";if("object"==typeof n&&(n=n[0]),Hi(na().flowchart.htmlLabels)){n=n.replace(/\\n|\n/g,"<br />"),et.info("vertexText"+n);let t={isNode:i,label:TL(n).replace(/fa[blrs]?:fa-[\w-]+/g,(t=>`<i class='${t.replace(":"," ")}'></i>`)),labelStyle:e&&e.replace("fill:","color:")};return await lz(t)}{let t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));let i=[];i="string"==typeof n?n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?n:[];for(let e of i){let i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("dy","1em"),i.setAttribute("x","0"),r?i.setAttribute("class","title-row"):i.setAttribute("class","row"),i.textContent=e.trim(),t.appendChild(i)}return t}}),"createLabel"),hz=cz}));async function dz(t,e){let r,{labelStyles:i,nodeStyles:n}=uP(e);e.labelStyle=i,r=e.cssClasses?"node "+e.cssClasses:"node default";let a=t.insert("g").attr("class",r).attr("id",e.domId||e.id),s=a.insert("g"),o=a.insert("g").attr("class","label").attr("style",n),l=e.description,c=e.label,h=o.node().appendChild(await hz(c,e.labelStyle,!0,!0)),u={width:0,height:0};if(Hi(na()?.flowchart?.htmlLabels)){let t=h.children[0],e=nh(h);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}et.info("Text 2",l);let d=l||[],p=h.getBBox(),f=o.node().appendChild(await hz(d.join?d.join("<br/>"):d,e.labelStyle,!0,!0)),g=f.children[0],y=nh(f);u=g.getBoundingClientRect(),y.attr("width",u.width),y.attr("height",u.height);let m=(e.padding||0)/2;nh(f).attr("transform","translate( "+(u.width>p.width?0:(p.width-u.width)/2)+", "+(p.height+m+5)+")"),nh(h).attr("transform","translate( "+(u.width<p.width?0:-(p.width-u.width)/2)+", 0)"),u=o.node().getBBox(),o.attr("transform","translate("+-u.width/2+", "+(-u.height/2-m+3)+")");let x,b,k=u.width+(e.padding||0),v=u.height+(e.padding||0),T=-u.width/2-m,w=-u.height/2-m;if("handDrawn"===e.look){let t=wB.svg(a),r=dP(e,{}),i=t.path(TF(T,w,k,v,e.rx||0),r),n=t.line(-u.width/2-m,-u.height/2-m+p.height+m,u.width/2+m,-u.height/2-m+p.height+m,r);b=a.insert((()=>(et.debug("Rough node insert CXC",i),n)),":first-child"),x=a.insert((()=>(et.debug("Rough node insert CXC",i),i)),":first-child")}else x=s.insert("rect",":first-child"),b=s.insert("line"),x.attr("class","outer title-state").attr("style",n).attr("x",-u.width/2-m).attr("y",-u.height/2-m).attr("width",u.width+(e.padding||0)).attr("height",u.height+(e.padding||0)),b.attr("class","divider").attr("x1",-u.width/2-m).attr("x2",u.width/2+m).attr("y1",-u.height/2-m+p.height+m).attr("y2",-u.height/2-m+p.height+m);return zO(e,x),e.intersect=function(t){return sP.rect(e,t)},a}var pz=y((()=>{QT(),gn(),UO(),uz(),yP(),mP(),_B(),ns(),_F(),We(),g(dz,"rectWithTitle")}));function fz(t,e,r,i,n,a,s){let o=(t+r)/2,l=(e+i)/2,c=Math.atan2(i-e,r-t),h=(r-t)/2/n,u=(i-e)/2/a,d=Math.sqrt(h**2+u**2);if(d>1)throw new Error("The given radii are too small to create an arc between the points.");let p=Math.sqrt(1-d**2),f=o+p*a*Math.sin(c)*(s?-1:1),g=l-p*n*Math.cos(c)*(s?-1:1),y=Math.atan2((e-g)/a,(t-f)/n),m=Math.atan2((i-g)/a,(r-f)/n)-y;s&&m<0&&(m+=2*Math.PI),!s&&m>0&&(m-=2*Math.PI);let x=[];for(let t=0;t<20;t++){let e=y+t/19*m,r=f+n*Math.cos(e),i=g+a*Math.sin(e);x.push({x:r,y:i})}return x}async function gz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a}=await BO(t,e,jO(e)),s=e?.padding??0,o=e?.padding??0,l=(e?.width?e?.width:a.width)+2*s,c=(e?.height?e?.height:a.height)+2*o,h=e.radius||5,u=e.taper||5,{cssStyles:d}=e,p=wB.svg(n),f=dP(e,{});e.stroke&&(f.stroke=e.stroke),"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let g=[{x:-l/2+u,y:-c/2},{x:l/2-u,y:-c/2},...fz(l/2-u,-c/2,l/2,-c/2+u,h,h,!0),{x:l/2,y:-c/2+u},{x:l/2,y:c/2-u},...fz(l/2,c/2-u,l/2-u,c/2,h,h,!0),{x:l/2-u,y:c/2},{x:-l/2+u,y:c/2},...fz(-l/2+u,c/2,-l/2,c/2-u,h,h,!0),{x:-l/2,y:c/2-u},{x:-l/2,y:-c/2+u},...fz(-l/2,-c/2+u,-l/2+u,-c/2,h,h,!0)],y=MO(g),m=p.path(y,f),x=n.insert((()=>m),":first-child");return x.attr("class","basic label-container outer-path"),d&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",d),i&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",i),zO(e,x),e.intersect=function(t){return sP.polygon(e,g,t)},n}var yz=y((()=>{UO(),yP(),mP(),_B(),g(fz,"generateArcPoints"),g(gz,"roundedRect")}));async function mz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=e?.padding??0,l=Math.max(a.width+2*(e.padding??0),e?.width??0),c=Math.max(a.height+2*(e.padding??0),e?.height??0),h=-a.width/2-o,u=-a.height/2-o,{cssStyles:d}=e,p=wB.svg(n),f=dP(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let g=[{x:h,y:u},{x:h+l+8,y:u},{x:h+l+8,y:u+c},{x:h-8,y:u+c},{x:h-8,y:u},{x:h,y:u},{x:h,y:u+c}],y=p.polygon(g.map((t=>[t.x,t.y])),f),m=n.insert((()=>y),":first-child");return m.attr("class","basic label-container").attr("style",H$(d)),i&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",i),d&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",i),s.attr("transform",`translate(${-l/2+4+(e.padding??0)-(a.x-(a.left??0))},${-c/2+(e.padding??0)-(a.y-(a.top??0))})`),zO(e,m),e.intersect=function(t){return sP.rect(e,t)},n}var xz=y((()=>{UO(),yP(),mP(),_B(),_L(),g(mz,"shadedProcess")}));async function bz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),l=Math.max(a.height+2*(e.padding??0),e?.height??0),c=-o/2,h=-l/2,{cssStyles:u}=e,d=wB.svg(n),p=dP(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let f=[{x:c,y:h},{x:c,y:h+l},{x:c+o,y:h+l},{x:c+o,y:h-l/2}],g=MO(f),y=d.path(g,p),m=n.insert((()=>y),":first-child");return m.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",u),i&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",i),m.attr("transform",`translate(0, ${l/4})`),s.attr("transform",`translate(${-o/2+(e.padding??0)-(a.x-(a.left??0))}, ${-l/4+(e.padding??0)-(a.y-(a.top??0))})`),zO(e,m),e.intersect=function(t){return sP.polygon(e,f,t)},n}var kz=y((()=>{UO(),yP(),mP(),_B(),g(bz,"slopedRect")}));async function vz(t,e){return NF(t,e,{rx:0,ry:0,classes:"",labelPaddingX:e.labelPaddingX??2*(e?.padding||0),labelPaddingY:1*(e?.padding||0)})}var Tz=y((()=>{DF(),g(vz,"squareRect")}));async function wz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a}=await BO(t,e,jO(e)),s=a.height+e.padding,o=a.width+s/4+e.padding,l=s/2,{cssStyles:c}=e,h=wB.svg(n),u=dP(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let d=[{x:-o/2+l,y:-s/2},{x:o/2-l,y:-s/2},...PO(-o/2+l,0,l,50,90,270),{x:o/2-l,y:s/2},...PO(o/2-l,0,l,50,270,450)],p=MO(d),f=h.path(p,u),g=n.insert((()=>f),":first-child");return g.attr("class","basic label-container outer-path"),c&&"handDrawn"!==e.look&&g.selectChildren("path").attr("style",c),i&&"handDrawn"!==e.look&&g.selectChildren("path").attr("style",i),zO(e,g),e.intersect=function(t){return sP.polygon(e,d,t)},n}var _z=y((()=>{UO(),yP(),mP(),_B(),g(wz,"stadium")}));async function Sz(t,e){return NF(t,e,{rx:5,ry:5,classes:"flowchart-node"})}var Cz=y((()=>{DF(),g(Sz,"state")}));function Ez(t,e,{config:{themeVariables:r}}){let{labelStyles:i,nodeStyles:n}=uP(e);e.labelStyle=i;let{cssStyles:a}=e,{lineColor:s,stateBorder:o,nodeBorder:l}=r,c=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),h=wB.svg(c),u=dP(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let d=h.circle(0,0,14,{...u,stroke:s,strokeWidth:2}),p=o??l,f=h.circle(0,0,5,{...u,fill:p,stroke:p,strokeWidth:2,fillStyle:"solid"}),g=c.insert((()=>d),":first-child");return g.insert((()=>f)),a&&g.selectAll("path").attr("style",a),n&&g.selectAll("path").attr("style",n),zO(e,g),e.intersect=function(t){return sP.circle(e,7,t)},c}var Az=y((()=>{_B(),yP(),mP(),UO(),g(Ez,"stateEnd")}));function $z(t,e,{config:{themeVariables:r}}){let i,{lineColor:n}=r,a=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);if("handDrawn"===e.look){let t=wB.svg(a).circle(0,0,14,oP(n));i=a.insert((()=>t)),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else i=a.insert("circle",":first-child"),i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return zO(e,i),e.intersect=function(t){return sP.circle(e,7,t)},a}var Lz=y((()=>{_B(),yP(),mP(),UO(),g($z,"stateStart")}));async function Rz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a}=await BO(t,e,jO(e)),s=(e?.padding||0)/2,o=a.width+e.padding,l=a.height+e.padding,c=-a.width/2-s,h=-a.height/2-s,u=[{x:0,y:0},{x:o,y:0},{x:o,y:-l},{x:0,y:-l},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-l},{x:-8,y:-l},{x:-8,y:0}];if("handDrawn"===e.look){let t=wB.svg(n),r=dP(e,{}),i=t.rectangle(c-8,h,o+16,l,r),a=t.line(c,h,c,h+l,r),s=t.line(c+o,h,c+o,h+l,r);n.insert((()=>a),":first-child"),n.insert((()=>s),":first-child");let u=n.insert((()=>i),":first-child"),{cssStyles:d}=e;u.attr("class","basic label-container").attr("style",H$(d)),zO(e,u)}else{let t=LB(n,o,l,u);i&&t.attr("style",i),zO(e,t)}return e.intersect=function(t){return sP.polygon(e,u,t)},n}var Iz=y((()=>{UO(),yP(),mP(),_B(),RB(),_L(),g(Rz,"subroutine")}));async function Nz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a}=await BO(t,e,jO(e)),s=Math.max(a.width+2*(e.padding??0),e?.width??0),o=Math.max(a.height+2*(e.padding??0),e?.height??0),l=-s/2,c=-o/2,h=.2*o,u=.2*o,{cssStyles:d}=e,p=wB.svg(n),f=dP(e,{}),g=[{x:l-h/2,y:c},{x:l+s+h/2,y:c},{x:l+s+h/2,y:c+o},{x:l-h/2,y:c+o}],y=[{x:l+s-h/2,y:c+o},{x:l+s+h/2,y:c+o},{x:l+s+h/2,y:c+o-u}];"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let m=MO(g),x=p.path(m,f),b=MO(y),k=p.path(b,{...f,fillStyle:"solid"}),v=n.insert((()=>k),":first-child");return v.insert((()=>x),":first-child"),v.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",d),i&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",i),zO(e,v),e.intersect=function(t){return sP.polygon(e,g,t)},n}var Dz=y((()=>{UO(),mP(),_B(),yP(),g(Nz,"taggedRect")}));async function Mz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),l=Math.max(a.height+2*(e.padding??0),e?.height??0),c=l/4,h=.2*o,u=.2*l,d=l+c,{cssStyles:p}=e,f=wB.svg(n),g=dP(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let y=[{x:-o/2-o/2*.1,y:d/2},...OO(-o/2-o/2*.1,d/2,o/2+o/2*.1,d/2,c,.8),{x:o/2+o/2*.1,y:-d/2},{x:-o/2-o/2*.1,y:-d/2}],m=-o/2+o/2*.1,x=-d/2-.4*u,b=[{x:m+o-h,y:1.4*(x+l)},{x:m+o,y:x+l-u},{x:m+o,y:.9*(x+l)},...OO(m+o,1.3*(x+l),m+o-h,1.5*(x+l),.03*-l,.5)],k=MO(y),v=f.path(k,g),T=MO(b),w=f.path(T,{...g,fillStyle:"solid"}),_=n.insert((()=>w),":first-child");return _.insert((()=>v),":first-child"),_.attr("class","basic label-container"),p&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",p),i&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",i),_.attr("transform",`translate(0,${-c/2})`),s.attr("transform",`translate(${-o/2+(e.padding??0)-(a.x-(a.left??0))},${-l/2+(e.padding??0)-c/2-(a.y-(a.top??0))})`),zO(e,_),e.intersect=function(t){return sP.polygon(e,y,t)},n}var Oz=y((()=>{UO(),yP(),_B(),mP(),g(Mz,"taggedWaveEdgedRectangle")}));async function Pz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a}=await BO(t,e,jO(e)),s=Math.max(a.width+e.padding,e?.width||0),o=Math.max(a.height+e.padding,e?.height||0),l=-s/2,c=-o/2,h=n.insert("rect",":first-child");return h.attr("class","text").attr("style",i).attr("rx",0).attr("ry",0).attr("x",l).attr("y",c).attr("width",s).attr("height",o),zO(e,h),e.intersect=function(t){return sP.rect(e,t)},n}var Bz=y((()=>{UO(),yP(),mP(),g(Pz,"text")}));async function Fz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,{shapeSvg:a,bbox:s,label:o,halfPadding:l}=await BO(t,e,jO(e)),c="neo"===e.look?2*l:l,h=s.height+c,u=h/2,d=u/(2.5+h/50),p=s.width+d+c,{cssStyles:f}=e;if("handDrawn"===e.look){let t=wB.svg(a),r=jz(0,0,p,h,d,u),i=Uz(0,0,p,h,d,u),s=t.path(r,dP(e,{})),o=t.path(i,dP(e,{fill:"none"}));n=a.insert((()=>o),":first-child"),n=a.insert((()=>s),":first-child"),n.attr("class","basic label-container"),f&&n.attr("style",f)}else{let t=zz(0,0,p,h,d,u);n=a.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",H$(f)).attr("style",i),n.attr("class","basic label-container"),f&&n.selectAll("path").attr("style",f),i&&n.selectAll("path").attr("style",i)}return n.attr("label-offset-x",d),n.attr("transform",`translate(${-p/2}, ${h/2} )`),o.attr("transform",`translate(${-s.width/2-d-(s.x-(s.left??0))}, ${-s.height/2-(s.y-(s.top??0))})`),zO(e,n),e.intersect=function(t){let r=sP.rect(e,t),i=r.y-(e.y??0);if(0!=u&&(Math.abs(i)<(e.height??0)/2||Math.abs(i)==(e.height??0)/2&&Math.abs(r.x-(e.x??0))>(e.width??0)/2-d)){let n=d*d*(1-i*i/(u*u));0!=n&&(n=Math.sqrt(Math.abs(n))),n=d-n,t.x-(e.x??0)>0&&(n=-n),r.x+=n}return r},a}var zz,jz,Uz,Wz=y((()=>{UO(),mP(),_B(),yP(),_L(),zz=g(((t,e,r,i,n,a)=>`M${t},${e}\n    a${n},${a} 0,0,1 0,${-i}\n    l${r},0\n    a${n},${a} 0,0,1 0,${i}\n    M${r},${-i}\n    a${n},${a} 0,0,0 0,${i}\n    l${-r},0`),"createCylinderPathD"),jz=g(((t,e,r,i,n,a)=>[`M${t},${e}`,`M${t+r},${e}`,`a${n},${a} 0,0,0 0,${-i}`,`l${-r},0`,`a${n},${a} 0,0,0 0,${i}`,`l${r},0`].join(" ")),"createOuterCylinderPathD"),Uz=g(((t,e,r,i,n,a)=>[`M${t+r/2},${-i/2}`,`a${n},${a} 0,0,0 0,${i}`].join(" ")),"createInnerCylinderPathD"),g(Fz,"tiltedCylinder")}));async function qz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,{shapeSvg:a,bbox:s}=await BO(t,e,jO(e)),o=s.width+e.padding,l=s.height+e.padding,c=[{x:-3*l/6,y:0},{x:o+3*l/6,y:0},{x:o,y:-l},{x:0,y:-l}],{cssStyles:h}=e;if("handDrawn"===e.look){let t=wB.svg(a),r=dP(e,{}),i=MO(c),s=t.path(i,r);n=a.insert((()=>s),":first-child").attr("transform",`translate(${-o/2}, ${l/2})`),h&&n.attr("style",h)}else n=LB(a,o,l,c);return i&&n.attr("style",i),e.width=o,e.height=l,zO(e,n),e.intersect=function(t){return sP.polygon(e,c,t)},a}var Yz=y((()=>{UO(),yP(),mP(),_B(),RB(),g(qz,"trapezoid")}));async function Gz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a}=await BO(t,e,jO(e)),s=Math.max(60,a.width+2*(e.padding??0),e?.width??0),o=Math.max(20,a.height+2*(e.padding??0),e?.height??0),{cssStyles:l}=e,c=wB.svg(n),h=dP(e,{});"handDrawn"!==e.look&&(h.roughness=0,h.fillStyle="solid");let u=[{x:-s/2*.8,y:-o/2},{x:s/2*.8,y:-o/2},{x:s/2,y:-o/2*.6},{x:s/2,y:o/2},{x:-s/2,y:o/2},{x:-s/2,y:-o/2*.6}],d=MO(u),p=c.path(d,h),f=n.insert((()=>p),":first-child");return f.attr("class","basic label-container"),l&&"handDrawn"!==e.look&&f.selectChildren("path").attr("style",l),i&&"handDrawn"!==e.look&&f.selectChildren("path").attr("style",i),zO(e,f),e.intersect=function(t){return sP.polygon(e,u,t)},n}var Hz=y((()=>{UO(),yP(),mP(),_B(),g(Gz,"trapezoidalPentagon")}));async function Vz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=Hi(na().flowchart?.htmlLabels),l=a.width+(e.padding??0),c=l+a.height,h=l+a.height,u=[{x:0,y:0},{x:h,y:0},{x:h/2,y:-c}],{cssStyles:d}=e,p=wB.svg(n),f=dP(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let g=MO(u),y=p.path(g,f),m=n.insert((()=>y),":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return d&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",d),i&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",i),e.width=l,e.height=c,zO(e,m),s.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${c/2-(a.height+(e.padding??0)/(o?2:1)-(a.y-(a.top??0)))})`),e.intersect=function(t){return et.info("Triangle intersect",e,u,t),sP.polygon(e,u,t)},n}var Xz=y((()=>{We(),UO(),yP(),mP(),_B(),UO(),gn(),ns(),g(Vz,"triangle")}));async function Kz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),l=Math.max(a.height+2*(e.padding??0),e?.height??0),c=l/8,h=l+c,{cssStyles:u}=e,d=70-o,p=d>0?d/2:0,f=wB.svg(n),g=dP(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let y=[{x:-o/2-p,y:h/2},...OO(-o/2-p,h/2,o/2+p,h/2,c,.8),{x:o/2+p,y:-h/2},{x:-o/2-p,y:-h/2}],m=MO(y),x=f.path(m,g),b=n.insert((()=>x),":first-child");return b.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",u),i&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",i),b.attr("transform",`translate(0,${-c/2})`),s.attr("transform",`translate(${-o/2+(e.padding??0)-(a.x-(a.left??0))},${-l/2+(e.padding??0)-c-(a.y-(a.top??0))})`),zO(e,b),e.intersect=function(t){return sP.polygon(e,y,t)},n}var Qz=y((()=>{UO(),yP(),_B(),mP(),g(Kz,"waveEdgedRectangle")}));async function Zz(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a}=await BO(t,e,jO(e)),s=Math.max(a.width+2*(e.padding??0),e?.width??0),o=Math.max(a.height+2*(e.padding??0),e?.height??0),l=s/o,c=s,h=o;c>h*l?h=c/l:c=h*l,c=Math.max(c,100),h=Math.max(h,50);let u=Math.min(.2*h,h/4),d=h+2*u,{cssStyles:p}=e,f=wB.svg(n),g=dP(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let y=[{x:-c/2,y:d/2},...OO(-c/2,d/2,c/2,d/2,u,1),{x:c/2,y:-d/2},...OO(c/2,-d/2,-c/2,-d/2,u,-1)],m=MO(y),x=f.path(m,g),b=n.insert((()=>x),":first-child");return b.attr("class","basic label-container"),p&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",p),i&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",i),zO(e,b),e.intersect=function(t){return sP.polygon(e,y,t)},n}var Jz=y((()=>{UO(),yP(),mP(),_B(),g(Zz,"waveRectangle")}));async function tj(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,label:s}=await BO(t,e,jO(e)),o=Math.max(a.width+2*(e.padding??0),e?.width??0),l=Math.max(a.height+2*(e.padding??0),e?.height??0),c=-o/2,h=-l/2,{cssStyles:u}=e,d=wB.svg(n),p=dP(e,{}),f=[{x:c-5,y:h-5},{x:c-5,y:h+l},{x:c+o,y:h+l},{x:c+o,y:h-5}],g=`M${c-5},${h-5} L${c+o},${h-5} L${c+o},${h+l} L${c-5},${h+l} L${c-5},${h-5}\n                M${c-5},${h} L${c+o},${h}\n                M${c},${h-5} L${c},${h+l}`;"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=d.path(g,p),m=n.insert((()=>y),":first-child");return m.attr("transform","translate(2.5, 2.5)"),m.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",u),i&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",i),s.attr("transform",`translate(${-a.width/2+2.5-(a.x-(a.left??0))}, ${-a.height/2+2.5-(a.y-(a.top??0))})`),zO(e,m),e.intersect=function(t){return sP.polygon(e,f,t)},n}var ej=y((()=>{UO(),mP(),_B(),yP(),g(tj,"windowPane")}));async function rj(t,e){let r=e;if(r.alias&&(e.label=r.alias),"handDrawn"===e.look){let{themeVariables:r}=Re(),{background:i}=r,n={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${i}`]};await rj(t,n)}let i=Re();e.useHtmlLabels=i.htmlLabels;let n=i.er?.diagramPadding??10,a=i.er?.entityPadding??6,{cssStyles:s}=e,{labelStyles:o,nodeStyles:l}=uP(e);if(0===r.attributes.length&&e.label){let r={rx:0,ry:0,labelPaddingX:n,labelPaddingY:1.5*n,classes:""};q$(e.label,i)+2*r.labelPaddingX<i.er.minEntityWidth&&(e.width=i.er.minEntityWidth);let a=await NF(t,e,r);if(!Hi(i.htmlLabels)){let t=a.select("text"),e=t.node()?.getBBox();t.attr("transform",`translate(${-e.width/2}, 0)`)}return a}i.htmlLabels||(n*=1.25,a*=1.25);let c=jO(e);c||(c="node default");let h=t.insert("g").attr("class",c).attr("id",e.domId||e.id),u=await ij(h,e.label??"",i,0,0,["name"],o);u.height+=a;let d=0,p=[],f=[],g=0,y=0,m=0,x=0,b=!0,k=!0;for(let t of r.attributes){let e=await ij(h,t.type,i,0,d,["attribute-type"],o);g=Math.max(g,e.width+n);let r=await ij(h,t.name,i,0,d,["attribute-name"],o);y=Math.max(y,r.width+n);let s=await ij(h,t.keys.join(),i,0,d,["attribute-keys"],o);m=Math.max(m,s.width+n);let l=await ij(h,t.comment,i,0,d,["attribute-comment"],o);x=Math.max(x,l.width+n);let c=Math.max(e.height,r.height,s.height,l.height)+a;f.push({yOffset:d,rowHeight:c}),d+=c}let v=4;m<=n&&(b=!1,m=0,v--),x<=n&&(k=!1,x=0,v--);let T=h.node().getBBox();if(u.width+2*n-(g+y+m+x)>0){let t=u.width+2*n-(g+y+m+x);g+=t/v,y+=t/v,m>0&&(m+=t/v),x>0&&(x+=t/v)}let w=g+y+m+x,_=wB.svg(h),S=dP(e,{});"handDrawn"!==e.look&&(S.roughness=0,S.fillStyle="solid");let C=0;f.length>0&&(C=f.reduce(((t,e)=>t+(e?.rowHeight??0)),0));let E=Math.max(T.width+2*n,e?.width||0,w),A=Math.max((C??0)+u.height,e?.height||0),$=-E/2,L=-A/2;h.selectAll("g:not(:first-child)").each(((t,e,r)=>{let i=nh(r[e]),s=i.attr("transform"),o=0,l=0;if(s){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(s);t&&(o=parseFloat(t[1]),l=parseFloat(t[2]),i.attr("class").includes("attribute-name")?o+=g:i.attr("class").includes("attribute-keys")?o+=g+y:i.attr("class").includes("attribute-comment")&&(o+=g+y+m))}i.attr("transform",`translate(${$+n/2+o}, ${l+L+u.height+a/2})`)})),h.select(".name").attr("transform","translate("+-u.width/2+", "+(L+a/2)+")");let R=_.rectangle($,L,E,A,S),I=h.insert((()=>R),":first-child").attr("style",s.join("")),{themeVariables:N}=Re(),{rowEven:D,rowOdd:M,nodeBorder:O}=N;p.push(0);for(let[t,e]of f.entries()){let r=(t+1)%2==0&&0!==e.yOffset,i=_.rectangle($,u.height+L+e?.yOffset,E,e?.rowHeight,{...S,fill:r?D:M,stroke:O});h.insert((()=>i),"g.label").attr("style",s.join("")).attr("class","row-rect-"+(r?"even":"odd"))}let P=_.line($,u.height+L,E+$,u.height+L,S);h.insert((()=>P)).attr("class","divider"),P=_.line(g+$,u.height+L,g+$,A+L,S),h.insert((()=>P)).attr("class","divider"),b&&(P=_.line(g+y+$,u.height+L,g+y+$,A+L,S),h.insert((()=>P)).attr("class","divider")),k&&(P=_.line(g+y+m+$,u.height+L,g+y+m+$,A+L,S),h.insert((()=>P)).attr("class","divider"));for(let t of p)P=_.line($,u.height+L+t,E+$,u.height+L+t,S),h.insert((()=>P)).attr("class","divider");if(zO(e,I),l&&"handDrawn"!==e.look){let t=l.split(";")?.filter((t=>t.includes("stroke")))?.map((t=>`${t}`)).join("; ");h.selectAll("path").attr("style",t??""),h.selectAll(".row-rect-even path").attr("style",l)}return e.intersect=function(t){return sP.rect(e,t)},h}async function ij(t,e,r,i=0,n=0,a=[],s=""){let o=t.insert("g").attr("class",`label ${a.join(" ")}`).attr("transform",`translate(${i}, ${n})`).attr("style",s);e!==Ki(e)&&(e=(e=Ki(e)).replaceAll("<","&lt;").replaceAll(">","&gt;"));let l=o.node().appendChild(await NO(o,e,{width:q$(e,r)+100,style:s,useHtmlLabels:r.htmlLabels},r));if(e.includes("&lt;")||e.includes("&gt;")){let t=l.children[0];for(t.textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");t.childNodes[0];)t=t.childNodes[0],t.textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let c=l.getBBox();if(Hi(r.htmlLabels)){let t=l.children[0];t.style.textAlign="start";let e=nh(l);c=t.getBoundingClientRect(),e.attr("width",c.width),e.attr("height",c.height)}return c}var nj=y((()=>{UO(),yP(),mP(),_B(),DF(),Ar(),DO(),gn(),QT(),_L(),g(rj,"erBox"),g(ij,"addText")}));async function aj(t,e,r,i,n=r.class.padding??12){let a=i?0:3,s=t.insert("g").attr("class",jO(e)).attr("id",e.domId||e.id),o=null,l=null,c=null,h=null,u=0,d=0,p=0;if(o=s.insert("g").attr("class","annotation-group text"),e.annotations.length>0){let t=e.annotations[0];await sj(o,{text:`«${t}»`},0),u=o.node().getBBox().height}l=s.insert("g").attr("class","label-group text"),await sj(l,e,0,["font-weight: bolder"]);let f=l.node().getBBox();d=f.height,c=s.insert("g").attr("class","members-group text");let g=0;for(let t of e.members){g+=await sj(c,t,g,[t.parseClassifier()])+a}p=c.node().getBBox().height,p<=0&&(p=n/2),h=s.insert("g").attr("class","methods-group text");let y=0;for(let t of e.methods){y+=await sj(h,t,y,[t.parseClassifier()])+a}let m=s.node().getBBox();if(null!==o){let t=o.node().getBBox();o.attr("transform",`translate(${-t.width/2})`)}return l.attr("transform",`translate(${-f.width/2}, ${u})`),m=s.node().getBBox(),c.attr("transform",`translate(0, ${u+d+2*n})`),m=s.node().getBBox(),h.attr("transform",`translate(0, ${u+d+(p?p+4*n:2*n)})`),m=s.node().getBBox(),{shapeSvg:s,bbox:m}}async function sj(t,e,r,i=[]){let n=t.insert("g").attr("class","label").attr("style",i.join("; ")),a=Re(),s="useHtmlLabels"in e?e.useHtmlLabels:Hi(a.htmlLabels)??!0,o="";o="text"in e?e.text:e.label,!s&&o.startsWith("\\")&&(o=o.substring(1)),rn(o)&&(s=!0);let l,c=await NO(n,oa(TL(o)),{width:q$(o,a)+50,classes:"markdown-node-label",useHtmlLabels:s},a),h=1;if(s){let t=c.children[0],e=nh(c);h=t.innerHTML.split("<br>").length,t.innerHTML.includes("</math>")&&(h+=t.innerHTML.split("<mrow>").length-1);let r=t.getElementsByTagName("img");if(r){let t=""===o.replace(/<img[^>]*>/g,"").trim();await Promise.all([...r].map((e=>new Promise((r=>{function i(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=a.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,r=5*parseInt(t,10)+"px";e.style.minWidth=r,e.style.maxWidth=r}else e.style.width="100%";r(e)}g(i,"setupImage"),setTimeout((()=>{e.complete&&i()})),e.addEventListener("error",i),e.addEventListener("load",i)})))))}l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}else{i.includes("font-weight: bolder")&&nh(c).selectAll("tspan").attr("font-weight",""),h=c.children.length;let t=c.children[0];(""===c.textContent||c.textContent.includes("&gt"))&&(t.textContent=o[0]+o.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim()," "===o[1]&&(t.textContent=t.textContent[0]+" "+t.textContent.substring(1))),"undefined"===t.textContent&&(t.textContent=""),l=c.getBBox()}return n.attr("transform","translate(0,"+(-l.height/(2*h)+r)+")"),l.height}var oj=y((()=>{QT(),Ar(),UO(),_L(),ns(),DO(),gn(),g(aj,"textHelper"),g(sj,"addText")}));async function lj(t,e){let r=na(),i=r.class.padding??12,n=i,a=e.useHtmlLabels??Hi(r.htmlLabels)??!0,s=e;s.annotations=s.annotations??[],s.members=s.members??[],s.methods=s.methods??[];let{shapeSvg:o,bbox:l}=await aj(t,e,r,a,n),{labelStyles:c,nodeStyles:h}=uP(e);e.labelStyle=c,e.cssStyles=s.styles||"";let u=s.styles?.join(";")||h||"";e.cssStyles||(e.cssStyles=u.replaceAll("!important","").split(";"));let d=0===s.members.length&&0===s.methods.length&&!r.class?.hideEmptyMembersBox,p=wB.svg(o),f=dP(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let g=l.width,y=l.height;0===s.members.length&&0===s.methods.length?y+=n:s.members.length>0&&0===s.methods.length&&(y+=2*n);let m=-g/2,x=-y/2,b=p.rectangle(m-i,x-i-(d?i:0===s.members.length&&0===s.methods.length?-i/2:0),g+2*i,y+2*i+(d?2*i:0===s.members.length&&0===s.methods.length?-i:0),f),k=o.insert((()=>b),":first-child");k.attr("class","basic label-container");let v=k.node().getBBox();o.selectAll(".text").each(((t,e,r)=>{let n=nh(r[e]),l=n.attr("transform"),c=0;if(l){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(l);t&&(c=parseFloat(t[2]))}let h=c+x+i-(d?i:0===s.members.length&&0===s.methods.length?-i/2:0);a||(h-=4);let u=m;(n.attr("class").includes("label-group")||n.attr("class").includes("annotation-group"))&&(u=-n.node()?.getBBox().width/2||0,o.selectAll("text").each((function(t,e,r){"middle"===window.getComputedStyle(r[e]).textAnchor&&(u=0)}))),n.attr("transform",`translate(${u}, ${h})`)}));let T=o.select(".annotation-group").node().getBBox().height-(d?i/2:0)||0,w=o.select(".label-group").node().getBBox().height-(d?i/2:0)||0,_=o.select(".members-group").node().getBBox().height-(d?i/2:0)||0;if(s.members.length>0||s.methods.length>0||d){let t=p.line(v.x,T+w+x+i,v.x+v.width,T+w+x+i,f);o.insert((()=>t)).attr("class","divider").attr("style",u)}if(d||s.members.length>0||s.methods.length>0){let t=p.line(v.x,T+w+_+x+2*n+i,v.x+v.width,T+w+_+x+i+2*n,f);o.insert((()=>t)).attr("class","divider").attr("style",u)}if("handDrawn"!==s.look&&o.selectAll("path").attr("style",u),k.select(":nth-child(2)").attr("style",u),o.selectAll(".divider").select("path").attr("style",u),e.labelStyle?o.selectAll("span").attr("style",e.labelStyle):o.selectAll("span").attr("style",u),!a){let t=RegExp(/color\s*:\s*([^;]*)/),e=t.exec(u);if(e){let t=e[0].replace("color","fill");o.selectAll("tspan").attr("style",t)}else if(c){let e=t.exec(c);if(e){let t=e[0].replace("color","fill");o.selectAll("tspan").attr("style",t)}}}return zO(e,k),e.intersect=function(t){return sP.rect(e,t)},o}var cj=y((()=>{UO(),ns(),QT(),_B(),mP(),yP(),oj(),gn(),g(lj,"classBox")}));async function hj(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,a=e,s=e,o="verifyMethod"in e,l=jO(e),c=t.insert("g").attr("class",l).attr("id",e.domId??e.id);n=o?await uj(c,`&lt;&lt;${a.type}&gt;&gt;`,0,e.labelStyle):await uj(c,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let h=n,u=await uj(c,a.name,h,e.labelStyle+"; font-weight: bold;");if(h+=u+20,o){h+=await uj(c,""+(a.requirementId?`ID: ${a.requirementId}`:""),h,e.labelStyle),h+=await uj(c,""+(a.text?`Text: ${a.text}`:""),h,e.labelStyle),h+=await uj(c,""+(a.risk?`Risk: ${a.risk}`:""),h,e.labelStyle),await uj(c,""+(a.verifyMethod?`Verification: ${a.verifyMethod}`:""),h,e.labelStyle)}else{h+=await uj(c,""+(s.type?`Type: ${s.type}`:""),h,e.labelStyle),await uj(c,""+(s.docRef?`Doc Ref: ${s.docRef}`:""),h,e.labelStyle)}let d=(c.node()?.getBBox().width??200)+20,p=(c.node()?.getBBox().height??200)+20,f=-d/2,g=-p/2,y=wB.svg(c),m=dP(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let x=y.rectangle(f,g,d,p,m),b=c.insert((()=>x),":first-child");if(b.attr("class","basic label-container").attr("style",i),c.selectAll(".label").each(((t,e,r)=>{let i=nh(r[e]),n=i.attr("transform"),a=0,s=0;if(n){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(n);t&&(a=parseFloat(t[1]),s=parseFloat(t[2]))}let o=s-p/2,l=f+10;(0===e||1===e)&&(l=a),i.attr("transform",`translate(${l}, ${o+20})`)})),h>n+u+20){let t=y.line(f,g+n+u+20,f+d,g+n+u+20,m);c.insert((()=>t)).attr("style",i)}return zO(e,b),e.intersect=function(t){return sP.rect(e,t)},c}async function uj(t,e,r,i=""){if(""===e)return 0;let n,a=t.insert("g").attr("class","label").attr("style",i),s=na(),o=s.htmlLabels??!0,l=await NO(a,oa(TL(e)),{width:q$(e,s)+50,classes:"markdown-node-label",useHtmlLabels:o,style:i},s);if(o){let t=l.children[0],e=nh(l);n=t.getBoundingClientRect(),e.attr("width",n.width),e.attr("height",n.height)}else{let t=l.children[0];for(let e of t.children)e.textContent=e.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),i&&e.setAttribute("style",i);n=l.getBBox(),n.height+=6}return a.attr("transform",`translate(${-n.width/2},${-n.height/2+r})`),n.height}var dj=y((()=>{UO(),yP(),mP(),_B(),_L(),ns(),DO(),QT(),g(hj,"requirementBox"),g(uj,"addText")}));async function pj(t,e,{config:r}){let{labelStyles:i,nodeStyles:n}=uP(e);e.labelStyle=i||"";let a=e.width;e.width=(e.width??200)-10;let s,{shapeSvg:o,bbox:l,label:c}=await BO(t,e,jO(e)),h=e.padding||10,u="";"ticket"in e&&e.ticket&&r?.kanban?.ticketBaseUrl&&(u=r?.kanban?.ticketBaseUrl.replace("#TICKET#",e.ticket),s=o.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",u).attr("target","_blank"));let d,p,f={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};({label:d,bbox:p}=s?await FO(s,"ticket"in e&&e.ticket||"",f):await FO(o,"ticket"in e&&e.ticket||"",f));let{label:g,bbox:y}=await FO(o,"assigned"in e&&e.assigned||"",f);e.width=a;let m=e?.width||0,x=Math.max(p.height,y.height)/2,b=Math.max(l.height+20,e?.height||0)+x,k=-m/2,v=-b/2;c.attr("transform","translate("+(h-m/2)+", "+(-x-l.height/2)+")"),d.attr("transform","translate("+(h-m/2)+", "+(-x+l.height/2)+")"),g.attr("transform","translate("+(h+m/2-y.width-20)+", "+(-x+l.height/2)+")");let T,{rx:w,ry:_}=e,{cssStyles:S}=e;if("handDrawn"===e.look){let t=wB.svg(o),r=dP(e,{}),i=w||_?t.path(TF(k,v,m,b,w||0),r):t.rectangle(k,v,m,b,r);T=o.insert((()=>i),":first-child"),T.attr("class","basic label-container").attr("style",S||null)}else{T=o.insert("rect",":first-child"),T.attr("class","basic label-container __APA__").attr("style",n).attr("rx",w??5).attr("ry",_??5).attr("x",k).attr("y",v).attr("width",m).attr("height",b);let t="priority"in e&&e.priority;if(t){let e=o.append("line"),r=k+2,i=v+Math.floor((w??0)/2),n=v+b-Math.floor((w??0)/2);e.attr("x1",r).attr("y1",i).attr("x2",r).attr("y2",n).attr("stroke-width","4").attr("stroke",fj(t))}}return zO(e,T),e.height=b,e.intersect=function(t){return sP.rect(e,t)},o}var fj,gj=y((()=>{UO(),yP(),_F(),mP(),_B(),fj=g((t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}}),"colorFromPriority"),g(pj,"kanbanItem")}));async function yj(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,halfPadding:s,label:o}=await BO(t,e,jO(e)),l=a.width+10*s,c=a.height+8*s,h=.15*l,{cssStyles:u}=e,d=a.width+20,p=a.height+20,f=Math.max(l,d),g=Math.max(c,p);o.attr("transform",`translate(${-a.width/2}, ${-a.height/2})`);let y,m=`M0 0 \n    a${h},${h} 1 0,0 ${.25*f},${-1*g*.1}\n    a${h},${h} 1 0,0 ${.25*f},0\n    a${h},${h} 1 0,0 ${.25*f},0\n    a${h},${h} 1 0,0 ${.25*f},${.1*g}\n\n    a${h},${h} 1 0,0 ${.15*f},${.33*g}\n    a${.8*h},${.8*h} 1 0,0 0,${.34*g}\n    a${h},${h} 1 0,0 ${-1*f*.15},${.33*g}\n\n    a${h},${h} 1 0,0 ${-1*f*.25},${.15*g}\n    a${h},${h} 1 0,0 ${-1*f*.25},0\n    a${h},${h} 1 0,0 ${-1*f*.25},0\n    a${h},${h} 1 0,0 ${-1*f*.25},${-1*g*.15}\n\n    a${h},${h} 1 0,0 ${-1*f*.1},${-1*g*.33}\n    a${.8*h},${.8*h} 1 0,0 0,${-1*g*.34}\n    a${h},${h} 1 0,0 ${.1*f},${-1*g*.33}\n  H0 V0 Z`;if("handDrawn"===e.look){let t=wB.svg(n),r=dP(e,{}),i=t.path(m,r);y=n.insert((()=>i),":first-child"),y.attr("class","basic label-container").attr("style",H$(u))}else y=n.insert("path",":first-child").attr("class","basic label-container").attr("style",i).attr("d",m);return y.attr("transform",`translate(${-f/2}, ${-g/2})`),zO(e,y),e.calcIntersect=function(t,e){return sP.rect(t,e)},e.intersect=function(t){return et.info("Bang intersect",e,t),sP.rect(e,t)},n}var mj=y((()=>{We(),UO(),yP(),mP(),_B(),_L(),g(yj,"bang")}));async function xj(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let n,{shapeSvg:a,bbox:s,halfPadding:o,label:l}=await BO(t,e,jO(e)),c=s.width+2*o,h=s.height+2*o,u=.15*c,d=.25*c,p=.35*c,f=.2*c,{cssStyles:g}=e,y=`M0 0 \n    a${u},${u} 0 0,1 ${.25*c},${-1*c*.1}\n    a${p},${p} 1 0,1 ${.4*c},${-1*c*.1}\n    a${d},${d} 1 0,1 ${.35*c},${.2*c}\n\n    a${u},${u} 1 0,1 ${.15*c},${.35*h}\n    a${f},${f} 1 0,1 ${-1*c*.15},${.65*h}\n\n    a${d},${u} 1 0,1 ${-1*c*.25},${.15*c}\n    a${p},${p} 1 0,1 ${-1*c*.5},0\n    a${u},${u} 1 0,1 ${-1*c*.25},${-1*c*.15}\n\n    a${u},${u} 1 0,1 ${-1*c*.1},${-1*h*.35}\n    a${f},${f} 1 0,1 ${.1*c},${-1*h*.65}\n  H0 V0 Z`;if("handDrawn"===e.look){let t=wB.svg(a),r=dP(e,{}),i=t.path(y,r);n=a.insert((()=>i),":first-child"),n.attr("class","basic label-container").attr("style",H$(g))}else n=a.insert("path",":first-child").attr("class","basic label-container").attr("style",i).attr("d",y);return l.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),n.attr("transform",`translate(${-c/2}, ${-h/2})`),zO(e,n),e.calcIntersect=function(t,e){return sP.rect(t,e)},e.intersect=function(t){return et.info("Cloud intersect",e,t),sP.rect(e,t)},a}var bj=y((()=>{_B(),We(),_L(),yP(),mP(),UO(),g(xj,"cloud")}));async function kj(t,e){let{labelStyles:r,nodeStyles:i}=uP(e);e.labelStyle=r;let{shapeSvg:n,bbox:a,halfPadding:s,label:o}=await BO(t,e,jO(e)),l=a.width+8*s,c=a.height+2*s,h=`\n    M${-l/2} ${c/2-5}\n    v${10-c}\n    q0,-5 5,-5\n    h${l-10}\n    q5,0 5,5\n    v${c-10}\n    q0,5 -5,5\n    h${10-l}\n    q-5,0 -5,-5\n    Z\n  `,u=n.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("style",i).attr("d",h);return n.append("line").attr("class","node-line-").attr("x1",-l/2).attr("y1",c/2).attr("x2",l/2).attr("y2",c/2),o.attr("transform",`translate(${-a.width/2}, ${-a.height/2})`),n.append((()=>o.node())),zO(e,u),e.calcIntersect=function(t,e){return sP.rect(t,e)},e.intersect=function(t){return sP.rect(e,t)},n}var vj=y((()=>{yP(),mP(),UO(),g(kj,"defaultMindmapNode")}));async function Tj(t,e){return OB(t,e,{padding:e.padding??0})}var wj=y((()=>{PB(),g(Tj,"mindmapCircle")}));function _j(t){return t in Ej}var Sj,Cj,Ej,Aj,$j,Lj,Rj,Ij,Nj,Dj,Mj,Oj,Pj,Bj,Fj,zj=y((()=>{CB(),$B(),NB(),MB(),PB(),zB(),WB(),GB(),XB(),QB(),rF(),nF(),sF(),lF(),hF(),dF(),fF(),yF(),xF(),kF(),wF(),CF(),AF(),LF(),IF(),OF(),BF(),zF(),UF(),HF(),XF(),QF(),JF(),ez(),nz(),sz(),pz(),yz(),xz(),kz(),Tz(),_z(),Cz(),Az(),Lz(),Iz(),Dz(),Oz(),Bz(),Wz(),Yz(),Hz(),Xz(),Qz(),Jz(),ej(),nj(),cj(),dj(),gj(),mj(),bj(),vj(),wj(),Sj=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:vz},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:gz},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:wz},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:Rz},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:ZB},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:OB},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:yj},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:xj},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:rz},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:gF},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:FF},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:PF},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:qz},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:RF},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:aF},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:Pz},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:IB},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:mz},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:$z},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Ez},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:uF},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:mF},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:UB},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:YB},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:VB},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:jF},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:Kz},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:pF},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:Fz},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:WF},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:KB},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:iF},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:Vz},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:tj},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:oF},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:Gz},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:cF},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:bz},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:ZF},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:KF},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:AB},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:FB},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:Mz},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:Nz},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:Zz},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:az},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:VF}],Cj=g((()=>{let t=[...Object.entries({state:Sz,choice:DB,note:tz,rectWithTitle:dz,labelRect:MF,iconSquare:EF,iconCircle:vF,icon:bF,iconRounded:SF,imageSquare:$F,anchor:SB,kanbanItem:pj,mindmapCircle:Tj,defaultMindmapNode:kj,classBox:lj,erBox:rj,requirementBox:hj}),...Sj.flatMap((t=>[t.shortName,..."aliases"in t?t.aliases:[],..."internalAliases"in t?t.internalAliases:[]].map((e=>[e,t.handler]))))];return Object.fromEntries(t)}),"generateShapeMap"),Ej=Cj(),g(_j,"isValidShape")})),jj=y((()=>{QT(),zD(),ns(),We(),zj(),_L(),gn(),is(),Aj=class{constructor(){this.vertexCounter=0,this.config=na(),this.vertices=new Map,this.edges=[],this.classes=new Map,this.subGraphs=[],this.subGraphLookup=new Map,this.tooltips=new Map,this.subCount=0,this.firstGraphFlag=!0,this.secCount=-1,this.posCrossRef=[],this.funs=[],this.setAccTitle=Kn,this.setAccDescription=Zn,this.setDiagramTitle=ta,this.getAccTitle=Qn,this.getAccDescription=Jn,this.getDiagramTitle=ea,this.funs.push(this.setupToolTips.bind(this)),this.addVertex=this.addVertex.bind(this),this.firstGraph=this.firstGraph.bind(this),this.setDirection=this.setDirection.bind(this),this.addSubGraph=this.addSubGraph.bind(this),this.addLink=this.addLink.bind(this),this.setLink=this.setLink.bind(this),this.updateLink=this.updateLink.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.destructLink=this.destructLink.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setTooltip=this.setTooltip.bind(this),this.updateLinkInterpolate=this.updateLinkInterpolate.bind(this),this.setClickFun=this.setClickFun.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.lex={firstGraph:this.firstGraph.bind(this)},this.clear(),this.setGen("gen-2")}static{g(this,"FlowDB")}sanitizeText(t){return on.sanitizeText(t,this.config)}lookUpDomId(t){for(let e of this.vertices.values())if(e.id===t)return e.domId;return t}addVertex(t,e,r,i,n,a,s={},o){if(!t||0===t.trim().length)return;let l;if(void 0!==o){let t;t=o.includes("\n")?o+"\n":"{\n"+o+"\n}",l=FD(t,{schema:BD})}let c=this.edges.find((e=>e.id===t));if(c){let t=l;return void 0!==t?.animate&&(c.animate=t.animate),void 0!==t?.animation&&(c.animation=t.animation),void(void 0!==t?.curve&&(c.interpolate=t.curve))}let h,u=this.vertices.get(t);if(void 0===u&&(u={id:t,labelType:"text",domId:"flowchart-"+t+"-"+this.vertexCounter,styles:[],classes:[]},this.vertices.set(t,u)),this.vertexCounter++,void 0!==e?(this.config=na(),h=this.sanitizeText(e.text.trim()),u.labelType=e.type,h.startsWith('"')&&h.endsWith('"')&&(h=h.substring(1,h.length-1)),u.text=h):void 0===u.text&&(u.text=t),void 0!==r&&(u.type=r),i?.forEach((t=>{u.styles.push(t)})),n?.forEach((t=>{u.classes.push(t)})),void 0!==a&&(u.dir=a),void 0===u.props?u.props=s:void 0!==s&&Object.assign(u.props,s),void 0!==l){if(l.shape){if(l.shape!==l.shape.toLowerCase()||l.shape.includes("_"))throw new Error(`No such shape: ${l.shape}. Shape names should be lowercase.`);if(!_j(l.shape))throw new Error(`No such shape: ${l.shape}.`);u.type=l?.shape}l?.label&&(u.text=l?.label),l?.icon&&(u.icon=l?.icon,!l.label?.trim()&&u.text===t&&(u.text="")),l?.form&&(u.form=l?.form),l?.pos&&(u.pos=l?.pos),l?.img&&(u.img=l?.img,!l.label?.trim()&&u.text===t&&(u.text="")),l?.constraint&&(u.constraint=l.constraint),l.w&&(u.assetWidth=Number(l.w)),l.h&&(u.assetHeight=Number(l.h))}}addSingleLink(t,e,r,i){let n={start:t,end:e,type:void 0,text:"",labelType:"text",classes:[],isUserDefinedId:!1,interpolate:this.edges.defaultInterpolate};et.info("abc78 Got edge...",n);let a=r.text;if(void 0!==a&&(n.text=this.sanitizeText(a.text.trim()),n.text.startsWith('"')&&n.text.endsWith('"')&&(n.text=n.text.substring(1,n.text.length-1)),n.labelType=a.type),void 0!==r&&(n.type=r.type,n.stroke=r.stroke,n.length=r.length>10?10:r.length),i&&!this.edges.some((t=>t.id===i)))n.id=i,n.isUserDefinedId=!0;else{let t=this.edges.filter((t=>t.start===n.start&&t.end===n.end));0===t.length?n.id=wL(n.start,n.end,{counter:0,prefix:"L"}):n.id=wL(n.start,n.end,{counter:t.length+1,prefix:"L"})}if(!(this.edges.length<(this.config.maxEdges??500)))throw new Error(`Edge limit exceeded. ${this.edges.length} edges found, but the limit is ${this.config.maxEdges}.\n\nInitialize mermaid with maxEdges set to a higher number to allow more edges.\nYou cannot set this config via configuration inside the diagram as it is a secure config.\nYou have to call mermaid.initialize.`);et.info("Pushing edge..."),this.edges.push(n)}isLinkData(t){return null!==t&&"object"==typeof t&&"id"in t&&"string"==typeof t.id}addLink(t,e,r){let i=this.isLinkData(r)?r.id.replace("@",""):void 0;et.info("addLink",t,e,i);for(let n of t)for(let a of e){let s=n===t[t.length-1],o=a===e[0];s&&o?this.addSingleLink(n,a,r,i):this.addSingleLink(n,a,r,void 0)}}updateLinkInterpolate(t,e){t.forEach((t=>{"default"===t?this.edges.defaultInterpolate=e:this.edges[t].interpolate=e}))}updateLink(t,e){t.forEach((t=>{if("number"==typeof t&&t>=this.edges.length)throw new Error(`The index ${t} for linkStyle is out of bounds. Valid indices for linkStyle are between 0 and ${this.edges.length-1}. (Help: Ensure that the index is within the range of existing edges.)`);"default"===t?this.edges.defaultStyle=e:(this.edges[t].style=e,(this.edges[t]?.style?.length??0)>0&&!this.edges[t]?.style?.some((t=>t?.startsWith("fill")))&&this.edges[t]?.style?.push("fill:none"))}))}addClass(t,e){let r=e.join().replace(/\\,/g,"§§§").replace(/,/g,";").replace(/§§§/g,",").split(";");t.split(",").forEach((t=>{let e=this.classes.get(t);void 0===e&&(e={id:t,styles:[],textStyles:[]},this.classes.set(t,e)),r?.forEach((t=>{if(/color/.exec(t)){let r=t.replace("fill","bgFill");e.textStyles.push(r)}e.styles.push(t)}))}))}setDirection(t){this.direction=t.trim(),/.*</.exec(this.direction)&&(this.direction="RL"),/.*\^/.exec(this.direction)&&(this.direction="BT"),/.*>/.exec(this.direction)&&(this.direction="LR"),/.*v/.exec(this.direction)&&(this.direction="TB"),"TD"===this.direction&&(this.direction="TB")}setClass(t,e){for(let r of t.split(",")){let t=this.vertices.get(r);t&&t.classes.push(e);let i=this.edges.find((t=>t.id===r));i&&i.classes.push(e);let n=this.subGraphLookup.get(r);n&&n.classes.push(e)}}setTooltip(t,e){if(void 0!==e){e=this.sanitizeText(e);for(let r of t.split(","))this.tooltips.set("gen-1"===this.version?this.lookUpDomId(r):r,e)}}setClickFun(t,e,r){let i=this.lookUpDomId(t);if("loose"!==na().securityLevel||void 0===e)return;let n=[];if("string"==typeof r){n=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<n.length;t++){let e=n[t].trim();e.startsWith('"')&&e.endsWith('"')&&(e=e.substr(1,e.length-2)),n[t]=e}}0===n.length&&n.push(t);let a=this.vertices.get(t);a&&(a.haveCallback=!0,this.funs.push((()=>{let t=document.querySelector(`[id="${i}"]`);null!==t&&t.addEventListener("click",(()=>{kL.runFunc(e,...n)}),!1)})))}setLink(t,e,r){t.split(",").forEach((t=>{let i=this.vertices.get(t);void 0!==i&&(i.link=kL.formatUrl(e,this.config),i.linkTarget=r)})),this.setClass(t,"clickable")}getTooltip(t){return this.tooltips.get(t)}setClickEvent(t,e,r){t.split(",").forEach((t=>{this.setClickFun(t,e,r)})),this.setClass(t,"clickable")}bindFunctions(t){this.funs.forEach((e=>{e(t)}))}getDirection(){return this.direction?.trim()}getVertices(){return this.vertices}getEdges(){return this.edges}getClasses(){return this.classes}setupToolTips(t){let e=nh(".mermaidTooltip");null===(e._groups||e)[0][0]&&(e=nh("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),nh(t).select("svg").selectAll("g.node").on("mouseover",(t=>{let r=nh(t.currentTarget);if(null===r.attr("title"))return;let i=t.currentTarget?.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(r.attr("title")).style("left",window.scrollX+i.left+(i.right-i.left)/2+"px").style("top",window.scrollY+i.bottom+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),r.classed("hover",!0)})).on("mouseout",(t=>{e.transition().duration(500).style("opacity",0),nh(t.currentTarget).classed("hover",!1)}))}clear(t="gen-2"){this.vertices=new Map,this.classes=new Map,this.edges=[],this.funs=[this.setupToolTips.bind(this)],this.subGraphs=[],this.subGraphLookup=new Map,this.subCount=0,this.tooltips=new Map,this.firstGraphFlag=!0,this.version=t,this.config=na(),Xn()}setGen(t){this.version=t||"gen-2"}defaultStyle(){return"fill:#ffa;stroke: #f66; stroke-width: 3px; stroke-dasharray: 5, 5;fill:#ffa;stroke: #666;"}addSubGraph(t,e,r){let i=t.text.trim(),n=r.text;t===r&&/\s/.exec(r.text)&&(i=void 0);let a=g((t=>{let e,r={boolean:{},number:{},string:{}},i=[];return{nodeList:t.filter((function(t){let n=typeof t;return t.stmt&&"dir"===t.stmt?(e=t.value,!1):""!==t.trim()&&(n in r?!r[n].hasOwnProperty(t)&&(r[n][t]=!0):!i.includes(t)&&i.push(t))})),dir:e}}),"uniq")(e.flat()),s=a.nodeList,o=a.dir,l=na().flowchart??{};if(o=o??(l.inheritDir?this.getDirection()??na().direction??void 0:void 0),"gen-1"===this.version)for(let t=0;t<s.length;t++)s[t]=this.lookUpDomId(s[t]);i=i??"subGraph"+this.subCount,n=n||"",n=this.sanitizeText(n),this.subCount=this.subCount+1;let c={id:i,nodes:s,title:n.trim(),classes:[],dir:o,labelType:r.type};return et.info("Adding",c.id,c.nodes,c.dir),c.nodes=this.makeUniq(c,this.subGraphs).nodes,this.subGraphs.push(c),this.subGraphLookup.set(i,c),i}getPosForId(t){for(let[e,r]of this.subGraphs.entries())if(r.id===t)return e;return-1}indexNodes2(t,e){let r=this.subGraphs[e].nodes;if(this.secCount=this.secCount+1,this.secCount>2e3)return{result:!1,count:0};if(this.posCrossRef[this.secCount]=e,this.subGraphs[e].id===t)return{result:!0,count:0};let i=0,n=1;for(;i<r.length;){let e=this.getPosForId(r[i]);if(e>=0){let r=this.indexNodes2(t,e);if(r.result)return{result:!0,count:n+r.count};n+=r.count}i+=1}return{result:!1,count:n}}getDepthFirstPos(t){return this.posCrossRef[t]}indexNodes(){this.secCount=-1,this.subGraphs.length>0&&this.indexNodes2("none",this.subGraphs.length-1)}getSubGraphs(){return this.subGraphs}firstGraph(){return!!this.firstGraphFlag&&(this.firstGraphFlag=!1,!0)}destructStartLink(t){let e=t.trim(),r="arrow_open";switch(e[0]){case"<":r="arrow_point",e=e.slice(1);break;case"x":r="arrow_cross",e=e.slice(1);break;case"o":r="arrow_circle",e=e.slice(1)}let i="normal";return e.includes("=")&&(i="thick"),e.includes(".")&&(i="dotted"),{type:r,stroke:i}}countChar(t,e){let r=e.length,i=0;for(let n=0;n<r;++n)e[n]===t&&++i;return i}destructEndLink(t){let e=t.trim(),r=e.slice(0,-1),i="arrow_open";switch(e.slice(-1)){case"x":i="arrow_cross",e.startsWith("x")&&(i="double_"+i,r=r.slice(1));break;case">":i="arrow_point",e.startsWith("<")&&(i="double_"+i,r=r.slice(1));break;case"o":i="arrow_circle",e.startsWith("o")&&(i="double_"+i,r=r.slice(1))}let n="normal",a=r.length-1;r.startsWith("=")&&(n="thick"),r.startsWith("~")&&(n="invisible");let s=this.countChar(".",r);return s&&(n="dotted",a=s),{type:i,stroke:n,length:a}}destructLink(t,e){let r,i=this.destructEndLink(t);if(e){if(r=this.destructStartLink(e),r.stroke!==i.stroke)return{type:"INVALID",stroke:"INVALID"};if("arrow_open"===r.type)r.type=i.type;else{if(r.type!==i.type)return{type:"INVALID",stroke:"INVALID"};r.type="double_"+r.type}return"double_arrow"===r.type&&(r.type="double_arrow_point"),r.length=i.length,r}return i}exists(t,e){for(let r of t)if(r.nodes.includes(e))return!0;return!1}makeUniq(t,e){let r=[];return t.nodes.forEach(((i,n)=>{this.exists(e,i)||r.push(t.nodes[n])})),{nodes:r}}getTypeFromVertex(t){if(t.img)return"imageSquare";if(t.icon)return"circle"===t.form?"iconCircle":"square"===t.form?"iconSquare":"rounded"===t.form?"iconRounded":"icon";switch(t.type){case"square":case void 0:return"squareRect";case"round":return"roundedRect";case"ellipse":return"ellipse";default:return t.type}}findNode(t,e){return t.find((t=>t.id===e))}destructEdgeType(t){let e="none",r="arrow_point";switch(t){case"arrow_point":case"arrow_circle":case"arrow_cross":r=t;break;case"double_arrow_point":case"double_arrow_circle":case"double_arrow_cross":e=t.replace("double_",""),r=e}return{arrowTypeStart:e,arrowTypeEnd:r}}addNodeFromVertex(t,e,r,i,n,a){let s=r.get(t.id),o=i.get(t.id)??!1,l=this.findNode(e,t.id);if(l)l.cssStyles=t.styles,l.cssCompiledStyles=this.getCompiledStyles(t.classes),l.cssClasses=t.classes.join(" ");else{let r={id:t.id,label:t.text,labelStyle:"",parentId:s,padding:n.flowchart?.padding||8,cssStyles:t.styles,cssCompiledStyles:this.getCompiledStyles(["default","node",...t.classes]),cssClasses:"default "+t.classes.join(" "),dir:t.dir,domId:t.domId,look:a,link:t.link,linkTarget:t.linkTarget,tooltip:this.getTooltip(t.id),icon:t.icon,pos:t.pos,img:t.img,assetWidth:t.assetWidth,assetHeight:t.assetHeight,constraint:t.constraint};o?e.push({...r,isGroup:!0,shape:"rect"}):e.push({...r,isGroup:!1,shape:this.getTypeFromVertex(t)})}}getCompiledStyles(t){let e=[];for(let r of t){let t=this.classes.get(r);t?.styles&&(e=[...e,...t.styles??[]].map((t=>t.trim()))),t?.textStyles&&(e=[...e,...t.textStyles??[]].map((t=>t.trim())))}return e}getData(){let t=na(),e=[],r=[],i=this.getSubGraphs(),n=new Map,a=new Map;for(let t=i.length-1;t>=0;t--){let e=i[t];e.nodes.length>0&&a.set(e.id,!0);for(let t of e.nodes)n.set(t,e.id)}for(let r=i.length-1;r>=0;r--){let a=i[r];e.push({id:a.id,label:a.title,labelStyle:"",parentId:n.get(a.id),padding:8,cssCompiledStyles:this.getCompiledStyles(a.classes),cssClasses:a.classes.join(" "),shape:"rect",dir:a.dir,isGroup:!0,look:t.look})}this.getVertices().forEach((r=>{this.addNodeFromVertex(r,e,n,a,t,t.look||"classic")}));let s=this.getEdges();return s.forEach(((e,i)=>{let{arrowTypeStart:n,arrowTypeEnd:a}=this.destructEdgeType(e.type),o=[...s.defaultStyle??[]];e.style&&o.push(...e.style);let l={id:wL(e.start,e.end,{counter:i,prefix:"L"},e.id),isUserDefinedId:e.isUserDefinedId,start:e.start,end:e.end,type:e.type??"normal",label:e.text,labelpos:"c",thickness:e.stroke,minlen:e.length,classes:"invisible"===e?.stroke?"":"edge-thickness-normal edge-pattern-solid flowchart-link",arrowTypeStart:"invisible"===e?.stroke||"arrow_open"===e?.type?"none":n,arrowTypeEnd:"invisible"===e?.stroke||"arrow_open"===e?.type?"none":a,arrowheadStyle:"fill: #333",cssCompiledStyles:this.getCompiledStyles(e.classes),labelStyle:o,style:o,pattern:e.stroke,look:t.look,animate:e.animate,animation:e.animation,curve:e.interpolate||this.edges.defaultInterpolate||t.flowchart?.curve};r.push(l)})),{nodes:e,edges:r,other:{},config:t}}defaultConfig(){return sa.flowchart}}})),Uj=y((()=>{QT(),$j=g(((t,e)=>{let r;return"sandbox"===e&&(r=nh("#i"+t)),nh("sandbox"===e?r.nodes()[0].contentDocument.body:"body").select(`[id="${t}"]`)}),"getDiagramElement")})),Wj=y((()=>{Lj=g((({flowchart:t})=>{let e=t?.subGraphTitleMargin?.top??0,r=t?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:r,subGraphTitleTotalMargin:e+r}}),"getSubGraphTitleMargins")})),qj=y((()=>{ns(),gn(),We(),Wj(),QT(),_B(),DO(),gP(),uz(),_F(),mP(),Rj=g((async(t,e)=>{et.info("Creating subgraph rect for ",e.id,e);let r=na(),{themeVariables:i,handDrawnSeed:n}=r,{clusterBkg:a,clusterBorder:s}=i,{labelStyles:o,nodeStyles:l,borderStyles:c,backgroundStyles:h}=uP(e),u=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),d=Hi(r.flowchart.htmlLabels),p=u.insert("g").attr("class","cluster-label "),f=await NO(p,e.label,{style:e.labelStyle,useHtmlLabels:d,isNode:!0}),g=f.getBBox();if(Hi(r.flowchart.htmlLabels)){let t=f.children[0],e=nh(f);g=t.getBoundingClientRect(),e.attr("width",g.width),e.attr("height",g.height)}let y=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(y-e.width)/2-e.padding:e.diff=-e.padding;let m,x=e.height,b=e.x-y/2,k=e.y-x/2;if(et.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let t=wB.svg(u),r=dP(e,{roughness:.7,fill:a,stroke:s,fillWeight:3,seed:n}),i=t.path(TF(b,k,y,x,0),r);m=u.insert((()=>(et.debug("Rough node insert CXC",i),i)),":first-child"),m.select("path:nth-child(2)").attr("style",c.join(";")),m.select("path").attr("style",h.join(";").replace("fill","stroke"))}else m=u.insert("rect",":first-child"),m.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",b).attr("y",k).attr("width",y).attr("height",x);let{subGraphTitleTopMargin:v}=Lj(r);if(p.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+v})`),o){let t=p.select("span");t&&t.attr("style",o)}let T=m.node().getBBox();return e.offsetX=0,e.width=T.width,e.height=T.height,e.offsetY=g.height-e.padding/2,e.intersect=function(t){return aP(e,t)},{cluster:u,labelBBox:g}}),"rect"),Ij=g(((t,e)=>{let r=t.insert("g").attr("class","note-cluster").attr("id",e.id),i=r.insert("rect",":first-child"),n=0*e.padding,a=n/2;i.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-a).attr("y",e.y-e.height/2-a).attr("width",e.width+n).attr("height",e.height+n).attr("fill","none");let s=i.node().getBBox();return e.width=s.width,e.height=s.height,e.intersect=function(t){return aP(e,t)},{cluster:r,labelBBox:{width:0,height:0}}}),"noteGroup"),Nj=g((async(t,e)=>{let r=na(),{themeVariables:i,handDrawnSeed:n}=r,{altBackground:a,compositeBackground:s,compositeTitleBackground:o,nodeBorder:l}=i,c=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),h=c.insert("g",":first-child"),u=c.insert("g").attr("class","cluster-label"),d=c.append("rect"),p=u.node().appendChild(await hz(e.label,e.labelStyle,void 0,!0)),f=p.getBBox();if(Hi(r.flowchart.htmlLabels)){let t=p.children[0],e=nh(p);f=t.getBoundingClientRect(),e.attr("width",f.width),e.attr("height",f.height)}let g=0*e.padding,y=g/2,m=(e.width<=f.width+e.padding?f.width+e.padding:e.width)+g;e.width<=f.width+e.padding?e.diff=(m-e.width)/2-e.padding:e.diff=-e.padding;let x=e.height+g,b=e.height+g-f.height-6,k=e.x-m/2,v=e.y-x/2;e.width=m;let T,w=e.y-e.height/2-y+f.height+2;if("handDrawn"===e.look){let t=e.cssClasses.includes("statediagram-cluster-alt"),r=wB.svg(c),i=e.rx||e.ry?r.path(TF(k,v,m,x,10),{roughness:.7,fill:o,fillStyle:"solid",stroke:l,seed:n}):r.rectangle(k,v,m,x,{seed:n});T=c.insert((()=>i),":first-child");let h=r.rectangle(k,w,m,b,{fill:t?a:s,fillStyle:t?"hachure":"solid",stroke:l,seed:n});T=c.insert((()=>i),":first-child"),d=c.insert((()=>h))}else T=h.insert("rect",":first-child"),T.attr("class","outer").attr("x",k).attr("y",v).attr("width",m).attr("height",x).attr("data-look",e.look),d.attr("class","inner").attr("x",k).attr("y",w).attr("width",m).attr("height",b);u.attr("transform",`translate(${e.x-f.width/2}, ${v+1-(Hi(r.flowchart.htmlLabels)?0:3)})`);let _=T.node().getBBox();return e.height=_.height,e.offsetX=0,e.offsetY=f.height-e.padding/2,e.labelBBox=f,e.intersect=function(t){return aP(e,t)},{cluster:c,labelBBox:f}}),"roundedWithTitle"),Dj=g((async(t,e)=>{et.info("Creating subgraph rect for ",e.id,e);let r=na(),{themeVariables:i,handDrawnSeed:n}=r,{clusterBkg:a,clusterBorder:s}=i,{labelStyles:o,nodeStyles:l,borderStyles:c,backgroundStyles:h}=uP(e),u=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),d=Hi(r.flowchart.htmlLabels),p=u.insert("g").attr("class","cluster-label "),f=await NO(p,e.label,{style:e.labelStyle,useHtmlLabels:d,isNode:!0,width:e.width}),g=f.getBBox();if(Hi(r.flowchart.htmlLabels)){let t=f.children[0],e=nh(f);g=t.getBoundingClientRect(),e.attr("width",g.width),e.attr("height",g.height)}let y=e.width<=g.width+e.padding?g.width+e.padding:e.width;e.width<=g.width+e.padding?e.diff=(y-e.width)/2-e.padding:e.diff=-e.padding;let m,x=e.height,b=e.x-y/2,k=e.y-x/2;if(et.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){let t=wB.svg(u),r=dP(e,{roughness:.7,fill:a,stroke:s,fillWeight:4,seed:n}),i=t.path(TF(b,k,y,x,e.rx),r);m=u.insert((()=>(et.debug("Rough node insert CXC",i),i)),":first-child"),m.select("path:nth-child(2)").attr("style",c.join(";")),m.select("path").attr("style",h.join(";").replace("fill","stroke"))}else m=u.insert("rect",":first-child"),m.attr("style",l).attr("rx",e.rx).attr("ry",e.ry).attr("x",b).attr("y",k).attr("width",y).attr("height",x);let{subGraphTitleTopMargin:v}=Lj(r);if(p.attr("transform",`translate(${e.x-g.width/2}, ${e.y-e.height/2+v})`),o){let t=p.select("span");t&&t.attr("style",o)}let T=m.node().getBBox();return e.offsetX=0,e.width=T.width,e.height=T.height,e.offsetY=g.height-e.padding/2,e.intersect=function(t){return aP(e,t)},{cluster:u,labelBBox:g}}),"kanbanSection"),Mj=g(((t,e)=>{let r=na(),{themeVariables:i,handDrawnSeed:n}=r,{nodeBorder:a}=i,s=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),o=s.insert("g",":first-child"),l=0*e.padding,c=e.width+l;e.diff=-e.padding;let h,u=e.height+l,d=e.x-c/2,p=e.y-u/2;if(e.width=c,"handDrawn"===e.look){let t=wB.svg(s).rectangle(d,p,c,u,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:a,seed:n});h=s.insert((()=>t),":first-child")}else h=o.insert("rect",":first-child"),h.attr("class","divider").attr("x",d).attr("y",p).attr("width",c).attr("height",u).attr("data-look",e.look);let f=h.node().getBBox();return e.height=f.height,e.offsetX=0,e.offsetY=0,e.intersect=function(t){return aP(e,t)},{cluster:s,labelBBox:{}}}),"divider"),Oj={rect:Rj,squareRect:Rj,roundedWithTitle:Nj,noteGroup:Ij,divider:Mj,kanbanSection:Dj},Pj=new Map,Bj=g((async(t,e)=>{let r=e.shape||"rect",i=await Oj[r](t,e);return Pj.set(e.id,i),i}),"insertCluster"),Fj=g((()=>{Pj=new Map}),"clear")}));function Yj(t,e){if(void 0===t||void 0===e)return{angle:0,deltaX:0,deltaY:0};t=Vj(t),e=Vj(e);let[r,i]=[t.x,t.y],[n,a]=[e.x,e.y],s=n-r,o=a-i;return{angle:Math.atan(o/s),deltaX:s,deltaY:o}}var Gj,Hj,Vj,Xj,Kj,Qj,Zj,Jj=y((()=>{Gj={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},Hj={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5},g(Yj,"calculateDeltaAndAngle"),Vj=g((t=>Array.isArray(t)?{x:t[0],y:t[1]}:t),"pointTransformer"),Xj=g((t=>({x:g((function(e,r,i){let n=0,a=Vj(i[0]).x<Vj(i[i.length-1]).x?"left":"right";if(0===r&&Object.hasOwn(Gj,t.arrowTypeStart)){let{angle:e,deltaX:r}=Yj(i[0],i[1]);n=Gj[t.arrowTypeStart]*Math.cos(e)*(r>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(Gj,t.arrowTypeEnd)){let{angle:e,deltaX:r}=Yj(i[i.length-1],i[i.length-2]);n=Gj[t.arrowTypeEnd]*Math.cos(e)*(r>=0?1:-1)}let s=Math.abs(Vj(e).x-Vj(i[i.length-1]).x),o=Math.abs(Vj(e).y-Vj(i[i.length-1]).y),l=Math.abs(Vj(e).x-Vj(i[0]).x),c=Math.abs(Vj(e).y-Vj(i[0]).y),h=Gj[t.arrowTypeStart],u=Gj[t.arrowTypeEnd];if(s<u&&s>0&&o<u){let t=u+1-s;t*="right"===a?-1:1,n-=t}if(l<h&&l>0&&c<h){let t=h+1-l;t*="right"===a?-1:1,n+=t}return Vj(e).x+n}),"x"),y:g((function(e,r,i){let n=0,a=Vj(i[0]).y<Vj(i[i.length-1]).y?"down":"up";if(0===r&&Object.hasOwn(Gj,t.arrowTypeStart)){let{angle:e,deltaY:r}=Yj(i[0],i[1]);n=Gj[t.arrowTypeStart]*Math.abs(Math.sin(e))*(r>=0?1:-1)}else if(r===i.length-1&&Object.hasOwn(Gj,t.arrowTypeEnd)){let{angle:e,deltaY:r}=Yj(i[i.length-1],i[i.length-2]);n=Gj[t.arrowTypeEnd]*Math.abs(Math.sin(e))*(r>=0?1:-1)}let s=Math.abs(Vj(e).y-Vj(i[i.length-1]).y),o=Math.abs(Vj(e).x-Vj(i[i.length-1]).x),l=Math.abs(Vj(e).y-Vj(i[0]).y),c=Math.abs(Vj(e).x-Vj(i[0]).x),h=Gj[t.arrowTypeStart],u=Gj[t.arrowTypeEnd];if(s<u&&s>0&&o<u){let t=u+1-s;t*="up"===a?-1:1,n-=t}if(l<h&&l>0&&c<h){let t=h+1-l;t*="up"===a?-1:1,n+=t}return Vj(e).y+n}),"y")})),"getLineFunctionsWithOffset")})),tU=y((()=>{We(),Kj=g(((t,e,r,i,n,a)=>{e.arrowTypeStart&&Zj(t,"start",e.arrowTypeStart,r,i,n,a),e.arrowTypeEnd&&Zj(t,"end",e.arrowTypeEnd,r,i,n,a)}),"addEdgeMarkers"),Qj={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},Zj=g(((t,e,r,i,n,a,s)=>{let o=Qj[r];if(!o)return void et.warn(`Unknown arrow type: ${r}`);let l=`${n}_${a}-${o.type}${"start"===e?"Start":"End"}`;if(s&&""!==s.trim()){let r=`${l}_${s.replace(/[^\dA-Za-z]/g,"_")}`;if(!document.getElementById(r)){let t=document.getElementById(l);if(t){let e=t.cloneNode(!0);e.id=r,e.querySelectorAll("path, circle, line").forEach((t=>{t.setAttribute("stroke",s),o.fill&&t.setAttribute("fill",s)})),t.parentNode?.appendChild(e)}}t.attr(`marker-${e}`,`url(${i}#${r})`)}else t.attr(`marker-${e}`,`url(${i}#${l})`)}),"addEdgeMarker")}));function eU(t,e){na().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}function rU(t){let e=[],r=[];for(let i=1;i<t.length-1;i++){let n=t[i-1],a=t[i],s=t[i+1];(n.x===a.x&&a.y===s.y&&Math.abs(a.x-s.x)>5&&Math.abs(a.y-n.y)>5||n.y===a.y&&a.x===s.x&&Math.abs(a.x-n.x)>5&&Math.abs(a.y-s.y)>5)&&(e.push(a),r.push(i))}return{cornerPoints:e,cornerPointPositions:r}}function iU(t,e){if(t.length<2)return"";let r="",i=t.length,n=1e-5;for(let a=0;a<i;a++){let s=t[a],o=t[a-1],l=t[a+1];if(0===a)r+=`M${s.x},${s.y}`;else if(a===i-1)r+=`L${s.x},${s.y}`;else{let t=s.x-o.x,i=s.y-o.y,a=l.x-s.x,c=l.y-s.y,h=Math.hypot(t,i),u=Math.hypot(a,c);if(h<n||u<n){r+=`L${s.x},${s.y}`;continue}let d=t/h,p=i/h,f=a/u,g=c/u,y=d*f+p*g,m=Math.max(-1,Math.min(1,y)),x=Math.acos(m);if(x<n||Math.abs(Math.PI-x)<n){r+=`L${s.x},${s.y}`;continue}let b=Math.min(e/Math.sin(x/2),h/2,u/2),k=s.x-d*b,v=s.y-p*b,T=s.x+f*b,w=s.y+g*b;r+=`L${k},${v}`,r+=`Q${s.x},${s.y} ${T},${w}`}}return r}function nU(t,e){if(!t||!e)return{angle:0,deltaX:0,deltaY:0};let r=e.x-t.x,i=e.y-t.y;return{angle:Math.atan2(i,r),deltaX:r,deltaY:i}}function aU(t,e){let r=t.map((t=>({...t})));if(t.length>=2&&Gj[e.arrowTypeStart]){let i=Gj[e.arrowTypeStart],n=t[0],a=t[1],{angle:s}=nU(n,a),o=i*Math.cos(s),l=i*Math.sin(s);r[0].x=n.x+o,r[0].y=n.y+l}let i=t.length;if(i>=2&&Gj[e.arrowTypeEnd]){let n=Gj[e.arrowTypeEnd],a=t[i-1],s=t[i-2],{angle:o}=nU(s,a),l=n*Math.cos(o),c=n*Math.sin(o);r[i-1].x=a.x-l,r[i-1].y=a.y-c}return r}var sU,oU,lU,cU,hU,uU,dU,pU,fU,gU,yU,mU,xU,bU,kU,vU,TU,wU,_U,SU,CU,EU,AU,$U,LU,RU,IU,NU,DU,MU,OU,PU=y((()=>{ns(),gn(),We(),DO(),_L(),Jj(),Wj(),QT(),_B(),uz(),tU(),mP(),sU=new Map,oU=new Map,lU=g((()=>{sU.clear(),oU.clear()}),"clear"),cU=g((t=>t?t.reduce(((t,e)=>t+";"+e),""):""),"getLabelStyles"),hU=g((async(t,e)=>{let r=Hi(na().flowchart.htmlLabels),{labelStyles:i}=uP(e);e.labelStyle=i;let n=await NO(t,e.label,{style:e.labelStyle,useHtmlLabels:r,addSvgBackground:!0,isNode:!1});et.info("abc82",e,e.labelType);let a=t.insert("g").attr("class","edgeLabel"),s=a.insert("g").attr("class","label").attr("data-id",e.id);s.node().appendChild(n);let o,l=n.getBBox();if(r){let t=n.children[0],e=nh(n);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}if(s.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),sU.set(e.id,a),e.width=l.width,e.height=l.height,e.startLabelLeft){let r=await hz(e.startLabelLeft,cU(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),n=i.insert("g").attr("class","inner");o=n.node().appendChild(r);let a=r.getBBox();n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),oU.get(e.id)||oU.set(e.id,{}),oU.get(e.id).startLeft=i,eU(o,e.startLabelLeft)}if(e.startLabelRight){let r=await hz(e.startLabelRight,cU(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),n=i.insert("g").attr("class","inner");o=i.node().appendChild(r),n.node().appendChild(r);let a=r.getBBox();n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),oU.get(e.id)||oU.set(e.id,{}),oU.get(e.id).startRight=i,eU(o,e.startLabelRight)}if(e.endLabelLeft){let r=await hz(e.endLabelLeft,cU(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),n=i.insert("g").attr("class","inner");o=n.node().appendChild(r);let a=r.getBBox();n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),i.node().appendChild(r),oU.get(e.id)||oU.set(e.id,{}),oU.get(e.id).endLeft=i,eU(o,e.endLabelLeft)}if(e.endLabelRight){let r=await hz(e.endLabelRight,cU(e.labelStyle)),i=t.insert("g").attr("class","edgeTerminals"),n=i.insert("g").attr("class","inner");o=n.node().appendChild(r);let a=r.getBBox();n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),i.node().appendChild(r),oU.get(e.id)||oU.set(e.id,{}),oU.get(e.id).endRight=i,eU(o,e.endLabelRight)}return n}),"insertEdgeLabel"),g(eU,"setTerminalWidth"),uU=g(((t,e)=>{et.debug("Moving label abc88 ",t.id,t.label,sU.get(t.id),e);let r=e.updatedPath?e.updatedPath:e.originalPath,i=na(),{subGraphTitleTotalMargin:n}=Lj(i);if(t.label){let i=sU.get(t.id),a=t.x,s=t.y;if(r){let i=kL.calcLabelPosition(r);et.debug("Moving label "+t.label+" from (",a,",",s,") to (",i.x,",",i.y,") abc88"),e.updatedPath&&(a=i.x,s=i.y)}i.attr("transform",`translate(${a}, ${s+n/2})`)}if(t.startLabelLeft){let e=oU.get(t.id).startLeft,i=t.x,n=t.y;if(r){let e=kL.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",r);i=e.x,n=e.y}e.attr("transform",`translate(${i}, ${n})`)}if(t.startLabelRight){let e=oU.get(t.id).startRight,i=t.x,n=t.y;if(r){let e=kL.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",r);i=e.x,n=e.y}e.attr("transform",`translate(${i}, ${n})`)}if(t.endLabelLeft){let e=oU.get(t.id).endLeft,i=t.x,n=t.y;if(r){let e=kL.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",r);i=e.x,n=e.y}e.attr("transform",`translate(${i}, ${n})`)}if(t.endLabelRight){let e=oU.get(t.id).endRight,i=t.x,n=t.y;if(r){let e=kL.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",r);i=e.x,n=e.y}e.attr("transform",`translate(${i}, ${n})`)}}),"positionEdgeLabel"),dU=g(((t,e)=>{let r=t.x,i=t.y,n=Math.abs(e.x-r),a=Math.abs(e.y-i),s=t.width/2,o=t.height/2;return n>=s||a>=o}),"outsideNode"),pU=g(((t,e,r)=>{et.debug(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(e)}\n  insidePoint : ${JSON.stringify(r)}\n  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);let i=t.x,n=t.y,a=Math.abs(i-r.x),s=t.width/2,o=r.x<e.x?s-a:s+a,l=t.height/2,c=Math.abs(e.y-r.y),h=Math.abs(e.x-r.x);if(Math.abs(n-e.y)*s>Math.abs(i-e.x)*l){let t=r.y<e.y?e.y-l-n:n-l-e.y;o=h*t/c;let i={x:r.x<e.x?r.x+o:r.x-h+o,y:r.y<e.y?r.y+c-t:r.y-c+t};return 0===o&&(i.x=e.x,i.y=e.y),0===h&&(i.x=e.x),0===c&&(i.y=e.y),et.debug(`abc89 top/bottom calc, Q ${c}, q ${t}, R ${h}, r ${o}`,i),i}{o=r.x<e.x?e.x-s-i:i-s-e.x;let t=c*o/h,n=r.x<e.x?r.x+h-o:r.x-h+o,a=r.y<e.y?r.y+t:r.y-t;return et.debug(`sides calc abc89, Q ${c}, q ${t}, R ${h}, r ${o}`,{_x:n,_y:a}),0===o&&(n=e.x,a=e.y),0===h&&(n=e.x),0===c&&(a=e.y),{x:n,y:a}}}),"intersection"),fU=g(((t,e)=>{et.warn("abc88 cutPathAtIntersect",t,e);let r=[],i=t[0],n=!1;return t.forEach((t=>{if(et.info("abc88 checking point",t,e),dU(e,t)||n)et.warn("abc88 outside",t,i),i=t,n||r.push(t);else{let a=pU(e,i,t);et.debug("abc88 inside",t,i,a),et.debug("abc88 intersection",a,e);let s=!1;r.forEach((t=>{s=s||t.x===a.x&&t.y===a.y})),r.some((t=>t.x===a.x&&t.y===a.y))?et.warn("abc88 no intersect",a,r):r.push(a),n=!0}})),et.debug("returning points",r),r}),"cutPathAtIntersect"),g(rU,"extractCornerPoints"),gU=g((function(t,e,r){let i=e.x-t.x,n=e.y-t.y,a=r/Math.sqrt(i*i+n*n);return{x:e.x-a*i,y:e.y-a*n}}),"findAdjacentPoint"),yU=g((function(t){let{cornerPointPositions:e}=rU(t),r=[];for(let i=0;i<t.length;i++)if(e.includes(i)){let e=t[i-1],n=t[i+1],a=t[i],s=gU(e,a,5),o=gU(n,a,5),l=o.x-s.x,c=o.y-s.y;r.push(s);let h=2*Math.sqrt(2),u={x:a.x,y:a.y};if(Math.abs(n.x-e.x)>10&&Math.abs(n.y-e.y)>=10){et.debug("Corner point fixing",Math.abs(n.x-e.x),Math.abs(n.y-e.y));let t=5;u=a.x===s.x?{x:l<0?s.x-t+h:s.x+t-h,y:c<0?s.y-h:s.y+h}:{x:l<0?s.x-h:s.x+h,y:c<0?s.y-t+h:s.y+t-h}}else et.debug("Corner point skipping fixing",Math.abs(n.x-e.x),Math.abs(n.y-e.y));r.push(u,o)}else r.push(t[i]);return r}),"fixCorners"),mU=g(((t,e,r)=>{let i=t-e-r,n=Math.floor(i/4);return`0 ${e} ${Array(n).fill("2 2").join(" ")} ${r}`}),"generateDashArray"),xU=g((function(t,e,r,i,n,a,s,o=!1){let{handDrawnSeed:l}=na(),c=e.points,h=!1,u=n;var d=a;let p=[];for(let t in e.cssCompiledStyles)hP(t)||p.push(e.cssCompiledStyles[t]);et.debug("UIO intersect check",e.points,d.x,u.x),d.intersect&&u.intersect&&!o&&(c=c.slice(1,e.points.length-1),c.unshift(u.intersect(c[0])),et.debug("Last point UIO",e.start,"--\x3e",e.end,c[c.length-1],d,d.intersect(c[c.length-1])),c.push(d.intersect(c[c.length-1])));let f=btoa(JSON.stringify(c));e.toCluster&&(et.info("to cluster abc88",r.get(e.toCluster)),c=fU(e.points,r.get(e.toCluster).node),h=!0),e.fromCluster&&(et.debug("from cluster abc88",r.get(e.fromCluster),JSON.stringify(c,null,2)),c=fU(c.reverse(),r.get(e.fromCluster).node).reverse(),h=!0);let g=c.filter((t=>!Number.isNaN(t.y)));g=yU(g);let y=hv;switch(y=Wk,e.curve){case"linear":y=Wk;break;case"basis":default:y=hv;break;case"cardinal":y=wv;break;case"bumpX":y=rv;break;case"bumpY":y=iv;break;case"catmullRom":y=Nv;break;case"monotoneX":y=Qv;break;case"monotoneY":y=Zv;break;case"natural":y=rT;break;case"step":y=aT;break;case"stepAfter":y=oT;break;case"stepBefore":y=sT}let m,{x:x,y:b}=Xj(e),k=Vk().x(x).y(b).curve(y);switch(e.thickness){case"normal":default:m="edge-thickness-normal";break;case"thick":m="edge-thickness-thick";break;case"invisible":m="edge-thickness-invisible"}switch(e.pattern){case"solid":default:m+=" edge-pattern-solid";break;case"dotted":m+=" edge-pattern-dotted";break;case"dashed":m+=" edge-pattern-dashed"}let v,T="rounded"===e.curve?iU(aU(g,e),5):k(g),w=Array.isArray(e.style)?e.style:[e.style],_=w.find((t=>t?.startsWith("stroke:"))),S=!1;if("handDrawn"===e.look){let r=wB.svg(t);Object.assign([],g),m+=" transition",v=nh(r.path(T,{roughness:.3,seed:l})).select("path").attr("id",e.id).attr("class"," "+m+(e.classes?" "+e.classes:"")).attr("style",w?w.reduce(((t,e)=>t+";"+e),""):"");let i=v.attr("d");v.attr("d",i),t.node().appendChild(v.node())}else{let r=p.join(";"),i=w?w.reduce(((t,e)=>t+e+";"),""):"",n="";e.animate&&(n=" edge-animation-fast"),e.animation&&(n=" edge-animation-"+e.animation);let a=(r?r+";"+i+";":i)+";"+(w?w.reduce(((t,e)=>t+";"+e),""):"");v=t.append("path").attr("d",T).attr("id",e.id).attr("class"," "+m+(e.classes?" "+e.classes:"")+(n??"")).attr("style",a),_=a.match(/stroke:([^;]+)/)?.[1],S=!0===e.animate||!!e.animation||r.includes("animation");let s=v.node(),o="function"==typeof s.getTotalLength?s.getTotalLength():0,l=Hj[e.arrowTypeStart]||0,c=Hj[e.arrowTypeEnd]||0;if("neo"===e.look&&!S){let t=`stroke-dasharray: ${"dotted"===e.pattern||"dashed"===e.pattern?mU(o,l,c):`0 ${l} ${o-l-c} ${c}`}; stroke-dashoffset: 0;`;v.attr("style",t+v.attr("style"))}}v.attr("data-edge",!0),v.attr("data-et","edge"),v.attr("data-id",e.id),v.attr("data-points",f),e.showPoints&&g.forEach((e=>{t.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",e.x).attr("cy",e.y)}));let C="";(na().flowchart.arrowMarkerAbsolute||na().state.arrowMarkerAbsolute)&&(C=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,C=C.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),et.info("arrowTypeStart",e.arrowTypeStart),et.info("arrowTypeEnd",e.arrowTypeEnd),Kj(v,e,C,s,i,_);let E=c[Math.floor(c.length/2)];kL.isLabelCoordinateInPath(E,v.attr("d"))||(h=!0);let A={};return h&&(A.updatedPath=c),A.originalPath=e.points,A}),"insertEdge"),g(iU,"generateRoundedPath"),g(nU,"calculateDeltaAndAngle"),g(aU,"applyMarkerOffsetsToPoints")})),BU=y((()=>{We(),bU=g(((t,e,r,i)=>{e.forEach((e=>{MU[e](t,r,i)}))}),"insertMarkers"),kU=g(((t,e,r)=>{et.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")}),"extension"),vU=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")}),"composition"),TU=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")}),"aggregation"),wU=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")}),"dependency"),_U=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)}),"lollipop"),SU=g(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")}),"point"),CU=g(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")}),"circle"),EU=g(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")}),"cross"),AU=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}),"barb"),$U=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",r+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")}),"only_one"),LU=g(((t,e,r)=>{let i=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),i.append("path").attr("d","M9,0 L9,18");let n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),n.append("path").attr("d","M21,0 L21,18")}),"zero_or_one"),RU=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",r+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")}),"one_or_more"),IU=g(((t,e,r)=>{let i=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),i.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");let n=t.append("defs").append("marker").attr("id",r+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");n.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),n.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")}),"zero_or_more"),NU=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d","M0,0\n      L20,10\n      M20,10\n      L0,20")}),"requirement_arrow"),DU=g(((t,e,r)=>{let i=t.append("defs").append("marker").attr("id",r+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");i.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),i.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),i.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)}),"requirement_contains"),MU={extension:kU,composition:vU,aggregation:TU,dependency:wU,lollipop:_U,point:SU,circle:CU,cross:EU,barb:AU,only_one:$U,zero_or_one:LU,one_or_more:RU,zero_or_more:IU,requirement_arrow:NU,requirement_contains:DU},OU=bU}));async function FU(t,e,r){let i,n;"rect"===e.shape&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");let a=e.shape?Ej[e.shape]:void 0;if(!a)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let s;"sandbox"===r.config.securityLevel?s="_top":e.linkTarget&&(s=e.linkTarget||"_blank"),i=t.insert("svg:a").attr("xlink:href",e.link).attr("target",s??null),n=await a(i,e,r)}else n=await a(t,e,r),i=n;return e.tooltip&&n.attr("title",e.tooltip),zU.set(e.id,i),e.haveCallback&&i.attr("class",i.attr("class")+" clickable"),i}var zU,jU,UU,WU,qU,YU=y((()=>{We(),zj(),zU=new Map,g(FU,"insertNode"),jU=g(((t,e)=>{zU.set(e.id,t)}),"setNodeElem"),UU=g((()=>{zU.clear()}),"clear"),WU=g((t=>{let e=zU.get(t.id);et.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");let r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r}),"positionNode")})),GU=y((()=>{Ar(),gn(),We(),qj(),PU(),BU(),YU(),UO(),_L(),qU={common:on,getConfig:Re,insertCluster:Bj,insertEdge:xU,insertEdgeLabel:hU,insertMarkers:OU,insertNode:FU,interpolateToCurve:M$,labelHelper:BO,log:et,positionEdgeLabel:uU}}));function HU(t){return"symbol"==typeof t||eE(t)&&vw(t)==VU}var VU,XU,KU=y((()=>{Tw(),rE(),VU="[object Symbol]",g(HU,"isSymbol"),XU=HU}));function QU(t,e){for(var r=-1,i=null==t?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}var ZU,JU=y((()=>{g(QU,"arrayMap"),ZU=QU}));function tW(t){if("string"==typeof t)return t;if(dE(t))return ZU(t,tW)+"";if(XU(t))return iW?iW.call(t):"";var e=t+"";return"0"==e&&1/t==-eW?"-0":e}var eW,rW,iW,nW,aW=y((()=>{nw(),JU(),gE(),KU(),eW=1/0,rW=GT?GT.prototype:void 0,iW=rW?rW.toString:void 0,g(tW,"baseToString"),nW=tW}));function sW(t){for(var e=t.length;e--&&oW.test(t.charAt(e)););return e}var oW,lW,cW=y((()=>{oW=/\s/,g(sW,"trimmedEndIndex"),lW=sW}));function hW(t){return t&&t.slice(0,lW(t)+1).replace(uW,"")}var uW,dW,pW=y((()=>{cW(),uW=/^\s+/,g(hW,"baseTrim"),dW=hW}));function fW(t){if("number"==typeof t)return t;if(XU(t))return gW;if(_w(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=_w(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=dW(t);var r=mW.test(t);return r||xW.test(t)?bW(t.slice(2),r?2:8):yW.test(t)?gW:+t}var gW,yW,mW,xW,bW,kW,vW=y((()=>{pW(),Sw(),KU(),gW=NaN,yW=/^[-+]0x[0-9a-f]+$/i,mW=/^0b[01]+$/i,xW=/^0o[0-7]+$/i,bW=parseInt,g(fW,"toNumber"),kW=fW}));function TW(t){return t?(t=kW(t))===wW||t===-wW?(t<0?-1:1)*_W:t==t?t:0:0===t?t:0}var wW,_W,SW,CW=y((()=>{vW(),wW=1/0,_W=17976931348623157e292,g(TW,"toFinite"),SW=TW}));function EW(t){var e=SW(t),r=e%1;return e==e?r?e-r:e:0}var AW,$W,LW,RW=y((()=>{CW(),g(EW,"toInteger"),AW=EW})),IW=y((()=>{l_(),iw(),$W=a_(qT,"WeakMap"),LW=$W}));function NW(){}var DW,MW=y((()=>{g(NW,"noop"),DW=NW}));function OW(t,e){for(var r=-1,i=null==t?0:t.length;++r<i&&!1!==e(t[r],r,t););return t}var PW,BW=y((()=>{g(OW,"arrayEach"),PW=OW}));function FW(t,e,r,i){for(var n=t.length,a=r+(i?1:-1);i?a--:++a<n;)if(e(t[a],a,t))return a;return-1}var zW,jW=y((()=>{g(FW,"baseFindIndex"),zW=FW}));function UW(t){return t!=t}var WW,qW=y((()=>{g(UW,"baseIsNaN"),WW=UW}));function YW(t,e,r){for(var i=r-1,n=t.length;++i<n;)if(t[i]===e)return i;return-1}var GW,HW=y((()=>{g(YW,"strictIndexOf"),GW=YW}));function VW(t,e,r){return e==e?GW(t,e,r):zW(t,WW,r)}var XW,KW=y((()=>{jW(),qW(),HW(),g(VW,"baseIndexOf"),XW=VW}));function QW(t,e){return!!(null==t?0:t.length)&&XW(t,e,0)>-1}var ZW,JW,tq,eq=y((()=>{KW(),g(QW,"arrayIncludes"),ZW=QW})),rq=y((()=>{YC(),JW=UC(Object.keys,Object),tq=JW}));function iq(t){if(!XC(t))return tq(t);var e=[];for(var r in Object(t))aq.call(t,r)&&"constructor"!=r&&e.push(r);return e}var nq,aq,sq,oq=y((()=>{KC(),rq(),nq=Object.prototype,aq=nq.hasOwnProperty,g(iq,"baseKeys"),sq=iq}));function lq(t){return vE(t)?RA(t):sq(t)}var cq,hq,uq,dq,pq,fq=y((()=>{IA(),oq(),TE(),g(lq,"keys"),cq=lq})),gq=y((()=>{yA(),bA(),N$(),TE(),KC(),fq(),hq=Object.prototype,uq=hq.hasOwnProperty,dq=L$((function(t,e){if(XC(e)||vE(e))xA(e,cq(e),t);else for(var r in e)uq.call(e,r)&&gA(t,r,e[r])})),pq=dq}));function yq(t,e){if(dE(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!XU(t))||(xq.test(t)||!mq.test(t)||null!=e&&t in Object(e))}var mq,xq,bq,kq=y((()=>{gE(),KU(),mq=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xq=/^\w*$/,g(yq,"isKey"),bq=yq}));function vq(t){var e=MS(t,(function(t){return r.size===Tq&&r.clear(),t})),r=e.cache;return e}var Tq,wq,_q,Sq,Cq,Eq,Aq=y((()=>{OS(),Tq=500,g(vq,"memoizeCapped"),wq=vq})),$q=y((()=>{Aq(),_q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sq=/\\(\\)?/g,Cq=wq((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(_q,(function(t,r,i,n){e.push(i?n.replace(Sq,"$1"):r||t)})),e})),Eq=Cq}));function Lq(t){return null==t?"":nW(t)}var Rq,Iq=y((()=>{aW(),g(Lq,"toString"),Rq=Lq}));function Nq(t,e){return dE(t)?t:bq(t,e)?[t]:Eq(Rq(t))}var Dq,Mq=y((()=>{gE(),kq(),$q(),Iq(),g(Nq,"castPath"),Dq=Nq}));function Oq(t){if("string"==typeof t||XU(t))return t;var e=t+"";return"0"==e&&1/t==-Pq?"-0":e}var Pq,Bq,Fq=y((()=>{KU(),Pq=1/0,g(Oq,"toKey"),Bq=Oq}));function zq(t,e){for(var r=0,i=(e=Dq(e,t)).length;null!=t&&r<i;)t=t[Bq(e[r++])];return r&&r==i?t:void 0}var jq,Uq=y((()=>{Mq(),Fq(),g(zq,"baseGet"),jq=zq}));function Wq(t,e,r){var i=null==t?void 0:jq(t,e);return void 0===i?r:i}var qq,Yq=y((()=>{Uq(),g(Wq,"get"),qq=Wq}));function Gq(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}var Hq,Vq=y((()=>{g(Gq,"arrayPush"),Hq=Gq}));function Xq(t){return dE(t)||hE(t)||!!(Kq&&t&&t[Kq])}var Kq,Qq,Zq=y((()=>{nw(),fE(),gE(),Kq=GT?GT.isConcatSpreadable:void 0,g(Xq,"isFlattenable"),Qq=Xq}));function Jq(t,e,r,i,n){var a=-1,s=t.length;for(r||(r=Qq),n||(n=[]);++a<s;){var o=t[a];e>0&&r(o)?e>1?Jq(o,e-1,r,i,n):Hq(n,o):i||(n[n.length]=o)}return n}var tY,eY=y((()=>{Vq(),Zq(),g(Jq,"baseFlatten"),tY=Jq}));function rY(t){return(null==t?0:t.length)?tY(t,1):[]}var iY,nY=y((()=>{eY(),g(rY,"flatten"),iY=rY}));function aY(t){return k$(o$(t,void 0,iY),t+"")}var sY,oY=y((()=>{nY(),l$(),T$(),g(aY,"flatRest"),sY=aY}));function lY(t,e,r){var i=-1,n=t.length;e<0&&(e=-e>n?0:n+e),(r=r>n?n:r)<0&&(r+=n),n=e>r?0:r-e>>>0,e>>>=0;for(var a=Array(n);++i<n;)a[i]=t[i+e];return a}var cY,hY=y((()=>{g(lY,"baseSlice"),cY=lY}));function uY(t){return dY.test(t)}var dY,pY,fY=y((()=>{dY=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),g(uY,"hasUnicode"),pY=uY}));function gY(t,e,r,i){var n=-1,a=null==t?0:t.length;for(i&&a&&(r=t[++n]);++n<a;)r=e(r,t[n],n,t);return r}var yY,mY=y((()=>{g(gY,"arrayReduce"),yY=gY}));function xY(t,e){return t&&xA(e,cq(e),t)}var bY,kY=y((()=>{bA(),fq(),g(xY,"baseAssign"),bY=xY}));function vY(t,e){return t&&xA(e,UA(e),t)}var TY,wY=y((()=>{bA(),WA(),g(vY,"baseAssignIn"),TY=vY}));function _Y(t,e){for(var r=-1,i=null==t?0:t.length,n=0,a=[];++r<i;){var s=t[r];e(s,r,t)&&(a[n++]=s)}return a}var SY,CY=y((()=>{g(_Y,"arrayFilter"),SY=_Y}));function EY(){return[]}var AY,$Y,LY,RY,IY,NY=y((()=>{g(EY,"stubArray"),AY=EY})),DY=y((()=>{CY(),NY(),$Y=Object.prototype,LY=$Y.propertyIsEnumerable,RY=Object.getOwnPropertySymbols,IY=RY?function(t){return null==t?[]:(t=Object(t),SY(RY(t),(function(e){return LY.call(t,e)})))}:AY}));function MY(t,e){return xA(t,IY(t),e)}var OY,PY,BY,FY=y((()=>{bA(),DY(),g(MY,"copySymbols"),OY=MY})),zY=y((()=>{Vq(),GC(),DY(),NY(),PY=Object.getOwnPropertySymbols,BY=PY?function(t){for(var e=[];t;)Hq(e,IY(t)),t=qC(t);return e}:AY}));function jY(t,e){return xA(t,BY(t),e)}var UY,WY=y((()=>{bA(),zY(),g(jY,"copySymbolsIn"),UY=jY}));function qY(t,e,r){var i=e(t);return dE(t)?i:Hq(i,r(t))}var YY,GY=y((()=>{Vq(),gE(),g(qY,"baseGetAllKeys"),YY=qY}));function HY(t){return YY(t,cq,IY)}var VY,XY=y((()=>{GY(),DY(),fq(),g(HY,"getAllKeys"),VY=HY}));function KY(t){return YY(t,UA,BY)}var QY,ZY,JY,tG,eG,rG,iG,nG,aG,sG,oG,lG,cG,hG,uG,dG,pG,fG,gG,yG=y((()=>{GY(),zY(),WA(),g(KY,"getAllKeysIn"),QY=KY})),mG=y((()=>{l_(),iw(),ZY=a_(qT,"DataView"),JY=ZY})),xG=y((()=>{l_(),iw(),tG=a_(qT,"Promise"),eG=tG})),bG=y((()=>{l_(),iw(),rG=a_(qT,"Set"),iG=rG})),kG=y((()=>{mG(),lS(),xG(),bG(),IW(),Tw(),qw(),nG="[object Map]",aG="[object Promise]",sG="[object Set]",oG="[object WeakMap]",lG="[object DataView]",cG=Ww(JY),hG=Ww(sS),uG=Ww(eG),dG=Ww(iG),pG=Ww(LW),fG=vw,(JY&&fG(new JY(new ArrayBuffer(1)))!=lG||sS&&fG(new sS)!=nG||eG&&fG(eG.resolve())!=aG||iG&&fG(new iG)!=sG||LW&&fG(new LW)!=oG)&&(fG=g((function(t){var e=vw(t),r="[object Object]"==e?t.constructor:void 0,i=r?Ww(r):"";if(i)switch(i){case cG:return lG;case hG:return nG;case uG:return aG;case dG:return sG;case pG:return oG}return e}),"getTag")),gG=fG}));function vG(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&wG.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var TG,wG,_G,SG=y((()=>{TG=Object.prototype,wG=TG.hasOwnProperty,g(vG,"initCloneArray"),_G=vG}));function CG(t,e){var r=e?$C(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var EG,AG=y((()=>{LC(),g(CG,"cloneDataView"),EG=CG}));function $G(t){var e=new t.constructor(t.source,LG.exec(t));return e.lastIndex=t.lastIndex,e}var LG,RG,IG=y((()=>{LG=/\w*$/,g($G,"cloneRegExp"),RG=$G}));function NG(t){return MG?Object(MG.call(t)):{}}var DG,MG,OG,PG=y((()=>{nw(),DG=GT?GT.prototype:void 0,MG=DG?DG.valueOf:void 0,g(NG,"cloneSymbol"),OG=NG}));function BG(t,e,r){var i=t.constructor;switch(e){case HG:return $C(t);case FG:case zG:return new i(+t);case VG:return EG(t,r);case XG:case KG:case QG:case ZG:case JG:case tH:case eH:case rH:case iH:return IC(t,r);case jG:return new i;case UG:case YG:return new i(t);case WG:return RG(t);case qG:return new i;case GG:return OG(t)}}var FG,zG,jG,UG,WG,qG,YG,GG,HG,VG,XG,KG,QG,ZG,JG,tH,eH,rH,iH,nH,aH=y((()=>{LC(),AG(),IG(),PG(),NC(),FG="[object Boolean]",zG="[object Date]",jG="[object Map]",UG="[object Number]",WG="[object RegExp]",qG="[object Set]",YG="[object String]",GG="[object Symbol]",HG="[object ArrayBuffer]",VG="[object DataView]",XG="[object Float32Array]",KG="[object Float64Array]",QG="[object Int8Array]",ZG="[object Int16Array]",JG="[object Int32Array]",tH="[object Uint8Array]",eH="[object Uint8ClampedArray]",rH="[object Uint16Array]",iH="[object Uint32Array]",g(BG,"initCloneByTag"),nH=BG}));function sH(t){return eE(t)&&gG(t)==oH}var oH,lH,cH,hH,uH,dH=y((()=>{kG(),rE(),oH="[object Map]",g(sH,"baseIsMap"),lH=sH})),pH=y((()=>{dH(),sA(),oA(),cH=rA&&rA.isMap,hH=cH?KE(cH):lH,uH=hH}));function fH(t){return eE(t)&&gG(t)==gH}var gH,yH,mH,xH,bH,kH=y((()=>{kG(),rE(),gH="[object Set]",g(fH,"baseIsSet"),yH=fH})),vH=y((()=>{kH(),sA(),oA(),mH=rA&&rA.isSet,xH=mH?KE(mH):yH,bH=xH}));function TH(t,e,r,i,n,a){var s,o=e&wH,l=e&_H,c=e&SH;if(r&&(s=n?r(t,i,n,a):r(t)),void 0!==s)return s;if(!_w(t))return t;var h=dE(t);if(h){if(s=_G(t),!o)return MC(t,s)}else{var u=gG(t),d=u==EH||u==AH;if(NE(t))return wC(t,o);if(u==$H||u==CH||d&&!n){if(s=l||d?{}:ZC(t),!o)return l?UY(t,TY(s,t)):OY(t,bY(s,t))}else{if(!LH[u])return n?t:{};s=nH(t,u,o)}}a||(a=new tC);var p=a.get(t);if(p)return p;a.set(t,s),bH(t)?t.forEach((function(i){s.add(TH(i,e,r,i,t,a))})):uH(t)&&t.forEach((function(i,n){s.set(n,TH(i,e,r,n,t,a))}));var f=h?void 0:(c?l?QY:VY:l?UA:cq)(t);return PW(f||t,(function(i,n){f&&(i=t[n=i]),gA(s,n,TH(i,e,r,n,t,a))})),s}var wH,_H,SH,CH,EH,AH,$H,LH,RH,IH=y((()=>{iC(),BW(),yA(),kY(),wY(),CC(),FC(),FY(),WY(),XY(),yG(),kG(),SG(),aH(),JC(),gE(),ME(),pH(),Sw(),vH(),fq(),WA(),wH=1,_H=2,SH=4,EH="[object Function]",AH="[object GeneratorFunction]",$H="[object Object]",(LH={})[CH="[object Arguments]"]=LH["[object Array]"]=LH["[object ArrayBuffer]"]=LH["[object DataView]"]=LH["[object Boolean]"]=LH["[object Date]"]=LH["[object Float32Array]"]=LH["[object Float64Array]"]=LH["[object Int8Array]"]=LH["[object Int16Array]"]=LH["[object Int32Array]"]=LH["[object Map]"]=LH["[object Number]"]=LH[$H]=LH["[object RegExp]"]=LH["[object Set]"]=LH["[object String]"]=LH["[object Symbol]"]=LH["[object Uint8Array]"]=LH["[object Uint8ClampedArray]"]=LH["[object Uint16Array]"]=LH["[object Uint32Array]"]=!0,LH["[object Error]"]=LH[EH]=LH["[object WeakMap]"]=!1,g(TH,"baseClone"),RH=TH}));function NH(t){return RH(t,DH)}var DH,MH,OH=y((()=>{IH(),DH=4,g(NH,"clone"),MH=NH}));function PH(t){return RH(t,BH|FH)}var BH,FH,zH,jH=y((()=>{IH(),BH=1,FH=4,g(PH,"cloneDeep"),zH=PH}));function UH(t){for(var e=-1,r=null==t?0:t.length,i=0,n=[];++e<r;){var a=t[e];a&&(n[i++]=a)}return n}var WH,qH=y((()=>{g(UH,"compact"),WH=UH}));function YH(t){return this.__data__.set(t,GH),this}var GH,HH,VH=y((()=>{GH="__lodash_hash_undefined__",g(YH,"setCacheAdd"),HH=YH}));function XH(t){return this.__data__.has(t)}var KH,QH=y((()=>{g(XH,"setCacheHas"),KH=XH}));function ZH(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new RS;++e<r;)this.add(t[e])}var JH,tV=y((()=>{IS(),VH(),QH(),g(ZH,"SetCache"),ZH.prototype.add=ZH.prototype.push=HH,ZH.prototype.has=KH,JH=ZH}));function eV(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}var rV,iV=y((()=>{g(eV,"arraySome"),rV=eV}));function nV(t,e){return t.has(e)}var aV,sV=y((()=>{g(nV,"cacheHas"),aV=nV}));function oV(t,e,r,i,n,a){var s=r&lV,o=t.length,l=e.length;if(o!=l&&!(s&&l>o))return!1;var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;var u=-1,d=!0,p=r&cV?new JH:void 0;for(a.set(t,e),a.set(e,t);++u<o;){var f=t[u],g=e[u];if(i)var y=s?i(g,f,u,e,t,a):i(f,g,u,t,e,a);if(void 0!==y){if(y)continue;d=!1;break}if(p){if(!rV(e,(function(t,e){if(!aV(p,e)&&(f===t||n(f,t,r,i,a)))return p.push(e)}))){d=!1;break}}else if(f!==g&&!n(f,g,r,i,a)){d=!1;break}}return a.delete(t),a.delete(e),d}var lV,cV,hV,uV=y((()=>{tV(),iV(),sV(),lV=1,cV=2,g(oV,"equalArrays"),hV=oV}));function dV(t){var e=-1,r=Array(t.size);return t.forEach((function(t,i){r[++e]=[i,t]})),r}var pV,fV=y((()=>{g(dV,"mapToArray"),pV=dV}));function gV(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var yV,mV=y((()=>{g(gV,"setToArray"),yV=gV}));function xV(t,e,r,i,n,a,s){switch(r){case RV:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case LV:return!(t.byteLength!=e.byteLength||!a(new SC(t),new SC(e)));case vV:case TV:case SV:return B_(+t,+e);case wV:return t.name==e.name&&t.message==e.message;case CV:case AV:return t==e+"";case _V:var o=pV;case EV:var l=i&bV;if(o||(o=yV),t.size!=e.size&&!l)return!1;var c=s.get(t);if(c)return c==e;i|=kV,s.set(t,e);var h=hV(o(t),o(e),i,n,a,s);return s.delete(t),h;case $V:if(NV)return NV.call(t)==NV.call(e)}return!1}var bV,kV,vV,TV,wV,_V,SV,CV,EV,AV,$V,LV,RV,IV,NV,DV,MV=y((()=>{nw(),EC(),F_(),uV(),fV(),mV(),bV=1,kV=2,vV="[object Boolean]",TV="[object Date]",wV="[object Error]",_V="[object Map]",SV="[object Number]",CV="[object RegExp]",EV="[object Set]",AV="[object String]",$V="[object Symbol]",LV="[object ArrayBuffer]",RV="[object DataView]",IV=GT?GT.prototype:void 0,NV=IV?IV.valueOf:void 0,g(xV,"equalByTag"),DV=xV}));function OV(t,e,r,i,n,a){var s=r&PV,o=VY(t),l=o.length;if(l!=VY(e).length&&!s)return!1;for(var c=l;c--;){var h=o[c];if(!(s?h in e:FV.call(e,h)))return!1}var u=a.get(t),d=a.get(e);if(u&&d)return u==e&&d==t;var p=!0;a.set(t,e),a.set(e,t);for(var f=s;++c<l;){var g=t[h=o[c]],y=e[h];if(i)var m=s?i(y,g,h,e,t,a):i(g,y,h,t,e,a);if(!(void 0===m?g===y||n(g,y,r,i,a):m)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var x=t.constructor,b=e.constructor;x!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b)&&(p=!1)}return a.delete(t),a.delete(e),p}var PV,BV,FV,zV,jV=y((()=>{XY(),PV=1,BV=Object.prototype,FV=BV.hasOwnProperty,g(OV,"equalObjects"),zV=OV}));function UV(t,e,r,i,n,a){var s=dE(t),o=dE(e),l=s?YV:gG(t),c=o?YV:gG(e),h=(l=l==qV?GV:l)==GV,u=(c=c==qV?GV:c)==GV,d=l==c;if(d&&NE(t)){if(!NE(e))return!1;s=!0,h=!1}if(d&&!h)return a||(a=new tC),s||aA(t)?hV(t,e,r,i,n,a):DV(t,e,l,r,i,n,a);if(!(r&WV)){var p=h&&VV.call(t,"__wrapped__"),f=u&&VV.call(e,"__wrapped__");if(p||f){var g=p?t.value():t,y=f?e.value():e;return a||(a=new tC),n(g,y,r,i,a)}}return!!d&&(a||(a=new tC),zV(t,e,r,i,n,a))}var WV,qV,YV,GV,HV,VV,XV,KV=y((()=>{iC(),uV(),MV(),jV(),kG(),gE(),ME(),lA(),WV=1,qV="[object Arguments]",YV="[object Array]",GV="[object Object]",HV=Object.prototype,VV=HV.hasOwnProperty,g(UV,"baseIsEqualDeep"),XV=UV}));function QV(t,e,r,i,n){return t===e||(null==t||null==e||!eE(t)&&!eE(e)?t!=t&&e!=e:XV(t,e,r,i,QV,n))}var ZV,JV=y((()=>{KV(),rE(),g(QV,"baseIsEqual"),ZV=QV}));function tX(t,e,r,i){var n=r.length,a=n,s=!i;if(null==t)return!a;for(t=Object(t);n--;){var o=r[n];if(s&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++n<a;){var l=(o=r[n])[0],c=t[l],h=o[1];if(s&&o[2]){if(void 0===c&&!(l in t))return!1}else{var u=new tC;if(i)var d=i(c,h,l,t,e,u);if(!(void 0===d?ZV(h,c,eX|rX,i,u):d))return!1}}return!0}var eX,rX,iX,nX=y((()=>{iC(),JV(),eX=1,rX=2,g(tX,"baseIsMatch"),iX=tX}));function aX(t){return t==t&&!_w(t)}var sX,oX=y((()=>{Sw(),g(aX,"isStrictComparable"),sX=aX}));function lX(t){for(var e=cq(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,sX(n)]}return e}var cX,hX=y((()=>{oX(),fq(),g(lX,"getMatchData"),cX=lX}));function uX(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}var dX,pX=y((()=>{g(uX,"matchesStrictComparable"),dX=uX}));function fX(t){var e=cX(t);return 1==e.length&&e[0][2]?dX(e[0][0],e[0][1]):function(r){return r===t||iX(r,t,e)}}var gX,yX=y((()=>{nX(),hX(),pX(),g(fX,"baseMatches"),gX=fX}));function mX(t,e){return null!=t&&e in Object(t)}var xX,bX=y((()=>{g(mX,"baseHasIn"),xX=mX}));function kX(t,e,r){for(var i=-1,n=(e=Dq(e,t)).length,a=!1;++i<n;){var s=Bq(e[i]);if(!(a=null!=t&&r(t,s)))break;t=t[s]}return a||++i!=n?a:!!(n=null==t?0:t.length)&&xE(n)&&CA(s,n)&&(dE(t)||hE(t))}var vX,TX=y((()=>{Mq(),fE(),gE(),EA(),bE(),Fq(),g(kX,"hasPath"),vX=kX}));function wX(t,e){return null!=t&&vX(t,e,xX)}var _X,SX=y((()=>{bX(),TX(),g(wX,"hasIn"),_X=wX}));function CX(t,e){return bq(t)&&sX(e)?dX(Bq(t),e):function(r){var i=qq(r,t);return void 0===i&&i===e?_X(r,t):ZV(e,i,EX|AX)}}var EX,AX,$X,LX=y((()=>{JV(),Yq(),SX(),kq(),oX(),pX(),Fq(),EX=1,AX=2,g(CX,"baseMatchesProperty"),$X=CX}));function RX(t){return function(e){return e?.[t]}}var IX,NX=y((()=>{g(RX,"baseProperty"),IX=RX}));function DX(t){return function(e){return jq(e,t)}}var MX,OX=y((()=>{Uq(),g(DX,"basePropertyDeep"),MX=DX}));function PX(t){return bq(t)?IX(Bq(t)):MX(t)}var BX,FX=y((()=>{NX(),OX(),kq(),Fq(),g(PX,"property"),BX=PX}));function zX(t){return"function"==typeof t?t:null==t?t$:"object"==typeof t?dE(t)?$X(t[0],t[1]):gX(t):BX(t)}var jX,UX=y((()=>{yX(),LX(),e$(),gE(),FX(),g(zX,"baseIteratee"),jX=zX}));function WX(t,e,r,i){for(var n=-1,a=null==t?0:t.length;++n<a;){var s=t[n];e(i,s,r(s),t)}return i}var qX,YX=y((()=>{g(WX,"arrayAggregator"),qX=WX}));function GX(t,e){return t&&fC(t,e,cq)}var HX,VX=y((()=>{yC(),fq(),g(GX,"baseForOwn"),HX=GX}));function XX(t,e){return function(r,i){if(null==r)return r;if(!vE(r))return t(r,i);for(var n=r.length,a=e?n:-1,s=Object(r);(e?a--:++a<n)&&!1!==i(s[a],a,s););return r}}var KX,QX,ZX,JX=y((()=>{TE(),g(XX,"createBaseEach"),KX=XX})),tK=y((()=>{VX(),JX(),QX=KX(HX),ZX=QX}));function eK(t,e,r,i){return ZX(t,(function(t,n,a){e(i,t,r(t),a)})),i}var rK,iK=y((()=>{tK(),g(eK,"baseAggregator"),rK=eK}));function nK(t,e){return function(r,i){var n=dE(r)?qX:rK,a=e?e():{};return n(r,t,jX(i,2),a)}}var aK,sK,oK,lK,cK,hK,uK,dK=y((()=>{YX(),iK(),UX(),gE(),g(nK,"createAggregator"),aK=nK})),pK=y((()=>{iw(),sK=g((function(){return qT.Date.now()}),"now"),oK=sK})),fK=y((()=>{S$(),F_(),A$(),WA(),lK=Object.prototype,cK=lK.hasOwnProperty,hK=_$((function(t,e){t=Object(t);var r=-1,i=e.length,n=i>2?e[2]:void 0;for(n&&E$(e[0],e[1],n)&&(i=1);++r<i;)for(var a=e[r],s=UA(a),o=-1,l=s.length;++o<l;){var c=s[o],h=t[c];(void 0===h||B_(h,lK[c])&&!cK.call(t,c))&&(t[c]=a[c])}return t})),uK=hK}));function gK(t,e,r){for(var i=-1,n=null==t?0:t.length;++i<n;)if(r(e,t[i]))return!0;return!1}var yK,mK=y((()=>{g(gK,"arrayIncludesWith"),yK=gK}));function xK(t,e,r,i){var n=-1,a=ZW,s=!0,o=t.length,l=[],c=e.length;if(!o)return l;r&&(e=ZU(e,KE(r))),i?(a=yK,s=!1):e.length>=bK&&(a=aV,s=!1,e=new JH(e));t:for(;++n<o;){var h=t[n],u=null==r?h:r(h);if(h=i||0!==h?h:0,s&&u==u){for(var d=c;d--;)if(e[d]===u)continue t;l.push(h)}else a(e,u,i)||l.push(h)}return l}var bK,kK,vK,TK,wK=y((()=>{tV(),eq(),mK(),JU(),sA(),sV(),bK=200,g(xK,"baseDifference"),kK=xK})),_K=y((()=>{wK(),eY(),S$(),SE(),vK=_$((function(t,e){return _E(t)?kK(t,tY(e,1,_E,!0)):[]})),TK=vK}));function SK(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}var CK,EK=y((()=>{g(SK,"last"),CK=SK}));function AK(t,e,r){var i=null==t?0:t.length;return i?(e=r||void 0===e?1:AW(e),cY(t,e<0?0:e,i)):[]}var $K,LK=y((()=>{hY(),RW(),g(AK,"drop"),$K=AK}));function RK(t,e,r){var i=null==t?0:t.length;return i?(e=r||void 0===e?1:AW(e),cY(t,0,(e=i-e)<0?0:e)):[]}var IK,NK=y((()=>{hY(),RW(),g(RK,"dropRight"),IK=RK}));function DK(t){return"function"==typeof t?t:t$}var MK,OK=y((()=>{e$(),g(DK,"castFunction"),MK=DK}));function PK(t,e){return(dE(t)?PW:ZX)(t,MK(e))}var BK,FK=y((()=>{BW(),tK(),OK(),gE(),g(PK,"forEach"),BK=PK})),zK=y((()=>{FK()}));function jK(t,e){for(var r=-1,i=null==t?0:t.length;++r<i;)if(!e(t[r],r,t))return!1;return!0}var UK,WK=y((()=>{g(jK,"arrayEvery"),UK=jK}));function qK(t,e){var r=!0;return ZX(t,(function(t,i,n){return r=!!e(t,i,n)})),r}var YK,GK=y((()=>{tK(),g(qK,"baseEvery"),YK=qK}));function HK(t,e,r){var i=dE(t)?UK:YK;return r&&E$(t,e,r)&&(e=void 0),i(t,jX(e,3))}var VK,XK=y((()=>{WK(),GK(),UX(),gE(),A$(),g(HK,"every"),VK=HK}));function KK(t,e){var r=[];return ZX(t,(function(t,i,n){e(t,i,n)&&r.push(t)})),r}var QK,ZK=y((()=>{tK(),g(KK,"baseFilter"),QK=KK}));function JK(t,e){return(dE(t)?SY:QK)(t,jX(e,3))}var tQ,eQ=y((()=>{CY(),ZK(),UX(),gE(),g(JK,"filter"),tQ=JK}));function rQ(t){return function(e,r,i){var n=Object(e);if(!vE(e)){var a=jX(r,3);e=cq(e),r=g((function(t){return a(n[t],t,n)}),"predicate")}var s=t(e,r,i);return s>-1?n[a?e[s]:s]:void 0}}var iQ,nQ=y((()=>{UX(),TE(),fq(),g(rQ,"createFind"),iQ=rQ}));function aQ(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var n=null==r?0:AW(r);return n<0&&(n=sQ(i+n,0)),zW(t,jX(e,3),n)}var sQ,oQ,lQ,cQ,hQ=y((()=>{jW(),UX(),RW(),sQ=Math.max,g(aQ,"findIndex"),oQ=aQ})),uQ=y((()=>{nQ(),hQ(),lQ=iQ(oQ),cQ=lQ}));function dQ(t){return t&&t.length?t[0]:void 0}var pQ,fQ=y((()=>{g(dQ,"head"),pQ=dQ})),gQ=y((()=>{fQ()}));function yQ(t,e){var r=-1,i=vE(t)?Array(t.length):[];return ZX(t,(function(t,n,a){i[++r]=e(t,n,a)})),i}var mQ,xQ=y((()=>{tK(),TE(),g(yQ,"baseMap"),mQ=yQ}));function bQ(t,e){return(dE(t)?ZU:mQ)(t,jX(e,3))}var kQ,vQ=y((()=>{JU(),UX(),xQ(),gE(),g(bQ,"map"),kQ=bQ}));function TQ(t,e){return tY(kQ(t,e),1)}var wQ,_Q=y((()=>{eY(),vQ(),g(TQ,"flatMap"),wQ=TQ}));function SQ(t,e){return null==t?t:fC(t,MK(e),UA)}var CQ,EQ=y((()=>{yC(),OK(),WA(),g(SQ,"forIn"),CQ=SQ}));function AQ(t,e){return t&&HX(t,MK(e))}var $Q,LQ,RQ,IQ,NQ,DQ=y((()=>{VX(),OK(),g(AQ,"forOwn"),$Q=AQ})),MQ=y((()=>{oC(),dK(),LQ=Object.prototype,RQ=LQ.hasOwnProperty,IQ=aK((function(t,e,r){RQ.call(t,r)?t[r].push(e):sC(t,r,[e])})),NQ=IQ}));function OQ(t,e){return t>e}var PQ,BQ=y((()=>{g(OQ,"baseGt"),PQ=OQ}));function FQ(t,e){return null!=t&&jQ.call(t,e)}var zQ,jQ,UQ,WQ=y((()=>{zQ=Object.prototype,jQ=zQ.hasOwnProperty,g(FQ,"baseHas"),UQ=FQ}));function qQ(t,e){return null!=t&&vX(t,e,UQ)}var YQ,GQ=y((()=>{WQ(),TX(),g(qQ,"has"),YQ=qQ}));function HQ(t){return"string"==typeof t||!dE(t)&&eE(t)&&vw(t)==VQ}var VQ,XQ,KQ=y((()=>{Tw(),gE(),rE(),VQ="[object String]",g(HQ,"isString"),XQ=HQ}));function QQ(t,e){return ZU(e,(function(e){return t[e]}))}var ZQ,JQ=y((()=>{JU(),g(QQ,"baseValues"),ZQ=QQ}));function tZ(t){return null==t?[]:ZQ(t,cq(t))}var eZ,rZ=y((()=>{JQ(),fq(),g(tZ,"values"),eZ=tZ}));function iZ(t,e,r,i){t=vE(t)?t:eZ(t),r=r&&!i?AW(r):0;var n=t.length;return r<0&&(r=nZ(n+r,0)),XQ(t)?r<=n&&t.indexOf(e,r)>-1:!!n&&XW(t,e,r)>-1}var nZ,aZ,sZ=y((()=>{KW(),TE(),KQ(),RW(),rZ(),nZ=Math.max,g(iZ,"includes"),aZ=iZ}));function oZ(t,e,r){var i=null==t?0:t.length;if(!i)return-1;var n=null==r?0:AW(r);return n<0&&(n=lZ(i+n,0)),XW(t,e,n)}var lZ,cZ,hZ=y((()=>{KW(),RW(),lZ=Math.max,g(oZ,"indexOf"),cZ=oZ}));function uZ(t){if(null==t)return!0;if(vE(t)&&(dE(t)||"string"==typeof t||"function"==typeof t.splice||NE(t)||aA(t)||hE(t)))return!t.length;var e=gG(t);if(e==dZ||e==pZ)return!t.size;if(XC(t))return!sq(t).length;for(var r in t)if(gZ.call(t,r))return!1;return!0}var dZ,pZ,fZ,gZ,yZ,mZ=y((()=>{oq(),kG(),fE(),gE(),TE(),ME(),KC(),lA(),dZ="[object Map]",pZ="[object Set]",fZ=Object.prototype,gZ=fZ.hasOwnProperty,g(uZ,"isEmpty"),yZ=uZ}));function xZ(t){return eE(t)&&vw(t)==bZ}var bZ,kZ,vZ,TZ,wZ,_Z=y((()=>{Tw(),rE(),bZ="[object RegExp]",g(xZ,"baseIsRegExp"),kZ=xZ})),SZ=y((()=>{_Z(),sA(),oA(),vZ=rA&&rA.isRegExp,TZ=vZ?KE(vZ):kZ,wZ=TZ}));function CZ(t){return void 0===t}var EZ,AZ=y((()=>{g(CZ,"isUndefined"),EZ=CZ}));function $Z(t,e){return t<e}var LZ,RZ=y((()=>{g($Z,"baseLt"),LZ=$Z}));function IZ(t,e){var r={};return e=jX(e,3),HX(t,(function(t,i,n){sC(r,i,e(t,i,n))})),r}var NZ,DZ=y((()=>{oC(),VX(),UX(),g(IZ,"mapValues"),NZ=IZ}));function MZ(t,e,r){for(var i=-1,n=t.length;++i<n;){var a=t[i],s=e(a);if(null!=s&&(void 0===o?s==s&&!XU(s):r(s,o)))var o=s,l=a}return l}var OZ,PZ=y((()=>{KU(),g(MZ,"baseExtremum"),OZ=MZ}));function BZ(t){return t&&t.length?OZ(t,t$,PQ):void 0}var FZ,zZ=y((()=>{PZ(),BQ(),e$(),g(BZ,"max"),FZ=BZ}));function jZ(t){return t&&t.length?OZ(t,t$,LZ):void 0}var UZ,WZ=y((()=>{PZ(),RZ(),e$(),g(jZ,"min"),UZ=jZ}));function qZ(t,e){return t&&t.length?OZ(t,jX(e,2),LZ):void 0}var YZ,GZ=y((()=>{PZ(),UX(),RZ(),g(qZ,"minBy"),YZ=qZ}));function HZ(t){if("function"!=typeof t)throw new TypeError(VZ);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var VZ,XZ,KZ=y((()=>{VZ="Expected a function",g(HZ,"negate"),XZ=HZ}));function QZ(t,e,r,i){if(!_w(t))return t;for(var n=-1,a=(e=Dq(e,t)).length,s=a-1,o=t;null!=o&&++n<a;){var l=Bq(e[n]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(n!=s){var h=o[l];void 0===(c=i?i(h,l,o):void 0)&&(c=_w(h)?h:CA(e[n+1])?[]:{})}gA(o,l,c),o=o[l]}return t}var ZZ,JZ=y((()=>{yA(),Mq(),EA(),Sw(),Fq(),g(QZ,"baseSet"),ZZ=QZ}));function tJ(t,e,r){for(var i=-1,n=e.length,a={};++i<n;){var s=e[i],o=jq(t,s);r(o,s)&&ZZ(a,Dq(s,t),o)}return a}var eJ,rJ=y((()=>{Uq(),JZ(),Mq(),g(tJ,"basePickBy"),eJ=tJ}));function iJ(t,e){if(null==t)return{};var r=ZU(QY(t),(function(t){return[t]}));return e=jX(e),eJ(t,r,(function(t,r){return e(t,r[0])}))}var nJ,aJ=y((()=>{JU(),UX(),rJ(),yG(),g(iJ,"pickBy"),nJ=iJ}));function sJ(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var oJ,lJ=y((()=>{g(sJ,"baseSortBy"),oJ=sJ}));function cJ(t,e){if(t!==e){var r=void 0!==t,i=null===t,n=t==t,a=XU(t),s=void 0!==e,o=null===e,l=e==e,c=XU(e);if(!o&&!c&&!a&&t>e||a&&s&&l&&!o&&!c||i&&s&&l||!r&&l||!n)return 1;if(!i&&!a&&!c&&t<e||c&&r&&n&&!i&&!a||o&&r&&n||!s&&n||!l)return-1}return 0}var hJ,uJ=y((()=>{KU(),g(cJ,"compareAscending"),hJ=cJ}));function dJ(t,e,r){for(var i=-1,n=t.criteria,a=e.criteria,s=n.length,o=r.length;++i<s;){var l=hJ(n[i],a[i]);if(l)return i>=o?l:l*("desc"==r[i]?-1:1)}return t.index-e.index}var pJ,fJ=y((()=>{uJ(),g(dJ,"compareMultiple"),pJ=dJ}));function gJ(t,e,r){e=e.length?ZU(e,(function(t){return dE(t)?function(e){return jq(e,1===t.length?t[0]:t)}:t})):[t$];var i=-1;e=ZU(e,KE(jX));var n=mQ(t,(function(t,r,n){return{criteria:ZU(e,(function(e){return e(t)})),index:++i,value:t}}));return oJ(n,(function(t,e){return pJ(t,e,r)}))}var yJ,mJ,xJ,bJ=y((()=>{JU(),Uq(),UX(),xQ(),lJ(),sA(),fJ(),e$(),gE(),g(gJ,"baseOrderBy"),yJ=gJ})),kJ=y((()=>{NX(),mJ=IX("length"),xJ=mJ}));function vJ(t){for(var e=DJ.lastIndex=0;DJ.test(t);)++e;return e}var TJ,wJ,_J,SJ,CJ,EJ,AJ,$J,LJ,RJ,IJ,NJ,DJ,MJ,OJ=y((()=>{wJ="["+(TJ="\\ud800-\\udfff")+"]",$J="(?:"+(_J="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]")+"|"+(SJ="\\ud83c[\\udffb-\\udfff]")+")"+"?",LJ="[\\ufe0e\\ufe0f]?",RJ="(?:\\u200d(?:"+[CJ="[^"+TJ+"]",EJ="(?:\\ud83c[\\udde6-\\uddff]){2}",AJ="[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")"+LJ+$J+")*",IJ=LJ+$J+RJ,NJ="(?:"+[CJ+_J+"?",_J,EJ,AJ,wJ].join("|")+")",DJ=RegExp(SJ+"(?="+SJ+")|"+NJ+IJ,"g"),g(vJ,"unicodeSize"),MJ=vJ}));function PJ(t){return pY(t)?MJ(t):xJ(t)}var BJ,FJ=y((()=>{kJ(),fY(),OJ(),g(PJ,"stringSize"),BJ=PJ}));function zJ(t,e){return eJ(t,e,(function(e,r){return _X(t,r)}))}var jJ,UJ,WJ,qJ=y((()=>{rJ(),SX(),g(zJ,"basePick"),jJ=zJ})),YJ=y((()=>{qJ(),oY(),UJ=sY((function(t,e){return null==t?{}:jJ(t,e)})),WJ=UJ}));function GJ(t,e,r,i){for(var n=-1,a=VJ(HJ((e-t)/(r||1)),0),s=Array(a);a--;)s[i?a:++n]=t,t+=r;return s}var HJ,VJ,XJ,KJ=y((()=>{HJ=Math.ceil,VJ=Math.max,g(GJ,"baseRange"),XJ=GJ}));function QJ(t){return function(e,r,i){return i&&"number"!=typeof i&&E$(e,r,i)&&(r=i=void 0),e=SW(e),void 0===r?(r=e,e=0):r=SW(r),i=void 0===i?e<r?1:-1:SW(i),XJ(e,r,i,t)}}var ZJ,JJ,t1,e1=y((()=>{KJ(),A$(),CW(),g(QJ,"createRange"),ZJ=QJ})),r1=y((()=>{e1(),JJ=ZJ(),t1=JJ}));function i1(t,e,r,i,n){return n(t,(function(t,n,a){r=i?(i=!1,t):e(r,t,n,a)})),r}var n1,a1=y((()=>{g(i1,"baseReduce"),n1=i1}));function s1(t,e,r){var i=dE(t)?yY:n1,n=arguments.length<3;return i(t,jX(e,4),r,n,ZX)}var o1,l1=y((()=>{mY(),tK(),UX(),a1(),gE(),g(s1,"reduce"),o1=s1}));function c1(t,e){return(dE(t)?SY:QK)(t,XZ(jX(e,3)))}var h1,u1=y((()=>{CY(),ZK(),UX(),gE(),KZ(),g(c1,"reject"),h1=c1}));function d1(t){if(null==t)return 0;if(vE(t))return XQ(t)?BJ(t):t.length;var e=gG(t);return e==p1||e==f1?t.size:sq(t).length}var p1,f1,g1,y1=y((()=>{oq(),kG(),TE(),KQ(),FJ(),p1="[object Map]",f1="[object Set]",g(d1,"size"),g1=d1}));function m1(t,e){var r;return ZX(t,(function(t,i,n){return!(r=e(t,i,n))})),!!r}var x1,b1=y((()=>{tK(),g(m1,"baseSome"),x1=m1}));function k1(t,e,r){var i=dE(t)?rV:x1;return r&&E$(t,e,r)&&(e=void 0),i(t,jX(e,3))}var v1,T1,w1,_1,S1,C1,E1=y((()=>{iV(),UX(),b1(),gE(),A$(),g(k1,"some"),v1=k1})),A1=y((()=>{eY(),bJ(),S$(),A$(),T1=_$((function(t,e){if(null==t)return[];var r=e.length;return r>1&&E$(t,e[0],e[1])?e=[]:r>2&&E$(e[0],e[1],e[2])&&(e=[e[0]]),yJ(t,tY(e,1),[])})),w1=T1})),$1=y((()=>{bG(),MW(),mV(),_1=1/0,S1=iG&&1/yV(new iG([,-0]))[1]==_1?function(t){return new iG(t)}:DW,C1=S1}));function L1(t,e,r){var i=-1,n=ZW,a=t.length,s=!0,o=[],l=o;if(r)s=!1,n=yK;else if(a>=R1){var c=e?null:C1(t);if(c)return yV(c);s=!1,n=aV,l=new JH}else l=e?[]:o;t:for(;++i<a;){var h=t[i],u=e?e(h):h;if(h=r||0!==h?h:0,s&&u==u){for(var d=l.length;d--;)if(l[d]===u)continue t;e&&l.push(u),o.push(h)}else n(l,u,r)||(l!==o&&l.push(u),o.push(h))}return o}var R1,I1,N1,D1,M1=y((()=>{tV(),eq(),mK(),sV(),$1(),mV(),R1=200,g(L1,"baseUniq"),I1=L1})),O1=y((()=>{eY(),S$(),M1(),SE(),N1=_$((function(t){return I1(tY(t,1,_E,!0))})),D1=N1}));function P1(t){return t&&t.length?I1(t):[]}var B1,F1=y((()=>{M1(),g(P1,"uniq"),B1=P1}));function z1(t,e){return t&&t.length?I1(t,jX(e,2)):[]}var j1,U1=y((()=>{UX(),M1(),g(z1,"uniqBy"),j1=z1}));function W1(t){var e=++q1;return Rq(t)+e}var q1,Y1,G1=y((()=>{Iq(),q1=0,g(W1,"uniqueId"),Y1=W1}));function H1(t,e,r){for(var i=-1,n=t.length,a=e.length,s={};++i<n;){var o=i<a?e[i]:void 0;r(s,t[i],o)}return s}var V1,X1=y((()=>{g(H1,"baseZipObject"),V1=H1}));function K1(t,e){return V1(t||[],e||[],gA)}var Q1,Z1=y((()=>{yA(),X1(),g(K1,"zipObject"),Q1=K1})),J1=y((()=>{gq(),OH(),jH(),qH(),d$(),fK(),_K(),LK(),NK(),zK(),XK(),eQ(),uQ(),gQ(),_Q(),nY(),FK(),EQ(),DQ(),MQ(),GQ(),e$(),sZ(),hZ(),gE(),mZ(),Dw(),Sw(),SZ(),KQ(),AZ(),fq(),EK(),vQ(),DZ(),zZ(),D$(),WZ(),GZ(),MW(),pK(),YJ(),aJ(),r1(),l1(),u1(),y1(),E1(),A1(),O1(),F1(),G1(),rZ(),Z1()}));function t0(t,e){t[e]?t[e]++:t[e]=1}function e0(t,e){--t[e]||delete t[e]}function r0(t,e,r,i){var n=""+e,a=""+r;if(!t&&n>a){var s=n;n=a,a=s}return n+o0+a+o0+(EZ(i)?a0:i)}function i0(t,e,r,i){var n=""+e,a=""+r;if(!t&&n>a){var s=n;n=a,a=s}var o={v:n,w:a};return i&&(o.name=i),o}function n0(t,e){return r0(t,e.v,e.w,e.name)}var a0,s0,o0,l0,c0=y((()=>{J1(),a0="\0",s0="\0",o0="",(l0=class{static{g(this,"Graph")}constructor(t={}){this._isDirected=!Object.prototype.hasOwnProperty.call(t,"directed")||t.directed,this._isMultigraph=!!Object.prototype.hasOwnProperty.call(t,"multigraph")&&t.multigraph,this._isCompound=!!Object.prototype.hasOwnProperty.call(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=h$(void 0),this._defaultEdgeLabelFn=h$(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[s0]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(t){return this._label=t,this}graph(){return this._label}setDefaultNodeLabel(t){return Rw(t)||(t=h$(t)),this._defaultNodeLabelFn=t,this}nodeCount(){return this._nodeCount}nodes(){return cq(this._nodes)}sources(){var t=this;return tQ(this.nodes(),(function(e){return yZ(t._in[e])}))}sinks(){var t=this;return tQ(this.nodes(),(function(e){return yZ(t._out[e])}))}setNodes(t,e){var r=arguments,i=this;return BK(t,(function(t){r.length>1?i.setNode(t,e):i.setNode(t)})),this}setNode(t,e){return Object.prototype.hasOwnProperty.call(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=s0,this._children[t]={},this._children[s0][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)}node(t){return this._nodes[t]}hasNode(t){return Object.prototype.hasOwnProperty.call(this._nodes,t)}removeNode(t){if(Object.prototype.hasOwnProperty.call(this._nodes,t)){var e=g((t=>this.removeEdge(this._edgeObjs[t])),"removeEdge");delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],BK(this.children(t),(t=>{this.setParent(t)})),delete this._children[t]),BK(cq(this._in[t]),e),delete this._in[t],delete this._preds[t],BK(cq(this._out[t]),e),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this}setParent(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(EZ(e))e=s0;else{for(var r=e+="";!EZ(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this}_removeFromParentsChildList(t){delete this._children[this._parent[t]][t]}parent(t){if(this._isCompound){var e=this._parent[t];if(e!==s0)return e}}children(t){if(EZ(t)&&(t=s0),this._isCompound){var e=this._children[t];if(e)return cq(e)}else{if(t===s0)return this.nodes();if(this.hasNode(t))return[]}}predecessors(t){var e=this._preds[t];if(e)return cq(e)}successors(t){var e=this._sucs[t];if(e)return cq(e)}neighbors(t){var e=this.predecessors(t);if(e)return D1(e,this.successors(t))}isLeaf(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length}filterNodes(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;BK(this._nodes,(function(r,i){t(i)&&e.setNode(i,r)})),BK(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,r.edge(t))}));var i={};function n(t){var a=r.parent(t);return void 0===a||e.hasNode(a)?(i[t]=a,a):a in i?i[a]:n(a)}return g(n,"findParent"),this._isCompound&&BK(e.nodes(),(function(t){e.setParent(t,n(t))})),e}setDefaultEdgeLabel(t){return Rw(t)||(t=h$(t)),this._defaultEdgeLabelFn=t,this}edgeCount(){return this._edgeCount}edges(){return eZ(this._edgeObjs)}setPath(t,e){var r=this,i=arguments;return o1(t,(function(t,n){return i.length>1?r.setEdge(t,n,e):r.setEdge(t,n),n})),this}setEdge(){var t,e,r,i,n=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(t=a.v,e=a.w,r=a.name,2===arguments.length&&(i=arguments[1],n=!0)):(t=a,e=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],n=!0)),t=""+t,e=""+e,EZ(r)||(r=""+r);var s=r0(this._isDirected,t,e,r);if(Object.prototype.hasOwnProperty.call(this._edgeLabels,s))return n&&(this._edgeLabels[s]=i),this;if(!EZ(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[s]=n?i:this._defaultEdgeLabelFn(t,e,r);var o=i0(this._isDirected,t,e,r);return t=o.v,e=o.w,Object.freeze(o),this._edgeObjs[s]=o,t0(this._preds[e],t),t0(this._sucs[t],e),this._in[e][s]=o,this._out[t][s]=o,this._edgeCount++,this}edge(t,e,r){var i=1===arguments.length?n0(this._isDirected,arguments[0]):r0(this._isDirected,t,e,r);return this._edgeLabels[i]}hasEdge(t,e,r){var i=1===arguments.length?n0(this._isDirected,arguments[0]):r0(this._isDirected,t,e,r);return Object.prototype.hasOwnProperty.call(this._edgeLabels,i)}removeEdge(t,e,r){var i=1===arguments.length?n0(this._isDirected,arguments[0]):r0(this._isDirected,t,e,r),n=this._edgeObjs[i];return n&&(t=n.v,e=n.w,delete this._edgeLabels[i],delete this._edgeObjs[i],e0(this._preds[e],t),e0(this._sucs[t],e),delete this._in[e][i],delete this._out[t][i],this._edgeCount--),this}inEdges(t,e){var r=this._in[t];if(r){var i=eZ(r);return e?tQ(i,(function(t){return t.v===e})):i}}outEdges(t,e){var r=this._out[t];if(r){var i=eZ(r);return e?tQ(i,(function(t){return t.w===e})):i}}nodeEdges(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))}}).prototype._nodeCount=0,l0.prototype._edgeCount=0,g(t0,"incrementOrInitEntry"),g(e0,"decrementOrRemoveEntry"),g(r0,"edgeArgsToId"),g(i0,"edgeArgsToObj"),g(n0,"edgeObjToId")})),h0=y((()=>{c0()}));function u0(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function d0(t,e){if("_next"!==t&&"_prev"!==t)return e}var p0,f0=y((()=>{p0=class{static{g(this,"List")}constructor(){var t={};t._next=t._prev=t,this._sentinel=t}dequeue(){var t=this._sentinel,e=t._prev;if(e!==t)return u0(e),e}enqueue(t){var e=this._sentinel;t._prev&&t._next&&u0(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e}toString(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,d0)),r=r._prev;return"["+t.join(", ")+"]"}},g(u0,"unlink"),g(d0,"filterOutLinks")}));function g0(t,e){if(t.nodeCount()<=1)return[];var r=x0(t,e||k0),i=y0(r.graph,r.buckets,r.zeroIdx);return iY(kQ(i,(function(e){return t.outEdges(e.v,e.w)})))}function y0(t,e,r){for(var i,n=[],a=e[e.length-1],s=e[0];t.nodeCount();){for(;i=s.dequeue();)m0(t,e,r,i);for(;i=a.dequeue();)m0(t,e,r,i);if(t.nodeCount())for(var o=e.length-2;o>0;--o)if(i=e[o].dequeue()){n=n.concat(m0(t,e,r,i,!0));break}}return n}function m0(t,e,r,i,n){var a=n?[]:void 0;return BK(t.inEdges(i.v),(function(i){var s=t.edge(i),o=t.node(i.v);n&&a.push({v:i.v,w:i.w}),o.out-=s,b0(e,r,o)})),BK(t.outEdges(i.v),(function(i){var n=t.edge(i),a=i.w,s=t.node(a);s.in-=n,b0(e,r,s)})),t.removeNode(i.v),a}function x0(t,e){var r=new l0,i=0,n=0;BK(t.nodes(),(function(t){r.setNode(t,{v:t,in:0,out:0})})),BK(t.edges(),(function(t){var a=r.edge(t.v,t.w)||0,s=e(t),o=a+s;r.setEdge(t.v,t.w,o),n=Math.max(n,r.node(t.v).out+=s),i=Math.max(i,r.node(t.w).in+=s)}));var a=t1(n+i+3).map((function(){return new p0})),s=i+1;return BK(r.nodes(),(function(t){b0(a,s,r.node(t))})),{graph:r,buckets:a,zeroIdx:s}}function b0(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}var k0,v0=y((()=>{J1(),h0(),f0(),k0=h$(1),g(g0,"greedyFAS"),g(y0,"doGreedyFAS"),g(m0,"removeNode"),g(x0,"buildState"),g(b0,"assignBucket")}));function T0(t){var e="greedy"===t.graph().acyclicer?g0(t,r(t)):w0(t);function r(t){return function(e){return t.edge(e).weight}}BK(e,(function(e){var r=t.edge(e);t.removeEdge(e),r.forwardName=e.name,r.reversed=!0,t.setEdge(e.w,e.v,r,Y1("rev"))})),g(r,"weightFn")}function w0(t){var e=[],r={},i={};function n(a){Object.prototype.hasOwnProperty.call(i,a)||(i[a]=!0,r[a]=!0,BK(t.outEdges(a),(function(t){Object.prototype.hasOwnProperty.call(r,t.w)?e.push(t):n(t.w)})),delete r[a])}return g(n,"dfs"),BK(t.nodes(),n),e}function _0(t){BK(t.edges(),(function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var i=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,i)}}))}var S0=y((()=>{J1(),v0(),g(T0,"run"),g(w0,"dfsFAS"),g(_0,"undo")}));function C0(t,e,r,i){var n;do{n=Y1(i)}while(t.hasNode(n));return r.dummy=e,t.setNode(n,r),n}function E0(t){var e=(new l0).setGraph(t.graph());return BK(t.nodes(),(function(r){e.setNode(r,t.node(r))})),BK(t.edges(),(function(r){var i=e.edge(r.v,r.w)||{weight:0,minlen:1},n=t.edge(r);e.setEdge(r.v,r.w,{weight:i.weight+n.weight,minlen:Math.max(i.minlen,n.minlen)})})),e}function A0(t){var e=new l0({multigraph:t.isMultigraph()}).setGraph(t.graph());return BK(t.nodes(),(function(r){t.children(r).length||e.setNode(r,t.node(r))})),BK(t.edges(),(function(r){e.setEdge(r,t.edge(r))})),e}function $0(t,e){var r,i,n=t.x,a=t.y,s=e.x-n,o=e.y-a,l=t.width/2,c=t.height/2;if(!s&&!o)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(o)*l>Math.abs(s)*c?(o<0&&(c=-c),r=c*s/o,i=c):(s<0&&(l=-l),r=l,i=l*o/s),{x:n+r,y:a+i}}function L0(t){var e=kQ(t1(D0(t)+1),(function(){return[]}));return BK(t.nodes(),(function(r){var i=t.node(r),n=i.rank;EZ(n)||(e[n][i.order]=r)})),e}function R0(t){var e=UZ(kQ(t.nodes(),(function(e){return t.node(e).rank})));BK(t.nodes(),(function(r){var i=t.node(r);YQ(i,"rank")&&(i.rank-=e)}))}function I0(t){var e=UZ(kQ(t.nodes(),(function(e){return t.node(e).rank}))),r=[];BK(t.nodes(),(function(i){var n=t.node(i).rank-e;r[n]||(r[n]=[]),r[n].push(i)}));var i=0,n=t.graph().nodeRankFactor;BK(r,(function(e,r){EZ(e)&&r%n!=0?--i:i&&BK(e,(function(e){t.node(e).rank+=i}))}))}function N0(t,e,r,i){var n={width:0,height:0};return arguments.length>=4&&(n.rank=r,n.order=i),C0(t,"border",n,e)}function D0(t){return FZ(kQ(t.nodes(),(function(e){var r=t.node(e).rank;if(!EZ(r))return r})))}function M0(t,e){var r={lhs:[],rhs:[]};return BK(t,(function(t){e(t)?r.lhs.push(t):r.rhs.push(t)})),r}function O0(t,e){var r=oK();try{return e()}finally{console.log(t+" time: "+(oK()-r)+"ms")}}function P0(t,e){return e()}var B0=y((()=>{J1(),h0(),g(C0,"addDummyNode"),g(E0,"simplify"),g(A0,"asNonCompoundGraph"),g($0,"intersectRect"),g(L0,"buildLayerMatrix"),g(R0,"normalizeRanks"),g(I0,"removeEmptyRanks"),g(N0,"addBorderNode"),g(D0,"maxRank"),g(M0,"partition"),g(O0,"time"),g(P0,"notime")}));function F0(t){function e(r){var i=t.children(r),n=t.node(r);if(i.length&&BK(i,e),Object.prototype.hasOwnProperty.call(n,"minRank")){n.borderLeft=[],n.borderRight=[];for(var a=n.minRank,s=n.maxRank+1;a<s;++a)z0(t,"borderLeft","_bl",r,n,a),z0(t,"borderRight","_br",r,n,a)}}g(e,"dfs"),BK(t.children(),e)}function z0(t,e,r,i,n,a){var s={width:0,height:0,rank:a,borderType:e},o=n[e][a-1],l=C0(t,"border",s,r);n[e][a]=l,t.setParent(l,i),o&&t.setEdge(o,l,{weight:1})}var j0=y((()=>{J1(),B0(),g(F0,"addBorderSegments"),g(z0,"addBorderNode")}));function U0(t){var e=t.graph().rankdir.toLowerCase();("lr"===e||"rl"===e)&&q0(t)}function W0(t){var e=t.graph().rankdir.toLowerCase();("bt"===e||"rl"===e)&&G0(t),("lr"===e||"rl"===e)&&(V0(t),q0(t))}function q0(t){BK(t.nodes(),(function(e){Y0(t.node(e))})),BK(t.edges(),(function(e){Y0(t.edge(e))}))}function Y0(t){var e=t.width;t.width=t.height,t.height=e}function G0(t){BK(t.nodes(),(function(e){H0(t.node(e))})),BK(t.edges(),(function(e){var r=t.edge(e);BK(r.points,H0),Object.prototype.hasOwnProperty.call(r,"y")&&H0(r)}))}function H0(t){t.y=-t.y}function V0(t){BK(t.nodes(),(function(e){X0(t.node(e))})),BK(t.edges(),(function(e){var r=t.edge(e);BK(r.points,X0),Object.prototype.hasOwnProperty.call(r,"x")&&X0(r)}))}function X0(t){var e=t.x;t.x=t.y,t.y=e}var K0=y((()=>{J1(),g(U0,"adjust"),g(W0,"undo"),g(q0,"swapWidthHeight"),g(Y0,"swapWidthHeightOne"),g(G0,"reverseY"),g(H0,"reverseYOne"),g(V0,"swapXY"),g(X0,"swapXYOne")}));function Q0(t){t.graph().dummyChains=[],BK(t.edges(),(function(e){Z0(t,e)}))}function Z0(t,e){var r=e.v,i=t.node(r).rank,n=e.w,a=t.node(n).rank,s=e.name,o=t.edge(e),l=o.labelRank;if(a!==i+1){t.removeEdge(e);var c,h,u=void 0;for(h=0,++i;i<a;++h,++i)o.points=[],c=C0(t,"edge",u={width:0,height:0,edgeLabel:o,edgeObj:e,rank:i},"_d"),i===l&&(u.width=o.width,u.height=o.height,u.dummy="edge-label",u.labelpos=o.labelpos),t.setEdge(r,c,{weight:o.weight},s),0===h&&t.graph().dummyChains.push(c),r=c;t.setEdge(r,n,{weight:o.weight},s)}}function J0(t){BK(t.graph().dummyChains,(function(e){var r,i=t.node(e),n=i.edgeLabel;for(t.setEdge(i.edgeObj,n);i.dummy;)r=t.successors(e)[0],t.removeNode(e),n.points.push({x:i.x,y:i.y}),"edge-label"===i.dummy&&(n.x=i.x,n.y=i.y,n.width=i.width,n.height=i.height),e=r,i=t.node(e)}))}var t2=y((()=>{J1(),B0(),g(Q0,"run"),g(Z0,"normalizeEdge"),g(J0,"undo")}));function e2(t){var e={};function r(i){var n=t.node(i);if(Object.prototype.hasOwnProperty.call(e,i))return n.rank;e[i]=!0;var a=UZ(kQ(t.outEdges(i),(function(e){return r(e.w)-t.edge(e).minlen})));return(a===Number.POSITIVE_INFINITY||null==a)&&(a=0),n.rank=a}g(r,"dfs"),BK(t.sources(),r)}function r2(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var i2=y((()=>{J1(),g(e2,"longestPath"),g(r2,"slack")}));function n2(t){var e,r,i=new l0({directed:!1}),n=t.nodes()[0],a=t.nodeCount();for(i.setNode(n,{});a2(i,t)<a;)e=s2(i,t),r=i.hasNode(e.v)?r2(t,e):-r2(t,e),o2(i,t,r);return i}function a2(t,e){function r(i){BK(e.nodeEdges(i),(function(n){var a=n.v,s=i===a?n.w:a;!t.hasNode(s)&&!r2(e,n)&&(t.setNode(s,{}),t.setEdge(i,s,{}),r(s))}))}return g(r,"dfs"),BK(t.nodes(),r),t.nodeCount()}function s2(t,e){return YZ(e.edges(),(function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return r2(e,r)}))}function o2(t,e,r){BK(t.nodes(),(function(t){e.node(t).rank+=r}))}var l2=y((()=>{J1(),h0(),i2(),g(n2,"feasibleTree"),g(a2,"tightTree"),g(s2,"findMinSlackEdge"),g(o2,"shiftRanks")})),c2=y((()=>{})),h2=y((()=>{})),u2=y((()=>{J1(),h2(),h$(1)})),d2=y((()=>{u2()})),p2=y((()=>{})),f2=y((()=>{p2()})),g2=y((()=>{J1(),h$(1)}));function y2(t){var e={},r={},i=[];function n(a){if(Object.prototype.hasOwnProperty.call(r,a))throw new m2;Object.prototype.hasOwnProperty.call(e,a)||(r[a]=!0,e[a]=!0,BK(t.predecessors(a),n),delete r[a],i.push(a))}if(g(n,"visit"),BK(t.sinks(),n),g1(e)!==t.nodeCount())throw new m2;return i}function m2(){}var x2=y((()=>{J1(),y2.CycleException=m2,g(y2,"topsort"),g(m2,"CycleException"),m2.prototype=new Error})),b2=y((()=>{x2()}));function k2(t,e,r){dE(e)||(e=[e]);var i=(t.isDirected()?t.successors:t.neighbors).bind(t),n=[],a={};return BK(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);v2(t,e,"post"===r,a,i,n)})),n}function v2(t,e,r,i,n,a){Object.prototype.hasOwnProperty.call(i,e)||(i[e]=!0,r||a.push(e),BK(n(e),(function(e){v2(t,e,r,i,n,a)})),r&&a.push(e))}var T2=y((()=>{J1(),g(k2,"dfs"),g(v2,"doDfs")}));function w2(t,e){return k2(t,e,"post")}var _2=y((()=>{T2(),g(w2,"postorder")}));function S2(t,e){return k2(t,e,"pre")}var C2=y((()=>{T2(),g(S2,"preorder")})),E2=y((()=>{h2(),c0()})),A2=y((()=>{c2(),u2(),d2(),f2(),g2(),b2(),_2(),C2(),E2(),p2(),x2()}));function $2(t){e2(t=E0(t));var e,r=n2(t);for(N2(r),L2(r,t);e=M2(r);)P2(r,t,e,O2(r,t,e))}function L2(t,e){var r=w2(t,t.nodes());r=r.slice(0,r.length-1),BK(r,(function(r){R2(t,e,r)}))}function R2(t,e,r){var i=t.node(r).parent;t.edge(r,i).cutvalue=I2(t,e,r)}function I2(t,e,r){var i=t.node(r).parent,n=!0,a=e.edge(r,i),s=0;return a||(n=!1,a=e.edge(i,r)),s=a.weight,BK(e.nodeEdges(r),(function(a){var o=a.v===r,l=o?a.w:a.v;if(l!==i){var c=o===n,h=e.edge(a).weight;if(s+=c?h:-h,F2(t,r,l)){var u=t.edge(r,l).cutvalue;s+=c?-u:u}}})),s}function N2(t,e){arguments.length<2&&(e=t.nodes()[0]),D2(t,{},1,e)}function D2(t,e,r,i,n){var a=r,s=t.node(i);return e[i]=!0,BK(t.neighbors(i),(function(n){Object.prototype.hasOwnProperty.call(e,n)||(r=D2(t,e,r,n,i))})),s.low=a,s.lim=r++,n?s.parent=n:delete s.parent,r}function M2(t){return cQ(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function O2(t,e,r){var i=r.v,n=r.w;e.hasEdge(i,n)||(i=r.w,n=r.v);var a=t.node(i),s=t.node(n),o=a,l=!1;a.lim>s.lim&&(o=s,l=!0);var c=tQ(e.edges(),(function(e){return l===z2(t,t.node(e.v),o)&&l!==z2(t,t.node(e.w),o)}));return YZ(c,(function(t){return r2(e,t)}))}function P2(t,e,r,i){var n=r.v,a=r.w;t.removeEdge(n,a),t.setEdge(i.v,i.w,{}),N2(t),L2(t,e),B2(t,e)}function B2(t,e){var r=cQ(t.nodes(),(function(t){return!e.node(t).parent})),i=S2(t,r);i=i.slice(1),BK(i,(function(r){var i=t.node(r).parent,n=e.edge(r,i),a=!1;n||(n=e.edge(i,r),a=!0),e.node(r).rank=e.node(i).rank+(a?n.minlen:-n.minlen)}))}function F2(t,e,r){return t.hasEdge(e,r)}function z2(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}var j2=y((()=>{J1(),A2(),B0(),l2(),i2(),$2.initLowLimValues=N2,$2.initCutValues=L2,$2.calcCutValue=I2,$2.leaveEdge=M2,$2.enterEdge=O2,$2.exchangeEdges=P2,g($2,"networkSimplex"),g(L2,"initCutValues"),g(R2,"assignCutValue"),g(I2,"calcCutValue"),g(N2,"initLowLimValues"),g(D2,"dfsAssignLowLim"),g(M2,"leaveEdge"),g(O2,"enterEdge"),g(P2,"exchangeEdges"),g(B2,"updateRanks"),g(F2,"isTreeEdge"),g(z2,"isDescendant")}));function U2(t){switch(t.graph().ranker){case"network-simplex":default:q2(t);break;case"tight-tree":W2(t);break;case"longest-path":Y2(t)}}function W2(t){e2(t),n2(t)}function q2(t){$2(t)}var Y2,G2=y((()=>{l2(),j2(),i2(),g(U2,"rank"),Y2=e2,g(W2,"tightTreeRanker"),g(q2,"networkSimplexRanker")}));function H2(t){var e=C0(t,"root",{},"_root"),r=X2(t),i=FZ(eZ(r))-1,n=2*i+1;t.graph().nestingRoot=e,BK(t.edges(),(function(e){t.edge(e).minlen*=n}));var a=K2(t)+1;BK(t.children(),(function(s){V2(t,e,n,a,i,r,s)})),t.graph().nodeRankFactor=n}function V2(t,e,r,i,n,a,s){var o=t.children(s);if(o.length){var l=N0(t,"_bt"),c=N0(t,"_bb"),h=t.node(s);t.setParent(l,s),h.borderTop=l,t.setParent(c,s),h.borderBottom=c,BK(o,(function(o){V2(t,e,r,i,n,a,o);var h=t.node(o),u=h.borderTop?h.borderTop:o,d=h.borderBottom?h.borderBottom:o,p=h.borderTop?i:2*i,f=u!==d?1:n-a[s]+1;t.setEdge(l,u,{weight:p,minlen:f,nestingEdge:!0}),t.setEdge(d,c,{weight:p,minlen:f,nestingEdge:!0})})),t.parent(s)||t.setEdge(e,l,{weight:0,minlen:n+a[s]})}else s!==e&&t.setEdge(e,s,{weight:0,minlen:r})}function X2(t){var e={};function r(i,n){var a=t.children(i);a&&a.length&&BK(a,(function(t){r(t,n+1)})),e[i]=n}return g(r,"dfs"),BK(t.children(),(function(t){r(t,1)})),e}function K2(t){return o1(t.edges(),(function(e,r){return e+t.edge(r).weight}),0)}function Q2(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,BK(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}var Z2=y((()=>{J1(),B0(),g(H2,"run"),g(V2,"dfs"),g(X2,"treeDepths"),g(K2,"sumWeights"),g(Q2,"cleanup")}));function J2(t,e,r){var i,n={};BK(r,(function(r){for(var a,s,o=t.parent(r);o;){if((a=t.parent(o))?(s=n[a],n[a]=o):(s=i,i=o),s&&s!==o)return void e.setEdge(s,o);o=a}}))}var t3=y((()=>{J1(),g(J2,"addSubgraphConstraints")}));function e3(t,e,r){var i=r3(t),n=new l0({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return BK(t.nodes(),(function(a){var s=t.node(a),o=t.parent(a);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(n.setNode(a),n.setParent(a,o||i),BK(t[r](a),(function(e){var r=e.v===a?e.w:e.v,i=n.edge(r,a),s=EZ(i)?0:i.weight;n.setEdge(r,a,{weight:t.edge(e).weight+s})})),Object.prototype.hasOwnProperty.call(s,"minRank")&&n.setNode(a,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))})),n}function r3(t){for(var e;t.hasNode(e=Y1("_root")););return e}var i3=y((()=>{J1(),h0(),g(e3,"buildLayerGraph"),g(r3,"createRootNode")}));function n3(t,e){for(var r=0,i=1;i<e.length;++i)r+=a3(t,e[i-1],e[i]);return r}function a3(t,e,r){for(var i=Q1(r,kQ(r,(function(t,e){return e}))),n=iY(kQ(e,(function(e){return w1(kQ(t.outEdges(e),(function(e){return{pos:i[e.w],weight:t.edge(e).weight}})),"pos")}))),a=1;a<r.length;)a<<=1;var s=2*a-1;a-=1;var o=kQ(new Array(s),(function(){return 0})),l=0;return BK(n.forEach((function(t){var e=t.pos+a;o[e]+=t.weight;for(var r=0;e>0;)e%2&&(r+=o[e+1]),o[e=e-1>>1]+=t.weight;l+=t.weight*r}))),l}var s3=y((()=>{J1(),g(n3,"crossCount"),g(a3,"twoLayerCrossCount")}));function o3(t){var e={},r=tQ(t.nodes(),(function(e){return!t.children(e).length})),i=FZ(kQ(r,(function(e){return t.node(e).rank}))),n=kQ(t1(i+1),(function(){return[]}));function a(r){if(!YQ(e,r)){e[r]=!0;var i=t.node(r);n[i.rank].push(r),BK(t.successors(r),a)}}g(a,"dfs");var s=w1(r,(function(e){return t.node(e).rank}));return BK(s,a),n}var l3=y((()=>{J1(),g(o3,"initOrder")}));function c3(t,e){return kQ(e,(function(e){var r=t.inEdges(e);if(r.length){var i=o1(r,(function(e,r){var i=t.edge(r),n=t.node(r.v);return{sum:e.sum+i.weight*n.order,weight:e.weight+i.weight}}),{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}}))}var h3=y((()=>{J1(),g(c3,"barycenter")}));function u3(t,e){var r={};return BK(t,(function(t,e){var i=r[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};EZ(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)})),BK(e.edges(),(function(t){var e=r[t.v],i=r[t.w];!EZ(e)&&!EZ(i)&&(i.indegree++,e.out.push(r[t.w]))})),d3(tQ(r,(function(t){return!t.indegree})))}function d3(t){var e=[];function r(t){return function(e){e.merged||(EZ(e.barycenter)||EZ(t.barycenter)||e.barycenter>=t.barycenter)&&p3(t,e)}}function i(e){return function(r){r.in.push(e),0==--r.indegree&&t.push(r)}}for(g(r,"handleIn"),g(i,"handleOut");t.length;){var n=t.pop();e.push(n),BK(n.in.reverse(),r(n)),BK(n.out,i(n))}return kQ(tQ(e,(function(t){return!t.merged})),(function(t){return WJ(t,["vs","i","barycenter","weight"])}))}function p3(t,e){var r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0}var f3=y((()=>{J1(),g(u3,"resolveConflicts"),g(d3,"doResolveConflicts"),g(p3,"mergeEntries")}));function g3(t,e){var r=M0(t,(function(t){return Object.prototype.hasOwnProperty.call(t,"barycenter")})),i=r.lhs,n=w1(r.rhs,(function(t){return-t.i})),a=[],s=0,o=0,l=0;i.sort(m3(!!e)),l=y3(a,n,l),BK(i,(function(t){l+=t.vs.length,a.push(t.vs),s+=t.barycenter*t.weight,o+=t.weight,l=y3(a,n,l)}));var c={vs:iY(a)};return o&&(c.barycenter=s/o,c.weight=o),c}function y3(t,e,r){for(var i;e.length&&(i=CK(e)).i<=r;)e.pop(),t.push(i.vs),r++;return r}function m3(t){return function(e,r){return e.barycenter<r.barycenter?-1:e.barycenter>r.barycenter?1:t?r.i-e.i:e.i-r.i}}var x3=y((()=>{J1(),B0(),g(g3,"sort"),g(y3,"consumeUnsortable"),g(m3,"compareWithBias")}));function b3(t,e,r,i){var n=t.children(e),a=t.node(e),s=a?a.borderLeft:void 0,o=a?a.borderRight:void 0,l={};s&&(n=tQ(n,(function(t){return t!==s&&t!==o})));var c=c3(t,n);BK(c,(function(e){if(t.children(e.v).length){var n=b3(t,e.v,r,i);l[e.v]=n,Object.prototype.hasOwnProperty.call(n,"barycenter")&&v3(e,n)}}));var h=u3(c,r);k3(h,l);var u=g3(h,i);if(s&&(u.vs=iY([s,u.vs,o]),t.predecessors(s).length)){var d=t.node(t.predecessors(s)[0]),p=t.node(t.predecessors(o)[0]);Object.prototype.hasOwnProperty.call(u,"barycenter")||(u.barycenter=0,u.weight=0),u.barycenter=(u.barycenter*u.weight+d.order+p.order)/(u.weight+2),u.weight+=2}return u}function k3(t,e){BK(t,(function(t){t.vs=iY(t.vs.map((function(t){return e[t]?e[t].vs:t})))}))}function v3(t,e){EZ(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var T3=y((()=>{J1(),h3(),f3(),x3(),g(b3,"sortSubgraph"),g(k3,"expandSubgraphs"),g(v3,"mergeBarycenters")}));function w3(t){var e=D0(t),r=_3(t,t1(1,e+1),"inEdges"),i=_3(t,t1(e-1,-1,-1),"outEdges"),n=o3(t);C3(t,n);for(var a,s=Number.POSITIVE_INFINITY,o=0,l=0;l<4;++o,++l){S3(o%2?r:i,o%4>=2);var c=n3(t,n=L0(t));c<s&&(l=0,a=zH(n),s=c)}C3(t,a)}function _3(t,e,r){return kQ(e,(function(e){return e3(t,e,r)}))}function S3(t,e){var r=new l0;BK(t,(function(t){var i=t.graph().root,n=b3(t,i,r,e);BK(n.vs,(function(e,r){t.node(e).order=r})),J2(t,r,n.vs)}))}function C3(t,e){BK(e,(function(e){BK(e,(function(e,r){t.node(e).order=r}))}))}var E3=y((()=>{J1(),h0(),B0(),t3(),i3(),s3(),l3(),T3(),g(w3,"order"),g(_3,"buildLayerGraphs"),g(S3,"sweepLayerGraphs"),g(C3,"assignOrder")}));function A3(t){var e=L3(t);BK(t.graph().dummyChains,(function(r){for(var i=t.node(r),n=i.edgeObj,a=$3(t,e,n.v,n.w),s=a.path,o=a.lca,l=0,c=s[l],h=!0;r!==n.w;){if(i=t.node(r),h){for(;(c=s[l])!==o&&t.node(c).maxRank<i.rank;)l++;c===o&&(h=!1)}if(!h){for(;l<s.length-1&&t.node(c=s[l+1]).minRank<=i.rank;)l++;c=s[l]}t.setParent(r,c),r=t.successors(r)[0]}}))}function $3(t,e,r,i){var n,a,s=[],o=[],l=Math.min(e[r].low,e[i].low),c=Math.max(e[r].lim,e[i].lim);n=r;do{n=t.parent(n),s.push(n)}while(n&&(e[n].low>l||c>e[n].lim));for(a=n,n=i;(n=t.parent(n))!==a;)o.push(n);return{path:s.concat(o.reverse()),lca:a}}function L3(t){var e={},r=0;function i(n){var a=r;BK(t.children(n),i),e[n]={low:a,lim:r++}}return g(i,"dfs"),BK(t.children(),i),e}var R3=y((()=>{J1(),g(A3,"parentDummyChains"),g($3,"findPath"),g(L3,"postorder")}));function I3(t,e){var r={};function i(e,i){var n=0,a=0,s=e.length,o=CK(i);return BK(i,(function(e,l){var c=D3(t,e),h=c?t.node(c).order:s;(c||e===o)&&(BK(i.slice(a,l+1),(function(e){BK(t.predecessors(e),(function(i){var a=t.node(i),s=a.order;(s<n||h<s)&&(!a.dummy||!t.node(e).dummy)&&M3(r,i,e)}))})),a=l+1,n=h)})),i}return g(i,"visitLayer"),o1(e,i),r}function N3(t,e){var r={};function i(e,i,n,a,s){var o;BK(t1(i,n),(function(i){o=e[i],t.node(o).dummy&&BK(t.predecessors(o),(function(e){var i=t.node(e);i.dummy&&(i.order<a||i.order>s)&&M3(r,e,o)}))}))}function n(e,r){var n,a=-1,s=0;return BK(r,(function(o,l){if("border"===t.node(o).dummy){var c=t.predecessors(o);c.length&&(n=t.node(c[0]).order,i(r,s,l,a,n),s=l,a=n)}i(r,s,r.length,n,e.length)})),r}return g(i,"scan"),g(n,"visitLayer"),o1(e,n),r}function D3(t,e){if(t.node(e).dummy)return cQ(t.predecessors(e),(function(e){return t.node(e).dummy}))}function M3(t,e,r){if(e>r){var i=e;e=r,r=i}Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{enumerable:!0,configurable:!0,value:{},writable:!0});var n=t[e];Object.defineProperty(n,r,{enumerable:!0,configurable:!0,value:!0,writable:!0})}function O3(t,e,r){if(e>r){var i=e;e=r,r=i}return!!t[e]&&Object.prototype.hasOwnProperty.call(t[e],r)}function P3(t,e,r,i){var n={},a={},s={};return BK(e,(function(t){BK(t,(function(t,e){n[t]=t,a[t]=t,s[t]=e}))})),BK(e,(function(t){var e=-1;BK(t,(function(t){var o=i(t);if(o.length)for(var l=((o=w1(o,(function(t){return s[t]}))).length-1)/2,c=Math.floor(l),h=Math.ceil(l);c<=h;++c){var u=o[c];a[t]===t&&e<s[u]&&!O3(r,t,u)&&(a[u]=t,a[t]=n[t]=n[u],e=s[u])}}))})),{root:n,align:a}}function B3(t,e,r,i,n){var a={},s=F3(t,e,r,n),o=n?"borderLeft":"borderRight";function l(t,e){for(var r=s.nodes(),i=r.pop(),n={};i;)n[i]?t(i):(n[i]=!0,r.push(i),r=r.concat(e(i))),i=r.pop()}function c(t){a[t]=s.inEdges(t).reduce((function(t,e){return Math.max(t,a[e.v]+s.edge(e))}),0)}function h(e){var r=s.outEdges(e).reduce((function(t,e){return Math.min(t,a[e.w]-s.edge(e))}),Number.POSITIVE_INFINITY),i=t.node(e);r!==Number.POSITIVE_INFINITY&&i.borderType!==o&&(a[e]=Math.max(a[e],r))}return g(l,"iterate"),g(c,"pass1"),g(h,"pass2"),l(c,s.predecessors.bind(s)),l(h,s.successors.bind(s)),BK(i,(function(t){a[t]=a[r[t]]})),a}function F3(t,e,r,i){var n=new l0,a=t.graph(),s=q3(a.nodesep,a.edgesep,i);return BK(e,(function(e){var i;BK(e,(function(e){var a=r[e];if(n.setNode(a),i){var o=r[i],l=n.edge(o,a);n.setEdge(o,a,Math.max(s(t,e,i),l||0))}i=e}))})),n}function z3(t,e){return YZ(eZ(e),(function(e){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return CQ(e,(function(e,n){var a=Y3(t,n)/2;r=Math.max(e+a,r),i=Math.min(e-a,i)})),r-i}))}function j3(t,e){var r=eZ(e),i=UZ(r),n=FZ(r);BK(["u","d"],(function(r){BK(["l","r"],(function(a){var s,o=r+a,l=t[o];if(l!==e){var c=eZ(l);(s="l"===a?i-UZ(c):n-FZ(c))&&(t[o]=NZ(l,(function(t){return t+s})))}}))}))}function U3(t,e){return NZ(t.ul,(function(r,i){if(e)return t[e.toLowerCase()][i];var n=w1(kQ(t,i));return(n[1]+n[2])/2}))}function W3(t){var e,r=L0(t),i=I$(I3(t,r),N3(t,r)),n={};BK(["u","d"],(function(a){e="u"===a?r:eZ(r).reverse(),BK(["l","r"],(function(r){"r"===r&&(e=kQ(e,(function(t){return eZ(t).reverse()})));var s=("u"===a?t.predecessors:t.successors).bind(t),o=P3(0,e,i,s),l=B3(t,e,o.root,o.align,"r"===r);"r"===r&&(l=NZ(l,(function(t){return-t}))),n[a+r]=l}))}));var a=z3(t,n);return j3(n,a),U3(n,t.graph().align)}function q3(t,e,r){return function(i,n,a){var s,o=i.node(n),l=i.node(a),c=0;if(c+=o.width/2,Object.prototype.hasOwnProperty.call(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":s=-o.width/2;break;case"r":s=o.width/2}if(s&&(c+=r?s:-s),s=0,c+=(o.dummy?e:t)/2,c+=(l.dummy?e:t)/2,c+=l.width/2,Object.prototype.hasOwnProperty.call(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=l.width/2;break;case"r":s=-l.width/2}return s&&(c+=r?s:-s),s=0,c}}function Y3(t,e){return t.node(e).width}var G3=y((()=>{J1(),h0(),B0(),g(I3,"findType1Conflicts"),g(N3,"findType2Conflicts"),g(D3,"findOtherInnerSegmentNode"),g(M3,"addConflict"),g(O3,"hasConflict"),g(P3,"verticalAlignment"),g(B3,"horizontalCompaction"),g(F3,"buildBlockGraph"),g(z3,"findSmallestWidthAlignment"),g(j3,"alignCoordinates"),g(U3,"balance"),g(W3,"positionX"),g(q3,"sep"),g(Y3,"width")}));function H3(t){V3(t=A0(t)),$Q(W3(t),(function(e,r){t.node(r).x=e}))}function V3(t){var e=L0(t),r=t.graph().ranksep,i=0;BK(e,(function(e){var n=FZ(kQ(e,(function(e){return t.node(e).height})));BK(e,(function(e){t.node(e).y=i+n/2})),i+=n+r}))}var X3=y((()=>{J1(),B0(),G3(),g(H3,"position"),g(V3,"positionY")}));function K3(t,e){var r=e&&e.debugTiming?O0:P0;r("layout",(()=>{var e=r("  buildLayoutGraph",(()=>J3(t)));r("  runLayout",(()=>Q3(e,r))),r("  updateInputGraph",(()=>Z3(t,e)))}))}function Q3(t,e){e("    makeSpaceForEdgeLabels",(()=>t4(t))),e("    removeSelfEdges",(()=>c4(t))),e("    acyclic",(()=>T0(t))),e("    nestingGraph.run",(()=>H2(t))),e("    rank",(()=>U2(A0(t)))),e("    injectEdgeLabelProxies",(()=>e4(t))),e("    removeEmptyRanks",(()=>I0(t))),e("    nestingGraph.cleanup",(()=>Q2(t))),e("    normalizeRanks",(()=>R0(t))),e("    assignRankMinMax",(()=>r4(t))),e("    removeEdgeLabelProxies",(()=>i4(t))),e("    normalize.run",(()=>Q0(t))),e("    parentDummyChains",(()=>A3(t))),e("    addBorderSegments",(()=>F0(t))),e("    order",(()=>w3(t))),e("    insertSelfEdges",(()=>h4(t))),e("    adjustCoordinateSystem",(()=>U0(t))),e("    position",(()=>H3(t))),e("    positionSelfEdges",(()=>u4(t))),e("    removeBorderNodes",(()=>l4(t))),e("    normalize.undo",(()=>J0(t))),e("    fixupEdgeLabelCoords",(()=>s4(t))),e("    undoCoordinateSystem",(()=>W0(t))),e("    translateGraph",(()=>n4(t))),e("    assignNodeIntersects",(()=>a4(t))),e("    reversePoints",(()=>o4(t))),e("    acyclic.undo",(()=>_0(t)))}function Z3(t,e){BK(t.nodes(),(function(r){var i=t.node(r),n=e.node(r);i&&(i.x=n.x,i.y=n.y,e.children(r).length&&(i.width=n.width,i.height=n.height))})),BK(t.edges(),(function(r){var i=t.edge(r),n=e.edge(r);i.points=n.points,Object.prototype.hasOwnProperty.call(n,"x")&&(i.x=n.x,i.y=n.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}function J3(t){var e=new l0({multigraph:!0,compound:!0}),r=p4(t.graph());return e.setGraph(I$({},g4,d4(r,f4),WJ(r,y4))),BK(t.nodes(),(function(r){var i=p4(t.node(r));e.setNode(r,uK(d4(i,m4),x4)),e.setParent(r,t.parent(r))})),BK(t.edges(),(function(r){var i=p4(t.edge(r));e.setEdge(r,I$({},k4,d4(i,b4),WJ(i,v4)))})),e}function t4(t){var e=t.graph();e.ranksep/=2,BK(t.edges(),(function(r){var i=t.edge(r);i.minlen*=2,"c"!==i.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)}))}function e4(t){BK(t.edges(),(function(e){var r=t.edge(e);if(r.width&&r.height){var i=t.node(e.v),n={rank:(t.node(e.w).rank-i.rank)/2+i.rank,e:e};C0(t,"edge-proxy",n,"_ep")}}))}function r4(t){var e=0;BK(t.nodes(),(function(r){var i=t.node(r);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=FZ(e,i.maxRank))})),t.graph().maxRank=e}function i4(t){BK(t.nodes(),(function(e){var r=t.node(e);"edge-proxy"===r.dummy&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))}))}function n4(t){var e=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,n=0,a=t.graph(),s=a.marginx||0,o=a.marginy||0;function l(t){var a=t.x,s=t.y,o=t.width,l=t.height;e=Math.min(e,a-o/2),r=Math.max(r,a+o/2),i=Math.min(i,s-l/2),n=Math.max(n,s+l/2)}g(l,"getExtremes"),BK(t.nodes(),(function(e){l(t.node(e))})),BK(t.edges(),(function(e){var r=t.edge(e);Object.prototype.hasOwnProperty.call(r,"x")&&l(r)})),e-=s,i-=o,BK(t.nodes(),(function(r){var n=t.node(r);n.x-=e,n.y-=i})),BK(t.edges(),(function(r){var n=t.edge(r);BK(n.points,(function(t){t.x-=e,t.y-=i})),Object.prototype.hasOwnProperty.call(n,"x")&&(n.x-=e),Object.prototype.hasOwnProperty.call(n,"y")&&(n.y-=i)})),a.width=r-e+s,a.height=n-i+o}function a4(t){BK(t.edges(),(function(e){var r,i,n=t.edge(e),a=t.node(e.v),s=t.node(e.w);n.points?(r=n.points[0],i=n.points[n.points.length-1]):(n.points=[],r=s,i=a),n.points.unshift($0(a,r)),n.points.push($0(s,i))}))}function s4(t){BK(t.edges(),(function(e){var r=t.edge(e);if(Object.prototype.hasOwnProperty.call(r,"x"))switch(("l"===r.labelpos||"r"===r.labelpos)&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}function o4(t){BK(t.edges(),(function(e){var r=t.edge(e);r.reversed&&r.points.reverse()}))}function l4(t){BK(t.nodes(),(function(e){if(t.children(e).length){var r=t.node(e),i=t.node(r.borderTop),n=t.node(r.borderBottom),a=t.node(CK(r.borderLeft)),s=t.node(CK(r.borderRight));r.width=Math.abs(s.x-a.x),r.height=Math.abs(n.y-i.y),r.x=a.x+r.width/2,r.y=i.y+r.height/2}})),BK(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}function c4(t){BK(t.edges(),(function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}function h4(t){var e=L0(t);BK(e,(function(e){var r=0;BK(e,(function(e,i){var n=t.node(e);n.order=i+r,BK(n.selfEdges,(function(e){C0(t,"selfedge",{width:e.label.width,height:e.label.height,rank:n.rank,order:i+ ++r,e:e.e,label:e.label},"_se")})),delete n.selfEdges}))}))}function u4(t){BK(t.nodes(),(function(e){var r=t.node(e);if("selfedge"===r.dummy){var i=t.node(r.e.v),n=i.x+i.width/2,a=i.y,s=r.x-n,o=i.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:n+2*s/3,y:a-o},{x:n+5*s/6,y:a-o},{x:n+s,y:a},{x:n+5*s/6,y:a+o},{x:n+2*s/3,y:a+o}],r.label.x=r.x,r.label.y=r.y}}))}function d4(t,e){return NZ(WJ(t,e),Number)}function p4(t){var e={};return BK(t,(function(t,r){e[r.toLowerCase()]=t})),e}var f4,g4,y4,m4,x4,b4,k4,v4,T4=y((()=>{J1(),h0(),j0(),K0(),S0(),t2(),G2(),Z2(),E3(),R3(),X3(),B0(),g(K3,"layout"),g(Q3,"runLayout"),g(Z3,"updateInputGraph"),f4=["nodesep","edgesep","ranksep","marginx","marginy"],g4={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y4=["acyclicer","ranker","rankdir","align"],m4=["width","height"],x4={width:0,height:0},b4=["minlen","weight","width","height","labeloffset"],k4={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},v4=["labelpos"],g(J3,"buildLayoutGraph"),g(t4,"makeSpaceForEdgeLabels"),g(e4,"injectEdgeLabelProxies"),g(r4,"assignRankMinMax"),g(i4,"removeEdgeLabelProxies"),g(n4,"translateGraph"),g(a4,"assignNodeIntersects"),g(s4,"fixupEdgeLabelCoords"),g(o4,"reversePointsForReversedEdges"),g(l4,"removeBorderNodes"),g(c4,"removeSelfEdges"),g(h4,"insertSelfEdges"),g(u4,"positionSelfEdges"),g(d4,"selectNumberAttrs"),g(p4,"canonicalize")})),w4=y((()=>{S0(),T4(),t2(),G2()}));function _4(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:S4(t),edges:C4(t)};return EZ(t.graph())||(e.value=MH(t.graph())),e}function S4(t){return kQ(t.nodes(),(function(e){var r=t.node(e),i=t.parent(e),n={v:e};return EZ(r)||(n.value=r),EZ(i)||(n.parent=i),n}))}function C4(t){return kQ(t.edges(),(function(e){var r=t.edge(e),i={v:e.v,w:e.w};return EZ(e.name)||(i.name=e.name),EZ(r)||(i.value=r),i}))}var E4,A4,$4,L4,R4,I4,N4,D4,M4,O4,P4,B4,F4,z4,j4,U4=y((()=>{J1(),c0(),g(_4,"write"),g(S4,"writeNodes"),g(C4,"writeEdges")})),W4=y((()=>{We(),h0(),U4(),E4=new Map,A4=new Map,$4=new Map,L4=g((()=>{A4.clear(),$4.clear(),E4.clear()}),"clear"),R4=g(((t,e)=>{let r=A4.get(e)||[];return et.trace("In isDescendant",e," ",t," = ",r.includes(t)),r.includes(t)}),"isDescendant"),I4=g(((t,e)=>{let r=A4.get(e)||[];return et.info("Descendants of ",e," is ",r),et.info("Edge is ",t),t.v!==e&&t.w!==e&&(r?r.includes(t.v)||R4(t.v,e)||R4(t.w,e)||r.includes(t.w):(et.debug("Tilt, ",e,",not in descendants"),!1))}),"edgeInCluster"),N4=g(((t,e,r,i)=>{et.warn("Copying children of ",t,"root",i,"data",e.node(t),i);let n=e.children(t)||[];t!==i&&n.push(t),et.warn("Copying (nodes) clusterId",t,"nodes",n),n.forEach((n=>{if(e.children(n).length>0)N4(n,e,r,i);else{let a=e.node(n);et.info("cp ",n," to ",i," with parent ",t),r.setNode(n,a),i!==e.parent(n)&&(et.warn("Setting parent",n,e.parent(n)),r.setParent(n,e.parent(n))),t!==i&&n!==t?(et.debug("Setting parent",n,t),r.setParent(n,t)):(et.info("In copy ",t,"root",i,"data",e.node(t),i),et.debug("Not Setting parent for node=",n,"cluster!==rootId",t!==i,"node!==clusterId",n!==t));let s=e.edges(n);et.debug("Copying Edges",s),s.forEach((n=>{et.info("Edge",n);let a=e.edge(n.v,n.w,n.name);et.info("Edge data",a,i);try{I4(n,i)?(et.info("Copying as ",n.v,n.w,a,n.name),r.setEdge(n.v,n.w,a,n.name),et.info("newGraph edges ",r.edges(),r.edge(r.edges()[0]))):et.info("Skipping copy of edge ",n.v,"--\x3e",n.w," rootId: ",i," clusterId:",t)}catch(t){et.error(t)}}))}et.debug("Removing node",n),e.removeNode(n)}))}),"copy"),D4=g(((t,e)=>{let r=e.children(t),i=[...r];for(let n of r)$4.set(n,t),i=[...i,...D4(n,e)];return i}),"extractDescendants"),M4=g(((t,e,r)=>{let i=t.edges().filter((t=>t.v===e||t.w===e)),n=t.edges().filter((t=>t.v===r||t.w===r)),a=i.map((t=>({v:t.v===e?r:t.v,w:t.w===e?e:t.w}))),s=n.map((t=>({v:t.v,w:t.w})));return a.filter((t=>s.some((e=>t.v===e.v&&t.w===e.w))))}),"findCommonEdges"),O4=g(((t,e,r)=>{let i,n=e.children(t);if(et.trace("Searching children of id ",t,n),n.length<1)return t;for(let t of n){let n=O4(t,e,r),a=M4(e,r,n);if(n){if(!(a.length>0))return n;i=n}}return i}),"findNonClusterChild"),P4=g((t=>E4.has(t)&&E4.get(t).externalConnections&&E4.has(t)?E4.get(t).id:t),"getAnchorId"),B4=g(((t,e)=>{if(!t||e>10)et.debug("Opting out, no graph ");else{et.debug("Opting in, graph "),t.nodes().forEach((function(e){t.children(e).length>0&&(et.warn("Cluster identified",e," Replacement id in edges: ",O4(e,t,e)),A4.set(e,D4(e,t)),E4.set(e,{id:O4(e,t,e),clusterData:t.node(e)}))})),t.nodes().forEach((function(e){let r=t.children(e),i=t.edges();r.length>0?(et.debug("Cluster identified",e,A4),i.forEach((t=>{R4(t.v,e)^R4(t.w,e)&&(et.warn("Edge: ",t," leaves cluster ",e),et.warn("Descendants of XXX ",e,": ",A4.get(e)),E4.get(e).externalConnections=!0)}))):et.debug("Not a cluster ",e,A4)}));for(let e of E4.keys()){let r=E4.get(e).id,i=t.parent(r);i!==e&&E4.has(i)&&!E4.get(i).externalConnections&&(E4.get(e).id=i)}t.edges().forEach((function(e){let r=t.edge(e);et.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(e)),et.warn("Edge "+e.v+" -> "+e.w+": "+JSON.stringify(t.edge(e)));let i=e.v,n=e.w;if(et.warn("Fix XXX",E4,"ids:",e.v,e.w,"Translating: ",E4.get(e.v)," --- ",E4.get(e.w)),E4.get(e.v)||E4.get(e.w)){if(et.warn("Fixing and trying - removing XXX",e.v,e.w,e.name),i=P4(e.v),n=P4(e.w),t.removeEdge(e.v,e.w,e.name),i!==e.v){let n=t.parent(i);E4.get(n).externalConnections=!0,r.fromCluster=e.v}if(n!==e.w){let i=t.parent(n);E4.get(i).externalConnections=!0,r.toCluster=e.w}et.warn("Fix Replacing with XXX",i,n,e.name),t.setEdge(i,n,r,e.name)}})),et.warn("Adjusted Graph",_4(t)),F4(t,0),et.trace(E4)}}),"adjustClustersAndEdges"),F4=g(((t,e)=>{if(et.warn("extractor - ",e,_4(t),t.children("D")),e>10)return void et.error("Bailing out");let r=t.nodes(),i=!1;for(let e of r){let r=t.children(e);i=i||r.length>0}if(i){et.debug("Nodes = ",r,e);for(let i of r)if(et.debug("Extracting node",i,E4,E4.has(i)&&!E4.get(i).externalConnections,!t.parent(i),t.node(i),t.children("D")," Depth ",e),E4.has(i))if(!E4.get(i).externalConnections&&t.children(i)&&t.children(i).length>0){et.warn("Cluster without external connections, without a parent and with children",i,e);let r="TB"===t.graph().rankdir?"LR":"TB";E4.get(i)?.clusterData?.dir&&(r=E4.get(i).clusterData.dir,et.warn("Fixing dir",E4.get(i).clusterData.dir,r));let n=new l0({multigraph:!0,compound:!0}).setGraph({rankdir:r,nodesep:50,ranksep:50,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}}));et.warn("Old graph before copy",_4(t)),N4(i,t,n,i),t.setNode(i,{clusterNode:!0,id:i,clusterData:E4.get(i).clusterData,label:E4.get(i).label,graph:n}),et.warn("New graph after copy node: (",i,")",_4(n)),et.debug("Old graph after copy",_4(t))}else et.warn("Cluster ** ",i," **not meeting the criteria !externalConnections:",!E4.get(i).externalConnections," no parent: ",!t.parent(i)," children ",t.children(i)&&t.children(i).length>0,t.children("D"),e),et.debug(E4);else et.debug("Not a cluster",i,e);r=t.nodes(),et.warn("New list of nodes",r);for(let i of r){let r=t.node(i);et.warn(" Now next level",i,r),r?.clusterNode&&F4(r.graph,e+1)}}else et.debug("Done, no node has children",t.nodes())}),"extractor"),z4=g(((t,e)=>{if(0===e.length)return[];let r=Object.assign([],e);return e.forEach((e=>{let i=t.children(e),n=z4(t,i);r=[...r,...n]})),r}),"sorter"),j4=g((t=>z4(t,t.children())),"sortNodesByHierarchy")})),q4={};x(q4,{render:()=>G4});var Y4,G4,H4,V4,X4,K4,Q4,Z4,J4,t5,e5,r5,i5,n5,a5,s5,o5,l5,c5,h5,u5=y((()=>{w4(),U4(),h0(),BU(),UO(),W4(),YU(),qj(),PU(),We(),Wj(),ns(),Y4=g((async(t,e,r,i,n,a)=>{et.warn("Graph in recursive render:XAX",_4(e),n);let s=e.graph().rankdir;et.trace("Dir in recursive render - dir:",s);let o=t.insert("g").attr("class","root");e.nodes()?et.info("Recursive render XXX",e.nodes()):et.info("No nodes found for",e),e.edges().length>0&&et.info("Recursive edges",e.edge(e.edges()[0]));let l=o.insert("g").attr("class","clusters"),c=o.insert("g").attr("class","edgePaths"),h=o.insert("g").attr("class","edgeLabels"),u=o.insert("g").attr("class","nodes");await Promise.all(e.nodes().map((async function(t){let o=e.node(t);if(void 0!==n){let r=JSON.parse(JSON.stringify(n.clusterData));et.trace("Setting data for parent cluster XXX\n Node.id = ",t,"\n data=",r.height,"\nParent cluster",n.height),e.setNode(n.id,r),e.parent(t)||(et.trace("Setting parent",t,n.id),e.setParent(t,n.id,r))}if(et.info("(Insert) Node XXX"+t+": "+JSON.stringify(e.node(t))),o?.clusterNode){et.info("Cluster identified XBX",t,o.width,e.node(t));let{ranksep:n,nodesep:s}=e.graph();o.graph.setGraph({...o.graph.graph(),ranksep:n+25,nodesep:s});let l=await Y4(u,o.graph,r,i,e.node(t),a),c=l.elem;zO(o,c),o.diff=l.diff||0,et.info("New compound node after recursive render XAX",t,"width",o.width,"height",o.height),jU(c,o)}else e.children(t).length>0?(et.trace("Cluster - the non recursive path XBX",t,o.id,o,o.width,"Graph:",e),et.trace(O4(o.id,e)),E4.set(o.id,{id:O4(o.id,e),node:o})):(et.trace("Node - the non recursive path XAX",t,u,e.node(t),s),await FU(u,e.node(t),{config:a,dir:s}))}))),await g((async()=>{let t=e.edges().map((async function(t){let r=e.edge(t.v,t.w,t.name);et.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(t)),et.info("Edge "+t.v+" -> "+t.w+": ",t," ",JSON.stringify(e.edge(t))),et.info("Fix",E4,"ids:",t.v,t.w,"Translating: ",E4.get(t.v),E4.get(t.w)),await hU(h,r)}));await Promise.all(t)}),"processEdges")(),et.info("Graph before layout:",JSON.stringify(_4(e))),et.info("############################################# XXX"),et.info("###                Layout                 ### XXX"),et.info("############################################# XXX"),K3(e),et.info("Graph after layout:",JSON.stringify(_4(e)));let d=0,{subGraphTitleTotalMargin:p}=Lj(a);return await Promise.all(j4(e).map((async function(t){let r=e.node(t);if(et.info("Position XBX => "+t+": ("+r.x,","+r.y,") width: ",r.width," height: ",r.height),r?.clusterNode)r.y+=p,et.info("A tainted cluster node XBX1",t,r.id,r.width,r.height,r.x,r.y,e.parent(t)),E4.get(r.id).node=r,WU(r);else if(e.children(t).length>0){et.info("A pure cluster node XBX1",t,r.id,r.x,r.y,r.width,r.height,e.parent(t)),r.height+=p,e.node(r.parentId);let i=r?.padding/2||0,n=r?.labelBBox?.height||0,a=n-i||0;et.debug("OffsetY",a,"labelHeight",n,"halfPadding",i),await Bj(l,r),E4.get(r.id).node=r}else{let t=e.node(r.parentId);r.y+=p/2,et.info("A regular node XBX1 - using the padding",r.id,"parent",r.parentId,r.width,r.height,r.x,r.y,"offsetY",r.offsetY,"parent",t,t?.offsetY,r),WU(r)}}))),e.edges().forEach((function(t){let n=e.edge(t);et.info("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(n),n),n.points.forEach((t=>t.y+=p/2));let a=e.node(t.v);var s=e.node(t.w);let o=xU(c,n,E4,r,a,s,i);uU(n,o)})),e.nodes().forEach((function(t){let r=e.node(t);et.info(t,r.type,r.diff),r.isGroup&&(d=r.diff)})),et.warn("Returning from recursive render XAX",o,d),{elem:o,diff:d}}),"recursiveRender"),G4=g((async(t,e)=>{let r=new l0({multigraph:!0,compound:!0}).setGraph({rankdir:t.direction,nodesep:t.config?.nodeSpacing||t.config?.flowchart?.nodeSpacing||t.nodeSpacing,ranksep:t.config?.rankSpacing||t.config?.flowchart?.rankSpacing||t.rankSpacing,marginx:8,marginy:8}).setDefaultEdgeLabel((function(){return{}})),i=e.select("g");OU(i,t.markers,t.type,t.diagramId),UU(),lU(),Fj(),L4(),t.nodes.forEach((t=>{r.setNode(t.id,{...t}),t.parentId&&r.setParent(t.id,t.parentId)})),et.debug("Edges:",t.edges),t.edges.forEach((t=>{if(t.start===t.end){let e=t.start,i=e+"---"+e+"---1",n=e+"---"+e+"---2",a=r.node(e);r.setNode(i,{domId:i,id:i,parentId:a.parentId,labelStyle:"",label:"",padding:0,shape:"labelRect",style:"",width:10,height:10}),r.setParent(i,a.parentId),r.setNode(n,{domId:n,id:n,parentId:a.parentId,labelStyle:"",padding:0,shape:"labelRect",label:"",style:"",width:10,height:10}),r.setParent(n,a.parentId);let s=structuredClone(t),o=structuredClone(t),l=structuredClone(t);s.label="",s.arrowTypeEnd="none",s.id=e+"-cyclic-special-1",o.arrowTypeStart="none",o.arrowTypeEnd="none",o.id=e+"-cyclic-special-mid",l.label="",a.isGroup&&(s.fromCluster=e,l.toCluster=e),l.id=e+"-cyclic-special-2",l.arrowTypeStart="none",r.setEdge(e,i,s,e+"-cyclic-special-0"),r.setEdge(i,n,o,e+"-cyclic-special-1"),r.setEdge(n,e,l,e+"-cyc<lic-special-2")}else r.setEdge(t.start,t.end,{...t},t.id)})),et.warn("Graph at first:",JSON.stringify(_4(r))),B4(r),et.warn("Graph after XAX:",JSON.stringify(_4(r)));let n=na();await Y4(i,r,t.type,t.diagramId,void 0,n)}),"render")})),d5=y((()=>{GU(),We(),H4={},V4=g((t=>{for(let e of t)H4[e.name]=e}),"registerLayoutLoaders"),g((()=>{V4([{name:"dagre",loader:g((async()=>await Promise.resolve().then((()=>(u5(),q4)))),"loader")}])}),"registerDefaultLayoutLoaders")(),X4=g((async(t,e)=>{if(!(t.layoutAlgorithm in H4))throw new Error(`Unknown layout algorithm: ${t.layoutAlgorithm}`);let r=H4[t.layoutAlgorithm];return(await r.loader()).render(t,e,qU,{algorithm:r.algorithm})}),"render"),K4=g(((t="",{fallback:e="dagre"}={})=>{if(t in H4)return t;if(e in H4)return et.warn(`Layout algorithm ${t} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${t} and ${e} are not registered.`)}),"getRegisteredLayoutAlgorithm")})),p5=y((()=>{Un(),We(),Q4=g(((t,e,r,i)=>{t.attr("class",r);let{width:n,height:a,x:s,y:o}=Z4(t,e);Rn(t,a,n,i);let l=J4(s,o,n,a,e);t.attr("viewBox",l),et.debug(`viewBox configured: ${l} with padding: ${e}`)}),"setupViewPortForSVG"),Z4=g(((t,e)=>{let r=t.node()?.getBBox()||{width:0,height:0,x:0,y:0};return{width:r.width+2*e,height:r.height+2*e,x:r.x,y:r.y}}),"calculateDimensionsWithPadding"),J4=g(((t,e,r,i,n)=>`${t-n} ${e-n} ${r} ${i}`),"createViewBox")})),f5=y((()=>{QT(),ns(),We(),Uj(),d5(),p5(),_L(),t5=g((function(t,e){return e.db.getClasses()}),"getClasses"),e5=g((async function(t,e,r,i){et.info("REF0:"),et.info("Drawing state diagram (v2)",e);let n,{securityLevel:a,flowchart:s,layout:o}=na();"sandbox"===a&&(n=nh("#i"+e));let l="sandbox"===a?n.nodes()[0].contentDocument:document;et.debug("Before getData: ");let c=i.db.getData();et.debug("Data: ",c);let h=$j(e,a),u=i.db.getDirection();c.type=i.type,c.layoutAlgorithm=K4(o),"dagre"===c.layoutAlgorithm&&"elk"===o&&et.warn("flowchart-elk was moved to an external package in Mermaid v11. Please refer [release notes](https://github.com/mermaid-js/mermaid/releases/tag/v11.0.0) for more details. This diagram will be rendered using `dagre` layout as a fallback."),c.direction=u,c.nodeSpacing=s?.nodeSpacing||50,c.rankSpacing=s?.rankSpacing||50,c.markers=["point","circle","cross"],c.diagramId=e,et.debug("REF1:",c),await X4(c,h);let d=c.config.flowchart?.diagramPadding??8;kL.insertTitle(h,"flowchartTitleText",s?.titleTopMargin||0,i.db.getDiagramTitle()),Q4(h,d,"flowchart",s?.useMaxWidth||!1);for(let t of c.nodes){let r=nh(`#${e} [id="${t.id}"]`);if(!r||!t.link)continue;let i=l.createElementNS("http://www.w3.org/2000/svg","a");i.setAttributeNS("http://www.w3.org/2000/svg","class",t.cssClasses),i.setAttributeNS("http://www.w3.org/2000/svg","rel","noopener"),"sandbox"===a?i.setAttributeNS("http://www.w3.org/2000/svg","target","_top"):t.linkTarget&&i.setAttributeNS("http://www.w3.org/2000/svg","target",t.linkTarget);let n=r.insert((function(){return i}),":first-child"),s=r.select(".label-container");s&&n.append((function(){return s.node()}));let o=r.select(".label");o&&n.append((function(){return o.node()}))}}),"draw"),r5={getClasses:t5,draw:e5}})),g5=y((()=>{(i5=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[1,4],r=[1,3],i=[1,5],n=[1,8,9,10,11,27,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],a=[2,2],s=[1,13],o=[1,14],l=[1,15],c=[1,16],h=[1,23],u=[1,25],d=[1,26],p=[1,27],f=[1,49],y=[1,48],m=[1,29],x=[1,30],b=[1,31],k=[1,32],v=[1,33],T=[1,44],w=[1,46],_=[1,42],S=[1,47],C=[1,43],E=[1,50],A=[1,45],$=[1,51],L=[1,52],R=[1,34],I=[1,35],N=[1,36],D=[1,37],M=[1,57],O=[1,8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],P=[1,61],B=[1,60],F=[1,62],z=[8,9,11,75,77,78],j=[1,78],U=[1,91],W=[1,96],q=[1,95],Y=[1,92],G=[1,88],H=[1,94],V=[1,90],X=[1,97],K=[1,93],Q=[1,98],Z=[1,89],J=[8,9,10,11,40,75,77,78],tt=[8,9,10,11,40,46,75,77,78],et=[8,9,10,11,29,40,44,46,48,50,52,54,56,58,60,63,65,67,68,70,75,77,78,89,102,105,106,109,111,114,115,116],rt=[8,9,11,44,60,75,77,78,89,102,105,106,109,111,114,115,116],it=[44,60,89,102,105,106,109,111,114,115,116],nt=[1,121],at=[1,122],st=[1,124],ot=[1,123],lt=[44,60,62,74,89,102,105,106,109,111,114,115,116],ct=[1,133],ht=[1,147],ut=[1,148],dt=[1,149],pt=[1,150],ft=[1,135],gt=[1,137],yt=[1,141],mt=[1,142],xt=[1,143],bt=[1,144],kt=[1,145],vt=[1,146],Tt=[1,151],wt=[1,152],_t=[1,131],St=[1,132],Ct=[1,139],Et=[1,134],At=[1,138],$t=[1,136],Lt=[8,9,10,11,27,32,34,36,38,44,60,84,85,86,87,88,89,102,105,106,109,111,114,115,116,121,122,123,124],Rt=[1,154],It=[1,156],Nt=[8,9,11],Dt=[8,9,10,11,14,44,60,89,105,106,109,111,114,115,116],Mt=[1,176],Ot=[1,172],Pt=[1,173],Bt=[1,177],Ft=[1,174],zt=[1,175],jt=[77,116,119],Ut=[8,9,10,11,12,14,27,29,32,44,60,75,84,85,86,87,88,89,90,105,109,111,114,115,116],Wt=[10,106],qt=[31,49,51,53,55,57,62,64,66,67,69,71,116,117,118],Yt=[1,247],Gt=[1,245],Ht=[1,249],Vt=[1,243],Xt=[1,244],Kt=[1,246],Qt=[1,248],Zt=[1,250],Jt=[1,268],te=[8,9,11,106],ee=[8,9,10,11,60,84,105,106,109,110,111,112],re={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,graphConfig:4,document:5,line:6,statement:7,SEMI:8,NEWLINE:9,SPACE:10,EOF:11,GRAPH:12,NODIR:13,DIR:14,FirstStmtSeparator:15,ending:16,endToken:17,spaceList:18,spaceListNewline:19,vertexStatement:20,separator:21,styleStatement:22,linkStyleStatement:23,classDefStatement:24,classStatement:25,clickStatement:26,subgraph:27,textNoTags:28,SQS:29,text:30,SQE:31,end:32,direction:33,acc_title:34,acc_title_value:35,acc_descr:36,acc_descr_value:37,acc_descr_multiline_value:38,shapeData:39,SHAPE_DATA:40,link:41,node:42,styledVertex:43,AMP:44,vertex:45,STYLE_SEPARATOR:46,idString:47,DOUBLECIRCLESTART:48,DOUBLECIRCLEEND:49,PS:50,PE:51,"(-":52,"-)":53,STADIUMSTART:54,STADIUMEND:55,SUBROUTINESTART:56,SUBROUTINEEND:57,VERTEX_WITH_PROPS_START:58,"NODE_STRING[field]":59,COLON:60,"NODE_STRING[value]":61,PIPE:62,CYLINDERSTART:63,CYLINDEREND:64,DIAMOND_START:65,DIAMOND_STOP:66,TAGEND:67,TRAPSTART:68,TRAPEND:69,INVTRAPSTART:70,INVTRAPEND:71,linkStatement:72,arrowText:73,TESTSTR:74,START_LINK:75,edgeText:76,LINK:77,LINK_ID:78,edgeTextToken:79,STR:80,MD_STR:81,textToken:82,keywords:83,STYLE:84,LINKSTYLE:85,CLASSDEF:86,CLASS:87,CLICK:88,DOWN:89,UP:90,textNoTagsToken:91,stylesOpt:92,"idString[vertex]":93,"idString[class]":94,CALLBACKNAME:95,CALLBACKARGS:96,HREF:97,LINK_TARGET:98,"STR[link]":99,"STR[tooltip]":100,alphaNum:101,DEFAULT:102,numList:103,INTERPOLATE:104,NUM:105,COMMA:106,style:107,styleComponent:108,NODE_STRING:109,UNIT:110,BRKT:111,PCT:112,idStringToken:113,MINUS:114,MULT:115,UNICODE_TEXT:116,TEXT:117,TAGSTART:118,EDGE_TEXT:119,alphaNumToken:120,direction_tb:121,direction_bt:122,direction_rl:123,direction_lr:124,$accept:0,$end:1},terminals_:{2:"error",8:"SEMI",9:"NEWLINE",10:"SPACE",11:"EOF",12:"GRAPH",13:"NODIR",14:"DIR",27:"subgraph",29:"SQS",31:"SQE",32:"end",34:"acc_title",35:"acc_title_value",36:"acc_descr",37:"acc_descr_value",38:"acc_descr_multiline_value",40:"SHAPE_DATA",44:"AMP",46:"STYLE_SEPARATOR",48:"DOUBLECIRCLESTART",49:"DOUBLECIRCLEEND",50:"PS",51:"PE",52:"(-",53:"-)",54:"STADIUMSTART",55:"STADIUMEND",56:"SUBROUTINESTART",57:"SUBROUTINEEND",58:"VERTEX_WITH_PROPS_START",59:"NODE_STRING[field]",60:"COLON",61:"NODE_STRING[value]",62:"PIPE",63:"CYLINDERSTART",64:"CYLINDEREND",65:"DIAMOND_START",66:"DIAMOND_STOP",67:"TAGEND",68:"TRAPSTART",69:"TRAPEND",70:"INVTRAPSTART",71:"INVTRAPEND",74:"TESTSTR",75:"START_LINK",77:"LINK",78:"LINK_ID",80:"STR",81:"MD_STR",84:"STYLE",85:"LINKSTYLE",86:"CLASSDEF",87:"CLASS",88:"CLICK",89:"DOWN",90:"UP",93:"idString[vertex]",94:"idString[class]",95:"CALLBACKNAME",96:"CALLBACKARGS",97:"HREF",98:"LINK_TARGET",99:"STR[link]",100:"STR[tooltip]",102:"DEFAULT",104:"INTERPOLATE",105:"NUM",106:"COMMA",109:"NODE_STRING",110:"UNIT",111:"BRKT",112:"PCT",114:"MINUS",115:"MULT",116:"UNICODE_TEXT",117:"TEXT",118:"TAGSTART",119:"EDGE_TEXT",121:"direction_tb",122:"direction_bt",123:"direction_rl",124:"direction_lr"},productions_:[0,[3,2],[5,0],[5,2],[6,1],[6,1],[6,1],[6,1],[6,1],[4,2],[4,2],[4,2],[4,3],[16,2],[16,1],[17,1],[17,1],[17,1],[15,1],[15,1],[15,2],[19,2],[19,2],[19,1],[19,1],[18,2],[18,1],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,9],[7,6],[7,4],[7,1],[7,2],[7,2],[7,1],[21,1],[21,1],[21,1],[39,2],[39,1],[20,4],[20,3],[20,4],[20,2],[20,2],[20,1],[42,1],[42,6],[42,5],[43,1],[43,3],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,8],[45,4],[45,4],[45,4],[45,6],[45,4],[45,4],[45,4],[45,4],[45,4],[45,1],[41,2],[41,3],[41,3],[41,1],[41,3],[41,4],[76,1],[76,2],[76,1],[76,1],[72,1],[72,2],[73,3],[30,1],[30,2],[30,1],[30,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[83,1],[28,1],[28,2],[28,1],[28,1],[24,5],[25,5],[26,2],[26,4],[26,3],[26,5],[26,3],[26,5],[26,5],[26,7],[26,2],[26,4],[26,2],[26,4],[26,4],[26,6],[22,5],[23,5],[23,5],[23,9],[23,9],[23,7],[23,7],[103,1],[103,3],[92,1],[92,3],[107,1],[107,2],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[108,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[113,1],[82,1],[82,1],[82,1],[82,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[91,1],[79,1],[79,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[120,1],[47,1],[47,2],[101,1],[101,2],[33,1],[33,1],[33,1],[33,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 2:case 28:case 29:case 30:case 31:case 32:this.$=[];break;case 3:(!Array.isArray(a[o])||a[o].length>0)&&a[o-1].push(a[o]),this.$=a[o-1];break;case 4:case 183:case 44:case 54:case 76:case 181:this.$=a[o];break;case 11:i.setDirection("TB"),this.$="TB";break;case 12:i.setDirection(a[o-1]),this.$=a[o-1];break;case 27:this.$=a[o-1].nodes;break;case 33:this.$=i.addSubGraph(a[o-6],a[o-1],a[o-4]);break;case 34:this.$=i.addSubGraph(a[o-3],a[o-1],a[o-3]);break;case 35:this.$=i.addSubGraph(void 0,a[o-1],void 0);break;case 37:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 38:case 39:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 43:case 133:this.$=a[o-1]+a[o];break;case 45:i.addVertex(a[o-1][a[o-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,a[o]),i.addLink(a[o-3].stmt,a[o-1],a[o-2]),this.$={stmt:a[o-1],nodes:a[o-1].concat(a[o-3].nodes)};break;case 46:i.addLink(a[o-2].stmt,a[o],a[o-1]),this.$={stmt:a[o],nodes:a[o].concat(a[o-2].nodes)};break;case 47:i.addLink(a[o-3].stmt,a[o-1],a[o-2]),this.$={stmt:a[o-1],nodes:a[o-1].concat(a[o-3].nodes)};break;case 48:this.$={stmt:a[o-1],nodes:a[o-1]};break;case 49:i.addVertex(a[o-1][a[o-1].length-1],void 0,void 0,void 0,void 0,void 0,void 0,a[o]),this.$={stmt:a[o-1],nodes:a[o-1],shapeData:a[o]};break;case 50:this.$={stmt:a[o],nodes:a[o]};break;case 51:case 128:case 130:this.$=[a[o]];break;case 52:i.addVertex(a[o-5][a[o-5].length-1],void 0,void 0,void 0,void 0,void 0,void 0,a[o-4]),this.$=a[o-5].concat(a[o]);break;case 53:this.$=a[o-4].concat(a[o]);break;case 55:this.$=a[o-2],i.setClass(a[o-2],a[o]);break;case 56:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"square");break;case 57:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"doublecircle");break;case 58:this.$=a[o-5],i.addVertex(a[o-5],a[o-2],"circle");break;case 59:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"ellipse");break;case 60:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"stadium");break;case 61:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"subroutine");break;case 62:this.$=a[o-7],i.addVertex(a[o-7],a[o-1],"rect",void 0,void 0,void 0,Object.fromEntries([[a[o-5],a[o-3]]]));break;case 63:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"cylinder");break;case 64:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"round");break;case 65:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"diamond");break;case 66:this.$=a[o-5],i.addVertex(a[o-5],a[o-2],"hexagon");break;case 67:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"odd");break;case 68:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"trapezoid");break;case 69:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"inv_trapezoid");break;case 70:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"lean_right");break;case 71:this.$=a[o-3],i.addVertex(a[o-3],a[o-1],"lean_left");break;case 72:this.$=a[o],i.addVertex(a[o]);break;case 73:a[o-1].text=a[o],this.$=a[o-1];break;case 74:case 75:a[o-2].text=a[o-1],this.$=a[o-2];break;case 77:var l=i.destructLink(a[o],a[o-2]);this.$={type:l.type,stroke:l.stroke,length:l.length,text:a[o-1]};break;case 78:l=i.destructLink(a[o],a[o-2]);this.$={type:l.type,stroke:l.stroke,length:l.length,text:a[o-1],id:a[o-3]};break;case 79:case 86:case 101:case 103:this.$={text:a[o],type:"text"};break;case 80:case 87:case 102:this.$={text:a[o-1].text+""+a[o],type:a[o-1].type};break;case 81:case 88:this.$={text:a[o],type:"string"};break;case 82:case 89:case 104:this.$={text:a[o],type:"markdown"};break;case 83:l=i.destructLink(a[o]);this.$={type:l.type,stroke:l.stroke,length:l.length};break;case 84:l=i.destructLink(a[o]);this.$={type:l.type,stroke:l.stroke,length:l.length,id:a[o-1]};break;case 85:this.$=a[o-1];break;case 105:this.$=a[o-4],i.addClass(a[o-2],a[o]);break;case 106:this.$=a[o-4],i.setClass(a[o-2],a[o]);break;case 107:case 115:this.$=a[o-1],i.setClickEvent(a[o-1],a[o]);break;case 108:case 116:this.$=a[o-3],i.setClickEvent(a[o-3],a[o-2]),i.setTooltip(a[o-3],a[o]);break;case 109:this.$=a[o-2],i.setClickEvent(a[o-2],a[o-1],a[o]);break;case 110:this.$=a[o-4],i.setClickEvent(a[o-4],a[o-3],a[o-2]),i.setTooltip(a[o-4],a[o]);break;case 111:this.$=a[o-2],i.setLink(a[o-2],a[o]);break;case 112:this.$=a[o-4],i.setLink(a[o-4],a[o-2]),i.setTooltip(a[o-4],a[o]);break;case 113:this.$=a[o-4],i.setLink(a[o-4],a[o-2],a[o]);break;case 114:this.$=a[o-6],i.setLink(a[o-6],a[o-4],a[o]),i.setTooltip(a[o-6],a[o-2]);break;case 117:this.$=a[o-1],i.setLink(a[o-1],a[o]);break;case 118:this.$=a[o-3],i.setLink(a[o-3],a[o-2]),i.setTooltip(a[o-3],a[o]);break;case 119:this.$=a[o-3],i.setLink(a[o-3],a[o-2],a[o]);break;case 120:this.$=a[o-5],i.setLink(a[o-5],a[o-4],a[o]),i.setTooltip(a[o-5],a[o-2]);break;case 121:this.$=a[o-4],i.addVertex(a[o-2],void 0,void 0,a[o]);break;case 122:this.$=a[o-4],i.updateLink([a[o-2]],a[o]);break;case 123:this.$=a[o-4],i.updateLink(a[o-2],a[o]);break;case 124:this.$=a[o-8],i.updateLinkInterpolate([a[o-6]],a[o-2]),i.updateLink([a[o-6]],a[o]);break;case 125:this.$=a[o-8],i.updateLinkInterpolate(a[o-6],a[o-2]),i.updateLink(a[o-6],a[o]);break;case 126:this.$=a[o-6],i.updateLinkInterpolate([a[o-4]],a[o]);break;case 127:this.$=a[o-6],i.updateLinkInterpolate(a[o-4],a[o]);break;case 129:case 131:a[o-2].push(a[o]),this.$=a[o-2];break;case 182:case 184:this.$=a[o-1]+""+a[o];break;case 185:this.$={stmt:"dir",value:"TB"};break;case 186:this.$={stmt:"dir",value:"BT"};break;case 187:this.$={stmt:"dir",value:"RL"};break;case 188:this.$={stmt:"dir",value:"LR"}}}),"anonymous"),table:[{3:1,4:2,9:e,10:r,12:i},{1:[3]},t(n,a,{5:6}),{4:7,9:e,10:r,12:i},{4:8,9:e,10:r,12:i},{13:[1,9],14:[1,10]},{1:[2,1],6:11,7:12,8:s,9:o,10:l,11:c,20:17,22:18,23:19,24:20,25:21,26:22,27:h,33:24,34:u,36:d,38:p,42:28,43:38,44:f,45:39,47:40,60:y,84:m,85:x,86:b,87:k,88:v,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L,121:R,122:I,123:N,124:D},t(n,[2,9]),t(n,[2,10]),t(n,[2,11]),{8:[1,54],9:[1,55],10:M,15:53,18:56},t(O,[2,3]),t(O,[2,4]),t(O,[2,5]),t(O,[2,6]),t(O,[2,7]),t(O,[2,8]),{8:P,9:B,11:F,21:58,41:59,72:63,75:[1,64],77:[1,66],78:[1,65]},{8:P,9:B,11:F,21:67},{8:P,9:B,11:F,21:68},{8:P,9:B,11:F,21:69},{8:P,9:B,11:F,21:70},{8:P,9:B,11:F,21:71},{8:P,9:B,10:[1,72],11:F,21:73},t(O,[2,36]),{35:[1,74]},{37:[1,75]},t(O,[2,39]),t(z,[2,50],{18:76,39:77,10:M,40:j}),{10:[1,79]},{10:[1,80]},{10:[1,81]},{10:[1,82]},{14:U,44:W,60:q,80:[1,86],89:Y,95:[1,83],97:[1,84],101:85,105:G,106:H,109:V,111:X,114:K,115:Q,116:Z,120:87},t(O,[2,185]),t(O,[2,186]),t(O,[2,187]),t(O,[2,188]),t(J,[2,51]),t(J,[2,54],{46:[1,99]}),t(tt,[2,72],{113:112,29:[1,100],44:f,48:[1,101],50:[1,102],52:[1,103],54:[1,104],56:[1,105],58:[1,106],60:y,63:[1,107],65:[1,108],67:[1,109],68:[1,110],70:[1,111],89:T,102:w,105:_,106:S,109:C,111:E,114:A,115:$,116:L}),t(et,[2,181]),t(et,[2,142]),t(et,[2,143]),t(et,[2,144]),t(et,[2,145]),t(et,[2,146]),t(et,[2,147]),t(et,[2,148]),t(et,[2,149]),t(et,[2,150]),t(et,[2,151]),t(et,[2,152]),t(n,[2,12]),t(n,[2,18]),t(n,[2,19]),{9:[1,113]},t(rt,[2,26],{18:114,10:M}),t(O,[2,27]),{42:115,43:38,44:f,45:39,47:40,60:y,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L},t(O,[2,40]),t(O,[2,41]),t(O,[2,42]),t(it,[2,76],{73:116,62:[1,118],74:[1,117]}),{76:119,79:120,80:nt,81:at,116:st,119:ot},{75:[1,125],77:[1,126]},t(lt,[2,83]),t(O,[2,28]),t(O,[2,29]),t(O,[2,30]),t(O,[2,31]),t(O,[2,32]),{10:ct,12:ht,14:ut,27:dt,28:127,32:pt,44:ft,60:gt,75:yt,80:[1,129],81:[1,130],83:140,84:mt,85:xt,86:bt,87:kt,88:vt,89:Tt,90:wt,91:128,105:_t,109:St,111:Ct,114:Et,115:At,116:$t},t(Lt,a,{5:153}),t(O,[2,37]),t(O,[2,38]),t(z,[2,48],{44:Rt}),t(z,[2,49],{18:155,10:M,40:It}),t(J,[2,44]),{44:f,47:157,60:y,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L},{102:[1,158],103:159,105:[1,160]},{44:f,47:161,60:y,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L},{44:f,47:162,60:y,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L},t(Nt,[2,107],{10:[1,163],96:[1,164]}),{80:[1,165]},t(Nt,[2,115],{120:167,10:[1,166],14:U,44:W,60:q,89:Y,105:G,106:H,109:V,111:X,114:K,115:Q,116:Z}),t(Nt,[2,117],{10:[1,168]}),t(Dt,[2,183]),t(Dt,[2,170]),t(Dt,[2,171]),t(Dt,[2,172]),t(Dt,[2,173]),t(Dt,[2,174]),t(Dt,[2,175]),t(Dt,[2,176]),t(Dt,[2,177]),t(Dt,[2,178]),t(Dt,[2,179]),t(Dt,[2,180]),{44:f,47:169,60:y,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L},{30:170,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{30:178,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{30:180,50:[1,179],67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{30:181,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{30:182,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{30:183,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{109:[1,184]},{30:185,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{30:186,65:[1,187],67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{30:188,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{30:189,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{30:190,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},t(et,[2,182]),t(n,[2,20]),t(rt,[2,25]),t(z,[2,46],{39:191,18:192,10:M,40:j}),t(it,[2,73],{10:[1,193]}),{10:[1,194]},{30:195,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{77:[1,196],79:197,116:st,119:ot},t(jt,[2,79]),t(jt,[2,81]),t(jt,[2,82]),t(jt,[2,168]),t(jt,[2,169]),{76:198,79:120,80:nt,81:at,116:st,119:ot},t(lt,[2,84]),{8:P,9:B,10:ct,11:F,12:ht,14:ut,21:200,27:dt,29:[1,199],32:pt,44:ft,60:gt,75:yt,83:140,84:mt,85:xt,86:bt,87:kt,88:vt,89:Tt,90:wt,91:201,105:_t,109:St,111:Ct,114:Et,115:At,116:$t},t(Ut,[2,101]),t(Ut,[2,103]),t(Ut,[2,104]),t(Ut,[2,157]),t(Ut,[2,158]),t(Ut,[2,159]),t(Ut,[2,160]),t(Ut,[2,161]),t(Ut,[2,162]),t(Ut,[2,163]),t(Ut,[2,164]),t(Ut,[2,165]),t(Ut,[2,166]),t(Ut,[2,167]),t(Ut,[2,90]),t(Ut,[2,91]),t(Ut,[2,92]),t(Ut,[2,93]),t(Ut,[2,94]),t(Ut,[2,95]),t(Ut,[2,96]),t(Ut,[2,97]),t(Ut,[2,98]),t(Ut,[2,99]),t(Ut,[2,100]),{6:11,7:12,8:s,9:o,10:l,11:c,20:17,22:18,23:19,24:20,25:21,26:22,27:h,32:[1,202],33:24,34:u,36:d,38:p,42:28,43:38,44:f,45:39,47:40,60:y,84:m,85:x,86:b,87:k,88:v,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L,121:R,122:I,123:N,124:D},{10:M,18:203},{44:[1,204]},t(J,[2,43]),{10:[1,205],44:f,60:y,89:T,102:w,105:_,106:S,109:C,111:E,113:112,114:A,115:$,116:L},{10:[1,206]},{10:[1,207],106:[1,208]},t(Wt,[2,128]),{10:[1,209],44:f,60:y,89:T,102:w,105:_,106:S,109:C,111:E,113:112,114:A,115:$,116:L},{10:[1,210],44:f,60:y,89:T,102:w,105:_,106:S,109:C,111:E,113:112,114:A,115:$,116:L},{80:[1,211]},t(Nt,[2,109],{10:[1,212]}),t(Nt,[2,111],{10:[1,213]}),{80:[1,214]},t(Dt,[2,184]),{80:[1,215],98:[1,216]},t(J,[2,55],{113:112,44:f,60:y,89:T,102:w,105:_,106:S,109:C,111:E,114:A,115:$,116:L}),{31:[1,217],67:Mt,82:218,116:Bt,117:Ft,118:zt},t(qt,[2,86]),t(qt,[2,88]),t(qt,[2,89]),t(qt,[2,153]),t(qt,[2,154]),t(qt,[2,155]),t(qt,[2,156]),{49:[1,219],67:Mt,82:218,116:Bt,117:Ft,118:zt},{30:220,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{51:[1,221],67:Mt,82:218,116:Bt,117:Ft,118:zt},{53:[1,222],67:Mt,82:218,116:Bt,117:Ft,118:zt},{55:[1,223],67:Mt,82:218,116:Bt,117:Ft,118:zt},{57:[1,224],67:Mt,82:218,116:Bt,117:Ft,118:zt},{60:[1,225]},{64:[1,226],67:Mt,82:218,116:Bt,117:Ft,118:zt},{66:[1,227],67:Mt,82:218,116:Bt,117:Ft,118:zt},{30:228,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},{31:[1,229],67:Mt,82:218,116:Bt,117:Ft,118:zt},{67:Mt,69:[1,230],71:[1,231],82:218,116:Bt,117:Ft,118:zt},{67:Mt,69:[1,233],71:[1,232],82:218,116:Bt,117:Ft,118:zt},t(z,[2,45],{18:155,10:M,40:It}),t(z,[2,47],{44:Rt}),t(it,[2,75]),t(it,[2,74]),{62:[1,234],67:Mt,82:218,116:Bt,117:Ft,118:zt},t(it,[2,77]),t(jt,[2,80]),{77:[1,235],79:197,116:st,119:ot},{30:236,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},t(Lt,a,{5:237}),t(Ut,[2,102]),t(O,[2,35]),{43:238,44:f,45:39,47:40,60:y,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L},{10:M,18:239},{10:Yt,60:Gt,84:Ht,92:240,105:Vt,107:241,108:242,109:Xt,110:Kt,111:Qt,112:Zt},{10:Yt,60:Gt,84:Ht,92:251,104:[1,252],105:Vt,107:241,108:242,109:Xt,110:Kt,111:Qt,112:Zt},{10:Yt,60:Gt,84:Ht,92:253,104:[1,254],105:Vt,107:241,108:242,109:Xt,110:Kt,111:Qt,112:Zt},{105:[1,255]},{10:Yt,60:Gt,84:Ht,92:256,105:Vt,107:241,108:242,109:Xt,110:Kt,111:Qt,112:Zt},{44:f,47:257,60:y,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L},t(Nt,[2,108]),{80:[1,258]},{80:[1,259],98:[1,260]},t(Nt,[2,116]),t(Nt,[2,118],{10:[1,261]}),t(Nt,[2,119]),t(tt,[2,56]),t(qt,[2,87]),t(tt,[2,57]),{51:[1,262],67:Mt,82:218,116:Bt,117:Ft,118:zt},t(tt,[2,64]),t(tt,[2,59]),t(tt,[2,60]),t(tt,[2,61]),{109:[1,263]},t(tt,[2,63]),t(tt,[2,65]),{66:[1,264],67:Mt,82:218,116:Bt,117:Ft,118:zt},t(tt,[2,67]),t(tt,[2,68]),t(tt,[2,70]),t(tt,[2,69]),t(tt,[2,71]),t([10,44,60,89,102,105,106,109,111,114,115,116],[2,85]),t(it,[2,78]),{31:[1,265],67:Mt,82:218,116:Bt,117:Ft,118:zt},{6:11,7:12,8:s,9:o,10:l,11:c,20:17,22:18,23:19,24:20,25:21,26:22,27:h,32:[1,266],33:24,34:u,36:d,38:p,42:28,43:38,44:f,45:39,47:40,60:y,84:m,85:x,86:b,87:k,88:v,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L,121:R,122:I,123:N,124:D},t(J,[2,53]),{43:267,44:f,45:39,47:40,60:y,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L},t(Nt,[2,121],{106:Jt}),t(te,[2,130],{108:269,10:Yt,60:Gt,84:Ht,105:Vt,109:Xt,110:Kt,111:Qt,112:Zt}),t(ee,[2,132]),t(ee,[2,134]),t(ee,[2,135]),t(ee,[2,136]),t(ee,[2,137]),t(ee,[2,138]),t(ee,[2,139]),t(ee,[2,140]),t(ee,[2,141]),t(Nt,[2,122],{106:Jt}),{10:[1,270]},t(Nt,[2,123],{106:Jt}),{10:[1,271]},t(Wt,[2,129]),t(Nt,[2,105],{106:Jt}),t(Nt,[2,106],{113:112,44:f,60:y,89:T,102:w,105:_,106:S,109:C,111:E,114:A,115:$,116:L}),t(Nt,[2,110]),t(Nt,[2,112],{10:[1,272]}),t(Nt,[2,113]),{98:[1,273]},{51:[1,274]},{62:[1,275]},{66:[1,276]},{8:P,9:B,11:F,21:277},t(O,[2,34]),t(J,[2,52]),{10:Yt,60:Gt,84:Ht,105:Vt,107:278,108:242,109:Xt,110:Kt,111:Qt,112:Zt},t(ee,[2,133]),{14:U,44:W,60:q,89:Y,101:279,105:G,106:H,109:V,111:X,114:K,115:Q,116:Z,120:87},{14:U,44:W,60:q,89:Y,101:280,105:G,106:H,109:V,111:X,114:K,115:Q,116:Z,120:87},{98:[1,281]},t(Nt,[2,120]),t(tt,[2,58]),{30:282,67:Mt,80:Ot,81:Pt,82:171,116:Bt,117:Ft,118:zt},t(tt,[2,66]),t(Lt,a,{5:283}),t(te,[2,131],{108:269,10:Yt,60:Gt,84:Ht,105:Vt,109:Xt,110:Kt,111:Qt,112:Zt}),t(Nt,[2,126],{120:167,10:[1,284],14:U,44:W,60:q,89:Y,105:G,106:H,109:V,111:X,114:K,115:Q,116:Z}),t(Nt,[2,127],{120:167,10:[1,285],14:U,44:W,60:q,89:Y,105:G,106:H,109:V,111:X,114:K,115:Q,116:Z}),t(Nt,[2,114]),{31:[1,286],67:Mt,82:218,116:Bt,117:Ft,118:zt},{6:11,7:12,8:s,9:o,10:l,11:c,20:17,22:18,23:19,24:20,25:21,26:22,27:h,32:[1,287],33:24,34:u,36:d,38:p,42:28,43:38,44:f,45:39,47:40,60:y,84:m,85:x,86:b,87:k,88:v,89:T,102:w,105:_,106:S,109:C,111:E,113:41,114:A,115:$,116:L,121:R,122:I,123:N,124:D},{10:Yt,60:Gt,84:Ht,92:288,105:Vt,107:241,108:242,109:Xt,110:Kt,111:Qt,112:Zt},{10:Yt,60:Gt,84:Ht,92:289,105:Vt,107:241,108:242,109:Xt,110:Kt,111:Qt,112:Zt},t(tt,[2,62]),t(O,[2,33]),t(Nt,[2,124],{106:Jt}),t(Nt,[2,125],{106:Jt})],defaultActions:{},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},ie={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{},performAction:g((function(t,e,r,i){switch(r){case 0:return this.begin("acc_title"),34;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),36;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:case 12:case 14:case 17:case 20:case 23:case 33:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return this.pushState("shapeData"),e.yytext="",40;case 8:return this.pushState("shapeDataStr"),40;case 9:return this.popState(),40;case 10:let r=/\n\s*/g;return e.yytext=e.yytext.replace(r,"<br/>"),40;case 11:return 40;case 13:this.begin("callbackname");break;case 15:this.popState(),this.begin("callbackargs");break;case 16:return 95;case 18:return 96;case 19:return"MD_STR";case 21:this.begin("md_string");break;case 22:return"STR";case 24:this.pushState("string");break;case 25:return 84;case 26:return 102;case 27:return 85;case 28:return 104;case 29:return 86;case 30:return 87;case 31:return 97;case 32:this.begin("click");break;case 34:return 88;case 35:case 36:case 37:return t.lex.firstGraph()&&this.begin("dir"),12;case 38:return 27;case 39:return 32;case 40:case 41:case 42:case 43:return 98;case 44:return this.popState(),13;case 45:case 46:case 47:case 48:case 49:case 50:case 51:case 52:case 53:case 54:return this.popState(),14;case 55:return 121;case 56:return 122;case 57:return 123;case 58:return 124;case 59:return 78;case 60:return 105;case 61:case 102:return 111;case 62:return 46;case 63:return 60;case 64:case 103:return 44;case 65:return 8;case 66:return 106;case 67:case 101:return 115;case 68:case 71:case 74:return this.popState(),77;case 69:return this.pushState("edgeText"),75;case 70:case 73:case 76:return 119;case 72:return this.pushState("thickEdgeText"),75;case 75:return this.pushState("dottedEdgeText"),75;case 77:return 77;case 78:return this.popState(),53;case 79:case 115:return"TEXT";case 80:return this.pushState("ellipseText"),52;case 81:return this.popState(),55;case 82:return this.pushState("text"),54;case 83:return this.popState(),57;case 84:return this.pushState("text"),56;case 85:return 58;case 86:return this.pushState("text"),67;case 87:return this.popState(),64;case 88:return this.pushState("text"),63;case 89:return this.popState(),49;case 90:return this.pushState("text"),48;case 91:return this.popState(),69;case 92:return this.popState(),71;case 93:return 117;case 94:return this.pushState("trapText"),68;case 95:return this.pushState("trapText"),70;case 96:return 118;case 97:return 67;case 98:return 90;case 99:return"SEP";case 100:return 89;case 104:return 109;case 105:return 114;case 106:return 116;case 107:return this.popState(),62;case 108:return this.pushState("text"),62;case 109:return this.popState(),51;case 110:return this.pushState("text"),50;case 111:return this.popState(),31;case 112:return this.pushState("text"),29;case 113:return this.popState(),66;case 114:return this.pushState("text"),65;case 116:return"QUOTE";case 117:return 9;case 118:return 10;case 119:return 11}}),"anonymous"),rules:[/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:@\{)/,/^(?:["])/,/^(?:["])/,/^(?:[^\"]+)/,/^(?:[^}^"]+)/,/^(?:\})/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["][`])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:["])/,/^(?:style\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\b)/,/^(?:class\b)/,/^(?:href[\s])/,/^(?:click[\s]+)/,/^(?:[\s\n])/,/^(?:[^\s\n]*)/,/^(?:flowchart-elk\b)/,/^(?:graph\b)/,/^(?:flowchart\b)/,/^(?:subgraph\b)/,/^(?:end\b\s*)/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:(\r?\n)*\s*\n)/,/^(?:\s*LR\b)/,/^(?:\s*RL\b)/,/^(?:\s*TB\b)/,/^(?:\s*BT\b)/,/^(?:\s*TD\b)/,/^(?:\s*BR\b)/,/^(?:\s*<)/,/^(?:\s*>)/,/^(?:\s*\^)/,/^(?:\s*v\b)/,/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:[^\s\"]+@(?=[^\{\"]))/,/^(?:[0-9]+)/,/^(?:#)/,/^(?::::)/,/^(?::)/,/^(?:&)/,/^(?:;)/,/^(?:,)/,/^(?:\*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:[^-]|-(?!-)+)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:[^=]|=(?!))/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:[^\.]|\.(?!))/,/^(?:\s*~~[\~]+\s*)/,/^(?:[-/\)][\)])/,/^(?:[^\(\)\[\]\{\}]|!\)+)/,/^(?:\(-)/,/^(?:\]\))/,/^(?:\(\[)/,/^(?:\]\])/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:>)/,/^(?:\)\])/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\(\(\()/,/^(?:[\\(?=\])][\]])/,/^(?:\/(?=\])\])/,/^(?:\/(?!\])|\\(?!\])|[^\\\[\]\(\)\{\}\/]+)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:<)/,/^(?:>)/,/^(?:\^)/,/^(?:\\\|)/,/^(?:v\b)/,/^(?:\*)/,/^(?:#)/,/^(?:&)/,/^(?:([A-Za-z0-9!"\#$%&'*+\.`?\\_\/]|-(?=[^\>\-\.])|(?!))+)/,/^(?:-)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\|)/,/^(?:\|)/,/^(?:\))/,/^(?:\()/,/^(?:\])/,/^(?:\[)/,/^(?:(\}))/,/^(?:\{)/,/^(?:[^\[\]\(\)\{\}\|\"]+)/,/^(?:")/,/^(?:(\r?\n)+)/,/^(?:\s)/,/^(?:$)/],conditions:{shapeDataEndBracket:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeDataStr:{rules:[9,10,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},shapeData:{rules:[8,11,12,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackargs:{rules:[17,18,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},callbackname:{rules:[14,15,16,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},href:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},click:{rules:[21,24,33,34,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dottedEdgeText:{rules:[21,24,74,76,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},thickEdgeText:{rules:[21,24,71,73,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},edgeText:{rules:[21,24,68,70,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},trapText:{rules:[21,24,77,80,82,84,88,90,91,92,93,94,95,108,110,112,114],inclusive:!1},ellipseText:{rules:[21,24,77,78,79,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},text:{rules:[21,24,77,80,81,82,83,84,87,88,89,90,94,95,107,108,109,110,111,112,113,114,115],inclusive:!1},vertex:{rules:[21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},dir:{rules:[21,24,44,45,46,47,48,49,50,51,52,53,54,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr_multiline:{rules:[5,6,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_descr:{rules:[3,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},acc_title:{rules:[1,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},md_string:{rules:[19,20,21,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},string:{rules:[21,22,23,24,77,80,82,84,88,90,94,95,108,110,112,114],inclusive:!1},INITIAL:{rules:[0,2,4,7,13,21,24,25,26,27,28,29,30,31,32,35,36,37,38,39,40,41,42,43,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,71,72,74,75,77,80,82,84,85,86,88,90,94,95,96,97,98,99,100,101,102,103,104,105,106,108,110,112,114,116,117,118,119],inclusive:!0}}};function ne(){this.yy={}}return re.lexer=ie,g(ne,"Parser"),ne.prototype=re,re.Parser=ne,new ne}()).parser=i5,n5=i5})),y5=y((()=>{g5(),(a5=Object.assign({},n5)).parse=t=>{let e=t.replace(/}\s*\n/g,"}\n");return n5.parse(e)},s5=a5})),m5=y((()=>{o5=g((()=>"\n  /* Font Awesome icon styling - consolidated */\n  .label-icon {\n    display: inline-block;\n    height: 1em;\n    overflow: visible;\n    vertical-align: -0.125em;\n  }\n  \n  .node .label-icon path {\n    fill: currentColor;\n    stroke: revert;\n    stroke-width: revert;\n  }\n"),"getIconStyles")})),x5=y((()=>{yr(),m5(),l5=g(((t,e)=>{let r=Dt,i=r(t,"r"),n=r(t,"g"),a=r(t,"b");return It(i,n,a,e)}),"fade"),c5=g((t=>`.label {\n    font-family: ${t.fontFamily};\n    color: ${t.nodeTextColor||t.textColor};\n  }\n  .cluster-label text {\n    fill: ${t.titleColor};\n  }\n  .cluster-label span {\n    color: ${t.titleColor};\n  }\n  .cluster-label span p {\n    background-color: transparent;\n  }\n\n  .label text,span {\n    fill: ${t.nodeTextColor||t.textColor};\n    color: ${t.nodeTextColor||t.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n  .rough-node .label text , .node .label text, .image-shape .label, .icon-shape .label {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .katex path {\n    fill: #000;\n    stroke: #000;\n    stroke-width: 1px;\n  }\n\n  .rough-node .label,.node .label, .image-shape .label, .icon-shape .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n\n  .root .anchor path {\n    fill: ${t.lineColor} !important;\n    stroke-width: 0;\n    stroke: ${t.lineColor};\n  }\n\n  .arrowheadPath {\n    fill: ${t.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${t.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${t.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${t.edgeLabelBackground};\n    p {\n      background-color: ${t.edgeLabelBackground};\n    }\n    rect {\n      opacity: 0.5;\n      background-color: ${t.edgeLabelBackground};\n      fill: ${t.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ${l5(t.edgeLabelBackground,.5)};\n    // background-color:\n  }\n\n  .cluster rect {\n    fill: ${t.clusterBkg};\n    stroke: ${t.clusterBorder};\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${t.titleColor};\n  }\n\n  .cluster span {\n    color: ${t.titleColor};\n  }\n  /* .cluster div {\n    color: ${t.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${t.fontFamily};\n    font-size: 12px;\n    background: ${t.tertiaryColor};\n    border: 1px solid ${t.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${t.textColor};\n  }\n\n  rect.text {\n    fill: none;\n    stroke-width: 0;\n  }\n\n  .icon-shape, .image-shape {\n    background-color: ${t.edgeLabelBackground};\n    p {\n      background-color: ${t.edgeLabelBackground};\n      padding: 2px;\n    }\n    rect {\n      opacity: 0.5;\n      background-color: ${t.edgeLabelBackground};\n      fill: ${t.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n  ${o5()}\n`),"getStyles"),h5=c5})),b5={};x(b5,{diagram:()=>k5});var k5,v5,T5,w5,_5=y((()=>{ns(),jj(),f5(),y5(),x5(),k5={parser:s5,get db(){return new Aj},renderer:r5,styles:h5,init:g((t=>{t.flowchart||(t.flowchart={}),t.layout&&aa({layout:t.layout}),t.flowchart.arrowMarkerAbsolute=t.arrowMarkerAbsolute,aa({flowchart:{arrowMarkerAbsolute:t.arrowMarkerAbsolute}})}),"init")}})),S5=y((()=>{(v5=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[6,8,10,22,24,26,28,33,34,35,36,37,40,43,44,50],r=[1,10],i=[1,11],n=[1,12],a=[1,13],s=[1,20],o=[1,21],l=[1,22],c=[1,23],h=[1,24],u=[1,19],d=[1,25],p=[1,26],f=[1,18],y=[1,33],m=[1,34],x=[1,35],b=[1,36],k=[1,37],v=[6,8,10,13,15,17,20,21,22,24,26,28,33,34,35,36,37,40,43,44,50,63,64,65,66,67],T=[1,42],w=[1,43],_=[1,52],S=[40,50,68,69],C=[1,63],E=[1,61],A=[1,58],$=[1,62],L=[1,64],R=[6,8,10,13,17,22,24,26,28,33,34,35,36,37,40,41,42,43,44,48,49,50,63,64,65,66,67],I=[63,64,65,66,67],N=[1,81],D=[1,80],M=[1,78],O=[1,79],P=[6,10,42,47],B=[6,10,13,41,42,47,48,49],F=[1,89],z=[1,88],j=[1,87],U=[19,56],W=[1,98],q=[1,97],Y=[19,56,58,60],G={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,COLON:13,role:14,STYLE_SEPARATOR:15,idList:16,BLOCK_START:17,attributes:18,BLOCK_STOP:19,SQS:20,SQE:21,title:22,title_value:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,direction:29,classDefStatement:30,classStatement:31,styleStatement:32,direction_tb:33,direction_bt:34,direction_rl:35,direction_lr:36,CLASSDEF:37,stylesOpt:38,separator:39,UNICODE_TEXT:40,STYLE_TEXT:41,COMMA:42,CLASS:43,STYLE:44,style:45,styleComponent:46,SEMI:47,NUM:48,BRKT:49,ENTITY_NAME:50,attribute:51,attributeType:52,attributeName:53,attributeKeyTypeList:54,attributeComment:55,ATTRIBUTE_WORD:56,attributeKeyType:57,",":58,ATTRIBUTE_KEY:59,COMMENT:60,cardinality:61,relType:62,ZERO_OR_ONE:63,ZERO_OR_MORE:64,ONE_OR_MORE:65,ONLY_ONE:66,MD_PARENT:67,NON_IDENTIFYING:68,IDENTIFYING:69,WORD:70,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:"COLON",15:"STYLE_SEPARATOR",17:"BLOCK_START",19:"BLOCK_STOP",20:"SQS",21:"SQE",22:"title",23:"title_value",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"direction_tb",34:"direction_bt",35:"direction_rl",36:"direction_lr",37:"CLASSDEF",40:"UNICODE_TEXT",41:"STYLE_TEXT",42:"COMMA",43:"CLASS",44:"STYLE",47:"SEMI",48:"NUM",49:"BRKT",50:"ENTITY_NAME",56:"ATTRIBUTE_WORD",58:",",59:"ATTRIBUTE_KEY",60:"COMMENT",63:"ZERO_OR_ONE",64:"ZERO_OR_MORE",65:"ONE_OR_MORE",66:"ONLY_ONE",67:"MD_PARENT",68:"NON_IDENTIFYING",69:"IDENTIFYING",70:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,9],[9,7],[9,7],[9,4],[9,6],[9,3],[9,5],[9,1],[9,3],[9,7],[9,9],[9,6],[9,8],[9,4],[9,6],[9,2],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[9,1],[29,1],[29,1],[29,1],[29,1],[30,4],[16,1],[16,1],[16,3],[16,3],[31,3],[32,4],[38,1],[38,3],[45,1],[45,2],[39,1],[39,1],[39,1],[46,1],[46,1],[46,1],[46,1],[11,1],[11,1],[18,1],[18,2],[51,2],[51,3],[51,3],[51,4],[52,1],[53,1],[54,1],[54,3],[57,1],[55,1],[12,3],[61,1],[61,1],[61,1],[61,1],[61,1],[62,1],[62,1],[14,1],[14,1],[14,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 1:break;case 2:case 6:case 7:this.$=[];break;case 3:a[o-1].push(a[o]),this.$=a[o-1];break;case 4:case 5:case 55:case 78:case 62:case 63:case 66:this.$=a[o];break;case 8:i.addEntity(a[o-4]),i.addEntity(a[o-2]),i.addRelationship(a[o-4],a[o],a[o-2],a[o-3]);break;case 9:i.addEntity(a[o-8]),i.addEntity(a[o-4]),i.addRelationship(a[o-8],a[o],a[o-4],a[o-5]),i.setClass([a[o-8]],a[o-6]),i.setClass([a[o-4]],a[o-2]);break;case 10:i.addEntity(a[o-6]),i.addEntity(a[o-2]),i.addRelationship(a[o-6],a[o],a[o-2],a[o-3]),i.setClass([a[o-6]],a[o-4]);break;case 11:i.addEntity(a[o-6]),i.addEntity(a[o-4]),i.addRelationship(a[o-6],a[o],a[o-4],a[o-5]),i.setClass([a[o-4]],a[o-2]);break;case 12:i.addEntity(a[o-3]),i.addAttributes(a[o-3],a[o-1]);break;case 13:i.addEntity(a[o-5]),i.addAttributes(a[o-5],a[o-1]),i.setClass([a[o-5]],a[o-3]);break;case 14:i.addEntity(a[o-2]);break;case 15:i.addEntity(a[o-4]),i.setClass([a[o-4]],a[o-2]);break;case 16:i.addEntity(a[o]);break;case 17:i.addEntity(a[o-2]),i.setClass([a[o-2]],a[o]);break;case 18:i.addEntity(a[o-6],a[o-4]),i.addAttributes(a[o-6],a[o-1]);break;case 19:i.addEntity(a[o-8],a[o-6]),i.addAttributes(a[o-8],a[o-1]),i.setClass([a[o-8]],a[o-3]);break;case 20:i.addEntity(a[o-5],a[o-3]);break;case 21:i.addEntity(a[o-7],a[o-5]),i.setClass([a[o-7]],a[o-2]);break;case 22:i.addEntity(a[o-3],a[o-1]);break;case 23:i.addEntity(a[o-5],a[o-3]),i.setClass([a[o-5]],a[o]);break;case 24:case 25:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 26:case 27:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 32:i.setDirection("TB");break;case 33:i.setDirection("BT");break;case 34:i.setDirection("RL");break;case 35:i.setDirection("LR");break;case 36:this.$=a[o-3],i.addClass(a[o-2],a[o-1]);break;case 37:case 38:case 56:case 64:case 43:this.$=[a[o]];break;case 39:case 40:this.$=a[o-2].concat([a[o]]);break;case 41:this.$=a[o-2],i.setClass(a[o-1],a[o]);break;case 42:this.$=a[o-3],i.addCssStyles(a[o-2],a[o-1]);break;case 44:case 65:a[o-2].push(a[o]),this.$=a[o-2];break;case 46:this.$=a[o-1]+a[o];break;case 54:case 76:case 77:case 67:this.$=a[o].replace(/"/g,"");break;case 57:a[o].push(a[o-1]),this.$=a[o];break;case 58:this.$={type:a[o-1],name:a[o]};break;case 59:this.$={type:a[o-2],name:a[o-1],keys:a[o]};break;case 60:this.$={type:a[o-2],name:a[o-1],comment:a[o]};break;case 61:this.$={type:a[o-3],name:a[o-2],keys:a[o-1],comment:a[o]};break;case 68:this.$={cardA:a[o],relType:a[o-1],cardB:a[o-2]};break;case 69:this.$=i.Cardinality.ZERO_OR_ONE;break;case 70:this.$=i.Cardinality.ZERO_OR_MORE;break;case 71:this.$=i.Cardinality.ONE_OR_MORE;break;case 72:this.$=i.Cardinality.ONLY_ONE;break;case 73:this.$=i.Cardinality.MD_PARENT;break;case 74:this.$=i.Identification.NON_IDENTIFYING;break;case 75:this.$=i.Identification.IDENTIFYING}}),"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,22:r,24:i,26:n,28:a,29:14,30:15,31:16,32:17,33:s,34:o,35:l,36:c,37:h,40:u,43:d,44:p,50:f},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:27,11:9,22:r,24:i,26:n,28:a,29:14,30:15,31:16,32:17,33:s,34:o,35:l,36:c,37:h,40:u,43:d,44:p,50:f},t(e,[2,5]),t(e,[2,6]),t(e,[2,16],{12:28,61:32,15:[1,29],17:[1,30],20:[1,31],63:y,64:m,65:x,66:b,67:k}),{23:[1,38]},{25:[1,39]},{27:[1,40]},t(e,[2,27]),t(e,[2,28]),t(e,[2,29]),t(e,[2,30]),t(e,[2,31]),t(v,[2,54]),t(v,[2,55]),t(e,[2,32]),t(e,[2,33]),t(e,[2,34]),t(e,[2,35]),{16:41,40:T,41:w},{16:44,40:T,41:w},{16:45,40:T,41:w},t(e,[2,4]),{11:46,40:u,50:f},{16:47,40:T,41:w},{18:48,19:[1,49],51:50,52:51,56:_},{11:53,40:u,50:f},{62:54,68:[1,55],69:[1,56]},t(S,[2,69]),t(S,[2,70]),t(S,[2,71]),t(S,[2,72]),t(S,[2,73]),t(e,[2,24]),t(e,[2,25]),t(e,[2,26]),{13:C,38:57,41:E,42:A,45:59,46:60,48:$,49:L},t(R,[2,37]),t(R,[2,38]),{16:65,40:T,41:w,42:A},{13:C,38:66,41:E,42:A,45:59,46:60,48:$,49:L},{13:[1,67],15:[1,68]},t(e,[2,17],{61:32,12:69,17:[1,70],42:A,63:y,64:m,65:x,66:b,67:k}),{19:[1,71]},t(e,[2,14]),{18:72,19:[2,56],51:50,52:51,56:_},{53:73,56:[1,74]},{56:[2,62]},{21:[1,75]},{61:76,63:y,64:m,65:x,66:b,67:k},t(I,[2,74]),t(I,[2,75]),{6:N,10:D,39:77,42:M,47:O},{40:[1,82],41:[1,83]},t(P,[2,43],{46:84,13:C,41:E,48:$,49:L}),t(B,[2,45]),t(B,[2,50]),t(B,[2,51]),t(B,[2,52]),t(B,[2,53]),t(e,[2,41],{42:A}),{6:N,10:D,39:85,42:M,47:O},{14:86,40:F,50:z,70:j},{16:90,40:T,41:w},{11:91,40:u,50:f},{18:92,19:[1,93],51:50,52:51,56:_},t(e,[2,12]),{19:[2,57]},t(U,[2,58],{54:94,55:95,57:96,59:W,60:q}),t([19,56,59,60],[2,63]),t(e,[2,22],{15:[1,100],17:[1,99]}),t([40,50],[2,68]),t(e,[2,36]),{13:C,41:E,45:101,46:60,48:$,49:L},t(e,[2,47]),t(e,[2,48]),t(e,[2,49]),t(R,[2,39]),t(R,[2,40]),t(B,[2,46]),t(e,[2,42]),t(e,[2,8]),t(e,[2,76]),t(e,[2,77]),t(e,[2,78]),{13:[1,102],42:A},{13:[1,104],15:[1,103]},{19:[1,105]},t(e,[2,15]),t(U,[2,59],{55:106,58:[1,107],60:q}),t(U,[2,60]),t(Y,[2,64]),t(U,[2,67]),t(Y,[2,66]),{18:108,19:[1,109],51:50,52:51,56:_},{16:110,40:T,41:w},t(P,[2,44],{46:84,13:C,41:E,48:$,49:L}),{14:111,40:F,50:z,70:j},{16:112,40:T,41:w},{14:113,40:F,50:z,70:j},t(e,[2,13]),t(U,[2,61]),{57:114,59:W},{19:[1,115]},t(e,[2,20]),t(e,[2,23],{17:[1,116],42:A}),t(e,[2,11]),{13:[1,117],42:A},t(e,[2,10]),t(Y,[2,65]),t(e,[2,18]),{18:118,19:[1,119],51:50,52:51,56:_},{14:120,40:F,50:z,70:j},{19:[1,121]},t(e,[2,21]),t(e,[2,9]),t(e,[2,19])],defaultActions:{52:[2,62],72:[2,57]},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},H={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:g((function(t,e,r,i){switch(r){case 0:return this.begin("acc_title"),24;case 1:return this.popState(),"acc_title_value";case 2:return this.begin("acc_descr"),26;case 3:return this.popState(),"acc_descr_value";case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";case 7:return 33;case 8:return 34;case 9:return 35;case 10:return 36;case 11:return 10;case 12:case 23:case 28:case 35:break;case 13:return 8;case 14:return 50;case 15:return 70;case 16:return 4;case 17:return this.begin("block"),17;case 18:case 19:case 38:return 49;case 20:case 37:return 42;case 21:return 15;case 22:case 36:return 13;case 24:return 59;case 25:case 26:return 56;case 27:return 60;case 29:return this.popState(),19;case 30:case 73:return e.yytext[0];case 31:return 20;case 32:return 21;case 33:return this.begin("style"),44;case 34:return this.popState(),10;case 39:return this.begin("style"),37;case 40:return 43;case 41:case 45:case 46:case 59:return 63;case 42:case 43:case 44:case 52:case 54:case 61:return 65;case 47:case 48:case 49:case 50:case 51:case 53:case 60:return 64;case 55:case 56:case 57:case 58:return 66;case 62:return 67;case 63:case 66:case 67:case 68:return 68;case 64:case 65:return 69;case 69:return 41;case 70:return 47;case 71:return 40;case 72:return 48;case 74:return 6}}),"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:#)/i,/^(?:#)/i,/^(?:,)/i,/^(?::::)/i,/^(?::)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:([^\s]*)[~].*[~]([^\s]*))/i,/^(?:([\*A-Za-z_\u00C0-\uFFFF][A-Za-z0-9\-\_\[\]\(\)\u00C0-\uFFFF\*]*))/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:style\b)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?::)/i,/^(?:,)/i,/^(?:#)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:;)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:[0-9])/i,/^(?:.)/i,/^(?:$)/i],conditions:{style:{rules:[34,35,36,37,38,69,70],inclusive:!1},acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[23,24,25,26,27,28,29,30],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,32,33,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,71,72,73,74],inclusive:!0}}};function V(){this.yy={}}return G.lexer=H,g(V,"Parser"),V.prototype=G,G.Parser=V,new V}()).parser=v5,T5=v5})),C5=y((()=>{We(),ns(),is(),_L(),w5=class{constructor(){this.entities=new Map,this.relationships=[],this.classes=new Map,this.direction="TB",this.Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"},this.Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"},this.setAccTitle=Kn,this.getAccTitle=Qn,this.setAccDescription=Zn,this.getAccDescription=Jn,this.setDiagramTitle=ta,this.getDiagramTitle=ea,this.getConfig=g((()=>na().er),"getConfig"),this.clear(),this.addEntity=this.addEntity.bind(this),this.addAttributes=this.addAttributes.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setDirection=this.setDirection.bind(this),this.addCssStyles=this.addCssStyles.bind(this),this.addClass=this.addClass.bind(this),this.setClass=this.setClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}static{g(this,"ErDB")}addEntity(t,e=""){return this.entities.has(t)?!this.entities.get(t)?.alias&&e&&(this.entities.get(t).alias=e,et.info(`Add alias '${e}' to entity '${t}'`)):(this.entities.set(t,{id:`entity-${t}-${this.entities.size}`,label:t,attributes:[],alias:e,shape:"erBox",look:na().look??"default",cssClasses:"default",cssStyles:[]}),et.info("Added new entity :",t)),this.entities.get(t)}getEntity(t){return this.entities.get(t)}getEntities(){return this.entities}getClasses(){return this.classes}addAttributes(t,e){let r,i=this.addEntity(t);for(r=e.length-1;r>=0;r--)e[r].keys||(e[r].keys=[]),e[r].comment||(e[r].comment=""),i.attributes.push(e[r]),et.debug("Added attribute ",e[r].name)}addRelationship(t,e,r,i){let n=this.entities.get(t),a=this.entities.get(r);if(!n||!a)return;let s={entityA:n.id,roleA:e,entityB:a.id,relSpec:i};this.relationships.push(s),et.debug("Added new relationship :",s)}getRelationships(){return this.relationships}getDirection(){return this.direction}setDirection(t){this.direction=t}getCompiledStyles(t){let e=[];for(let r of t){let t=this.classes.get(r);t?.styles&&(e=[...e,...t.styles??[]].map((t=>t.trim()))),t?.textStyles&&(e=[...e,...t.textStyles??[]].map((t=>t.trim())))}return e}addCssStyles(t,e){for(let r of t){let t=this.entities.get(r);if(!e||!t)return;for(let r of e)t.cssStyles.push(r)}}addClass(t,e){t.forEach((t=>{let r=this.classes.get(t);void 0===r&&(r={id:t,styles:[],textStyles:[]},this.classes.set(t,r)),e&&e.forEach((function(t){if(/color/.exec(t)){let e=t.replace("fill","bgFill");r.textStyles.push(e)}r.styles.push(t)}))}))}setClass(t,e){for(let r of t){let t=this.entities.get(r);if(t)for(let r of e)t.cssClasses+=" "+r}}clear(){this.entities=new Map,this.classes=new Map,this.relationships=[],Xn()}getData(){let t=[],e=[],r=na();for(let e of this.entities.keys()){let r=this.entities.get(e);r&&(r.cssCompiledStyles=this.getCompiledStyles(r.cssClasses.split(" ")),t.push(r))}let i=0;for(let t of this.relationships){let n={id:wL(t.entityA,t.entityB,{prefix:"id",counter:i++}),type:"normal",curve:"basis",start:t.entityA,end:t.entityB,label:t.roleA,labelpos:"c",thickness:"normal",classes:"relationshipLine",arrowTypeStart:t.relSpec.cardB.toLowerCase(),arrowTypeEnd:t.relSpec.cardA.toLowerCase(),pattern:"IDENTIFYING"==t.relSpec.relType?"solid":"dashed",look:r.look};e.push(n)}return{nodes:t,edges:e,other:{},config:r,direction:"TB"}}}})),E5={};x(E5,{draw:()=>A5});var A5,$5,L5,R5,I5=y((()=>{ns(),We(),Uj(),d5(),p5(),_L(),QT(),A5=g((async function(t,e,r,i){et.info("REF0:"),et.info("Drawing er diagram (unified)",e);let{securityLevel:n,er:a,layout:s}=na(),o=i.db.getData(),l=$j(e,n);o.type=i.type,o.layoutAlgorithm=K4(s),o.config.flowchart.nodeSpacing=a?.nodeSpacing||140,o.config.flowchart.rankSpacing=a?.rankSpacing||80,o.direction=i.db.getDirection(),o.markers=["only_one","zero_or_one","one_or_more","zero_or_more"],o.diagramId=e,await X4(o,l),"elk"===o.layoutAlgorithm&&l.select(".edges").lower();let c=l.selectAll('[id*="-background"]');Array.from(c).length>0&&c.each((function(){let t=nh(this),e=t.attr("id").replace("-background",""),r=l.select(`#${CSS.escape(e)}`);if(!r.empty()){let e=r.attr("transform");t.attr("transform",e)}}));kL.insertTitle(l,"erDiagramTitleText",a?.titleTopMargin??25,i.db.getDiagramTitle()),Q4(l,8,"erDiagram",a?.useMaxWidth??!0)}),"draw")})),N5=y((()=>{yr(),$5=g(((t,e)=>{let r=Dt,i=r(t,"r"),n=r(t,"g"),a=r(t,"b");return It(i,n,a,e)}),"fade"),L5=g((t=>`\n  .entityBox {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${t.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${t.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n  .labelBkg {\n    background-color: ${$5(t.tertiaryColor,.5)};\n  }\n\n  .edgeLabel .label {\n    fill: ${t.nodeBorder};\n    font-size: 14px;\n  }\n\n  .label {\n    font-family: ${t.fontFamily};\n    color: ${t.nodeTextColor||t.textColor};\n  }\n\n  .edge-pattern-dashed {\n    stroke-dasharray: 8,8;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon\n  {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .relationshipLine {\n    stroke: ${t.lineColor};\n    stroke-width: 1;\n    fill: none;\n  }\n\n  .marker {\n    fill: none !important;\n    stroke: ${t.lineColor} !important;\n    stroke-width: 1;\n  }\n`),"getStyles"),R5=L5})),D5={};x(D5,{diagram:()=>M5});var M5,O5=y((()=>{S5(),C5(),I5(),N5(),M5={parser:T5,get db(){return new w5},renderer:E5,styles:R5}}));function P5(t){return"object"==typeof t&&null!==t&&"string"==typeof t.$type}function B5(t){return"object"==typeof t&&null!==t&&"string"==typeof t.$refText}function F5(t){return"object"==typeof t&&null!==t&&"string"==typeof t.name&&"string"==typeof t.type&&"string"==typeof t.path}function z5(t){return"object"==typeof t&&null!==t&&P5(t.container)&&B5(t.reference)&&"string"==typeof t.message}function j5(t){return"object"==typeof t&&null!==t&&Array.isArray(t.content)}function U5(t){return"object"==typeof t&&null!==t&&"object"==typeof t.tokenType}function W5(t){return j5(t)&&"string"==typeof t.fullText}var q5,Y5=y((()=>{g(P5,"isAstNode"),g(B5,"isReference"),g(F5,"isAstNodeDescription"),g(z5,"isLinkingError"),q5=class{static{g(this,"AbstractAstReflection")}constructor(){this.subtypes={},this.allSubtypes={}}isInstance(t,e){return P5(t)&&this.isSubtype(t.$type,e)}isSubtype(t,e){if(t===e)return!0;let r=this.subtypes[t];r||(r=this.subtypes[t]={});let i=r[e];if(void 0!==i)return i;{let i=this.computeIsSubtype(t,e);return r[e]=i,i}}getAllSubTypes(t){let e=this.allSubtypes[t];if(e)return e;{let e=this.getAllTypes(),r=[];for(let i of e)this.isSubtype(i,t)&&r.push(i);return this.allSubtypes[t]=r,r}}},g(j5,"isCompositeCstNode"),g(U5,"isLeafCstNode"),g(W5,"isRootCstNode")}));function G5(t){return"string"==typeof t?t:typeof t>"u"?"undefined":"function"==typeof t.toString?t.toString():Object.prototype.toString.call(t)}function H5(t){return!!t&&"function"==typeof t[Symbol.iterator]}function V5(...t){if(1===t.length){let e=t[0];if(e instanceof X5)return e;if(H5(e))return new X5((()=>e[Symbol.iterator]()),(t=>t.next()));if("number"==typeof e.length)return new X5((()=>({index:0})),(t=>t.index<e.length?{done:!1,value:e[t.index++]}:Q5))}return t.length>1?new X5((()=>({collIndex:0,arrIndex:0})),(e=>{do{if(e.iterator){let t=e.iterator.next();if(!t.done)return t;e.iterator=void 0}if(e.array){if(e.arrIndex<e.array.length)return{done:!1,value:e.array[e.arrIndex++]};e.array=void 0,e.arrIndex=0}if(e.collIndex<t.length){let r=t[e.collIndex++];H5(r)?e.iterator=r[Symbol.iterator]():r&&"number"==typeof r.length&&(e.array=r)}}while(e.iterator||e.array||e.collIndex<t.length);return Q5})):K5}var X5,K5,Q5,Z5,J5,t6=y((()=>{X5=class t{static{g(this,"StreamImpl")}constructor(t,e){this.startFn=t,this.nextFn=e}iterator(){let t={state:this.startFn(),next:g((()=>this.nextFn(t.state)),"next"),[Symbol.iterator]:()=>t};return t}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){let t=this.iterator(),e=0,r=t.next();for(;!r.done;)e++,r=t.next();return e}toArray(){let t,e=[],r=this.iterator();do{t=r.next(),void 0!==t.value&&e.push(t.value)}while(!t.done);return e}toSet(){return new Set(this)}toMap(t,e){let r=this.map((r=>[t?t(r):r,e?e(r):r]));return new Map(r)}toString(){return this.join()}concat(e){return new t((()=>({first:this.startFn(),firstDone:!1,iterator:e[Symbol.iterator]()})),(t=>{let e;if(!t.firstDone){do{if(e=this.nextFn(t.first),!e.done)return e}while(!e.done);t.firstDone=!0}do{if(e=t.iterator.next(),!e.done)return e}while(!e.done);return Q5}))}join(t=","){let e,r=this.iterator(),i="",n=!1;do{e=r.next(),e.done||(n&&(i+=t),i+=G5(e.value)),n=!0}while(!e.done);return i}indexOf(t,e=0){let r=this.iterator(),i=0,n=r.next();for(;!n.done;){if(i>=e&&n.value===t)return i;n=r.next(),i++}return-1}every(t){let e=this.iterator(),r=e.next();for(;!r.done;){if(!t(r.value))return!1;r=e.next()}return!0}some(t){let e=this.iterator(),r=e.next();for(;!r.done;){if(t(r.value))return!0;r=e.next()}return!1}forEach(t){let e=this.iterator(),r=0,i=e.next();for(;!i.done;)t(i.value,r),i=e.next(),r++}map(e){return new t(this.startFn,(t=>{let{done:r,value:i}=this.nextFn(t);return r?Q5:{done:!1,value:e(i)}}))}filter(e){return new t(this.startFn,(t=>{let r;do{if(r=this.nextFn(t),!r.done&&e(r.value))return r}while(!r.done);return Q5}))}nonNullable(){return this.filter((t=>null!=t))}reduce(t,e){let r=this.iterator(),i=e,n=r.next();for(;!n.done;)i=void 0===i?n.value:t(i,n.value),n=r.next();return i}reduceRight(t,e){return this.recursiveReduce(this.iterator(),t,e)}recursiveReduce(t,e,r){let i=t.next();if(i.done)return r;let n=this.recursiveReduce(t,e,r);return void 0===n?i.value:e(n,i.value)}find(t){let e=this.iterator(),r=e.next();for(;!r.done;){if(t(r.value))return r.value;r=e.next()}}findIndex(t){let e=this.iterator(),r=0,i=e.next();for(;!i.done;){if(t(i.value))return r;i=e.next(),r++}return-1}includes(t){let e=this.iterator(),r=e.next();for(;!r.done;){if(r.value===t)return!0;r=e.next()}return!1}flatMap(e){return new t((()=>({this:this.startFn()})),(t=>{do{if(t.iterator){let e=t.iterator.next();if(!e.done)return e;t.iterator=void 0}let{done:r,value:i}=this.nextFn(t.this);if(!r){let r=e(i);if(!H5(r))return{done:!1,value:r};t.iterator=r[Symbol.iterator]()}}while(t.iterator);return Q5}))}flat(e){if(void 0===e&&(e=1),e<=0)return this;let r=e>1?this.flat(e-1):this;return new t((()=>({this:r.startFn()})),(t=>{do{if(t.iterator){let e=t.iterator.next();if(!e.done)return e;t.iterator=void 0}let{done:e,value:i}=r.nextFn(t.this);if(!e){if(!H5(i))return{done:!1,value:i};t.iterator=i[Symbol.iterator]()}}while(t.iterator);return Q5}))}head(){let t=this.iterator().next();if(!t.done)return t.value}tail(e=1){return new t((()=>{let t=this.startFn();for(let r=0;r<e;r++)if(this.nextFn(t).done)return t;return t}),this.nextFn)}limit(e){return new t((()=>({size:0,state:this.startFn()})),(t=>(t.size++,t.size>e?Q5:this.nextFn(t.state))))}distinct(e){return new t((()=>({set:new Set,internalState:this.startFn()})),(t=>{let r;do{if(r=this.nextFn(t.internalState),!r.done){let i=e?e(r.value):r.value;if(!t.set.has(i))return t.set.add(i),r}}while(!r.done);return Q5}))}exclude(t,e){let r=new Set;for(let i of t){let t=e?e(i):i;r.add(t)}return this.filter((t=>{let i=e?e(t):t;return!r.has(i)}))}},g(G5,"toString"),g(H5,"isIterable"),K5=new X5((()=>{}),(()=>Q5)),Q5=Object.freeze({done:!0,value:void 0}),g(V5,"stream"),Z5=class extends X5{static{g(this,"TreeStreamImpl")}constructor(t,e,r){super((()=>({iterators:r?.includeRoot?[[t][Symbol.iterator]()]:[e(t)[Symbol.iterator]()],pruned:!1})),(t=>{for(t.pruned&&(t.iterators.pop(),t.pruned=!1);t.iterators.length>0;){let r=t.iterators[t.iterators.length-1].next();if(!r.done)return t.iterators.push(e(r.value)[Symbol.iterator]()),r;t.iterators.pop()}return Q5}))}iterator(){let t={state:this.startFn(),next:g((()=>this.nextFn(t.state)),"next"),prune:g((()=>{t.state.pruned=!0}),"prune"),[Symbol.iterator]:()=>t};return t}},function(t){function e(t){return t.reduce(((t,e)=>t+e),0)}function r(t){return t.reduce(((t,e)=>t*e),0)}function i(t){return t.reduce(((t,e)=>Math.min(t,e)))}function n(t){return t.reduce(((t,e)=>Math.max(t,e)))}g(e,"sum"),t.sum=e,g(r,"product"),t.product=r,g(i,"min"),t.min=i,g(n,"max"),t.max=n}(J5||(J5={}))})),e6={};function r6(t){return new Z5(t,(t=>j5(t)?t.content:[]),{includeRoot:!0})}function i6(t){return r6(t).filter(U5)}function n6(t,e){for(;t.container;)if((t=t.container)===e)return!0;return!1}function a6(t){return{start:{character:t.startColumn-1,line:t.startLine-1},end:{character:t.endColumn,line:t.endLine-1}}}function s6(t){if(!t)return;let{offset:e,end:r,range:i}=t;return{range:i,offset:e,end:r,length:r-e}}function o6(t,e){if(t.end.line<e.start.line||t.end.line===e.start.line&&t.end.character<=e.start.character)return v6.Before;if(t.start.line>e.end.line||t.start.line===e.end.line&&t.start.character>=e.end.character)return v6.After;let r=t.start.line>e.start.line||t.start.line===e.start.line&&t.start.character>=e.start.character,i=t.end.line<e.end.line||t.end.line===e.end.line&&t.end.character<=e.end.character;return r&&i?v6.Inside:r?v6.OverlapBack:i?v6.OverlapFront:v6.Outside}function l6(t,e){return o6(t,e)>v6.After}function c6(t,e,r=T6){if(t){if(e>0){let i=e-t.offset,n=t.text.charAt(i);r.test(n)||e--}return d6(t,e)}}function h6(t,e){if(t){let r=g6(t,!0);if(r&&u6(r,e))return r;if(W5(t)){let r=t.content.findIndex((t=>!t.hidden));for(let i=r-1;i>=0;i--){let r=t.content[i];if(u6(r,e))return r}}}}function u6(t,e){return U5(t)&&e.includes(t.tokenType.name)}function d6(t,e){if(U5(t))return t;if(j5(t)){let r=f6(t,e,!1);if(r)return d6(r,e)}}function p6(t,e){if(U5(t))return t;if(j5(t)){let r=f6(t,e,!0);if(r)return p6(r,e)}}function f6(t,e,r){let i,n=0,a=t.content.length-1;for(;n<=a;){let s=Math.floor((n+a)/2),o=t.content[s];if(o.offset<=e&&o.end>e)return o;o.end<=e?(i=r?o:void 0,n=s+1):a=s-1}return i}function g6(t,e=!0){for(;t.container;){let r=t.container,i=r.content.indexOf(t);for(;i>0;){i--;let t=r.content[i];if(e||!t.hidden)return t}t=r}}function y6(t,e=!0){for(;t.container;){let r=t.container,i=r.content.indexOf(t),n=r.content.length-1;for(;i<n;){i++;let t=r.content[i];if(e||!t.hidden)return t}t=r}}function m6(t){if(0===t.range.start.character)return t;let e,r=t.range.start.line,i=t;for(;t.container;){let n=t.container,a=e??n.content.indexOf(t);if(0===a?(t=n,e=void 0):(e=a-1,t=n.content[e]),t.range.start.line!==r)break;i=t}return i}function x6(t,e){let r=b6(t,e);return r?r.parent.content.slice(r.a+1,r.b):[]}function b6(t,e){let r,i=k6(t),n=k6(e);for(let t=0;t<i.length&&t<n.length;t++){let e=i[t],a=n[t];if(e.parent!==a.parent)break;r={parent:e.parent,a:e.index,b:a.index}}return r}function k6(t){let e=[];for(;t.container;){let r=t.container,i=r.content.indexOf(t);e.push({parent:r,index:i}),t=r}return e.reverse()}x(e6,{DefaultNameRegexp:()=>T6,RangeComparison:()=>v6,compareRange:()=>o6,findCommentNode:()=>h6,findDeclarationNodeAtOffset:()=>c6,findLeafNodeAtOffset:()=>d6,findLeafNodeBeforeOffset:()=>p6,flattenCst:()=>i6,getInteriorNodes:()=>x6,getNextNode:()=>y6,getPreviousNode:()=>g6,getStartlineNode:()=>m6,inRange:()=>l6,isChildNode:()=>n6,isCommentNode:()=>u6,streamCst:()=>r6,toDocumentSegment:()=>s6,tokenToRange:()=>a6});var v6,T6,w6=y((()=>{var t;Y5(),t6(),g(r6,"streamCst"),g(i6,"flattenCst"),g(n6,"isChildNode"),g(a6,"tokenToRange"),g(s6,"toDocumentSegment"),(t=v6||(v6={}))[t.Before=0]="Before",t[t.After=1]="After",t[t.OverlapFront=2]="OverlapFront",t[t.OverlapBack=3]="OverlapBack",t[t.Inside=4]="Inside",t[t.Outside=5]="Outside",g(o6,"compareRange"),g(l6,"inRange"),T6=/^[\w\p{L}]$/u,g(c6,"findDeclarationNodeAtOffset"),g(h6,"findCommentNode"),g(u6,"isCommentNode"),g(d6,"findLeafNodeAtOffset"),g(p6,"findLeafNodeBeforeOffset"),g(f6,"binarySearch"),g(g6,"getPreviousNode"),g(y6,"getNextNode"),g(m6,"getStartlineNode"),g(x6,"getInteriorNodes"),g(b6,"getCommonParent"),g(k6,"getParentChain")}));function _6(t){throw new Error("Error! The input value was not handled.")}var S6,C6=y((()=>{S6=class extends Error{static{g(this,"ErrorWithLocation")}constructor(t,e){super(t?`${e} at ${t.range.start.line}:${t.range.start.character}`:e)}},g(_6,"assertUnreachable")})),E6={};function A6(t){return y7.isInstance(t,w8)}function $6(t){return y7.isInstance(t,_8)}function L6(t){return y7.isInstance(t,S8)}function R6(t){return I6(t)||"current"===t||"entry"===t||"extends"===t||"false"===t||"fragment"===t||"grammar"===t||"hidden"===t||"import"===t||"interface"===t||"returns"===t||"terminal"===t||"true"===t||"type"===t||"infer"===t||"infers"===t||"with"===t||"string"==typeof t&&/\^?[_a-zA-Z][\w_]*/.test(t)}function I6(t){return"string"===t||"number"===t||"boolean"===t||"Date"===t||"bigint"===t}function N6(t){return y7.isInstance(t,C8)}function D6(t){return y7.isInstance(t,E8)}function M6(t){return y7.isInstance(t,A8)}function O6(t){return y7.isInstance(t,$8)}function P6(t){return y7.isInstance(t,L8)}function B6(t){return y7.isInstance(t,R8)}function F6(t){return y7.isInstance(t,I8)}function z6(t){return y7.isInstance(t,N8)}function j6(t){return y7.isInstance(t,D8)}function U6(t){return y7.isInstance(t,M8)}function W6(t){return y7.isInstance(t,O8)}function q6(t){return y7.isInstance(t,P8)}function Y6(t){return y7.isInstance(t,B8)}function G6(t){return y7.isInstance(t,F8)}function H6(t){return y7.isInstance(t,z8)}function V6(t){return y7.isInstance(t,j8)}function X6(t){return y7.isInstance(t,U8)}function K6(t){return y7.isInstance(t,W8)}function Q6(t){return y7.isInstance(t,q8)}function Z6(t){return y7.isInstance(t,Y8)}function J6(t){return y7.isInstance(t,G8)}function t8(t){return y7.isInstance(t,H8)}function e8(t){return y7.isInstance(t,V8)}function r8(t){return y7.isInstance(t,X8)}function i8(t){return y7.isInstance(t,K8)}function n8(t){return y7.isInstance(t,Q8)}function a8(t){return y7.isInstance(t,Z8)}function s8(t){return y7.isInstance(t,J8)}function o8(t){return y7.isInstance(t,t7)}function l8(t){return y7.isInstance(t,e7)}function c8(t){return y7.isInstance(t,r7)}function h8(t){return y7.isInstance(t,i7)}function u8(t){return y7.isInstance(t,n7)}function d8(t){return y7.isInstance(t,a7)}function p8(t){return y7.isInstance(t,s7)}function f8(t){return y7.isInstance(t,o7)}function g8(t){return y7.isInstance(t,l7)}function y8(t){return y7.isInstance(t,c7)}function m8(t){return y7.isInstance(t,h7)}function x8(t){return y7.isInstance(t,u7)}function b8(t){return y7.isInstance(t,d7)}function k8(t){return y7.isInstance(t,p7)}function v8(t){return y7.isInstance(t,f7)}x(E6,{AbstractElement:()=>A8,AbstractRule:()=>w8,AbstractType:()=>_8,Action:()=>Z8,Alternatives:()=>J8,ArrayLiteral:()=>$8,ArrayType:()=>L8,Assignment:()=>t7,BooleanLiteral:()=>R8,CharacterRange:()=>e7,Condition:()=>S8,Conjunction:()=>I8,CrossReference:()=>r7,Disjunction:()=>N8,EndOfFile:()=>i7,Grammar:()=>D8,GrammarImport:()=>M8,Group:()=>n7,InferredType:()=>O8,Interface:()=>P8,Keyword:()=>a7,LangiumGrammarAstReflection:()=>g7,LangiumGrammarTerminals:()=>T8,NamedArgument:()=>B8,NegatedToken:()=>s7,Negation:()=>F8,NumberLiteral:()=>z8,Parameter:()=>j8,ParameterReference:()=>U8,ParserRule:()=>W8,ReferenceType:()=>q8,RegexToken:()=>o7,ReturnType:()=>Y8,RuleCall:()=>l7,SimpleType:()=>G8,StringLiteral:()=>H8,TerminalAlternatives:()=>c7,TerminalGroup:()=>h7,TerminalRule:()=>V8,TerminalRuleCall:()=>u7,Type:()=>X8,TypeAttribute:()=>K8,TypeDefinition:()=>C8,UnionType:()=>Q8,UnorderedGroup:()=>d7,UntilToken:()=>p7,ValueLiteral:()=>E8,Wildcard:()=>f7,isAbstractElement:()=>M6,isAbstractRule:()=>A6,isAbstractType:()=>$6,isAction:()=>a8,isAlternatives:()=>s8,isArrayLiteral:()=>O6,isArrayType:()=>P6,isAssignment:()=>o8,isBooleanLiteral:()=>B6,isCharacterRange:()=>l8,isCondition:()=>L6,isConjunction:()=>F6,isCrossReference:()=>c8,isDisjunction:()=>z6,isEndOfFile:()=>h8,isFeatureName:()=>R6,isGrammar:()=>j6,isGrammarImport:()=>U6,isGroup:()=>u8,isInferredType:()=>W6,isInterface:()=>q6,isKeyword:()=>d8,isNamedArgument:()=>Y6,isNegatedToken:()=>p8,isNegation:()=>G6,isNumberLiteral:()=>H6,isParameter:()=>V6,isParameterReference:()=>X6,isParserRule:()=>K6,isPrimitiveType:()=>I6,isReferenceType:()=>Q6,isRegexToken:()=>f8,isReturnType:()=>Z6,isRuleCall:()=>g8,isSimpleType:()=>J6,isStringLiteral:()=>t8,isTerminalAlternatives:()=>y8,isTerminalGroup:()=>m8,isTerminalRule:()=>e8,isTerminalRuleCall:()=>x8,isType:()=>r8,isTypeAttribute:()=>i8,isTypeDefinition:()=>N6,isUnionType:()=>n8,isUnorderedGroup:()=>b8,isUntilToken:()=>k8,isValueLiteral:()=>D6,isWildcard:()=>v8,reflection:()=>y7});var T8,w8,_8,S8,C8,E8,A8,$8,L8,R8,I8,N8,D8,M8,O8,P8,B8,F8,z8,j8,U8,W8,q8,Y8,G8,H8,V8,X8,K8,Q8,Z8,J8,t7,e7,r7,i7,n7,a7,s7,o7,l7,c7,h7,u7,d7,p7,f7,g7,y7,m7=y((()=>{Y5(),T8={ID:/\^?[_a-zA-Z][\w_]*/,STRING:/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'/,NUMBER:/NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity)/,RegexLiteral:/\/(?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+\/[a-z]*/,WS:/\s+/,ML_COMMENT:/\/\*[\s\S]*?\*\//,SL_COMMENT:/\/\/[^\n\r]*/},w8="AbstractRule",g(A6,"isAbstractRule"),_8="AbstractType",g($6,"isAbstractType"),S8="Condition",g(L6,"isCondition"),g(R6,"isFeatureName"),g(I6,"isPrimitiveType"),C8="TypeDefinition",g(N6,"isTypeDefinition"),E8="ValueLiteral",g(D6,"isValueLiteral"),A8="AbstractElement",g(M6,"isAbstractElement"),$8="ArrayLiteral",g(O6,"isArrayLiteral"),L8="ArrayType",g(P6,"isArrayType"),R8="BooleanLiteral",g(B6,"isBooleanLiteral"),I8="Conjunction",g(F6,"isConjunction"),N8="Disjunction",g(z6,"isDisjunction"),D8="Grammar",g(j6,"isGrammar"),M8="GrammarImport",g(U6,"isGrammarImport"),O8="InferredType",g(W6,"isInferredType"),P8="Interface",g(q6,"isInterface"),B8="NamedArgument",g(Y6,"isNamedArgument"),F8="Negation",g(G6,"isNegation"),z8="NumberLiteral",g(H6,"isNumberLiteral"),j8="Parameter",g(V6,"isParameter"),U8="ParameterReference",g(X6,"isParameterReference"),W8="ParserRule",g(K6,"isParserRule"),q8="ReferenceType",g(Q6,"isReferenceType"),Y8="ReturnType",g(Z6,"isReturnType"),G8="SimpleType",g(J6,"isSimpleType"),H8="StringLiteral",g(t8,"isStringLiteral"),V8="TerminalRule",g(e8,"isTerminalRule"),X8="Type",g(r8,"isType"),K8="TypeAttribute",g(i8,"isTypeAttribute"),Q8="UnionType",g(n8,"isUnionType"),Z8="Action",g(a8,"isAction"),J8="Alternatives",g(s8,"isAlternatives"),t7="Assignment",g(o8,"isAssignment"),e7="CharacterRange",g(l8,"isCharacterRange"),r7="CrossReference",g(c8,"isCrossReference"),i7="EndOfFile",g(h8,"isEndOfFile"),n7="Group",g(u8,"isGroup"),a7="Keyword",g(d8,"isKeyword"),s7="NegatedToken",g(p8,"isNegatedToken"),o7="RegexToken",g(f8,"isRegexToken"),l7="RuleCall",g(g8,"isRuleCall"),c7="TerminalAlternatives",g(y8,"isTerminalAlternatives"),h7="TerminalGroup",g(m8,"isTerminalGroup"),u7="TerminalRuleCall",g(x8,"isTerminalRuleCall"),d7="UnorderedGroup",g(b8,"isUnorderedGroup"),p7="UntilToken",g(k8,"isUntilToken"),f7="Wildcard",g(v8,"isWildcard"),g7=class extends q5{static{g(this,"LangiumGrammarAstReflection")}getAllTypes(){return[A8,w8,_8,Z8,J8,$8,L8,t7,R8,e7,S8,I8,r7,N8,i7,D8,M8,n7,O8,P8,a7,B8,s7,F8,z8,j8,U8,W8,q8,o7,Y8,l7,G8,H8,c7,h7,V8,u7,X8,K8,C8,Q8,d7,p7,E8,f7]}computeIsSubtype(t,e){switch(t){case Z8:case J8:case t7:case e7:case r7:case i7:case n7:case a7:case s7:case o7:case l7:case c7:case h7:case u7:case d7:case p7:case f7:return this.isSubtype(A8,e);case $8:case z8:case H8:return this.isSubtype(E8,e);case L8:case q8:case G8:case Q8:return this.isSubtype(C8,e);case R8:return this.isSubtype(S8,e)||this.isSubtype(E8,e);case I8:case N8:case F8:case U8:return this.isSubtype(S8,e);case O8:case P8:case X8:return this.isSubtype(_8,e);case W8:return this.isSubtype(w8,e)||this.isSubtype(_8,e);case V8:return this.isSubtype(w8,e);default:return!1}}getReferenceType(t){let e=`${t.container.$type}:${t.property}`;switch(e){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return _8;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return w8;case"Grammar:usedGrammars":return D8;case"NamedArgument:parameter":case"ParameterReference:parameter":return j8;case"TerminalRuleCall:rule":return V8;default:throw new Error(`${e} is not a valid reference id.`)}}getTypeMetaData(t){switch(t){case A8:return{name:A8,properties:[{name:"cardinality"},{name:"lookahead"}]};case $8:return{name:$8,properties:[{name:"elements",defaultValue:[]}]};case L8:return{name:L8,properties:[{name:"elementType"}]};case R8:return{name:R8,properties:[{name:"true",defaultValue:!1}]};case I8:return{name:I8,properties:[{name:"left"},{name:"right"}]};case N8:return{name:N8,properties:[{name:"left"},{name:"right"}]};case D8:return{name:D8,properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case M8:return{name:M8,properties:[{name:"path"}]};case O8:return{name:O8,properties:[{name:"name"}]};case P8:return{name:P8,properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case B8:return{name:B8,properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case F8:return{name:F8,properties:[{name:"value"}]};case z8:return{name:z8,properties:[{name:"value"}]};case j8:return{name:j8,properties:[{name:"name"}]};case U8:return{name:U8,properties:[{name:"parameter"}]};case W8:return{name:W8,properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case q8:return{name:q8,properties:[{name:"referenceType"}]};case Y8:return{name:Y8,properties:[{name:"name"}]};case G8:return{name:G8,properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case H8:return{name:H8,properties:[{name:"value"}]};case V8:return{name:V8,properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case X8:return{name:X8,properties:[{name:"name"},{name:"type"}]};case K8:return{name:K8,properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case Q8:return{name:Q8,properties:[{name:"types",defaultValue:[]}]};case Z8:return{name:Z8,properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case J8:return{name:J8,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case t7:return{name:t7,properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case e7:return{name:e7,properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case r7:return{name:r7,properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case i7:return{name:i7,properties:[{name:"cardinality"},{name:"lookahead"}]};case n7:return{name:n7,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case a7:return{name:a7,properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case s7:return{name:s7,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case o7:return{name:o7,properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case l7:return{name:l7,properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case c7:return{name:c7,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case h7:return{name:h7,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case u7:return{name:u7,properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case d7:return{name:d7,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case p7:return{name:p7,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case f7:return{name:f7,properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:t,properties:[]}}}},y7=new g7})),x7={};function b7(t){for(let[e,r]of Object.entries(t))e.startsWith("$")||(Array.isArray(r)?r.forEach(((r,i)=>{P5(r)&&(r.$container=t,r.$containerProperty=e,r.$containerIndex=i)})):P5(r)&&(r.$container=t,r.$containerProperty=e))}function k7(t,e){let r=t;for(;r;){if(e(r))return r;r=r.$container}}function v7(t,e){let r=t;for(;r;){if(e(r))return!0;r=r.$container}return!1}function T7(t){let e=w7(t).$document;if(!e)throw new Error("AST node has no document.");return e}function w7(t){for(;t.$container;)t=t.$container;return t}function _7(t,e){if(!t)throw new Error("Node must be an AstNode.");let r=e?.range;return new X5((()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0})),(e=>{for(;e.keyIndex<e.keys.length;){let i=e.keys[e.keyIndex];if(!i.startsWith("$")){let n=t[i];if(P5(n)){if(e.keyIndex++,E7(n,r))return{done:!1,value:n}}else if(Array.isArray(n)){for(;e.arrayIndex<n.length;){let t=n[e.arrayIndex++];if(P5(t)&&E7(t,r))return{done:!1,value:t}}e.arrayIndex=0}}e.keyIndex++}return Q5}))}function S7(t,e){if(!t)throw new Error("Root node must be an AstNode.");return new Z5(t,(t=>_7(t,e)))}function C7(t,e){if(!t)throw new Error("Root node must be an AstNode.");return e?.range&&!E7(t,e.range)?new Z5(t,(()=>[])):new Z5(t,(t=>_7(t,e)),{includeRoot:!0})}function E7(t,e){var r;if(!e)return!0;let i=null===(r=t.$cstNode)||void 0===r?void 0:r.range;return!!i&&l6(i,e)}function A7(t){return new X5((()=>({keys:Object.keys(t),keyIndex:0,arrayIndex:0})),(e=>{for(;e.keyIndex<e.keys.length;){let r=e.keys[e.keyIndex];if(!r.startsWith("$")){let i=t[r];if(B5(i))return e.keyIndex++,{done:!1,value:{reference:i,container:t,property:r}};if(Array.isArray(i)){for(;e.arrayIndex<i.length;){let n=e.arrayIndex++,a=i[n];if(B5(a))return{done:!1,value:{reference:a,container:t,property:r,index:n}}}e.arrayIndex=0}}e.keyIndex++}return Q5}))}function $7(t,e=T7(t).parseResult.value){let r=[];return C7(e).forEach((e=>{A7(e).forEach((e=>{e.reference.ref===t&&r.push(e.reference)}))})),V5(r)}function L7(t,e){let r=t.getTypeMetaData(e.$type),i=e;for(let t of r.properties)void 0!==t.defaultValue&&void 0===i[t.name]&&(i[t.name]=R7(t.defaultValue))}function R7(t){return Array.isArray(t)?[...t.map(R7)]:t}function I7(t,e){let r={$type:t.$type};for(let[i,n]of Object.entries(t))if(!i.startsWith("$"))if(P5(n))r[i]=I7(n,e);else if(B5(n))r[i]=e(r,i,n.$refNode,n.$refText);else if(Array.isArray(n)){let t=[];for(let a of n)P5(a)?t.push(I7(a,e)):B5(a)?t.push(e(r,i,a.$refNode,a.$refText)):t.push(a);r[i]=t}else r[i]=n;return b7(r),r}x(x7,{assignMandatoryProperties:()=>L7,copyAstNode:()=>I7,findLocalReferences:()=>$7,findRootNode:()=>w7,getContainerOfType:()=>k7,getDocument:()=>T7,hasContainerOfType:()=>v7,linkContentToContainer:()=>b7,streamAllContents:()=>S7,streamAst:()=>C7,streamContents:()=>_7,streamReferences:()=>A7});var N7=y((()=>{Y5(),t6(),w6(),g(b7,"linkContentToContainer"),g(k7,"getContainerOfType"),g(v7,"hasContainerOfType"),g(T7,"getDocument"),g(w7,"findRootNode"),g(_7,"streamContents"),g(S7,"streamAllContents"),g(C7,"streamAst"),g(E7,"isAstNodeInRange"),g(A7,"streamReferences"),g($7,"findLocalReferences"),g(L7,"assignMandatoryProperties"),g(R7,"copyDefaultValue"),g(I7,"copyAstNode")}));function D7(t){return t.charCodeAt(0)}function M7(t,e){Array.isArray(t)?t.forEach((function(t){e.push(t)})):e.push(t)}function O7(t,e){if(!0===t[e])throw"duplicate flag "+e;t[e];t[e]=!0}function P7(t){if(void 0===t)throw Error("Internal Error - Should never get here!");return!0}function B7(){throw Error("Internal Error - Should never get here!")}function F7(t){return"Character"===t.type}var z7,j7,U7,W7,q7,Y7,G7,H7,V7=y((()=>{g(D7,"cc"),g(M7,"insertToSet"),g(O7,"addFlag"),g(P7,"ASSERT_EXISTS"),g(B7,"ASSERT_NEVER_REACH_HERE"),g(F7,"isCharacter")})),X7=y((()=>{V7(),z7=[];for(let t=D7("0");t<=D7("9");t++)z7.push(t);j7=[D7("_")].concat(z7);for(let t=D7("a");t<=D7("z");t++)j7.push(t);for(let t=D7("A");t<=D7("Z");t++)j7.push(t);U7=[D7(" "),D7("\f"),D7("\n"),D7("\r"),D7("\t"),D7("\v"),D7("\t"),D7(" "),D7(" "),D7(" "),D7(" "),D7(" "),D7(" "),D7(" "),D7(" "),D7(" "),D7(" "),D7(" "),D7(" "),D7(" "),D7("\u2028"),D7("\u2029"),D7(" "),D7(" "),D7("　"),D7("\ufeff")]})),K7=y((()=>{V7(),X7(),W7=/[0-9a-fA-F]/,q7=/[0-9]/,Y7=/[1-9]/,G7=class{static{g(this,"RegExpParser")}constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx}pattern(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");let e=this.disjunction();this.consumeChar("/");let r={type:"Flags",loc:{begin:this.idx,end:t.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":O7(r,"global");break;case"i":O7(r,"ignoreCase");break;case"m":O7(r,"multiLine");break;case"u":O7(r,"unicode");break;case"y":O7(r,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:e,loc:this.loc(0)}}disjunction(){let t=[],e=this.idx;for(t.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t,loc:this.loc(e)}}alternative(){let t=[],e=this.idx;for(;this.isTerm();)t.push(this.term());return{type:"Alternative",value:t,loc:this.loc(e)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let t=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(t)};case"$":return{type:"EndAnchor",loc:this.loc(t)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(t)};case"B":return{type:"NonWordBoundary",loc:this.loc(t)}}throw Error("Invalid Assertion Escape");case"(":let e;switch(this.consumeChar("?"),this.popChar()){case"=":e="Lookahead";break;case"!":e="NegativeLookahead"}P7(e);let r=this.disjunction();return this.consumeChar(")"),{type:e,value:r,loc:this.loc(t)}}return B7()}quantifier(t=!1){let e,r=this.idx;switch(this.popChar()){case"*":e={atLeast:0,atMost:1/0};break;case"+":e={atLeast:1,atMost:1/0};break;case"?":e={atLeast:0,atMost:1};break;case"{":let r=this.integerIncludingZero();switch(this.popChar()){case"}":e={atLeast:r,atMost:r};break;case",":let t;this.isDigit()?(t=this.integerIncludingZero(),e={atLeast:r,atMost:t}):e={atLeast:r,atMost:1/0},this.consumeChar("}")}if(!0===t&&void 0===e)return;P7(e)}if((!0!==t||void 0!==e)&&P7(e))return"?"===this.peekChar(0)?(this.consumeChar("?"),e.greedy=!1):e.greedy=!0,e.type="Quantifier",e.loc=this.loc(r),e}atom(){let t,e=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group()}return void 0===t&&this.isPatternCharacter()&&(t=this.patternCharacter()),P7(t)?(t.loc=this.loc(e),this.isQuantifier()&&(t.quantifier=this.quantifier()),t):B7()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[D7("\n"),D7("\r"),D7("\u2028"),D7("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let t,e=!1;switch(this.popChar()){case"d":t=z7;break;case"D":t=z7,e=!0;break;case"s":t=U7;break;case"S":t=U7,e=!0;break;case"w":t=j7;break;case"W":t=j7,e=!0}return P7(t)?{type:"Set",value:t,complement:e}:B7()}controlEscapeAtom(){let t;switch(this.popChar()){case"f":t=D7("\f");break;case"n":t=D7("\n");break;case"r":t=D7("\r");break;case"t":t=D7("\t");break;case"v":t=D7("\v")}return P7(t)?{type:"Character",value:t}:B7()}controlLetterEscapeAtom(){this.consumeChar("c");let t=this.popChar();if(!1===/[a-zA-Z]/.test(t))throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:D7("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){return{type:"Character",value:D7(this.popChar())}}classPatternCharacterAtom(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:D7(this.popChar())}}}characterClass(){let t=[],e=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),e=!0);this.isClassAtom();){let e=this.classAtom();e.type;if(F7(e)&&this.isRangeDash()){this.consumeChar("-");let r=this.classAtom();r.type;if(F7(r)){if(r.value<e.value)throw Error("Range out of order in character class");t.push({from:e.value,to:r.value})}else M7(e.value,t),t.push(D7("-")),M7(r.value,t)}else M7(e.value,t)}return this.consumeChar("]"),{type:"Set",complement:e,value:t}}classAtom(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:D7("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let t=!0;if("?"===(this.consumeChar("("),this.peekChar(0)))this.consumeChar("?"),this.consumeChar(":"),t=!1;else this.groupIdx++;let e=this.disjunction();this.consumeChar(")");let r={type:"Group",capturing:t,value:e};return t&&(r.idx=this.groupIdx),r}positiveInteger(){let t=this.popChar();if(!1===Y7.test(t))throw Error("Expecting a positive integer");for(;q7.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}integerIncludingZero(){let t=this.popChar();if(!1===q7.test(t))throw Error("Expecting an integer");for(;q7.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}patternCharacter(){let t=this.popChar();switch(t){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:D7(t)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return"-"===this.peekChar()&&this.isClassAtom(1)}isDigit(){return q7.test(this.peekChar(0))}isClassAtom(t=0){switch(this.peekChar(t)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}}isQuantifier(){let t=this.saveState();try{return void 0!==this.quantifier(!0)}catch{return!1}finally{this.restoreState(t)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(t){let e="";for(let r=0;r<t;r++){let t=this.popChar();if(!1===W7.test(t))throw Error("Expecting a HexDecimal digits");e+=t}return{type:"Character",value:parseInt(e,16)}}peekChar(t=0){return this.input[this.idx+t]}popChar(){let t=this.peekChar(0);return this.consumeChar(void 0),t}consumeChar(t){if(void 0!==t&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(t){return{begin:t,end:this.idx}}}})),Q7=y((()=>{H7=class{static{g(this,"BaseRegExpVisitor")}visitChildren(t){for(let e in t){let r=t[e];t.hasOwnProperty(e)&&(void 0!==r.type?this.visit(r):Array.isArray(r)&&r.forEach((t=>{this.visit(t)}),this))}}visit(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t)}this.visitChildren(t)}visitPattern(t){}visitFlags(t){}visitDisjunction(t){}visitAlternative(t){}visitStartAnchor(t){}visitEndAnchor(t){}visitWordBoundary(t){}visitNonWordBoundary(t){}visitLookahead(t){}visitNegativeLookahead(t){}visitCharacter(t){}visitSet(t){}visitGroup(t){}visitGroupBackReference(t){}visitQuantifier(t){}}})),Z7=y((()=>{K7(),Q7()})),J7={};function t9(t){try{"string"!=typeof t&&(t=t.source),t=`/${t}/`;let e=l9.pattern(t),r=[];for(let i of e.value.value)h9.reset(t),h9.visit(i),r.push({start:h9.startRegexp,end:h9.endRegex});return r}catch{return[]}}function e9(t){try{return"string"==typeof t&&(t=new RegExp(t)),t=t.toString(),h9.reset(t),h9.visit(l9.pattern(t)),h9.multiline}catch{return!1}}function r9(t){let e="string"==typeof t?new RegExp(t):t;return u9.some((t=>e.test(t)))}function i9(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function n9(t){return Array.prototype.map.call(t,(t=>/\w/.test(t)?`[${t.toLowerCase()}${t.toUpperCase()}]`:i9(t))).join("")}function a9(t,e){let r=s9(t),i=e.match(r);return!!i&&i[0].length>0}function s9(t){"string"==typeof t&&(t=new RegExp(t));let e=t,r=t.source,i=0;function n(){let t,a="";function s(t){a+=r.substr(i,t),i+=t}function o(t){a+="(?:"+r.substr(i,t)+"|$)",i+=t}for(g(s,"appendRaw"),g(o,"appendOptional");i<r.length;)switch(r[i]){case"\\":switch(r[i+1]){case"c":o(3);break;case"x":o(4);break;case"u":e.unicode?"{"===r[i+2]?o(r.indexOf("}",i)-i+1):o(6):o(2);break;case"p":case"P":e.unicode?o(r.indexOf("}",i)-i+1):o(2);break;case"k":o(r.indexOf(">",i)-i+1);break;default:o(2)}break;case"[":t=/\[(?:\\.|.)*?\]/g,t.lastIndex=i,t=t.exec(r)||[],o(t[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":s(1);break;case"{":t=/\{\d+,?\d*\}/g,t.lastIndex=i,t=t.exec(r),t?s(t[0].length):o(1);break;case"(":if("?"===r[i+1])switch(r[i+2]){case":":a+="(?:",i+=3,a+=n()+"|$)";break;case"=":a+="(?=",i+=3,a+=n()+")";break;case"!":t=i,i+=3,n(),a+=r.substr(t,i-t);break;case"<":switch(r[i+3]){case"=":case"!":t=i,i+=4,n(),a+=r.substr(t,i-t);break;default:s(r.indexOf(">",i)-i+1),a+=n()+"|$)"}}else s(1),a+=n()+"|$)";break;case")":return++i,a;default:o(1)}return a}return g(n,"process"),new RegExp(n(),t.flags)}x(J7,{NEWLINE_REGEXP:()=>o9,escapeRegExp:()=>i9,getCaseInsensitivePattern:()=>n9,getTerminalParts:()=>t9,isMultilineComment:()=>e9,isWhitespace:()=>r9,partialMatches:()=>a9,partialRegExp:()=>s9,whitespaceCharacters:()=>u9});var o9,l9,c9,h9,u9,d9=y((()=>{Z7(),o9=/\r?\n/gm,l9=new G7,c9=class extends H7{static{g(this,"TerminalRegExpVisitor")}constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(t){this.multiline=!1,this.regex=t,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(t){t.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(t){let e=String.fromCharCode(t.value);if(!this.multiline&&"\n"===e&&(this.multiline=!0),t.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{let t=i9(e);this.endRegexpStack.push(t),this.isStarting&&(this.startRegexp+=t)}}visitSet(t){if(!this.multiline){let e=this.regex.substring(t.loc.begin,t.loc.end),r=new RegExp(e);this.multiline=!!"\n".match(r)}if(t.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{let e=this.regex.substring(t.loc.begin,t.loc.end);this.endRegexpStack.push(e),this.isStarting&&(this.startRegexp+=e)}}visitChildren(t){"Group"===t.type&&t.quantifier||super.visitChildren(t)}},h9=new c9,g(t9,"getTerminalParts"),g(e9,"isMultilineComment"),u9="\f\n\r\t\v              \u2028\u2029  　\ufeff".split(""),g(r9,"isWhitespace"),g(i9,"escapeRegExp"),g(n9,"getCaseInsensitivePattern"),g(a9,"partialMatches"),g(s9,"partialRegExp")})),p9={};function f9(t){return t.rules.find((t=>K6(t)&&t.entry))}function g9(t){return t.rules.filter((t=>e8(t)&&t.hidden))}function y9(t,e){let r=new Set,i=f9(t);if(!i)return new Set(t.rules);let n=[i].concat(g9(t));for(let t of n)m9(t,r,e);let a=new Set;for(let e of t.rules)(r.has(e.name)||e8(e)&&e.hidden)&&a.add(e);return a}function m9(t,e,r){e.add(t.name),S7(t).forEach((t=>{if(g8(t)||r&&x8(t)){let i=t.rule.ref;i&&!e.has(i.name)&&m9(i,e,r)}}))}function x9(t){if(t.terminal)return t.terminal;if(t.type.ref){let e=E9(t.type.ref);return e?.terminal}}function b9(t){return t.hidden&&!r9(U9(t))}function k9(t,e){return t&&e?T9(t,e,t.astNode,!0):[]}function v9(t,e,r){if(!t||!e)return;let i=T9(t,e,t.astNode,!0);return 0!==i.length?i[r=void 0!==r?Math.max(0,Math.min(r,i.length-1)):0]:void 0}function T9(t,e,r,i){if(!i){let r=k7(t.grammarSource,o8);if(r&&r.feature===e)return[t]}return j5(t)&&t.astNode===r?t.content.flatMap((t=>T9(t,e,r,!1))):[]}function w9(t,e){return t?S9(t,e,t?.astNode):[]}function _9(t,e,r){if(!t)return;let i=S9(t,e,t?.astNode);return 0!==i.length?i[r=void 0!==r?Math.max(0,Math.min(r,i.length-1)):0]:void 0}function S9(t,e,r){if(t.astNode!==r)return[];if(d8(t.grammarSource)&&t.grammarSource.value===e)return[t];let i,n=r6(t).iterator(),a=[];do{if(i=n.next(),!i.done){let t=i.value;t.astNode===r?d8(t.grammarSource)&&t.grammarSource.value===e&&a.push(t):n.prune()}}while(!i.done);return a}function C9(t){var e;let r=t.astNode;for(;r===(null===(e=t.container)||void 0===e?void 0:e.astNode);){let e=k7(t.grammarSource,o8);if(e)return e;t=t.container}}function E9(t){let e=t;return W6(e)&&(a8(e.$container)?e=e.$container.$container:K6(e.$container)?e=e.$container:_6(e.$container)),A9(t,e,new Map)}function A9(t,e,r){var i;function n(e,i){let n;return k7(e,o8)||(n=A9(i,i,r)),r.set(t,n),n}if(g(n,"go"),r.has(t))return r.get(t);r.set(t,void 0);for(let a of S7(e)){if(o8(a)&&"name"===a.feature.toLowerCase())return r.set(t,a),a;if(g8(a)&&K6(a.rule.ref))return n(a,a.rule.ref);if(J6(a)&&null!==(i=a.typeRef)&&void 0!==i&&i.ref)return n(a,a.typeRef.ref)}}function $9(t){let e=t.$container;if(u8(e)){let r=e.elements;for(let e=r.indexOf(t)-1;e>=0;e--){let t=r[e];if(a8(t))return t;{let t=S7(r[e]).find(a8);if(t)return t}}}if(M6(e))return $9(e)}function L9(t,e){return"?"===t||"*"===t||u8(e)&&!!e.guardCondition}function R9(t){return"*"===t||"+"===t}function I9(t){return"+="===t}function N9(t){return D9(t,new Set)}function D9(t,e){if(e.has(t))return!0;e.add(t);for(let r of S7(t))if(g8(r)){if(!r.rule.ref||K6(r.rule.ref)&&!D9(r.rule.ref,e))return!1}else{if(o8(r))return!1;if(a8(r))return!1}return!!t.definition}function M9(t){return O9(t.type,new Set)}function O9(t,e){if(e.has(t))return!0;if(e.add(t),P6(t))return!1;if(Q6(t))return!1;if(n8(t))return t.types.every((t=>O9(t,e)));if(J6(t)){if(void 0!==t.primitiveType)return!0;if(void 0!==t.stringType)return!0;if(void 0!==t.typeRef){let r=t.typeRef.ref;return!!r8(r)&&O9(r.type,e)}return!1}return!1}function P9(t){if(t.inferredType)return t.inferredType.name;if(t.dataType)return t.dataType;if(t.returnType){let e=t.returnType.ref;if(e){if(K6(e))return e.name;if(q6(e)||r8(e))return e.name}}}function B9(t){var e;if(K6(t))return N9(t)?t.name:null!==(e=P9(t))&&void 0!==e?e:t.name;if(q6(t)||r8(t)||Z6(t))return t.name;if(a8(t)){let e=F9(t);if(e)return e}else if(W6(t))return t.name;throw new Error("Cannot get name of Unknown Type")}function F9(t){var e;return t.inferredType?t.inferredType.name:null!==(e=t.type)&&void 0!==e&&e.ref?B9(t.type.ref):void 0}function z9(t){var e,r,i;return e8(t)?null!==(r=null===(e=t.type)||void 0===e?void 0:e.name)&&void 0!==r?r:"string":N9(t)?t.name:null!==(i=P9(t))&&void 0!==i?i:t.name}function j9(t){var e,r,i;return e8(t)?null!==(r=null===(e=t.type)||void 0===e?void 0:e.name)&&void 0!==r?r:"string":null!==(i=P9(t))&&void 0!==i?i:t.name}function U9(t){let e={s:!1,i:!1,u:!1},r=W9(t.definition,e),i=Object.entries(e).filter((([,t])=>t)).map((([t])=>t)).join("");return new RegExp(r,i)}function W9(t,e){if(y8(t))return q9(t);if(m8(t))return Y9(t);if(l8(t))return V9(t);if(x8(t)){let e=t.rule.ref;if(!e)throw new Error("Missing rule reference.");return K9(W9(e.definition),{cardinality:t.cardinality,lookahead:t.lookahead})}if(p8(t))return H9(t);if(k8(t))return G9(t);if(f8(t)){let r=t.regex.lastIndexOf("/"),i=t.regex.substring(1,r),n=t.regex.substring(r+1);return e&&(e.i=n.includes("i"),e.s=n.includes("s"),e.u=n.includes("u")),K9(i,{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1})}if(v8(t))return K9(Q9,{cardinality:t.cardinality,lookahead:t.lookahead});throw new Error(`Invalid terminal element: ${t?.$type}`)}function q9(t){return K9(t.elements.map((t=>W9(t))).join("|"),{cardinality:t.cardinality,lookahead:t.lookahead})}function Y9(t){return K9(t.elements.map((t=>W9(t))).join(""),{cardinality:t.cardinality,lookahead:t.lookahead})}function G9(t){return K9(`${Q9}*?${W9(t.terminal)}`,{cardinality:t.cardinality,lookahead:t.lookahead})}function H9(t){return K9(`(?!${W9(t.terminal)})${Q9}*?`,{cardinality:t.cardinality,lookahead:t.lookahead})}function V9(t){return t.right?K9(`[${X9(t.left)}-${X9(t.right)}]`,{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1}):K9(X9(t.left),{cardinality:t.cardinality,lookahead:t.lookahead,wrap:!1})}function X9(t){return i9(t.value)}function K9(t,e){var r;return(!1!==e.wrap||e.lookahead)&&(t=`(${null!==(r=e.lookahead)&&void 0!==r?r:""}${t})`),e.cardinality?`${t}${e.cardinality}`:t}x(p9,{findAssignment:()=>C9,findNameAssignment:()=>E9,findNodeForKeyword:()=>_9,findNodeForProperty:()=>v9,findNodesForKeyword:()=>w9,findNodesForKeywordInternal:()=>S9,findNodesForProperty:()=>k9,getActionAtElement:()=>$9,getActionType:()=>F9,getAllReachableRules:()=>y9,getCrossReferenceTerminal:()=>x9,getEntryRule:()=>f9,getExplicitRuleType:()=>P9,getHiddenRules:()=>g9,getRuleType:()=>j9,getRuleTypeName:()=>z9,getTypeName:()=>B9,isArrayCardinality:()=>R9,isArrayOperator:()=>I9,isCommentTerminal:()=>b9,isDataType:()=>M9,isDataTypeRule:()=>N9,isOptionalCardinality:()=>L9,terminalRegex:()=>U9});var Q9,Z9=y((()=>{C6(),m7(),Y5(),N7(),w6(),d9(),g(f9,"getEntryRule"),g(g9,"getHiddenRules"),g(y9,"getAllReachableRules"),g(m9,"ruleDfs"),g(x9,"getCrossReferenceTerminal"),g(b9,"isCommentTerminal"),g(k9,"findNodesForProperty"),g(v9,"findNodeForProperty"),g(T9,"findNodesForPropertyInternal"),g(w9,"findNodesForKeyword"),g(_9,"findNodeForKeyword"),g(S9,"findNodesForKeywordInternal"),g(C9,"findAssignment"),g(E9,"findNameAssignment"),g(A9,"findNameAssignmentInternal"),g($9,"getActionAtElement"),g(L9,"isOptionalCardinality"),g(R9,"isArrayCardinality"),g(I9,"isArrayOperator"),g(N9,"isDataTypeRule"),g(D9,"isDataTypeRuleInternal"),g(M9,"isDataType"),g(O9,"isDataTypeInternal"),g(P9,"getExplicitRuleType"),g(B9,"getTypeName"),g(F9,"getActionType"),g(z9,"getRuleTypeName"),g(j9,"getRuleType"),g(U9,"terminalRegex"),Q9=/[\s\S]/.source,g(W9,"abstractElementToRegex"),g(q9,"terminalAlternativesToRegex"),g(Y9,"terminalGroupToRegex"),g(G9,"untilTokenToRegex"),g(H9,"negateTokenToRegex"),g(V9,"characterRangeToRegex"),g(X9,"keywordToRegex"),g(K9,"withCardinality")}));function J9(t){let e=[],r=t.Grammar;for(let t of r.rules)e8(t)&&b9(t)&&e9(U9(t))&&e.push(t.name);return{multilineCommentRules:e,nameRegexp:T6}}var ttt=y((()=>{w6(),Z9(),d9(),m7(),g(J9,"createGrammarConfig")})),ett=y((()=>{}));function rtt(t){console&&console.error&&console.error(`Error: ${t}`)}function itt(t){console&&console.warn&&console.warn(`Warning: ${t}`)}var ntt=y((()=>{g(rtt,"PRINT_ERROR"),g(itt,"PRINT_WARNING")}));function att(t){let e=(new Date).getTime(),r=t();return{time:(new Date).getTime()-e,value:r}}var stt=y((()=>{g(att,"timer")}));function ott(t){function e(){}g(e,"FakeConstructor"),e.prototype=t;let r=new e;function i(){return typeof r.bar}return g(i,"fakeAccess"),i(),i(),t}var ltt=y((()=>{g(ott,"toFastProperties")})),ctt=y((()=>{ntt(),stt(),ltt()}));function htt(t){return utt(t)?t.LABEL:t.name}function utt(t){return XQ(t.LABEL)&&""!==t.LABEL}function dtt(t){return kQ(t,ptt)}function ptt(t){function e(t){return kQ(t,ptt)}if(g(e,"convertDefinition"),t instanceof gtt){let e={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return XQ(t.label)&&(e.label=t.label),e}if(t instanceof mtt)return{type:"Alternative",definition:e(t.definition)};if(t instanceof xtt)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof btt)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof ktt)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:ptt(new _tt({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof Ttt)return{type:"RepetitionWithSeparator",idx:t.idx,separator:ptt(new _tt({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof vtt)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof wtt)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof _tt){let e={type:"Terminal",name:t.terminalType.name,label:htt(t.terminalType),idx:t.idx};XQ(t.label)&&(e.terminalLabel=t.label);let r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(e.pattern=wZ(r)?r.source:r),e}if(t instanceof ytt)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}var ftt,gtt,ytt,mtt,xtt,btt,ktt,vtt,Ttt,wtt,_tt,Stt,Ctt=y((()=>{J1(),g(htt,"tokenLabel"),g(utt,"hasTokenLabel"),ftt=class{static{g(this,"AbstractProduction")}get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){this._definition=t}accept(t){t.visit(this),BK(this.definition,(e=>{e.accept(t)}))}},gtt=class extends ftt{static{g(this,"NonTerminal")}constructor(t){super([]),this.idx=1,pq(this,nJ(t,(t=>void 0!==t)))}set definition(t){}get definition(){return void 0!==this.referencedRule?this.referencedRule.definition:[]}accept(t){t.visit(this)}},ytt=class extends ftt{static{g(this,"Rule")}constructor(t){super(t.definition),this.orgText="",pq(this,nJ(t,(t=>void 0!==t)))}},mtt=class extends ftt{static{g(this,"Alternative")}constructor(t){super(t.definition),this.ignoreAmbiguities=!1,pq(this,nJ(t,(t=>void 0!==t)))}},xtt=class extends ftt{static{g(this,"Option")}constructor(t){super(t.definition),this.idx=1,pq(this,nJ(t,(t=>void 0!==t)))}},btt=class extends ftt{static{g(this,"RepetitionMandatory")}constructor(t){super(t.definition),this.idx=1,pq(this,nJ(t,(t=>void 0!==t)))}},ktt=class extends ftt{static{g(this,"RepetitionMandatoryWithSeparator")}constructor(t){super(t.definition),this.idx=1,pq(this,nJ(t,(t=>void 0!==t)))}},vtt=class extends ftt{static{g(this,"Repetition")}constructor(t){super(t.definition),this.idx=1,pq(this,nJ(t,(t=>void 0!==t)))}},Ttt=class extends ftt{static{g(this,"RepetitionWithSeparator")}constructor(t){super(t.definition),this.idx=1,pq(this,nJ(t,(t=>void 0!==t)))}},wtt=class extends ftt{static{g(this,"Alternation")}get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){super(t.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,pq(this,nJ(t,(t=>void 0!==t)))}},_tt=class{static{g(this,"Terminal")}constructor(t){this.idx=1,pq(this,nJ(t,(t=>void 0!==t)))}accept(t){t.visit(this)}},g(dtt,"serializeGrammar"),g(ptt,"serializeProduction")})),Ett=y((()=>{Ctt(),Stt=class{static{g(this,"GAstVisitor")}visit(t){let e=t;switch(e.constructor){case gtt:return this.visitNonTerminal(e);case mtt:return this.visitAlternative(e);case xtt:return this.visitOption(e);case btt:return this.visitRepetitionMandatory(e);case ktt:return this.visitRepetitionMandatoryWithSeparator(e);case Ttt:return this.visitRepetitionWithSeparator(e);case vtt:return this.visitRepetition(e);case wtt:return this.visitAlternation(e);case _tt:return this.visitTerminal(e);case ytt:return this.visitRule(e);default:throw Error("non exhaustive match")}}visitNonTerminal(t){}visitAlternative(t){}visitOption(t){}visitRepetition(t){}visitRepetitionMandatory(t){}visitRepetitionMandatoryWithSeparator(t){}visitRepetitionWithSeparator(t){}visitAlternation(t){}visitTerminal(t){}visitRule(t){}}}));function Att(t){return t instanceof mtt||t instanceof xtt||t instanceof vtt||t instanceof btt||t instanceof ktt||t instanceof Ttt||t instanceof _tt||t instanceof ytt}function $tt(t,e=[]){return t instanceof xtt||t instanceof vtt||t instanceof Ttt||(t instanceof wtt?v1(t.definition,(t=>$tt(t,e))):!(t instanceof gtt&&aZ(e,t))&&(t instanceof ftt&&(t instanceof gtt&&e.push(t),VK(t.definition,(t=>$tt(t,e))))))}function Ltt(t){return t instanceof wtt}function Rtt(t){if(t instanceof gtt)return"SUBRULE";if(t instanceof xtt)return"OPTION";if(t instanceof wtt)return"OR";if(t instanceof btt)return"AT_LEAST_ONE";if(t instanceof ktt)return"AT_LEAST_ONE_SEP";if(t instanceof Ttt)return"MANY_SEP";if(t instanceof vtt)return"MANY";if(t instanceof _tt)return"CONSUME";throw Error("non exhaustive match")}var Itt=y((()=>{J1(),Ctt(),g(Att,"isSequenceProd"),g($tt,"isOptionalProd"),g(Ltt,"isBranchingProd"),g(Rtt,"getProductionDslName")})),Ntt=y((()=>{Ctt(),Ett(),Itt()}));function Dtt(t,e,r){return[new xtt({definition:[new _tt({terminalType:t.separator})].concat(t.definition)})].concat(e,r)}var Mtt,Ott=y((()=>{J1(),Ntt(),Mtt=class{static{g(this,"RestWalker")}walk(t,e=[]){BK(t.definition,((r,i)=>{let n=$K(t.definition,i+1);if(r instanceof gtt)this.walkProdRef(r,n,e);else if(r instanceof _tt)this.walkTerminal(r,n,e);else if(r instanceof mtt)this.walkFlat(r,n,e);else if(r instanceof xtt)this.walkOption(r,n,e);else if(r instanceof btt)this.walkAtLeastOne(r,n,e);else if(r instanceof ktt)this.walkAtLeastOneSep(r,n,e);else if(r instanceof Ttt)this.walkManySep(r,n,e);else if(r instanceof vtt)this.walkMany(r,n,e);else{if(!(r instanceof wtt))throw Error("non exhaustive match");this.walkOr(r,n,e)}}))}walkTerminal(t,e,r){}walkProdRef(t,e,r){}walkFlat(t,e,r){let i=e.concat(r);this.walk(t,i)}walkOption(t,e,r){let i=e.concat(r);this.walk(t,i)}walkAtLeastOne(t,e,r){let i=[new xtt({definition:t.definition})].concat(e,r);this.walk(t,i)}walkAtLeastOneSep(t,e,r){let i=Dtt(t,e,r);this.walk(t,i)}walkMany(t,e,r){let i=[new xtt({definition:t.definition})].concat(e,r);this.walk(t,i)}walkManySep(t,e,r){let i=Dtt(t,e,r);this.walk(t,i)}walkOr(t,e,r){let i=e.concat(r);BK(t.definition,(t=>{let e=new mtt({definition:[t]});this.walk(e,i)}))}},g(Dtt,"restForRepetitionWithSeparator")}));function Ptt(t){if(t instanceof gtt)return Ptt(t.referencedRule);if(t instanceof _tt)return ztt(t);if(Att(t))return Btt(t);if(Ltt(t))return Ftt(t);throw Error("non exhaustive match")}function Btt(t){let e,r=[],i=t.definition,n=0,a=i.length>n,s=!0;for(;a&&s;)e=i[n],s=$tt(e),r=r.concat(Ptt(e)),n+=1,a=i.length>n;return B1(r)}function Ftt(t){let e=kQ(t.definition,(t=>Ptt(t)));return B1(iY(e))}function ztt(t){return[t.terminalType]}var jtt,Utt=y((()=>{J1(),Ntt(),g(Ptt,"first"),g(Btt,"firstForSequence"),g(Ftt,"firstForBranching"),g(ztt,"firstForTerminal")})),Wtt=y((()=>{jtt="_~IN~_"}));function qtt(t){let e={};return BK(t,(t=>{let r=new Gtt(t).startWalking();pq(e,r)})),e}function Ytt(t,e){return t.name+e+jtt}var Gtt,Htt=y((()=>{Ott(),Utt(),J1(),Wtt(),Ntt(),Gtt=class extends Mtt{static{g(this,"ResyncFollowsWalker")}constructor(t){super(),this.topProd=t,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(t,e,r){}walkProdRef(t,e,r){let i=Ytt(t.referencedRule,t.idx)+this.topProd.name,n=e.concat(r),a=Ptt(new mtt({definition:n}));this.follows[i]=a}},g(qtt,"computeAllProdsFollows"),g(Ytt,"buildBetweenProdsFollowPrefix")}));function Vtt(t){let e=t.toString();if(Ktt.hasOwnProperty(e))return Ktt[e];{let t=Qtt.pattern(e);return Ktt[e]=t,t}}function Xtt(){Ktt={}}var Ktt,Qtt,Ztt=y((()=>{Z7(),Ktt={},Qtt=new G7,g(Vtt,"getRegExpAst"),g(Xtt,"clearRegExpParserCache")}));function Jtt(t,e=!1){try{let e=Vtt(t);return tet(e.value,{},e.flags.ignoreCase)}catch(r){if(r.message===set)e&&itt(`${oet}\tUnable to optimize: < ${t.toString()} >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";e&&(r="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),rtt(`${oet}\n\tFailed parsing: < ${t.toString()} >\n\tUsing the @chevrotain/regexp-to-ast library\n\tPlease open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function tet(t,e,r){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)tet(t.value[i],e,r);break;case"Alternative":let i=t.value;for(let t=0;t<i.length;t++){let n=i[t];switch(n.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let a=n;switch(a.type){case"Character":eet(a.value,e,r);break;case"Set":if(!0===a.complement)throw Error(set);BK(a.value,(t=>{if("number"==typeof t)eet(t,e,r);else{let i=t;if(!0===r)for(let t=i.from;t<=i.to;t++)eet(t,e,r);else{for(let t=i.from;t<=i.to&&t<Het;t++)eet(t,e,r);if(i.to>=Het){let t=i.from>=Het?i.from:Het,r=i.to,n=Bet(t),a=Bet(r);for(let t=n;t<=a;t++)e[t]=t}}}}));break;case"Group":tet(a.value,e,r);break;default:throw Error("Non Exhaustive Match")}let s=void 0!==a.quantifier&&0===a.quantifier.atLeast;if("Group"===a.type&&!1===net(a)||"Group"!==a.type&&!1===s)break}break;default:throw Error("non exhaustive match!")}return eZ(e)}function eet(t,e,r){let i=Bet(t);e[i]=i,!0===r&&ret(t,e)}function ret(t,e){let r=String.fromCharCode(t),i=r.toUpperCase();if(i!==r){let t=Bet(i.charCodeAt(0));e[t]=t}else{let t=r.toLowerCase();if(t!==r){let r=Bet(t.charCodeAt(0));e[r]=r}}}function iet(t,e){return cQ(t.value,(t=>{if("number"==typeof t)return aZ(e,t);{let r=t;return void 0!==cQ(e,(t=>r.from<=t&&t<=r.to))}}))}function net(t){let e=t.quantifier;return!(!e||0!==e.atLeast)||!!t.value&&(dE(t.value)?VK(t.value,net):net(t.value))}function aet(t,e){if(e instanceof RegExp){let r=Vtt(e),i=new cet(t);return i.visit(r),i.found}return void 0!==cQ(e,(e=>aZ(t,e.charCodeAt(0))))}var set,oet,cet,het=y((()=>{Z7(),J1(),ctt(),Ztt(),Xet(),set="Complement Sets are not supported for first char optimization",oet='Unable to use "first char" lexer optimizations:\n',g(Jtt,"getOptimizedStartCodesIndices"),g(tet,"firstCharOptimizedIndices"),g(eet,"addOptimizedIdxToResult"),g(ret,"handleIgnoreCase"),g(iet,"findCode"),g(net,"isWholeOptional"),cet=class extends H7{static{g(this,"CharCodeFinder")}constructor(t){super(),this.targetCharCodes=t,this.found=!1}visitChildren(t){if(!0!==this.found){switch(t.type){case"Lookahead":return void this.visitLookahead(t);case"NegativeLookahead":return void this.visitNegativeLookahead(t)}super.visitChildren(t)}}visitCharacter(t){aZ(this.targetCharCodes,t.value)&&(this.found=!0)}visitSet(t){t.complement?void 0===iet(t,this.targetCharCodes)&&(this.found=!0):void 0!==iet(t,this.targetCharCodes)&&(this.found=!0)}},g(aet,"canMatchCharCode")}));function uet(t,e){let r,i=(e=uK(e,{useSticky:Wet,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:g(((t,e)=>e()),"tracer")})).tracer;i("initCharCodeToOptimizedIndexMap",(()=>{Fet()})),i("Reject Lexer.NA",(()=>{r=h1(t,(t=>t[zet]===frt.NA))}));let n,a,s,o,l,c,h,u,d,p,f,y=!1;i("Transform Patterns",(()=>{y=!1,n=kQ(r,(t=>{let r=t[zet];if(wZ(r)){let t=r.source;return 1!==t.length||"^"===t||"$"===t||"."===t||r.ignoreCase?2!==t.length||"\\"!==t[0]||aZ(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],t[1])?e.useSticky?Aet(r):Eet(r):t[1]:t}if(Rw(r))return y=!0,{exec:r};if("object"==typeof r)return y=!0,r;if("string"==typeof r){if(1===r.length)return r;{let t=r.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=new RegExp(t);return e.useSticky?Aet(i):Eet(i)}}throw Error("non exhaustive match")}))})),i("misc mapping",(()=>{a=kQ(r,(t=>t.tokenTypeIdx)),s=kQ(r,(t=>{let e=t.GROUP;if(e!==frt.SKIPPED){if(XQ(e))return e;if(EZ(e))return!1;throw Error("non exhaustive match")}})),o=kQ(r,(t=>{let e=t.LONGER_ALT;if(e)return dE(e)?kQ(e,(t=>cZ(r,t))):[cZ(r,e)]})),l=kQ(r,(t=>t.PUSH_MODE)),c=kQ(r,(t=>YQ(t,"POP_MODE")))})),i("Line Terminator Handling",(()=>{let t=Oet(e.lineTerminatorCharacters);h=kQ(r,(t=>!1)),"onlyOffset"!==e.positionTracking&&(h=kQ(r,(e=>YQ(e,"LINE_BREAKS")?!!e.LINE_BREAKS:!1===Det(e,t)&&aet(t,e.PATTERN))))})),i("Misc Mapping #2",(()=>{u=kQ(r,Iet),d=kQ(n,Net),p=o1(r,((t,e)=>{let r=e.GROUP;return XQ(r)&&r!==frt.SKIPPED&&(t[r]=[]),t}),{}),f=kQ(n,((t,e)=>({pattern:n[e],longerAlt:o[e],canLineTerminator:h[e],isCustom:u[e],short:d[e],group:s[e],push:l[e],pop:c[e],tokenTypeIdx:a[e],tokenType:r[e]})))}));let m=!0,x=[];return e.safeMode||i("First Char Optimization",(()=>{x=o1(r,((t,r,i)=>{if("string"==typeof r.PATTERN){let e=Bet(r.PATTERN.charCodeAt(0));Pet(t,e,f[i])}else if(dE(r.START_CHARS_HINT)){let e;BK(r.START_CHARS_HINT,(r=>{let n=Bet("string"==typeof r?r.charCodeAt(0):r);e!==n&&(e=n,Pet(t,n,f[i]))}))}else if(wZ(r.PATTERN))if(r.PATTERN.unicode)m=!1,e.ensureOptimizations&&rtt(`${oet}\tUnable to analyze < ${r.PATTERN.toString()} > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let n=Jtt(r.PATTERN,e.ensureOptimizations);yZ(n)&&(m=!1),BK(n,(e=>{Pet(t,e,f[i])}))}else e.ensureOptimizations&&rtt(`${oet}\tTokenType: <${r.name}> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),m=!1;return t}),[])})),{emptyGroups:p,patternIdxToConfig:f,charCodeToPatternIdxToConfig:x,hasCustom:y,canBeOptimized:m}}function det(t,e){let r=[],i=fet(t);r=r.concat(i.errors);let n=get(i.valid),a=n.valid;return r=r.concat(n.errors),r=r.concat(pet(a)),r=r.concat(vet(a)),r=r.concat(Tet(a,e)),r=r.concat(wet(a)),r}function pet(t){let e=[],r=tQ(t,(t=>wZ(t[zet])));return e=e.concat(yet(r)),e=e.concat(xet(r)),e=e.concat(bet(r)),e=e.concat(ket(r)),e=e.concat(met(r)),e}function fet(t){let e=tQ(t,(t=>!YQ(t,zet)));return{errors:kQ(e,(t=>({message:"Token Type: ->"+t.name+"<- missing static 'PATTERN' property",type:drt.MISSING_PATTERN,tokenTypes:[t]}))),valid:TK(t,e)}}function get(t){let e=tQ(t,(t=>{let e=t[zet];return!(wZ(e)||Rw(e)||YQ(e,"exec")||XQ(e))}));return{errors:kQ(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:drt.INVALID_PATTERN,tokenTypes:[t]}))),valid:TK(t,e)}}function yet(t){class e extends H7{static{g(this,"EndAnchorFinder")}constructor(){super(...arguments),this.found=!1}visitEndAnchor(t){this.found=!0}}let r=tQ(t,(t=>{let r=t.PATTERN;try{let t=Vtt(r),i=new e;return i.visit(t),i.found}catch{return qet.test(r.source)}}));return kQ(r,(t=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:drt.EOI_ANCHOR_FOUND,tokenTypes:[t]})))}function met(t){let e=tQ(t,(t=>t.PATTERN.test("")));return kQ(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'PATTERN' must not match an empty string",type:drt.EMPTY_MATCH_PATTERN,tokenTypes:[t]})))}function xet(t){class e extends H7{static{g(this,"StartAnchorFinder")}constructor(){super(...arguments),this.found=!1}visitStartAnchor(t){this.found=!0}}let r=tQ(t,(t=>{let r=t.PATTERN;try{let t=Vtt(r),i=new e;return i.visit(t),i.found}catch{return Yet.test(r.source)}}));return kQ(r,(t=>({message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:drt.SOI_ANCHOR_FOUND,tokenTypes:[t]})))}function bet(t){let e=tQ(t,(t=>{let e=t[zet];return e instanceof RegExp&&(e.multiline||e.global)}));return kQ(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:drt.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[t]})))}function ket(t){let e=[],r=kQ(t,(r=>o1(t,((t,i)=>(r.PATTERN.source===i.PATTERN.source&&!aZ(e,i)&&i.PATTERN!==frt.NA&&(e.push(i),t.push(i)),t)),[])));r=WH(r);let i=tQ(r,(t=>t.length>1));return kQ(i,(t=>{let e=kQ(t,(t=>t.name));return{message:`The same RegExp pattern ->${pQ(t).PATTERN}<-has been used in all of the following Token Types: ${e.join(", ")} <-`,type:drt.DUPLICATE_PATTERNS_FOUND,tokenTypes:t}}))}function vet(t){let e=tQ(t,(t=>{if(!YQ(t,"GROUP"))return!1;let e=t.GROUP;return e!==frt.SKIPPED&&e!==frt.NA&&!XQ(e)}));return kQ(e,(t=>({message:"Token Type: ->"+t.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:drt.INVALID_GROUP_TYPE_FOUND,tokenTypes:[t]})))}function Tet(t,e){let r=tQ(t,(t=>void 0!==t.PUSH_MODE&&!aZ(e,t.PUSH_MODE)));return kQ(r,(t=>({message:`Token Type: ->${t.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${t.PUSH_MODE}<-which does not exist`,type:drt.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[t]})))}function wet(t){let e=[],r=o1(t,((t,e,r)=>{let i=e.PATTERN;return i===frt.NA||(XQ(i)?t.push({str:i,idx:r,tokenType:e}):wZ(i)&&Cet(i)&&t.push({str:i.source,idx:r,tokenType:e})),t}),[]);return BK(t,((t,i)=>{BK(r,(({str:r,idx:n,tokenType:a})=>{if(i<n&&_et(r,t.PATTERN)){let r=`Token: ->${a.name}<- can never be matched.\nBecause it appears AFTER the Token Type ->${t.name}<-in the lexer's definition.\nSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:r,type:drt.UNREACHABLE_PATTERN,tokenTypes:[t,a]})}}))})),e}function _et(t,e){if(wZ(e)){let r=e.exec(t);return null!==r&&0===r.index}if(Rw(e))return e(t,0,[],{});if(YQ(e,"exec"))return e.exec(t,0,[],{});if("string"==typeof e)return e===t;throw Error("non exhaustive match")}function Cet(t){return void 0===cQ([".","\\","[","]","|","^","$","(",")","?","*","+","{"],(e=>-1!==t.source.indexOf(e)))}function Eet(t){let e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function Aet(t){let e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function $et(t,e,r){let i=[];return YQ(t,jet)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+jet+"> property in its definition\n",type:drt.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),YQ(t,Uet)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+Uet+"> property in its definition\n",type:drt.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),YQ(t,Uet)&&YQ(t,jet)&&!YQ(t.modes,t.defaultMode)&&i.push({message:`A MultiMode Lexer cannot be initialized with a ${jet}: <${t.defaultMode}>which does not exist\n`,type:drt.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),YQ(t,Uet)&&BK(t.modes,((t,e)=>{BK(t,((r,n)=>{if(EZ(r))i.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${e}> at index: <${n}>\n`,type:drt.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(YQ(r,"LONGER_ALT")){let n=dE(r.LONGER_ALT)?r.LONGER_ALT:[r.LONGER_ALT];BK(n,(n=>{!EZ(n)&&!aZ(t,n)&&i.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${n.name}> on token <${r.name}> outside of mode <${e}>\n`,type:drt.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})}))}}))})),i}function Let(t,e,r){let i=[],n=!1,a=WH(iY(eZ(t.modes))),s=h1(a,(t=>t[zet]===frt.NA)),o=Oet(r);return e&&BK(s,(t=>{let e=Det(t,o);if(!1!==e){let r={message:Met(t,e),type:e.issue,tokenType:t};i.push(r)}else YQ(t,"LINE_BREAKS")?!0===t.LINE_BREAKS&&(n=!0):aet(o,t.PATTERN)&&(n=!0)})),e&&!n&&i.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:drt.NO_LINE_BREAKS_FLAGS}),i}function Ret(t){let e={},r=cq(t);return BK(r,(r=>{let i=t[r];if(!dE(i))throw Error("non exhaustive match");e[r]=[]})),e}function Iet(t){let e=t.PATTERN;if(wZ(e))return!1;if(Rw(e))return!0;if(YQ(e,"exec"))return!0;if(XQ(e))return!1;throw Error("non exhaustive match")}function Net(t){return!(!XQ(t)||1!==t.length)&&t.charCodeAt(0)}function Det(t,e){if(YQ(t,"LINE_BREAKS"))return!1;if(wZ(t.PATTERN)){try{aet(e,t.PATTERN)}catch(t){return{issue:drt.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}if(XQ(t.PATTERN))return!1;if(Iet(t))return{issue:drt.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function Met(t,e){if(e.issue===drt.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <${t.name}> Token Type\n\t Root cause: ${e.errMsg}.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===drt.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <${t.name}> Token Type\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Oet(t){return kQ(t,(t=>XQ(t)?t.charCodeAt(0):t))}function Pet(t,e,r){void 0===t[e]?t[e]=[r]:t[e].push(r)}function Bet(t){return t<Het?t:Vet[t]}function Fet(){if(yZ(Vet)){Vet=new Array(65536);for(let t=0;t<65536;t++)Vet[t]=t>255?255+~~(t/255):t}}var zet,jet,Uet,Wet,qet,Yet,Get,Het,Vet,Xet=y((()=>{Z7(),mrt(),J1(),ctt(),het(),Ztt(),zet="PATTERN",jet="defaultMode",Uet="modes",Wet="boolean"==typeof new RegExp("(?:)").sticky,g(uet,"analyzeTokenTypes"),g(det,"validatePatterns"),g(pet,"validateRegExpPattern"),g(fet,"findMissingPatterns"),g(get,"findInvalidPatterns"),qet=/[^\\][$]/,g(yet,"findEndOfInputAnchor"),g(met,"findEmptyMatchRegExps"),Yet=/[^\\[][\^]|^\^/,g(xet,"findStartOfInputAnchor"),g(bet,"findUnsupportedFlags"),g(ket,"findDuplicatePatterns"),g(vet,"findInvalidGroupType"),g(Tet,"findModesThatDoNotExist"),g(wet,"findUnreachablePatterns"),g(_et,"testTokenType"),g(Cet,"noMetaChar"),g(Eet,"addStartOfInput"),g(Aet,"addStickyFlag"),g($et,"performRuntimeChecks"),g(Let,"performWarningRuntimeChecks"),g(Ret,"cloneEmptyGroups"),g(Iet,"isCustomPattern"),g(Net,"isShortPattern"),Get={test:g((function(t){let e=t.length;for(let r=this.lastIndex;r<e;r++){let e=t.charCodeAt(r);if(10===e)return this.lastIndex=r+1,!0;if(13===e)return 10===t.charCodeAt(r+1)?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1}),"test"),lastIndex:0},g(Det,"checkLineBreaksIssues"),g(Met,"buildLineBreakIssueMessage"),g(Oet,"getCharCodes"),g(Pet,"addToMapOfArrays"),Het=256,Vet=[],g(Bet,"charCodeToOptimizedIndex"),g(Fet,"initCharCodeToOptimizedIndexMap")}));function Ket(t,e){let r=t.tokenTypeIdx;return r===e.tokenTypeIdx||!0===e.isParent&&!0===e.categoryMatchesMap[r]}function Qet(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}function Zet(t){let e=Jet(t);trt(e),rrt(e),ert(e),BK(e,(t=>{t.isParent=t.categoryMatches.length>0}))}function Jet(t){let e=MH(t),r=t,i=!0;for(;i;){r=WH(iY(kQ(r,(t=>t.CATEGORIES))));let t=TK(r,e);e=e.concat(t),yZ(t)?i=!1:r=t}return e}function trt(t){BK(t,(t=>{nrt(t)||(hrt[crt]=t,t.tokenTypeIdx=crt++),art(t)&&!dE(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),art(t)||(t.CATEGORIES=[]),srt(t)||(t.categoryMatches=[]),ort(t)||(t.categoryMatchesMap={})}))}function ert(t){BK(t,(t=>{t.categoryMatches=[],BK(t.categoryMatchesMap,((e,r)=>{t.categoryMatches.push(hrt[r].tokenTypeIdx)}))}))}function rrt(t){BK(t,(t=>{irt([],t)}))}function irt(t,e){BK(t,(t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0})),BK(e.CATEGORIES,(r=>{let i=t.concat(e);aZ(i,r)||irt(i,r)}))}function nrt(t){return YQ(t,"tokenTypeIdx")}function art(t){return YQ(t,"CATEGORIES")}function srt(t){return YQ(t,"categoryMatches")}function ort(t){return YQ(t,"categoryMatchesMap")}function lrt(t){return YQ(t,"tokenTypeIdx")}var crt,hrt,urt,drt,prt,frt,grt=y((()=>{J1(),g(Ket,"tokenStructuredMatcher"),g(Qet,"tokenStructuredMatcherNoCategories"),crt=1,hrt={},g(Zet,"augmentTokenTypes"),g(Jet,"expandCategories"),g(trt,"assignTokenDefaultProps"),g(ert,"assignCategoriesTokensProp"),g(rrt,"assignCategoriesMapProp"),g(irt,"singleAssignCategoriesToksMap"),g(nrt,"hasShortKeyProperty"),g(art,"hasCategoriesProperty"),g(srt,"hasExtendingTokensTypesProperty"),g(ort,"hasExtendingTokensTypesMapProperty"),g(lrt,"isTokenType")})),yrt=y((()=>{urt={buildUnableToPopLexerModeMessage:t=>`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`,buildUnexpectedCharactersMessage:(t,e,r,i,n)=>`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${r} characters.`}})),mrt=y((()=>{var t;Xet(),J1(),ctt(),grt(),yrt(),Ztt(),(t=drt||(drt={}))[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE",prt={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:urt,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0},Object.freeze(prt),(frt=class{static{g(this,"Lexer")}constructor(t,e=prt){if(this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(t,e)=>{if(!0===this.traceInitPerf){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${t}>`);let{time:i,value:n}=att(e),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${t}> time: ${i}ms`),this.traceInitIndent--,n}return e()},"boolean"==typeof e)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=pq({},prt,e);let r=this.config.traceInitPerf;!0===r?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof r&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(()=>{let r,i=!0;this.TRACE_INIT("Lexer Config handling",(()=>{if(this.config.lineTerminatorsPattern===prt.lineTerminatorsPattern)this.config.lineTerminatorsPattern=Get;else if(this.config.lineTerminatorCharacters===prt.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(e.safeMode&&e.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),dE(t)?r={modes:{defaultMode:MH(t)},defaultMode:jet}:(i=!1,r=MH(t))})),!1===this.config.skipValidations&&(this.TRACE_INIT("performRuntimeChecks",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat($et(r,this.trackStartLines,this.config.lineTerminatorCharacters))})),this.TRACE_INIT("performWarningRuntimeChecks",(()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Let(r,this.trackStartLines,this.config.lineTerminatorCharacters))}))),r.modes=r.modes?r.modes:{},BK(r.modes,((t,e)=>{r.modes[e]=h1(t,(t=>EZ(t)))}));let n=cq(r.modes);if(BK(r.modes,((t,r)=>{this.TRACE_INIT(`Mode: <${r}> processing`,(()=>{if(this.modes.push(r),!1===this.config.skipValidations&&this.TRACE_INIT("validatePatterns",(()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(det(t,n))})),yZ(this.lexerDefinitionErrors)){let i;Zet(t),this.TRACE_INIT("analyzeTokenTypes",(()=>{i=uet(t,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:e.positionTracking,ensureOptimizations:e.ensureOptimizations,safeMode:e.safeMode,tracer:this.TRACE_INIT})})),this.patternIdxToConfig[r]=i.patternIdxToConfig,this.charCodeToPatternIdxToConfig[r]=i.charCodeToPatternIdxToConfig,this.emptyGroups=pq({},this.emptyGroups,i.emptyGroups),this.hasCustom=i.hasCustom||this.hasCustom,this.canModeBeOptimized[r]=i.canBeOptimized}}))})),this.defaultMode=r.defaultMode,!yZ(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let t=kQ(this.lexerDefinitionErrors,(t=>t.message)).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+t)}BK(this.lexerDefinitionWarning,(t=>{itt(t.message)})),this.TRACE_INIT("Choosing sub-methods implementations",(()=>{if(Wet?(this.chopInput=t$,this.match=this.matchWithTest):(this.updateLastIndex=DW,this.match=this.matchWithExec),i&&(this.handleModes=DW),!1===this.trackStartLines&&(this.computeNewColumn=t$),!1===this.trackEndLines&&(this.updateTokenEndLineColumnLocation=DW),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else{if(!/onlyOffset/i.test(this.config.positionTracking))throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.createTokenInstance=this.createOffsetOnlyToken}this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)})),this.TRACE_INIT("Failed Optimization Warnings",(()=>{let t=o1(this.canModeBeOptimized,((t,e,r)=>(!1===e&&t.push(r),t)),[]);if(e.ensureOptimizations&&!yZ(t))throw Error(`Lexer Modes: < ${t.join(", ")} > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.`)})),this.TRACE_INIT("clearRegExpParserCache",(()=>{Xtt()})),this.TRACE_INIT("toFastProperties",(()=>{ott(this)}))}))}tokenize(t,e=this.defaultMode){if(!yZ(this.lexerDefinitionErrors)){let t=kQ(this.lexerDefinitionErrors,(t=>t.message)).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+t)}return this.tokenizeInternal(t,e)}tokenizeInternal(t,e){let r,i,n,a,s,o,l,c,h,u,d,p,f,y,m,x,b=t,k=b.length,v=0,T=0,w=this.hasCustom?0:Math.floor(t.length/10),_=new Array(w),S=[],C=this.trackStartLines?1:void 0,E=this.trackStartLines?1:void 0,A=Ret(this.emptyGroups),$=this.trackStartLines,L=this.config.lineTerminatorsPattern,R=0,I=[],N=[],D=[],M=[];function O(){return I}function P(t){let e=Bet(t),r=N[e];return void 0===r?M:r}Object.freeze(M),g(O,"getPossiblePatternsSlow"),g(P,"getPossiblePatternsOptimized");let B=g((t=>{if(1===D.length&&void 0===t.tokenType.PUSH_MODE){let e=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(t);S.push({offset:t.startOffset,line:t.startLine,column:t.startColumn,length:t.image.length,message:e})}else{D.pop();let t=CK(D);I=this.patternIdxToConfig[t],N=this.charCodeToPatternIdxToConfig[t],R=I.length;let e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;x=N&&e?P:O}}),"pop_mode");function F(t){D.push(t),N=this.charCodeToPatternIdxToConfig[t],I=this.patternIdxToConfig[t],R=I.length,R=I.length;let e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;x=N&&e?P:O}g(F,"push_mode"),F.call(this,e);let z,j=this.config.recoveryEnabled;for(;v<k;){o=null;let e=b.charCodeAt(v),g=x(e),w=g.length;for(r=0;r<w;r++){z=g[r];let i=z.pattern;l=null;let h=z.short;if(!1!==h?e===h&&(o=i):!0===z.isCustom?(m=i.exec(b,v,_,A),null!==m?(o=m[0],void 0!==m.payload&&(l=m.payload)):o=null):(this.updateLastIndex(i,v),o=this.match(i,t,v)),null!==o){if(s=z.longerAlt,void 0!==s){let e=s.length;for(n=0;n<e;n++){let e=I[s[n]],r=e.pattern;if(c=null,!0===e.isCustom?(m=r.exec(b,v,_,A),null!==m?(a=m[0],void 0!==m.payload&&(c=m.payload)):a=null):(this.updateLastIndex(r,v),a=this.match(r,t,v)),a&&a.length>o.length){o=a,l=c,z=e;break}}}break}}if(null!==o){if(h=o.length,u=z.group,void 0!==u&&(d=z.tokenTypeIdx,p=this.createTokenInstance(o,v,d,z.tokenType,C,E,h),this.handlePayload(p,l),!1===u?T=this.addToken(_,T,p):A[u].push(p)),t=this.chopInput(t,h),v+=h,E=this.computeNewColumn(E,h),!0===$&&!0===z.canLineTerminator){let t,e,r=0;L.lastIndex=0;do{t=L.test(o),!0===t&&(e=L.lastIndex-1,r++)}while(!0===t);0!==r&&(C+=r,E=h-e,this.updateTokenEndLineColumnLocation(p,u,e,r,C,E,h))}this.handleModes(z,B,F,p)}else{let e=v,r=C,n=E,a=!1===j;for(;!1===a&&v<k;)for(t=this.chopInput(t,1),v++,i=0;i<R;i++){let e=I[i],r=e.pattern,n=e.short;if(!1!==n?b.charCodeAt(v)===n&&(a=!0):!0===e.isCustom?a=null!==r.exec(b,v,_,A):(this.updateLastIndex(r,v),a=null!==r.exec(t)),!0===a)break}if(f=v-e,E=this.computeNewColumn(E,f),y=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(b,e,f,r,n),S.push({offset:e,line:r,column:n,length:f,message:y}),!1===j)break}}return this.hasCustom||(_.length=T),{tokens:_,groups:A,errors:S}}handleModes(t,e,r,i){if(!0===t.pop){let n=t.push;e(i),void 0!==n&&r.call(this,n)}else void 0!==t.push&&r.call(this,t.push)}chopInput(t,e){return t.substring(e)}updateLastIndex(t,e){t.lastIndex=e}updateTokenEndLineColumnLocation(t,e,r,i,n,a,s){let o,l;void 0!==e&&(o=r===s-1,l=o?-1:0,1===i&&!0===o||(t.endLine=n+l,t.endColumn=a-1-l))}computeNewColumn(t,e){return t+e}createOffsetOnlyToken(t,e,r,i){return{image:t,startOffset:e,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(t,e,r,i,n,a){return{image:t,startOffset:e,startLine:n,startColumn:a,tokenTypeIdx:r,tokenType:i}}createFullToken(t,e,r,i,n,a,s){return{image:t,startOffset:e,endOffset:e+s-1,startLine:n,endLine:n,startColumn:a,endColumn:a+s-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(t,e,r){return t.push(r),e}addTokenUsingMemberAccess(t,e,r){return t[e]=r,++e}handlePayloadNoCustom(t,e){}handlePayloadWithCustom(t,e){null!==e&&(t.payload=e)}matchWithTest(t,e,r){return!0===t.test(e)?e.substring(r,t.lastIndex):null}matchWithExec(t,e){let r=t.exec(e);return null!==r?r[0]:null}}).SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",frt.NA=/NOT_APPLICABLE/}));function xrt(t){return brt(t)?t.LABEL:t.name}function brt(t){return XQ(t.LABEL)&&""!==t.LABEL}function krt(t){return vrt(t)}function vrt(t){let e=t.pattern,r={};if(r.name=t.name,EZ(e)||(r.PATTERN=e),YQ(t,_rt))throw"The parent property is no longer supported.\nSee: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.";return YQ(t,Srt)&&(r.CATEGORIES=t[Srt]),Zet([r]),YQ(t,Crt)&&(r.LABEL=t[Crt]),YQ(t,Ert)&&(r.GROUP=t[Ert]),YQ(t,$rt)&&(r.POP_MODE=t[$rt]),YQ(t,Art)&&(r.PUSH_MODE=t[Art]),YQ(t,Lrt)&&(r.LONGER_ALT=t[Lrt]),YQ(t,Rrt)&&(r.LINE_BREAKS=t[Rrt]),YQ(t,Irt)&&(r.START_CHARS_HINT=t[Irt]),r}function Trt(t,e,r,i,n,a,s,o){return{image:e,startOffset:r,endOffset:i,startLine:n,endLine:a,startColumn:s,endColumn:o,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function wrt(t,e){return Ket(t,e)}var _rt,Srt,Crt,Ert,Art,$rt,Lrt,Rrt,Irt,Nrt,Drt,Mrt,Ort,Prt=y((()=>{J1(),mrt(),grt(),g(xrt,"tokenLabel"),g(brt,"hasTokenLabel"),_rt="parent",Srt="categories",Crt="label",Ert="group",Art="push_mode",$rt="pop_mode",Lrt="longer_alt",Rrt="line_breaks",Irt="start_chars_hint",g(krt,"createToken"),g(vrt,"createTokenInternal"),Zet([Nrt=krt({name:"EOF",pattern:frt.NA})]),g(Trt,"createTokenInstance"),g(wrt,"tokenMatcher")})),Brt=y((()=>{Prt(),J1(),Ntt(),Drt={buildMismatchTokenMessage:({expected:t,actual:e,previous:r,ruleName:i})=>`Expecting ${brt(t)?`--\x3e ${xrt(t)} <--`:`token of type --\x3e ${t.name} <--`} but found --\x3e '${e.image}' <--`,buildNotAllInputParsedMessage:({firstRedundant:t,ruleName:e})=>"Redundant input, expecting EOF but found: "+t.image,buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:r,customUserDescription:i,ruleName:n}){let a="Expecting: ",s="\nbut found: '"+pQ(e).image+"'";if(i)return a+i+s;{let e=o1(t,((t,e)=>t.concat(e)),[]),r=kQ(e,(t=>`[${kQ(t,(t=>xrt(t))).join(", ")}]`));return a+`one of these possible Token sequences:\n${kQ(r,((t,e)=>`  ${e+1}. ${t}`)).join("\n")}`+s}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:r,ruleName:i}){let n="Expecting: ",a="\nbut found: '"+pQ(e).image+"'";if(r)return n+r+a;return n+`expecting at least one iteration which starts with one of these possible Token sequences::\n  <${kQ(t,(t=>`[${kQ(t,(t=>xrt(t))).join(",")}]`)).join(" ,")}>`+a}},Object.freeze(Drt),Mrt={buildRuleNotFoundError:(t,e)=>"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+"<-\ninside top level rule: ->"+t.name+"<-"},Ort={buildDuplicateFoundError(t,e){function r(t){return t instanceof _tt?t.terminalType.name:t instanceof gtt?t.nonTerminalName:""}g(r,"getExtraProductionArgument");let i=t.name,n=pQ(e),a=n.idx,s=Rtt(n),o=r(n),l=`->${s}${a>0?a:""}<- ${o?`with argument: ->${o}<-`:""}\n                  appears more than once (${e.length} times) in the top level rule: ->${i}<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,"\n"),l},buildNamespaceConflictError:t=>`Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter.`,buildAlternationPrefixAmbiguityError(t){let e=kQ(t.prefixPath,(t=>xrt(t))).join(", "),r=0===t.alternation.idx?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix\nin <OR${r}> inside <${t.topLevelRule.name}> Rule,\n<${e}> may appears as a prefix path in all these alternatives.\nSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details.`},buildAlternationAmbiguityError(t){let e=kQ(t.prefixPath,(t=>xrt(t))).join(", "),r=0===t.alternation.idx?"":t.alternation.idx,i=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${t.topLevelRule.name}> Rule,\n<${e}> may appears as a prefix path in all these alternatives.\n`;return i+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",i},buildEmptyRepetitionError(t){let e=Rtt(t.repetition);return 0!==t.repetition.idx&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.\nThis could lead to an infinite loop.`},buildTokenNameError:t=>"deprecated",buildEmptyAlternationError:t=>`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.\nOnly the last alternative may be an empty alternative.`,buildTooManyAlternativesError:t=>`An Alternation cannot have more than 256 alternatives:\n<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.\n has ${t.alternation.definition.length+1} alternatives.`,buildLeftRecursionError(t){let e=t.topLevelRule.name;return`Left Recursion found in grammar.\nrule: <${e}> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n ${`${e} --\x3e ${kQ(t.leftRecursionPath,(t=>t.name)).concat([e]).join(" --\x3e ")}`}\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError:t=>"deprecated",buildDuplicateRuleNameError(t){let e;return e=t.topLevelRule instanceof ytt?t.topLevelRule.name:t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}}}));function Frt(t,e){let r=new zrt(t,e);return r.resolveRefs(),r.errors}var zrt,jrt=y((()=>{hat(),J1(),Ntt(),g(Frt,"resolveGrammar"),zrt=class extends Stt{static{g(this,"GastRefResolverVisitor")}constructor(t,e){super(),this.nameToTopRule=t,this.errMsgProvider=e,this.errors=[]}resolveRefs(){BK(eZ(this.nameToTopRule),(t=>{this.currTopLevel=t,t.accept(this)}))}visitNonTerminal(t){let e=this.nameToTopRule[t.nonTerminalName];if(e)t.referencedRule=e;else{let e=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:e,type:oat.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}}}}));function Urt(t,e,r=[]){r=MH(r);let i=[],n=0;function a(e){return e.concat($K(t,n+1))}function s(t){let n=Urt(a(t),e,r);return i.concat(n)}for(g(a,"remainingPathWith"),g(s,"getAlternativesForProd");r.length<e&&n<t.length;){let e=t[n];if(e instanceof mtt)return s(e.definition);if(e instanceof gtt)return s(e.definition);if(e instanceof xtt)i=s(e.definition);else{if(e instanceof btt){return s(e.definition.concat([new vtt({definition:e.definition})]))}if(e instanceof ktt){return s([new mtt({definition:e.definition}),new vtt({definition:[new _tt({terminalType:e.separator})].concat(e.definition)})])}if(e instanceof Ttt){let t=e.definition.concat([new vtt({definition:[new _tt({terminalType:e.separator})].concat(e.definition)})]);i=s(t)}else if(e instanceof vtt){let t=e.definition.concat([new vtt({definition:e.definition})]);i=s(t)}else{if(e instanceof wtt)return BK(e.definition,(t=>{!1===yZ(t.definition)&&(i=s(t.definition))})),i;if(!(e instanceof _tt))throw Error("non exhaustive match");r.push(e.terminalType)}}n++}return i.push({partialPath:r,suffixDef:$K(t,n)}),i}function Wrt(t,e,r,i){let n="EXIT_NONE_TERMINAL",a=[n],s="EXIT_ALTERNATIVE",o=!1,l=e.length,c=l-i-1,h=[],u=[];for(u.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!yZ(u);){let t=u.pop();if(t===s){o&&CK(u).idx<=c&&u.pop();continue}let i=t.def,d=t.idx,p=t.ruleStack,f=t.occurrenceStack;if(yZ(i))continue;let g=i[0];if(g===n){let t={idx:d,def:$K(i),ruleStack:IK(p),occurrenceStack:IK(f)};u.push(t)}else if(g instanceof _tt)if(d<l-1){let t=d+1;if(r(e[t],g.terminalType)){let e={idx:t,def:$K(i),ruleStack:p,occurrenceStack:f};u.push(e)}}else{if(d!==l-1)throw Error("non exhaustive match");h.push({nextTokenType:g.terminalType,nextTokenOccurrence:g.idx,ruleStack:p,occurrenceStack:f}),o=!0}else if(g instanceof gtt){let t=MH(p);t.push(g.nonTerminalName);let e=MH(f);e.push(g.idx);let r={idx:d,def:g.definition.concat(a,$K(i)),ruleStack:t,occurrenceStack:e};u.push(r)}else if(g instanceof xtt){let t={idx:d,def:$K(i),ruleStack:p,occurrenceStack:f};u.push(t),u.push(s);let e={idx:d,def:g.definition.concat($K(i)),ruleStack:p,occurrenceStack:f};u.push(e)}else if(g instanceof btt){let t=new vtt({definition:g.definition,idx:g.idx}),e={idx:d,def:g.definition.concat([t],$K(i)),ruleStack:p,occurrenceStack:f};u.push(e)}else if(g instanceof ktt){let t=new _tt({terminalType:g.separator}),e=new vtt({definition:[t].concat(g.definition),idx:g.idx}),r={idx:d,def:g.definition.concat([e],$K(i)),ruleStack:p,occurrenceStack:f};u.push(r)}else if(g instanceof Ttt){let t={idx:d,def:$K(i),ruleStack:p,occurrenceStack:f};u.push(t),u.push(s);let e=new _tt({terminalType:g.separator}),r=new vtt({definition:[e].concat(g.definition),idx:g.idx}),n={idx:d,def:g.definition.concat([r],$K(i)),ruleStack:p,occurrenceStack:f};u.push(n)}else if(g instanceof vtt){let t={idx:d,def:$K(i),ruleStack:p,occurrenceStack:f};u.push(t),u.push(s);let e=new vtt({definition:g.definition,idx:g.idx}),r={idx:d,def:g.definition.concat([e],$K(i)),ruleStack:p,occurrenceStack:f};u.push(r)}else if(g instanceof wtt)for(let t=g.definition.length-1;t>=0;t--){let e={idx:d,def:g.definition[t].definition.concat($K(i)),ruleStack:p,occurrenceStack:f};u.push(e),u.push(s)}else if(g instanceof mtt)u.push({idx:d,def:g.definition.concat($K(i)),ruleStack:p,occurrenceStack:f});else{if(!(g instanceof ytt))throw Error("non exhaustive match");u.push(qrt(g,d,p,f))}}return h}function qrt(t,e,r,i){let n=MH(r);n.push(t.name);let a=MH(i);return a.push(1),{idx:e,def:t.definition,ruleStack:n,occurrenceStack:a}}var Yrt,Grt,Hrt,Vrt,Xrt,Krt,Qrt,Zrt=y((()=>{J1(),Utt(),Ott(),Ntt(),Yrt=class extends Mtt{static{g(this,"AbstractNextPossibleTokensWalker")}constructor(t,e){super(),this.topProd=t,this.path=e,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=MH(this.path.ruleStack).reverse(),this.occurrenceStack=MH(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(t,e=[]){this.found||super.walk(t,e)}walkProdRef(t,e,r){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){let i=e.concat(r);this.updateExpectedNext(),this.walk(t.referencedRule,i)}}updateExpectedNext(){yZ(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},Grt=class extends Yrt{static{g(this,"NextAfterTokenWalker")}constructor(t,e){super(t,e),this.path=e,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(t,e,r){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){let t=e.concat(r),i=new mtt({definition:t});this.possibleTokTypes=Ptt(i),this.found=!0}}},Hrt=class extends Mtt{static{g(this,"AbstractNextTerminalAfterProductionWalker")}constructor(t,e){super(),this.topRule=t,this.occurrence=e,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},Vrt=class extends Hrt{static{g(this,"NextTerminalAfterManyWalker")}walkMany(t,e,r){if(t.idx===this.occurrence){let t=pQ(e.concat(r));this.result.isEndOfRule=void 0===t,t instanceof _tt&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkMany(t,e,r)}},Xrt=class extends Hrt{static{g(this,"NextTerminalAfterManySepWalker")}walkManySep(t,e,r){if(t.idx===this.occurrence){let t=pQ(e.concat(r));this.result.isEndOfRule=void 0===t,t instanceof _tt&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkManySep(t,e,r)}},Krt=class extends Hrt{static{g(this,"NextTerminalAfterAtLeastOneWalker")}walkAtLeastOne(t,e,r){if(t.idx===this.occurrence){let t=pQ(e.concat(r));this.result.isEndOfRule=void 0===t,t instanceof _tt&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkAtLeastOne(t,e,r)}},Qrt=class extends Hrt{static{g(this,"NextTerminalAfterAtLeastOneSepWalker")}walkAtLeastOneSep(t,e,r){if(t.idx===this.occurrence){let t=pQ(e.concat(r));this.result.isEndOfRule=void 0===t,t instanceof _tt&&(this.result.token=t.terminalType,this.result.occurrence=t.idx)}else super.walkAtLeastOneSep(t,e,r)}},g(Urt,"possiblePathsFrom"),g(Wrt,"nextPossibleTokensAfter"),g(qrt,"expandTopLevelRule")}));function Jrt(t){if(t instanceof xtt||"Option"===t)return fit.OPTION;if(t instanceof vtt||"Repetition"===t)return fit.REPETITION;if(t instanceof btt||"RepetitionMandatory"===t)return fit.REPETITION_MANDATORY;if(t instanceof ktt||"RepetitionMandatoryWithSeparator"===t)return fit.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof Ttt||"RepetitionWithSeparator"===t)return fit.REPETITION_WITH_SEPARATOR;if(t instanceof wtt||"Alternation"===t)return fit.ALTERNATION;throw Error("non exhaustive match")}function tit(t){let{occurrence:e,rule:r,prodType:i,maxLookahead:n}=t,a=Jrt(i);return a===fit.ALTERNATION?cit(e,r,n):hit(e,r,a,n)}function eit(t,e,r,i,n,a){let s=cit(t,e,r);return a(s,i,pit(s)?Qet:Ket,n)}function rit(t,e,r,i,n,a){let s=hit(t,e,n,r),o=pit(s)?Qet:Ket;return a(s[0],o,i)}function iit(t,e,r,i){let n=t.length,a=VK(t,(t=>VK(t,(t=>1===t.length))));if(e)return function(e){let i=kQ(e,(t=>t.GATE));for(let e=0;e<n;e++){let n=t[e],a=n.length,s=i[e];if(void 0===s||!1!==s.call(this))t:for(let t=0;t<a;t++){let i=n[t],a=i.length;for(let t=0;t<a;t++){let e=this.LA(t+1);if(!1===r(e,i[t]))continue t}return e}}};if(a&&!i){let e=kQ(t,(t=>iY(t))),r=o1(e,((t,e,r)=>(BK(e,(e=>{YQ(t,e.tokenTypeIdx)||(t[e.tokenTypeIdx]=r),BK(e.categoryMatches,(e=>{YQ(t,e)||(t[e]=r)}))})),t)),{});return function(){let t=this.LA(1);return r[t.tokenTypeIdx]}}return function(){for(let e=0;e<n;e++){let i=t[e],n=i.length;t:for(let t=0;t<n;t++){let n=i[t],a=n.length;for(let t=0;t<a;t++){let e=this.LA(t+1);if(!1===r(e,n[t]))continue t}return e}}}}function nit(t,e,r){let i=VK(t,(t=>1===t.length)),n=t.length;if(i&&!r){let e=iY(t);if(1===e.length&&yZ(e[0].categoryMatches)){let t=e[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===t}}{let t=o1(e,((t,e,r)=>(t[e.tokenTypeIdx]=!0,BK(e.categoryMatches,(e=>{t[e]=!0})),t)),[]);return function(){let e=this.LA(1);return!0===t[e.tokenTypeIdx]}}}return function(){t:for(let r=0;r<n;r++){let i=t[r],n=i.length;for(let t=0;t<n;t++){let r=this.LA(t+1);if(!1===e(r,i[t]))continue t}return!0}return!1}}function ait(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=[];return e}function sit(t){let e=[""];for(let r=0;r<t.length;r++){let i=t[r],n=[];for(let t=0;t<e.length;t++){let r=e[t];n.push(r+"_"+i.tokenTypeIdx);for(let t=0;t<i.categoryMatches.length;t++){let e="_"+i.categoryMatches[t];n.push(r+e)}}e=n}return e}function oit(t,e,r){for(let i=0;i<t.length;i++){if(i===r)continue;let n=t[i];for(let t=0;t<e.length;t++){if(!0===n[e[t]])return!1}}return!0}function lit(t,e){let r=kQ(t,(t=>Urt([t],1))),i=ait(r.length),n=kQ(r,(t=>{let e={};return BK(t,(t=>{let r=sit(t.partialPath);BK(r,(t=>{e[t]=!0}))})),e})),a=r;for(let t=1;t<=e;t++){let r=a;a=ait(r.length);for(let s=0;s<r.length;s++){let o=r[s];for(let r=0;r<o.length;r++){let l=o[r].partialPath,c=o[r].suffixDef,h=sit(l);if(oit(n,h,s)||yZ(c)||l.length===e){let t=i[s];if(!1===uit(t,l)){t.push(l);for(let t=0;t<h.length;t++){let e=h[t];n[s][e]=!0}}}else{let e=Urt(c,t+1,l);a[s]=a[s].concat(e),BK(e,(t=>{let e=sit(t.partialPath);BK(e,(t=>{n[s][t]=!0}))}))}}}}return i}function cit(t,e,r,i){let n=new yit(t,fit.ALTERNATION,i);return e.accept(n),lit(n.result,r)}function hit(t,e,r,i){let n=new yit(t,r);e.accept(n);let a=n.result,s=new git(e,t,r).startWalking();return lit([new mtt({definition:a}),new mtt({definition:s})],i)}function uit(t,e){t:for(let r=0;r<t.length;r++){let i=t[r];if(i.length===e.length){for(let t=0;t<i.length;t++){let r=e[t],n=i[t];if(!1==(r===n||void 0!==n.categoryMatchesMap[r.tokenTypeIdx]))continue t}return!0}}return!1}function dit(t,e){return t.length<e.length&&VK(t,((t,r)=>{let i=e[r];return t===i||i.categoryMatchesMap[t.tokenTypeIdx]}))}function pit(t){return VK(t,(t=>VK(t,(t=>VK(t,(t=>yZ(t.categoryMatches)))))))}var fit,git,yit,mit=y((()=>{var t;J1(),Zrt(),Ott(),grt(),Ntt(),(t=fit||(fit={}))[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION",g(Jrt,"getProdType"),g(tit,"getLookaheadPaths"),g(eit,"buildLookaheadFuncForOr"),g(rit,"buildLookaheadFuncForOptionalProd"),g(iit,"buildAlternativesLookAheadFunc"),g(nit,"buildSingleAlternativeLookaheadFunction"),git=class extends Mtt{static{g(this,"RestDefinitionFinderWalker")}constructor(t,e,r){super(),this.topProd=t,this.targetOccurrence=e,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(t,e,r,i){return t.idx===this.targetOccurrence&&this.targetProdType===e&&(this.restDef=r.concat(i),!0)}walkOption(t,e,r){this.checkIsTarget(t,fit.OPTION,e,r)||super.walkOption(t,e,r)}walkAtLeastOne(t,e,r){this.checkIsTarget(t,fit.REPETITION_MANDATORY,e,r)||super.walkOption(t,e,r)}walkAtLeastOneSep(t,e,r){this.checkIsTarget(t,fit.REPETITION_MANDATORY_WITH_SEPARATOR,e,r)||super.walkOption(t,e,r)}walkMany(t,e,r){this.checkIsTarget(t,fit.REPETITION,e,r)||super.walkOption(t,e,r)}walkManySep(t,e,r){this.checkIsTarget(t,fit.REPETITION_WITH_SEPARATOR,e,r)||super.walkOption(t,e,r)}},yit=class extends Stt{static{g(this,"InsideDefinitionFinderVisitor")}constructor(t,e,r){super(),this.targetOccurrence=t,this.targetProdType=e,this.targetRef=r,this.result=[]}checkIsTarget(t,e){t.idx===this.targetOccurrence&&this.targetProdType===e&&(void 0===this.targetRef||t===this.targetRef)&&(this.result=t.definition)}visitOption(t){this.checkIsTarget(t,fit.OPTION)}visitRepetition(t){this.checkIsTarget(t,fit.REPETITION)}visitRepetitionMandatory(t){this.checkIsTarget(t,fit.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(t){this.checkIsTarget(t,fit.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(t){this.checkIsTarget(t,fit.REPETITION_WITH_SEPARATOR)}visitAlternation(t){this.checkIsTarget(t,fit.ALTERNATION)}},g(ait,"initializeArrayOfArrays"),g(sit,"pathToHashKeys"),g(oit,"isUniquePrefixHash"),g(lit,"lookAheadSequenceFromAlternatives"),g(cit,"getLookaheadPathsForOr"),g(hit,"getLookaheadPathsForOptionalProd"),g(uit,"containsPath"),g(dit,"isStrictPrefixOfPath"),g(pit,"areTokenCategoriesNotUsed")}));function xit(t){let e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return kQ(e,(t=>Object.assign({type:oat.CUSTOM_LOOKAHEAD_VALIDATION},t)))}function bit(t,e,r,i){let n=wQ(t,(t=>kit(t,r))),a=Nit(t,e,r),s=wQ(t,(t=>$it(t,r))),o=wQ(t,(e=>wit(e,t,i,r)));return n.concat(a,s,o)}function kit(t,e){let r=new Dit;t.accept(r);let i=r.allProductions,n=NQ(i,vit),a=nJ(n,(t=>t.length>1));return kQ(eZ(a),(r=>{let i=pQ(r),n=e.buildDuplicateFoundError(t,r),a=Rtt(i),s={message:n,type:oat.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:a,occurrence:i.idx},o=Tit(i);return o&&(s.parameter=o),s}))}function vit(t){return`${Rtt(t)}_#_${t.idx}_#_${Tit(t)}`}function Tit(t){return t instanceof _tt?t.terminalType.name:t instanceof gtt?t.nonTerminalName:""}function wit(t,e,r,i){let n=[];if(o1(e,((e,r)=>r.name===t.name?e+1:e),0)>1){let e=i.buildDuplicateRuleNameError({topLevelRule:t,grammarName:r});n.push({message:e,type:oat.DUPLICATE_RULE_NAME,ruleName:t.name})}return n}function _it(t,e,r){let i,n=[];return aZ(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,n.push({message:i,type:oat.INVALID_RULE_OVERRIDE,ruleName:t})),n}function Sit(t,e,r,i=[]){let n=[],a=Cit(e.definition);if(yZ(a))return[];{let e=t.name;aZ(a,t)&&n.push({message:r.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:i}),type:oat.LEFT_RECURSION,ruleName:e});let s=TK(a,i.concat([t])),o=wQ(s,(e=>{let n=MH(i);return n.push(e),Sit(t,e,r,n)}));return n.concat(o)}}function Cit(t){let e=[];if(yZ(t))return e;let r=pQ(t);if(r instanceof gtt)e.push(r.referencedRule);else if(r instanceof mtt||r instanceof xtt||r instanceof btt||r instanceof ktt||r instanceof Ttt||r instanceof vtt)e=e.concat(Cit(r.definition));else if(r instanceof wtt)e=iY(kQ(r.definition,(t=>Cit(t.definition))));else if(!(r instanceof _tt))throw Error("non exhaustive match");let i=$tt(r),n=t.length>1;if(i&&n){let r=$K(t);return e.concat(Cit(r))}return e}function Eit(t,e){let r=new Mit;t.accept(r);let i=r.alternations;return wQ(i,(r=>{let i=IK(r.definition);return wQ(i,((i,n)=>{let a=Wrt([i],[],Ket,1);return yZ(a)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:r,emptyChoiceIdx:n}),type:oat.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:r.idx,alternative:n+1}]:[]}))}))}function Ait(t,e,r){let i=new Mit;t.accept(i);let n=i.alternations;return n=h1(n,(t=>!0===t.ignoreAmbiguities)),wQ(n,(i=>{let n=i.idx,a=i.maxLookahead||e,s=cit(n,t,a,i),o=Rit(s,i,t,r),l=Iit(s,i,t,r);return o.concat(l)}))}function $it(t,e){let r=new Mit;t.accept(r);let i=r.alternations;return wQ(i,(r=>r.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:r}),type:oat.TOO_MANY_ALTS,ruleName:t.name,occurrence:r.idx}]:[]))}function Lit(t,e,r){let i=[];return BK(t,(t=>{let n=new Oit;t.accept(n);let a=n.allProductions;BK(a,(n=>{let a=Jrt(n),s=n.maxLookahead||e,o=hit(n.idx,t,a,s)[0];if(yZ(iY(o))){let e=r.buildEmptyRepetitionError({topLevelRule:t,repetition:n});i.push({message:e,type:oat.NO_NON_EMPTY_LOOKAHEAD,ruleName:t.name})}}))})),i}function Rit(t,e,r,i){let n=[],a=o1(t,((r,i,a)=>(!0===e.definition[a].ignoreAmbiguities||BK(i,(i=>{let s=[a];BK(t,((t,r)=>{a!==r&&uit(t,i)&&!0!==e.definition[r].ignoreAmbiguities&&s.push(r)})),s.length>1&&!uit(n,i)&&(n.push(i),r.push({alts:s,path:i}))})),r)),[]);return kQ(a,(t=>{let n=kQ(t.alts,(t=>t+1));return{message:i.buildAlternationAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:n,prefixPath:t.path}),type:oat.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:e.idx,alternatives:t.alts}}))}function Iit(t,e,r,i){let n=o1(t,((t,e,r)=>{let i=kQ(e,(t=>({idx:r,path:t})));return t.concat(i)}),[]);return WH(wQ(n,(t=>{if(!0===e.definition[t.idx].ignoreAmbiguities)return[];let a=t.idx,s=t.path,o=tQ(n,(t=>!0!==e.definition[t.idx].ignoreAmbiguities&&t.idx<a&&dit(t.path,s)));return kQ(o,(t=>{let n=[t.idx+1,a+1],s=0===e.idx?"":e.idx;return{message:i.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:n,prefixPath:t.path}),type:oat.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:s,alternatives:n}}))})))}function Nit(t,e,r){let i=[],n=kQ(e,(t=>t.name));return BK(t,(t=>{let e=t.name;if(aZ(n,e)){let n=r.buildNamespaceConflictError(t);i.push({message:n,type:oat.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:e})}})),i}var Dit,Mit,Oit,Pit=y((()=>{J1(),hat(),Ntt(),mit(),Zrt(),grt(),g(xit,"validateLookahead"),g(bit,"validateGrammar"),g(kit,"validateDuplicateProductions"),g(vit,"identifyProductionForDuplicates"),g(Tit,"getExtraProductionArgument"),Dit=class extends Stt{static{g(this,"OccurrenceValidationCollector")}constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(t){this.allProductions.push(t)}visitOption(t){this.allProductions.push(t)}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}visitAlternation(t){this.allProductions.push(t)}visitTerminal(t){this.allProductions.push(t)}},g(wit,"validateRuleDoesNotAlreadyExist"),g(_it,"validateRuleIsOverridden"),g(Sit,"validateNoLeftRecursion"),g(Cit,"getFirstNoneTerminal"),Mit=class extends Stt{static{g(this,"OrCollector")}constructor(){super(...arguments),this.alternations=[]}visitAlternation(t){this.alternations.push(t)}},g(Eit,"validateEmptyOrAlternative"),g(Ait,"validateAmbiguousAlternationAlternatives"),Oit=class extends Stt{static{g(this,"RepetitionCollector")}constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}},g($it,"validateTooManyAlts"),g(Lit,"validateSomeNonEmptyLookaheadPath"),g(Rit,"checkAlternativesAmbiguities"),g(Iit,"checkPrefixAlternativesAmbiguities"),g(Nit,"checkTerminalAndNoneTerminalsNameSpace")}));function Bit(t){let e=uK(t,{errMsgProvider:Mrt}),r={};return BK(t.rules,(t=>{r[t.name]=t})),Frt(r,e.errMsgProvider)}function Fit(t){return bit((t=uK(t,{errMsgProvider:Ort})).rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}var zit=y((()=>{J1(),jrt(),Pit(),Brt(),g(Bit,"resolveGrammar"),g(Fit,"validateGrammar")}));function jit(t){return aZ(Git,t.name)}var Uit,Wit,qit,Yit,Git,Hit,Vit,Xit,Kit,Qit,Zit=y((()=>{J1(),Git=[Uit="MismatchedTokenException",Wit="NoViableAltException",qit="EarlyExitException",Yit="NotAllInputParsedException"],Object.freeze(Git),g(jit,"isRecognitionException"),Hit=class extends Error{static{g(this,"RecognitionException")}constructor(t,e){super(t),this.token=e,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Vit=class extends Hit{static{g(this,"MismatchedTokenException")}constructor(t,e,r){super(t,e),this.previousToken=r,this.name=Uit}},Xit=class extends Hit{static{g(this,"NoViableAltException")}constructor(t,e,r){super(t,e),this.previousToken=r,this.name=Wit}},Kit=class extends Hit{static{g(this,"NotAllInputParsedException")}constructor(t,e){super(t,e),this.name=Yit}},Qit=class extends Hit{static{g(this,"EarlyExitException")}constructor(t,e,r){super(t,e),this.previousToken=r,this.name=qit}}}));function Jit(t,e,r,i,n,a,s){let o=this.getKeyForAutomaticLookahead(i,n),l=this.firstAfterRepMap[o];if(void 0===l){let t=this.getCurrRuleFullName();l=new a(this.getGAstProductions()[t],n).startWalking(),this.firstAfterRepMap[o]=l}let c=l.token,h=l.occurrence,u=l.isEndOfRule;1===this.RULE_STACK.length&&u&&void 0===c&&(c=Nrt,h=1),void 0!==c&&void 0!==h&&this.shouldInRepetitionRecoveryBeTried(c,h,s)&&this.tryInRepetitionRecovery(t,e,r,c)}var tnt,ent,rnt,int,nnt=y((()=>{Prt(),J1(),Zit(),Wtt(),hat(),tnt={},ent="InRuleRecoveryException",rnt=class extends Error{static{g(this,"InRuleRecoveryException")}constructor(t){super(t),this.name=ent}},int=class{static{g(this,"Recoverable")}initRecoverable(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=YQ(t,"recoveryEnabled")?t.recoveryEnabled:aat.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Jit)}getTokenToInsert(t){let e=Trt(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return e.isInsertedInRecovery=!0,e}canTokenTypeBeInsertedInRecovery(t){return!0}canTokenTypeBeDeletedInRecovery(t){return!0}tryInRepetitionRecovery(t,e,r,i){let n=this.findReSyncTokenType(),a=this.exportLexerState(),s=[],o=!1,l=this.LA(1),c=this.LA(1),h=g((()=>{let t=this.LA(0),e=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:l,previous:t,ruleName:this.getCurrRuleFullName()}),r=new Vit(e,l,this.LA(0));r.resyncedTokens=IK(s),this.SAVE_ERROR(r)}),"generateErrorMessage");for(;!o;){if(this.tokenMatcher(c,i))return void h();if(r.call(this))return h(),void t.apply(this,e);this.tokenMatcher(c,n)?o=!0:(c=this.SKIP_TOKEN(),this.addToResyncTokens(c,s))}this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(t,e,r){return!(!1===r||this.tokenMatcher(this.LA(1),t)||this.isBackTracking()||this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e)))}getFollowsForInRuleRecovery(t,e){let r=this.getCurrentGrammarPath(t,e);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){let t=this.SKIP_TOKEN();return this.consumeToken(),t}throw new rnt("sad sad panda")}canPerformInRuleRecovery(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)}canRecoverWithSingleTokenInsertion(t,e){if(!this.canTokenTypeBeInsertedInRecovery(t)||yZ(e))return!1;let r=this.LA(1);return void 0!==cQ(e,(t=>this.tokenMatcher(r,t)))}canRecoverWithSingleTokenDeletion(t){return!!this.canTokenTypeBeDeletedInRecovery(t)&&this.tokenMatcher(this.LA(2),t)}isInCurrentRuleReSyncSet(t){let e=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(e);return aZ(r,t)}findReSyncTokenType(){let t=this.flattenFollowSet(),e=this.LA(1),r=2;for(;;){let i=cQ(t,(t=>wrt(e,t)));if(void 0!==i)return i;e=this.LA(r),r++}}getCurrFollowKey(){if(1===this.RULE_STACK.length)return tnt;let t=this.getLastExplicitRuleShortName(),e=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:e,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){let t=this.RULE_STACK,e=this.RULE_OCCURRENCE_STACK;return kQ(t,((r,i)=>0===i?tnt:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:e[i],inRule:this.shortRuleNameToFullName(t[i-1])}))}flattenFollowSet(){let t=kQ(this.buildFullFollowKeyStack(),(t=>this.getFollowSetFromFollowKey(t)));return iY(t)}getFollowSetFromFollowKey(t){if(t===tnt)return[Nrt];let e=t.ruleName+t.idxInCallingRule+jtt+t.inRule;return this.resyncFollows[e]}addToResyncTokens(t,e){return this.tokenMatcher(t,Nrt)||e.push(t),e}reSyncTo(t){let e=[],r=this.LA(1);for(;!1===this.tokenMatcher(r,t);)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,e);return IK(e)}attemptInRepetitionRecovery(t,e,r,i,n,a,s){}getCurrentGrammarPath(t,e){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:MH(this.RULE_OCCURRENCE_STACK),lastTok:t,lastTokOccurrence:e}}getHumanReadableRuleStack(){return kQ(this.RULE_STACK,(t=>this.shortRuleNameToFullName(t)))}},g(Jit,"attemptInRepetitionRecovery")}));function ant(t,e,r){return r|e|t}var snt,ont=y((()=>{g(ant,"getKeyForAutomaticLookahead")})),lnt=y((()=>{J1(),Brt(),hat(),Pit(),mit(),snt=class{static{g(this,"LLkLookaheadStrategy")}constructor(t){var e;this.maxLookahead=null!==(e=t?.maxLookahead)&&void 0!==e?e:aat.maxLookahead}validate(t){let e=this.validateNoLeftRecursion(t.rules);if(yZ(e)){let r=this.validateEmptyOrAlternatives(t.rules),i=this.validateAmbiguousAlternationAlternatives(t.rules,this.maxLookahead),n=this.validateSomeNonEmptyLookaheadPath(t.rules,this.maxLookahead);return[...e,...r,...i,...n]}return e}validateNoLeftRecursion(t){return wQ(t,(t=>Sit(t,t,Ort)))}validateEmptyOrAlternatives(t){return wQ(t,(t=>Eit(t,Ort)))}validateAmbiguousAlternationAlternatives(t,e){return wQ(t,(t=>Ait(t,e,Ort)))}validateSomeNonEmptyLookaheadPath(t,e){return Lit(t,e,Ort)}buildLookaheadForAlternation(t){return eit(t.prodOccurrence,t.rule,t.maxLookahead,t.hasPredicates,t.dynamicTokensEnabled,iit)}buildLookaheadForOptional(t){return rit(t.prodOccurrence,t.rule,t.maxLookahead,t.dynamicTokensEnabled,Jrt(t.prodType),nit)}}}));function cnt(t){dnt.reset(),t.accept(dnt);let e=dnt.dslMethods;return dnt.reset(),e}var hnt,unt,dnt,pnt=y((()=>{J1(),hat(),ont(),Ntt(),lnt(),hnt=class{static{g(this,"LooksAhead")}initLooksAhead(t){this.dynamicTokensEnabled=YQ(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:aat.dynamicTokensEnabled,this.maxLookahead=YQ(t,"maxLookahead")?t.maxLookahead:aat.maxLookahead,this.lookaheadStrategy=YQ(t,"lookaheadStrategy")?t.lookaheadStrategy:new snt({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(t){BK(t,(t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,(()=>{let{alternation:e,repetition:r,option:i,repetitionMandatory:n,repetitionMandatoryWithSeparator:a,repetitionWithSeparator:s}=cnt(t);BK(e,(e=>{let r=0===e.idx?"":e.idx;this.TRACE_INIT(`${Rtt(e)}${r}`,(()=>{let r=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:e.idx,rule:t,maxLookahead:e.maxLookahead||this.maxLookahead,hasPredicates:e.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),i=ant(this.fullRuleNameToShort[t.name],256,e.idx);this.setLaFuncCache(i,r)}))})),BK(r,(e=>{this.computeLookaheadFunc(t,e.idx,768,"Repetition",e.maxLookahead,Rtt(e))})),BK(i,(e=>{this.computeLookaheadFunc(t,e.idx,512,"Option",e.maxLookahead,Rtt(e))})),BK(n,(e=>{this.computeLookaheadFunc(t,e.idx,1024,"RepetitionMandatory",e.maxLookahead,Rtt(e))})),BK(a,(e=>{this.computeLookaheadFunc(t,e.idx,1536,"RepetitionMandatoryWithSeparator",e.maxLookahead,Rtt(e))})),BK(s,(e=>{this.computeLookaheadFunc(t,e.idx,1280,"RepetitionWithSeparator",e.maxLookahead,Rtt(e))}))}))}))}computeLookaheadFunc(t,e,r,i,n,a){this.TRACE_INIT(`${a}${0===e?"":e}`,(()=>{let a=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:e,rule:t,maxLookahead:n||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),s=ant(this.fullRuleNameToShort[t.name],r,e);this.setLaFuncCache(s,a)}))}getKeyForAutomaticLookahead(t,e){return ant(this.getLastExplicitRuleShortName(),t,e)}getLaFuncFromCache(t){return this.lookAheadFuncsCache.get(t)}setLaFuncCache(t,e){this.lookAheadFuncsCache.set(t,e)}},unt=class extends Stt{static{g(this,"DslMethodsCollectorVisitor")}constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(t){this.dslMethods.option.push(t)}visitRepetitionWithSeparator(t){this.dslMethods.repetitionWithSeparator.push(t)}visitRepetitionMandatory(t){this.dslMethods.repetitionMandatory.push(t)}visitRepetitionMandatoryWithSeparator(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)}visitRepetition(t){this.dslMethods.repetition.push(t)}visitAlternation(t){this.dslMethods.alternation.push(t)}},dnt=new unt,g(cnt,"collectMethods")}));function fnt(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function gnt(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function ynt(t,e,r){void 0===t.children[r]?t.children[r]=[e]:t.children[r].push(e)}function mnt(t,e,r){void 0===t.children[e]?t.children[e]=[r]:t.children[e].push(r)}var xnt=y((()=>{g(fnt,"setNodeLocationOnlyOffset"),g(gnt,"setNodeLocationFull"),g(ynt,"addTerminalToCst"),g(mnt,"addNoneTerminalToCst")}));function bnt(t,e){Object.defineProperty(t,knt,{enumerable:!1,configurable:!0,writable:!1,value:e})}var knt,vnt=y((()=>{knt="name",g(bnt,"defineNameProp")}));function Tnt(t,e){let r=cq(t),i=r.length;for(let n=0;n<i;n++){let i=t[r[n]],a=i.length;for(let t=0;t<a;t++){let r=i[t];void 0===r.tokenTypeIdx&&this[r.name](r.children,e)}}}function wnt(t,e){let r=g((function(){}),"derivedConstructor");bnt(r,t+"BaseSemantics");let i={visit:g((function(t,e){if(dE(t)&&(t=t[0]),!EZ(t))return this[t.name](t.children,e)}),"visit"),validateVisitor:g((function(){let t=Snt(this,e);if(!yZ(t)){let e=kQ(t,(t=>t.msg));throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:\n\t${e.join("\n\n").replace(/\n/g,"\n\t")}`)}}),"validateVisitor")};return r.prototype=i,r.prototype.constructor=r,r._RULE_NAMES=e,r}function _nt(t,e,r){let i=g((function(){}),"derivedConstructor");bnt(i,t+"BaseSemanticsWithDefaults");let n=Object.create(r.prototype);return BK(e,(t=>{n[t]=Tnt})),i.prototype=n,i.prototype.constructor=i,i}function Snt(t,e){return Cnt(t,e)}function Cnt(t,e){let r=tQ(e,(e=>!1===Rw(t[e]))),i=kQ(r,(e=>({msg:`Missing visitor method: <${e}> on ${t.constructor.name} CST Visitor.`,type:Ent.MISSING_METHOD,methodName:e})));return WH(i)}var Ent,Ant,$nt,Lnt,Rnt,Int,Nnt,Dnt=y((()=>{var t;J1(),vnt(),g(Tnt,"defaultVisit"),g(wnt,"createBaseSemanticVisitorConstructor"),g(_nt,"createBaseVisitorConstructorWithDefaults"),(t=Ent||(Ent={}))[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD",g(Snt,"validateVisitor"),g(Cnt,"validateMissingCstMethods")})),Mnt=y((()=>{xnt(),J1(),Dnt(),hat(),Ant=class{static{g(this,"TreeBuilder")}initTreeBuilder(t){if(this.CST_STACK=[],this.outputCst=t.outputCst,this.nodeLocationTracking=YQ(t,"nodeLocationTracking")?t.nodeLocationTracking:aat.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=gnt,this.setNodeLocationFromNode=gnt,this.cstPostRule=DW,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=DW,this.setNodeLocationFromNode=DW,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=fnt,this.setNodeLocationFromNode=fnt,this.cstPostRule=DW,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=DW,this.setNodeLocationFromNode=DW,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error(`Invalid <nodeLocationTracking> config option: "${t.nodeLocationTracking}"`);this.setNodeLocationFromToken=DW,this.setNodeLocationFromNode=DW,this.cstPostRule=DW,this.setInitialNodeLocation=DW}else this.cstInvocationStateUpdate=DW,this.cstFinallyStateUpdate=DW,this.cstPostTerminal=DW,this.cstPostNonTerminal=DW,this.cstPostRule=DW}setInitialNodeLocationOnlyOffsetRecovery(t){t.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(t){let e=this.LA(1);t.location={startOffset:e.startOffset,startLine:e.startLine,startColumn:e.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(t){let e={name:t,children:Object.create(null)};this.setInitialNodeLocation(e),this.CST_STACK.push(e)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(t){let e=this.LA(0),r=t.location;r.startOffset<=e.startOffset?(r.endOffset=e.endOffset,r.endLine=e.endLine,r.endColumn=e.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(t){let e=this.LA(0),r=t.location;r.startOffset<=e.startOffset?r.endOffset=e.endOffset:r.startOffset=NaN}cstPostTerminal(t,e){let r=this.CST_STACK[this.CST_STACK.length-1];ynt(r,e,t),this.setNodeLocationFromToken(r.location,e)}cstPostNonTerminal(t,e){let r=this.CST_STACK[this.CST_STACK.length-1];mnt(r,e,t),this.setNodeLocationFromNode(r.location,t.location)}getBaseCstVisitorConstructor(){if(EZ(this.baseCstVisitorConstructor)){let t=wnt(this.className,cq(this.gastProductionsCache));return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(EZ(this.baseCstVisitorWithDefaultsConstructor)){let t=_nt(this.className,cq(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let t=this.RULE_STACK;return t[t.length-1]}getPreviousExplicitRuleShortName(){let t=this.RULE_STACK;return t[t.length-2]}getLastExplicitRuleOccurrenceIndex(){let t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]}}})),Ont=y((()=>{hat(),$nt=class{static{g(this,"LexerAdapter")}initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(t){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):nat}LA(t){let e=this.currIdx+t;return e<0||this.tokVectorLength<=e?nat:this.tokVector[e]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(t){this.currIdx=t}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}})),Pnt=y((()=>{J1(),Zit(),hat(),Brt(),Pit(),Ntt(),Lnt=class{static{g(this,"RecognizerApi")}ACTION(t){return t.call(this)}consume(t,e,r){return this.consumeInternal(e,t,r)}subrule(t,e,r){return this.subruleInternal(e,t,r)}option(t,e){return this.optionInternal(e,t)}or(t,e){return this.orInternal(e,t)}many(t,e){return this.manyInternal(t,e)}atLeastOne(t,e){return this.atLeastOneInternal(t,e)}CONSUME(t,e){return this.consumeInternal(t,0,e)}CONSUME1(t,e){return this.consumeInternal(t,1,e)}CONSUME2(t,e){return this.consumeInternal(t,2,e)}CONSUME3(t,e){return this.consumeInternal(t,3,e)}CONSUME4(t,e){return this.consumeInternal(t,4,e)}CONSUME5(t,e){return this.consumeInternal(t,5,e)}CONSUME6(t,e){return this.consumeInternal(t,6,e)}CONSUME7(t,e){return this.consumeInternal(t,7,e)}CONSUME8(t,e){return this.consumeInternal(t,8,e)}CONSUME9(t,e){return this.consumeInternal(t,9,e)}SUBRULE(t,e){return this.subruleInternal(t,0,e)}SUBRULE1(t,e){return this.subruleInternal(t,1,e)}SUBRULE2(t,e){return this.subruleInternal(t,2,e)}SUBRULE3(t,e){return this.subruleInternal(t,3,e)}SUBRULE4(t,e){return this.subruleInternal(t,4,e)}SUBRULE5(t,e){return this.subruleInternal(t,5,e)}SUBRULE6(t,e){return this.subruleInternal(t,6,e)}SUBRULE7(t,e){return this.subruleInternal(t,7,e)}SUBRULE8(t,e){return this.subruleInternal(t,8,e)}SUBRULE9(t,e){return this.subruleInternal(t,9,e)}OPTION(t){return this.optionInternal(t,0)}OPTION1(t){return this.optionInternal(t,1)}OPTION2(t){return this.optionInternal(t,2)}OPTION3(t){return this.optionInternal(t,3)}OPTION4(t){return this.optionInternal(t,4)}OPTION5(t){return this.optionInternal(t,5)}OPTION6(t){return this.optionInternal(t,6)}OPTION7(t){return this.optionInternal(t,7)}OPTION8(t){return this.optionInternal(t,8)}OPTION9(t){return this.optionInternal(t,9)}OR(t){return this.orInternal(t,0)}OR1(t){return this.orInternal(t,1)}OR2(t){return this.orInternal(t,2)}OR3(t){return this.orInternal(t,3)}OR4(t){return this.orInternal(t,4)}OR5(t){return this.orInternal(t,5)}OR6(t){return this.orInternal(t,6)}OR7(t){return this.orInternal(t,7)}OR8(t){return this.orInternal(t,8)}OR9(t){return this.orInternal(t,9)}MANY(t){this.manyInternal(0,t)}MANY1(t){this.manyInternal(1,t)}MANY2(t){this.manyInternal(2,t)}MANY3(t){this.manyInternal(3,t)}MANY4(t){this.manyInternal(4,t)}MANY5(t){this.manyInternal(5,t)}MANY6(t){this.manyInternal(6,t)}MANY7(t){this.manyInternal(7,t)}MANY8(t){this.manyInternal(8,t)}MANY9(t){this.manyInternal(9,t)}MANY_SEP(t){this.manySepFirstInternal(0,t)}MANY_SEP1(t){this.manySepFirstInternal(1,t)}MANY_SEP2(t){this.manySepFirstInternal(2,t)}MANY_SEP3(t){this.manySepFirstInternal(3,t)}MANY_SEP4(t){this.manySepFirstInternal(4,t)}MANY_SEP5(t){this.manySepFirstInternal(5,t)}MANY_SEP6(t){this.manySepFirstInternal(6,t)}MANY_SEP7(t){this.manySepFirstInternal(7,t)}MANY_SEP8(t){this.manySepFirstInternal(8,t)}MANY_SEP9(t){this.manySepFirstInternal(9,t)}AT_LEAST_ONE(t){this.atLeastOneInternal(0,t)}AT_LEAST_ONE1(t){return this.atLeastOneInternal(1,t)}AT_LEAST_ONE2(t){this.atLeastOneInternal(2,t)}AT_LEAST_ONE3(t){this.atLeastOneInternal(3,t)}AT_LEAST_ONE4(t){this.atLeastOneInternal(4,t)}AT_LEAST_ONE5(t){this.atLeastOneInternal(5,t)}AT_LEAST_ONE6(t){this.atLeastOneInternal(6,t)}AT_LEAST_ONE7(t){this.atLeastOneInternal(7,t)}AT_LEAST_ONE8(t){this.atLeastOneInternal(8,t)}AT_LEAST_ONE9(t){this.atLeastOneInternal(9,t)}AT_LEAST_ONE_SEP(t){this.atLeastOneSepFirstInternal(0,t)}AT_LEAST_ONE_SEP1(t){this.atLeastOneSepFirstInternal(1,t)}AT_LEAST_ONE_SEP2(t){this.atLeastOneSepFirstInternal(2,t)}AT_LEAST_ONE_SEP3(t){this.atLeastOneSepFirstInternal(3,t)}AT_LEAST_ONE_SEP4(t){this.atLeastOneSepFirstInternal(4,t)}AT_LEAST_ONE_SEP5(t){this.atLeastOneSepFirstInternal(5,t)}AT_LEAST_ONE_SEP6(t){this.atLeastOneSepFirstInternal(6,t)}AT_LEAST_ONE_SEP7(t){this.atLeastOneSepFirstInternal(7,t)}AT_LEAST_ONE_SEP8(t){this.atLeastOneSepFirstInternal(8,t)}AT_LEAST_ONE_SEP9(t){this.atLeastOneSepFirstInternal(9,t)}RULE(t,e,r=sat){if(aZ(this.definedRulesNames,t)){let e={message:Ort.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:oat.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(e)}this.definedRulesNames.push(t);let i=this.defineRule(t,e,r);return this[t]=i,i}OVERRIDE_RULE(t,e,r=sat){let i=_it(t,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);let n=this.defineRule(t,e,r);return this[t]=n,n}BACKTRACK(t,e){return function(){this.isBackTrackingStack.push(1);let r=this.saveRecogState();try{return t.apply(this,e),!0}catch(t){if(jit(t))return!1;throw t}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return dtt(eZ(this.gastProductionsCache))}}})),Bnt=y((()=>{J1(),ont(),Zit(),mit(),Zrt(),hat(),nnt(),Prt(),grt(),Rnt=class{static{g(this,"RecognizerEngine")}initRecognizerEngine(t,e){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Qet,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},YQ(e,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if(dE(t)){if(yZ(t))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof t[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if(dE(t))this.tokensMap=o1(t,((t,e)=>(t[e.name]=e,t)),{});else if(YQ(t,"modes")&&VK(iY(eZ(t.modes)),lrt)){let e=iY(eZ(t.modes)),r=B1(e);this.tokensMap=o1(r,((t,e)=>(t[e.name]=e,t)),{})}else{if(!_w(t))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=MH(t)}this.tokensMap.EOF=Nrt;let r=YQ(t,"modes")?iY(eZ(t.modes)):eZ(t),i=VK(r,(t=>yZ(t.categoryMatches)));this.tokenMatcher=i?Qet:Ket,Zet(eZ(this.tokensMap))}defineRule(t,e,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${t}> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let i,n=YQ(r,"resyncEnabled")?r.resyncEnabled:sat.resyncEnabled,a=YQ(r,"recoveryValueFunc")?r.recoveryValueFunc:sat.recoveryValueFunc,s=this.ruleShortNameIdx<<12;return this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=t,this.fullRuleNameToShort[t]=s,i=!0===this.outputCst?g((function(...r){try{this.ruleInvocationStateUpdate(s,t,this.subruleIdx),e.apply(this,r);let i=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(i),i}catch(t){return this.invokeRuleCatch(t,n,a)}finally{this.ruleFinallyStateUpdate()}}),"invokeRuleWithTry"):g((function(...r){try{return this.ruleInvocationStateUpdate(s,t,this.subruleIdx),e.apply(this,r)}catch(t){return this.invokeRuleCatch(t,n,a)}finally{this.ruleFinallyStateUpdate()}}),"invokeRuleWithTryCst"),Object.assign(i,{ruleName:t,originalGrammarAction:e})}invokeRuleCatch(t,e,r){let i=1===this.RULE_STACK.length,n=e&&!this.isBackTracking()&&this.recoveryEnabled;if(jit(t)){let e=t;if(n){let i=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(i)){if(e.resyncedTokens=this.reSyncTo(i),this.outputCst){let t=this.CST_STACK[this.CST_STACK.length-1];return t.recoveredNode=!0,t}return r(t)}if(this.outputCst){let t=this.CST_STACK[this.CST_STACK.length-1];t.recoveredNode=!0,e.partialCstResult=t}throw e}if(i)return this.moveToTerminatedState(),r(t);throw e}throw t}optionInternal(t,e){let r=this.getKeyForAutomaticLookahead(512,e);return this.optionInternalLogic(t,e,r)}optionInternalLogic(t,e,r){let i,n=this.getLaFuncFromCache(r);if("function"!=typeof t){i=t.DEF;let e=t.GATE;if(void 0!==e){let t=n;n=g((()=>e.call(this)&&t.call(this)),"lookAheadFunc")}}else i=t;if(!0===n.call(this))return i.call(this)}atLeastOneInternal(t,e){let r=this.getKeyForAutomaticLookahead(1024,t);return this.atLeastOneInternalLogic(t,e,r)}atLeastOneInternalLogic(t,e,r){let i,n=this.getLaFuncFromCache(r);if("function"!=typeof e){i=e.DEF;let t=e.GATE;if(void 0!==t){let e=n;n=g((()=>t.call(this)&&e.call(this)),"lookAheadFunc")}}else i=e;if(!0!==n.call(this))throw this.raiseEarlyExitException(t,fit.REPETITION_MANDATORY,e.ERR_MSG);{let t=this.doSingleRepetition(i);for(;!0===n.call(this)&&!0===t;)t=this.doSingleRepetition(i)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,e],n,1024,t,Krt)}atLeastOneSepFirstInternal(t,e){let r=this.getKeyForAutomaticLookahead(1536,t);this.atLeastOneSepFirstInternalLogic(t,e,r)}atLeastOneSepFirstInternalLogic(t,e,r){let i=e.DEF,n=e.SEP;if(!0!==this.getLaFuncFromCache(r).call(this))throw this.raiseEarlyExitException(t,fit.REPETITION_MANDATORY_WITH_SEPARATOR,e.ERR_MSG);{i.call(this);let e=g((()=>this.tokenMatcher(this.LA(1),n)),"separatorLookAheadFunc");for(;!0===this.tokenMatcher(this.LA(1),n);)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,n,e,i,Qrt],e,1536,t,Qrt)}}manyInternal(t,e){let r=this.getKeyForAutomaticLookahead(768,t);return this.manyInternalLogic(t,e,r)}manyInternalLogic(t,e,r){let i,n=this.getLaFuncFromCache(r);if("function"!=typeof e){i=e.DEF;let t=e.GATE;if(void 0!==t){let e=n;n=g((()=>t.call(this)&&e.call(this)),"lookaheadFunction")}}else i=e;let a=!0;for(;!0===n.call(this)&&!0===a;)a=this.doSingleRepetition(i);this.attemptInRepetitionRecovery(this.manyInternal,[t,e],n,768,t,Vrt,a)}manySepFirstInternal(t,e){let r=this.getKeyForAutomaticLookahead(1280,t);this.manySepFirstInternalLogic(t,e,r)}manySepFirstInternalLogic(t,e,r){let i=e.DEF,n=e.SEP;if(!0===this.getLaFuncFromCache(r).call(this)){i.call(this);let e=g((()=>this.tokenMatcher(this.LA(1),n)),"separatorLookAheadFunc");for(;!0===this.tokenMatcher(this.LA(1),n);)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,n,e,i,Xrt],e,1280,t,Xrt)}}repetitionSepSecondInternal(t,e,r,i,n){for(;r();)this.CONSUME(e),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,r,i,n],r,1536,t,n)}doSingleRepetition(t){let e=this.getLexerPosition();return t.call(this),this.getLexerPosition()>e}orInternal(t,e){let r=this.getKeyForAutomaticLookahead(256,e),i=dE(t)?t:t.DEF,n=this.getLaFuncFromCache(r).call(this,i);if(void 0!==n)return i[n].ALT.call(this);this.raiseNoAltException(e,t.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){let t=this.LA(1),e=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Kit(e,t))}}subruleInternal(t,e,r){let i;try{let n=void 0!==r?r.ARGS:void 0;return this.subruleIdx=e,i=t.apply(this,n),this.cstPostNonTerminal(i,void 0!==r&&void 0!==r.LABEL?r.LABEL:t.ruleName),i}catch(e){throw this.subruleInternalError(e,r,t.ruleName)}}subruleInternalError(t,e,r){throw jit(t)&&void 0!==t.partialCstResult&&(this.cstPostNonTerminal(t.partialCstResult,void 0!==e&&void 0!==e.LABEL?e.LABEL:r),delete t.partialCstResult),t}consumeInternal(t,e,r){let i;try{let e=this.LA(1);!0===this.tokenMatcher(e,t)?(this.consumeToken(),i=e):this.consumeInternalError(t,e,r)}catch(r){i=this.consumeInternalRecovery(t,e,r)}return this.cstPostTerminal(void 0!==r&&void 0!==r.LABEL?r.LABEL:t.name,i),i}consumeInternalError(t,e,r){let i,n=this.LA(0);throw i=void 0!==r&&r.ERR_MSG?r.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Vit(i,e,n))}consumeInternalRecovery(t,e,r){if(!this.recoveryEnabled||"MismatchedTokenException"!==r.name||this.isBackTracking())throw r;{let i=this.getFollowsForInRuleRecovery(t,e);try{return this.tryInRuleRecovery(t,i)}catch(t){throw t.name===ent?r:t}}}saveRecogState(){let t=this.errors,e=MH(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:e,CST_STACK:this.CST_STACK}}reloadRecogState(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK}ruleInvocationStateUpdate(t,e,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(e)}isBackTracking(){return 0!==this.isBackTrackingStack.length}getCurrRuleFullName(){let t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]}shortRuleNameToFullName(t){return this.shortRuleNameToFull[t]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Nrt)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}})),Fnt=y((()=>{Zit(),J1(),mit(),hat(),Int=class{static{g(this,"ErrorHandler")}initErrorHandler(t){this._errors=[],this.errorMessageProvider=YQ(t,"errorMessageProvider")?t.errorMessageProvider:aat.errorMessageProvider}SAVE_ERROR(t){if(jit(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:MH(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return MH(this._errors)}set errors(t){this._errors=t}raiseEarlyExitException(t,e,r){let i=this.getCurrRuleFullName(),n=hit(t,this.getGAstProductions()[i],e,this.maxLookahead)[0],a=[];for(let t=1;t<=this.maxLookahead;t++)a.push(this.LA(t));let s=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:n,actual:a,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new Qit(s,this.LA(1),this.LA(0)))}raiseNoAltException(t,e){let r=this.getCurrRuleFullName(),i=cit(t,this.getGAstProductions()[r],this.maxLookahead),n=[];for(let t=1;t<=this.maxLookahead;t++)n.push(this.LA(t));let a=this.LA(0),s=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:i,actual:n,previous:a,customUserDescription:e,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new Xit(s,this.LA(1),a))}}})),znt=y((()=>{Zrt(),J1(),Nnt=class{static{g(this,"ContentAssist")}initContentAssist(){}computeContentAssist(t,e){let r=this.gastProductionsCache[t];if(EZ(r))throw Error(`Rule ->${t}<- does not exist in this grammar.`);return Wrt([r],e,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(t){let e=pQ(t.ruleStack),r=this.getGAstProductions()[e];return new Grt(r,t).startWalking()}}}));function jnt(t,e,r,i=!1){qnt(r);let n=CK(this.recordingProdStack),a=Rw(e)?e:e.DEF,s=new t({definition:[],idx:r});return i&&(s.separator=e.SEP),YQ(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(s),a.call(this),n.definition.push(s),this.recordingProdStack.pop(),Ynt}function Unt(t,e){qnt(e);let r=CK(this.recordingProdStack),i=!1===dE(t),n=!1===i?t:t.DEF,a=new wtt({definition:[],idx:e,ignoreAmbiguities:i&&!0===t.IGNORE_AMBIGUITIES});YQ(t,"MAX_LOOKAHEAD")&&(a.maxLookahead=t.MAX_LOOKAHEAD);let s=v1(n,(t=>Rw(t.GATE)));return a.hasPredicates=s,r.definition.push(a),BK(n,(t=>{let e=new mtt({definition:[]});a.definition.push(e),YQ(t,"IGNORE_AMBIGUITIES")?e.ignoreAmbiguities=t.IGNORE_AMBIGUITIES:YQ(t,"GATE")&&(e.ignoreAmbiguities=!0),this.recordingProdStack.push(e),t.ALT.call(this),this.recordingProdStack.pop()})),Ynt}function Wnt(t){return 0===t?"":`${t}`}function qnt(t){if(t<0||t>Hnt){let e=new Error(`Invalid DSL Method idx value: <${t}>\n\tIdx value must be a none negative value smaller than ${Hnt+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}var Ynt,Gnt,Hnt,Vnt,Xnt,Knt,Qnt,Znt,Jnt=y((()=>{J1(),Ntt(),mrt(),grt(),Prt(),hat(),ont(),Ynt={description:"This Object indicates the Parser is during Recording Phase"},Object.freeze(Ynt),Gnt=!0,Hnt=Math.pow(2,8)-1,Zet([Vnt=krt({name:"RECORDING_PHASE_TOKEN",pattern:frt.NA})]),Xnt=Trt(Vnt,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1),Object.freeze(Xnt),Knt={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}},Qnt=class{static{g(this,"GastRecorder")}initGastRecorder(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(()=>{for(let t=0;t<10;t++){let e=t>0?t:"";this[`CONSUME${e}`]=function(e,r){return this.consumeInternalRecord(e,t,r)},this[`SUBRULE${e}`]=function(e,r){return this.subruleInternalRecord(e,t,r)},this[`OPTION${e}`]=function(e){return this.optionInternalRecord(e,t)},this[`OR${e}`]=function(e){return this.orInternalRecord(e,t)},this[`MANY${e}`]=function(e){this.manyInternalRecord(t,e)},this[`MANY_SEP${e}`]=function(e){this.manySepFirstInternalRecord(t,e)},this[`AT_LEAST_ONE${e}`]=function(e){this.atLeastOneInternalRecord(t,e)},this[`AT_LEAST_ONE_SEP${e}`]=function(e){this.atLeastOneSepFirstInternalRecord(t,e)}}this.consume=function(t,e,r){return this.consumeInternalRecord(e,t,r)},this.subrule=function(t,e,r){return this.subruleInternalRecord(e,t,r)},this.option=function(t,e){return this.optionInternalRecord(e,t)},this.or=function(t,e){return this.orInternalRecord(e,t)},this.many=function(t,e){this.manyInternalRecord(t,e)},this.atLeastOne=function(t,e){this.atLeastOneInternalRecord(t,e)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD}))}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(()=>{let t=this;for(let e=0;e<10;e++){let r=e>0?e:"";delete t[`CONSUME${r}`],delete t[`SUBRULE${r}`],delete t[`OPTION${r}`],delete t[`OR${r}`],delete t[`MANY${r}`],delete t[`MANY_SEP${r}`],delete t[`AT_LEAST_ONE${r}`],delete t[`AT_LEAST_ONE_SEP${r}`]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA}))}ACTION_RECORD(t){}BACKTRACK_RECORD(t,e){return()=>!0}LA_RECORD(t){return nat}topLevelRuleRecord(t,e){try{let r=new ytt({definition:[],name:t});return r.name=t,this.recordingProdStack.push(r),e.call(this),this.recordingProdStack.pop(),r}catch(t){if(!0!==t.KNOWN_RECORDER_ERROR)try{t.message=t.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://chevrotain.io/docs/guide/internals.html#grammar-recording'}catch{throw t}throw t}}optionInternalRecord(t,e){return jnt.call(this,xtt,t,e)}atLeastOneInternalRecord(t,e){jnt.call(this,btt,e,t)}atLeastOneSepFirstInternalRecord(t,e){jnt.call(this,ktt,e,t,Gnt)}manyInternalRecord(t,e){jnt.call(this,vtt,e,t)}manySepFirstInternalRecord(t,e){jnt.call(this,Ttt,e,t,Gnt)}orInternalRecord(t,e){return Unt.call(this,t,e)}subruleInternalRecord(t,e,r){if(qnt(e),!t||!1===YQ(t,"ruleName")){let r=new Error(`<SUBRULE${Wnt(e)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(t)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw r.KNOWN_RECORDER_ERROR=!0,r}let i=CK(this.recordingProdStack),n=t.ruleName,a=new gtt({idx:e,nonTerminalName:n,label:r?.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?Knt:Ynt}consumeInternalRecord(t,e,r){if(qnt(e),!nrt(t)){let r=new Error(`<CONSUME${Wnt(e)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(t)}>\n inside top level rule: <${this.recordingProdStack[0].name}>`);throw r.KNOWN_RECORDER_ERROR=!0,r}let i=CK(this.recordingProdStack),n=new _tt({idx:e,terminalType:t,label:r?.LABEL});return i.definition.push(n),Xnt}},g(jnt,"recordProd"),g(Unt,"recordOrProd"),g(Wnt,"getIdxSuffix"),g(qnt,"assertMethodIdxIsValid")})),tat=y((()=>{J1(),ctt(),hat(),Znt=class{static{g(this,"PerformanceTracer")}initPerformanceTracer(t){if(YQ(t,"traceInitPerf")){let e=t.traceInitPerf,r="number"==typeof e;this.traceInitMaxIdent=r?e:1/0,this.traceInitPerf=r?e>0:e}else this.traceInitMaxIdent=0,this.traceInitPerf=aat.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(t,e){if(!0===this.traceInitPerf){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${t}>`);let{time:i,value:n}=att(e),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${t}> time: ${i}ms`),this.traceInitIndent--,n}return e()}}}));function eat(t,e){e.forEach((e=>{let r=e.prototype;Object.getOwnPropertyNames(r).forEach((i=>{if("constructor"===i)return;let n=Object.getOwnPropertyDescriptor(r,i);n&&(n.get||n.set)?Object.defineProperty(t.prototype,i,n):t.prototype[i]=e.prototype[i]}))}))}var rat=y((()=>{g(eat,"applyMixins")}));function iat(t=void 0){return function(){return t}}var nat,aat,sat,oat,lat,cat,hat=y((()=>{var t;J1(),ctt(),Htt(),Prt(),Brt(),zit(),nnt(),pnt(),Mnt(),Ont(),Pnt(),Bnt(),Fnt(),znt(),Jnt(),tat(),rat(),Pit(),nat=Trt(Nrt,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(nat),aat=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Drt,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),sat=Object.freeze({recoveryValueFunc:g((()=>{}),"recoveryValueFunc"),resyncEnabled:!0}),(t=oat||(oat={}))[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION",g(iat,"EMPTY_ALT"),lat=class t{static{g(this,"Parser")}static performSelfAnalysis(t){throw Error("The **static** `performSelfAnalysis` method has been deprecated.\t\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",(()=>{let e;this.selfAnalysisDone=!0;let r=this.className;this.TRACE_INIT("toFastProps",(()=>{ott(this)})),this.TRACE_INIT("Grammar Recording",(()=>{try{this.enableRecording(),BK(this.definedRulesNames,(t=>{let e,r=this[t].originalGrammarAction;this.TRACE_INIT(`${t} Rule`,(()=>{e=this.topLevelRuleRecord(t,r)})),this.gastProductionsCache[t]=e}))}finally{this.disableRecording()}}));let i=[];if(this.TRACE_INIT("Grammar Resolving",(()=>{i=Bit({rules:eZ(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(i)})),this.TRACE_INIT("Grammar Validations",(()=>{if(yZ(i)&&!1===this.skipValidations){let t=Fit({rules:eZ(this.gastProductionsCache),tokenTypes:eZ(this.tokensMap),errMsgProvider:Ort,grammarName:r}),e=xit({lookaheadStrategy:this.lookaheadStrategy,rules:eZ(this.gastProductionsCache),tokenTypes:eZ(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(t,e)}})),yZ(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",(()=>{let t=qtt(eZ(this.gastProductionsCache));this.resyncFollows=t})),this.TRACE_INIT("ComputeLookaheadFunctions",(()=>{var t,e;null===(e=(t=this.lookaheadStrategy).initialize)||void 0===e||e.call(t,{rules:eZ(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(eZ(this.gastProductionsCache))}))),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!yZ(this.definitionErrors))throw e=kQ(this.definitionErrors,(t=>t.message)),new Error(`Parser Definition Errors detected:\n ${e.join("\n-------------------------------\n")}`)}))}constructor(t,e){this.definitionErrors=[],this.selfAnalysisDone=!1;let r=this;if(r.initErrorHandler(e),r.initLexerAdapter(),r.initLooksAhead(e),r.initRecognizerEngine(t,e),r.initRecoverable(e),r.initTreeBuilder(e),r.initContentAssist(),r.initGastRecorder(e),r.initPerformanceTracer(e),YQ(e,"ignoredIssues"))throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\tSee: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\tFor further details.");this.skipValidations=YQ(e,"skipValidations")?e.skipValidations:aat.skipValidations}},lat.DEFER_DEFINITION_ERRORS_HANDLING=!1,eat(lat,[int,hnt,Ant,$nt,Rnt,Lnt,Int,Nnt,Qnt,Znt]),cat=class extends lat{static{g(this,"EmbeddedActionsParser")}constructor(t,e=aat){let r=MH(e);r.outputCst=!1,super(t,r)}}})),uat=y((()=>{Ntt()})),dat=y((()=>{})),pat=y((()=>{uat(),dat()})),fat=y((()=>{ett()})),gat=y((()=>{ett(),hat(),mrt(),Prt(),mit(),lnt(),Brt(),Zit(),yrt(),Ntt(),Ntt(),pat(),fat()}));function yat(t,e,r){return`${t.name}_${e}_${r}`}function mat(t){let e={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};xat(e,t);let r=t.length;for(let i=0;i<r;i++){let r=t[i],n=Cat(e,r,r);void 0!==n&&Oat(e,r,n)}return e}function xat(t,e){let r=e.length;for(let i=0;i<r;i++){let r=e[i],n=Bat(t,r,void 0,{type:Uat}),a=Bat(t,r,void 0,{type:Yat});n.stop=a,t.ruleToStartState.set(r,n),t.ruleToStopState.set(r,a)}}function bat(t,e,r){return r instanceof _tt?Dat(t,e,r.terminalType,r):r instanceof gtt?Mat(t,e,r):r instanceof wtt?_at(t,e,r):r instanceof xtt?Sat(t,e,r):r instanceof vtt?kat(t,e,r):r instanceof Ttt?vat(t,e,r):r instanceof btt?Tat(t,e,r):r instanceof ktt?wat(t,e,r):Cat(t,e,r)}function kat(t,e,r){let i=Bat(t,e,r,{type:qat});return Lat(t,i),Aat(t,e,r,Rat(t,e,i,r,Cat(t,e,r)))}function vat(t,e,r){let i=Bat(t,e,r,{type:qat});return Lat(t,i),Aat(t,e,r,Rat(t,e,i,r,Cat(t,e,r)),Dat(t,e,r.separator,r))}function Tat(t,e,r){let i=Bat(t,e,r,{type:Wat});return Lat(t,i),Eat(t,e,r,Rat(t,e,i,r,Cat(t,e,r)))}function wat(t,e,r){let i=Bat(t,e,r,{type:Wat});return Lat(t,i),Eat(t,e,r,Rat(t,e,i,r,Cat(t,e,r)),Dat(t,e,r.separator,r))}function _at(t,e,r){let i=Bat(t,e,r,{type:jat});Lat(t,i);let n=kQ(r.definition,(r=>bat(t,e,r)));return Rat(t,e,i,r,...n)}function Sat(t,e,r){let i=Bat(t,e,r,{type:jat});return Lat(t,i),$at(t,e,r,Rat(t,e,i,r,Cat(t,e,r)))}function Cat(t,e,r){let i=tQ(kQ(r.definition,(r=>bat(t,e,r))),(t=>void 0!==t));return 1===i.length?i[0]:0===i.length?void 0:Nat(t,i)}function Eat(t,e,r,i,n){let a=i.left,s=i.right,o=Bat(t,e,r,{type:Xat});Lat(t,o);let l=Bat(t,e,r,{type:Kat});return a.loopback=o,l.loopback=o,t.decisionMap[yat(e,n?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",r.idx)]=o,Pat(s,o),void 0===n?(Pat(o,a),Pat(o,l)):(Pat(o,l),Pat(o,n.left),Pat(n.right,a)),{left:a,right:l}}function Aat(t,e,r,i,n){let a=i.left,s=i.right,o=Bat(t,e,r,{type:Vat});Lat(t,o);let l=Bat(t,e,r,{type:Kat}),c=Bat(t,e,r,{type:Hat});return o.loopback=c,l.loopback=c,Pat(o,a),Pat(o,l),Pat(s,c),void 0!==n?(Pat(c,l),Pat(c,n.left),Pat(n.right,a)):Pat(c,o),t.decisionMap[yat(e,n?"RepetitionWithSeparator":"Repetition",r.idx)]=o,{left:o,right:l}}function $at(t,e,r,i){let n=i.left;return Pat(n,i.right),t.decisionMap[yat(e,"Option",r.idx)]=n,i}function Lat(t,e){return t.decisionStates.push(e),e.decision=t.decisionStates.length-1,e.decision}function Rat(t,e,r,i,...n){let a=Bat(t,e,i,{type:Gat,start:r});r.end=a;for(let t of n)void 0!==t?(Pat(r,t.left),Pat(t.right,a)):Pat(r,a);let s={left:r,right:a};return t.decisionMap[yat(e,Iat(i),i.idx)]=r,s}function Iat(t){if(t instanceof wtt)return"Alternation";if(t instanceof xtt)return"Option";if(t instanceof vtt)return"Repetition";if(t instanceof Ttt)return"RepetitionWithSeparator";if(t instanceof btt)return"RepetitionMandatory";if(t instanceof ktt)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function Nat(t,e){let r=e.length;for(let i=0;i<r-1;i++){let r,n=e[i];1===n.left.transitions.length&&(r=n.left.transitions[0]);let a=r instanceof tst,s=r,o=e[i+1].left;n.left.type===jat&&n.right.type===jat&&void 0!==r&&(a&&s.followState===n.right||r.target===n.right)?(a?s.followState=o:r.target=o,zat(t,n.right)):Pat(n.right,o)}let i=e[0],n=e[r-1];return{left:i.left,right:n.right}}function Dat(t,e,r,i){let n=Bat(t,e,i,{type:jat}),a=Bat(t,e,i,{type:jat});return Fat(n,new Zat(a,r)),{left:n,right:a}}function Mat(t,e,r){let i=r.referencedRule,n=t.ruleToStartState.get(i),a=Bat(t,e,r,{type:jat}),s=Bat(t,e,r,{type:jat});return Fat(a,new tst(n,i,s)),{left:a,right:s}}function Oat(t,e,r){let i=t.ruleToStartState.get(e);Pat(i,r.left);let n=t.ruleToStopState.get(e);return Pat(r.right,n),{left:i,right:n}}function Pat(t,e){Fat(t,new Jat(e))}function Bat(t,e,r,i){let n=Object.assign({atn:t,production:r,epsilonOnlyTransitions:!1,rule:e,transitions:[],nextTokenWithinRule:[],stateNumber:t.states.length},i);return t.states.push(n),n}function Fat(t,e){0===t.transitions.length&&(t.epsilonOnlyTransitions=e.isEpsilon()),t.transitions.push(e)}function zat(t,e){t.states.splice(t.states.indexOf(e),1)}var jat,Uat,Wat,qat,Yat,Gat,Hat,Vat,Xat,Kat,Qat,Zat,Jat,tst,est=y((()=>{vQ(),eQ(),gat(),g(yat,"buildATNKey"),jat=1,Uat=2,Wat=4,qat=5,Yat=7,Gat=8,Hat=9,Vat=10,Xat=11,Kat=12,Qat=class{static{g(this,"AbstractTransition")}constructor(t){this.target=t}isEpsilon(){return!1}},Zat=class extends Qat{static{g(this,"AtomTransition")}constructor(t,e){super(t),this.tokenType=e}},Jat=class extends Qat{static{g(this,"EpsilonTransition")}constructor(t){super(t)}isEpsilon(){return!0}},tst=class extends Qat{static{g(this,"RuleTransition")}constructor(t,e,r){super(t),this.rule=e,this.followState=r}isEpsilon(){return!0}},g(mat,"createATN"),g(xat,"createRuleStartAndStopATNStates"),g(bat,"atom"),g(kat,"repetition"),g(vat,"repetitionSep"),g(Tat,"repetitionMandatory"),g(wat,"repetitionMandatorySep"),g(_at,"alternation"),g(Sat,"option"),g(Cat,"block"),g(Eat,"plus"),g(Aat,"star"),g($at,"optional"),g(Lat,"defineDecisionState"),g(Rat,"makeAlts"),g(Iat,"getProdType"),g(Nat,"makeBlock"),g(Dat,"tokenRef"),g(Mat,"ruleRef"),g(Oat,"buildRuleHandle"),g(Pat,"epsilon"),g(Bat,"newState"),g(Fat,"addTransition"),g(zat,"removeState")}));function rst(t,e=!0){return`${e?`a${t.alt}`:""}s${t.state.stateNumber}:${t.stack.map((t=>t.stateNumber.toString())).join("_")}`}var ist,nst,ast=y((()=>{vQ(),ist={},nst=class{static{g(this,"ATNConfigSet")}constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(t){let e=rst(t);e in this.map||(this.map[e]=this.configs.length,this.configs.push(t))}get elements(){return this.configs}get alts(){return kQ(this.configs,(t=>t.alt))}get key(){let t="";for(let e in this.map)t+=e+":";return t}},g(rst,"getATNConfigKey")}));function sst(t,e){let r={};return i=>{let n=i.toString(),a=r[n];return void 0!==a||(a={atnStartState:t,decision:e,states:{}},r[n]=a),a}}function ost(t,e=!0){let r=new Set;for(let i of t){let t=new Set;for(let n of i){if(void 0===n){if(e)break;return!1}let i=[n.tokenTypeIdx].concat(n.categoryMatches);for(let e of i)if(r.has(e)){if(!t.has(e))return!1}else r.add(e),t.add(e)}}return!0}function lst(t){let e=t.decisionStates.length,r=Array(e);for(let i=0;i<e;i++)r[i]=sst(t.decisionStates[i],i);return r}function cst(t,e,r,i){let n=t[e](r),a=n.start;if(void 0===a){a=Tst(n,kst(wst(n.atnStartState))),n.start=a}return hst.apply(this,[n,a,r,i])}function hst(t,e,r,i){let n=e,a=1,s=[],o=this.LA(a++);for(;;){let e=yst(n,o);if(void 0===e&&(e=ust.apply(this,[t,n,o,a,r,i])),e===ist)return gst(s,n,o);if(!0===e.isAcceptState)return e.prediction;n=e,s.push(o),o=this.LA(a++)}}function ust(t,e,r,i,n,a){let s=mst(e.configs,r,n);if(0===s.size)return vst(t,e,r,ist),ist;let o=kst(s),l=bst(s,n);if(void 0!==l)o.isAcceptState=!0,o.prediction=l,o.configs.uniqueAlt=l;else if(Ast(s)){let e=UZ(s.alts);o.isAcceptState=!0,o.prediction=e,o.configs.uniqueAlt=e,dst.apply(this,[t,i,s.alts,a])}return o=vst(t,e,r,o),o}function dst(t,e,r,i){let n=[];for(let t=1;t<=e;t++)n.push(this.LA(t).tokenType);let a=t.atnStartState;i(pst({topLevelRule:a.rule,ambiguityIndices:r,production:a.production,prefixPath:n}))}function pst(t){let e=kQ(t.prefixPath,(t=>xrt(t))).join(", "),r=0===t.production.idx?"":t.production.idx,i=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(", ")}> in <${fst(t.production)}${r}> inside <${t.topLevelRule.name}> Rule,\n<${e}> may appears as a prefix path in all these alternatives.\n`;return i+="See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details.",i}function fst(t){if(t instanceof gtt)return"SUBRULE";if(t instanceof xtt)return"OPTION";if(t instanceof wtt)return"OR";if(t instanceof btt)return"AT_LEAST_ONE";if(t instanceof ktt)return"AT_LEAST_ONE_SEP";if(t instanceof Ttt)return"MANY_SEP";if(t instanceof vtt)return"MANY";if(t instanceof _tt)return"CONSUME";throw Error("non exhaustive match")}function gst(t,e,r){let i=wQ(e.configs.elements,(t=>t.state.transitions));return{actualToken:r,possibleTokenTypes:j1(i.filter((t=>t instanceof Zat)).map((t=>t.tokenType)),(t=>t.tokenTypeIdx)),tokenPath:t}}function yst(t,e){return t.edges[e.tokenTypeIdx]}function mst(t,e,r){let i,n=new nst,a=[];for(let i of t.elements){if(!1===r.is(i.alt))continue;if(i.state.type===Yat){a.push(i);continue}let t=i.state.transitions.length;for(let r=0;r<t;r++){let t=xst(i.state.transitions[r],e);void 0!==t&&n.add({state:t,alt:i.alt,stack:i.stack})}}if(0===a.length&&1===n.size&&(i=n),void 0===i){i=new nst;for(let t of n.elements)_st(t,i)}if(a.length>0&&!Cst(i))for(let t of a)i.add(t);return i}function xst(t,e){if(t instanceof Zat&&wrt(e,t.tokenType))return t.target}function bst(t,e){let r;for(let i of t.elements)if(!0===e.is(i.alt))if(void 0===r)r=i.alt;else if(r!==i.alt)return;return r}function kst(t){return{configs:t,edges:{},isAcceptState:!1,prediction:-1}}function vst(t,e,r,i){return i=Tst(t,i),e.edges[r.tokenTypeIdx]=i,i}function Tst(t,e){if(e===ist)return e;let r=e.configs.key,i=t.states[r];return void 0!==i?i:(e.configs.finalize(),t.states[r]=e,e)}function wst(t){let e=new nst,r=t.transitions.length;for(let i=0;i<r;i++){_st({state:t.transitions[i].target,alt:i,stack:[]},e)}return e}function _st(t,e){let r=t.state;if(r.type===Yat){if(t.stack.length>0){let r=[...t.stack];_st({state:r.pop(),alt:t.alt,stack:r},e)}else e.add(t);return}r.epsilonOnlyTransitions||e.add(t);let i=r.transitions.length;for(let n=0;n<i;n++){let i=Sst(t,r.transitions[n]);void 0!==i&&_st(i,e)}}function Sst(t,e){if(e instanceof Jat)return{state:e.target,alt:t.alt,stack:t.stack};if(e instanceof tst){let r=[...t.stack,e.followState];return{state:e.target,alt:t.alt,stack:r}}}function Cst(t){for(let e of t.elements)if(e.state.type===Yat)return!0;return!1}function Est(t){for(let e of t.elements)if(e.state.type!==Yat)return!1;return!0}function Ast(t){if(Est(t))return!0;let e=$st(t.elements);return Lst(e)&&!Rst(e)}function $st(t){let e=new Map;for(let r of t){let t=rst(r,!1),i=e.get(t);void 0===i&&(i={},e.set(t,i)),i[r.alt]=!0}return e}function Lst(t){for(let e of Array.from(t.values()))if(Object.keys(e).length>1)return!0;return!1}function Rst(t){for(let e of Array.from(t.values()))if(1===Object.keys(e).length)return!0;return!1}var Ist,Nst,Dst,Mst,Ost,Pst,Bst,Fst,zst,jst,Ust,Wst,qst,Yst,Gst,Hst,Vst,Xst,Kst,Qst,Zst,Jst,tot,eot,rot,iot,not,aot,sot,oot,lot,cot,hot,uot,dot,pot,fot,got,yot,mot,xot,bot,kot,vot,Tot,wot,_ot,Sot,Cot,Eot,Aot,$ot,Lot,Rot,Iot,Not,Dot,Mot,Oot,Pot,Bot,Fot,zot,jot,Uot,Wot,qot,Yot,Got,Hot,Vot,Xot,Kot,Qot,Zot,Jot,tlt,elt,rlt,ilt,nlt,alt,slt,olt,llt,clt,hlt,ult,dlt,plt,flt=y((()=>{gat(),est(),ast(),WZ(),_Q(),U1(),vQ(),nY(),FK(),mZ(),l1(),g(sst,"createDFACache"),Ist=class{static{g(this,"PredicateSet")}constructor(){this.predicates=[]}is(t){return t>=this.predicates.length||this.predicates[t]}set(t,e){this.predicates[t]=e}toString(){let t="",e=this.predicates.length;for(let r=0;r<e;r++)t+=!0===this.predicates[r]?"1":"0";return t}},Nst=new Ist,Dst=class extends snt{static{g(this,"LLStarLookaheadStrategy")}constructor(t){var e;super(),this.logging=null!==(e=t?.logging)&&void 0!==e?e:t=>console.log(t)}initialize(t){this.atn=mat(t.rules),this.dfas=lst(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(t){let{prodOccurrence:e,rule:r,hasPredicates:i,dynamicTokensEnabled:n}=t,a=this.dfas,s=this.logging,o=yat(r,"Alternation",e),l=this.atn.decisionMap[o].decision,c=kQ(tit({maxLookahead:1,occurrence:e,prodType:"Alternation",rule:r}),(t=>kQ(t,(t=>t[0]))));if(ost(c,!1)&&!n){let t=o1(c,((t,e,r)=>(BK(e,(e=>{e&&(t[e.tokenTypeIdx]=r,BK(e.categoryMatches,(e=>{t[e]=r})))})),t)),{});return i?function(e){var r;let i=this.LA(1),n=t[i.tokenTypeIdx];if(void 0!==e&&void 0!==n){let t=null===(r=e[n])||void 0===r?void 0:r.GATE;if(void 0!==t&&!1===t.call(this))return}return n}:function(){let e=this.LA(1);return t[e.tokenTypeIdx]}}return i?function(t){let e=new Ist,r=void 0===t?0:t.length;for(let i=0;i<r;i++){let r=t?.[i].GATE;e.set(i,void 0===r||r.call(this))}let i=cst.call(this,a,l,e,s);return"number"==typeof i?i:void 0}:function(){let t=cst.call(this,a,l,Nst,s);return"number"==typeof t?t:void 0}}buildLookaheadForOptional(t){let{prodOccurrence:e,rule:r,prodType:i,dynamicTokensEnabled:n}=t,a=this.dfas,s=this.logging,o=yat(r,i,e),l=this.atn.decisionMap[o].decision,c=kQ(tit({maxLookahead:1,occurrence:e,prodType:i,rule:r}),(t=>kQ(t,(t=>t[0]))));if(ost(c)&&c[0][0]&&!n){let t=c[0],e=iY(t);if(1===e.length&&yZ(e[0].categoryMatches)){let t=e[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===t}}{let t=o1(e,((t,e)=>(void 0!==e&&(t[e.tokenTypeIdx]=!0,BK(e.categoryMatches,(e=>{t[e]=!0}))),t)),{});return function(){let e=this.LA(1);return!0===t[e.tokenTypeIdx]}}}return function(){let t=cst.call(this,a,l,Nst,s);return"object"!=typeof t&&0===t}}},g(ost,"isLL1Sequence"),g(lst,"initATNSimulator"),g(cst,"adaptivePredict"),g(hst,"performLookahead"),g(ust,"computeLookaheadTarget"),g(dst,"reportLookaheadAmbiguity"),g(pst,"buildAmbiguityError"),g(fst,"getProductionDslName"),g(gst,"buildAdaptivePredictError"),g(yst,"getExistingTargetState"),g(mst,"computeReachSet"),g(xst,"getReachableTarget"),g(bst,"getUniqueAlt"),g(kst,"newDFAState"),g(vst,"addDFAEdge"),g(Tst,"addDFAState"),g(wst,"computeStartState"),g(_st,"closure"),g(Sst,"getEpsilonTarget"),g(Cst,"hasConfigInRuleStopState"),g(Est,"allConfigsInRuleStopStates"),g(Ast,"hasConflictTerminatingPrediction"),g($st,"getConflictingAltSets"),g(Lst,"hasConflictingAltSet"),g(Rst,"hasStateAssociatedWithOneAlt")})),glt=y((()=>{flt()})),ylt=y((()=>{var t;!function(t){function e(t){return"string"==typeof t}g(e,"is"),t.is=e}(Mst||(Mst={})),function(t){function e(t){return"string"==typeof t}g(e,"is"),t.is=e}(Ost||(Ost={})),function(t){function e(e){return"number"==typeof e&&t.MIN_VALUE<=e&&e<=t.MAX_VALUE}t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647,g(e,"is"),t.is=e}(Pst||(Pst={})),function(t){function e(e){return"number"==typeof e&&t.MIN_VALUE<=e&&e<=t.MAX_VALUE}t.MIN_VALUE=0,t.MAX_VALUE=2147483647,g(e,"is"),t.is=e}(Bst||(Bst={})),function(t){function e(t,e){return t===Number.MAX_VALUE&&(t=Bst.MAX_VALUE),e===Number.MAX_VALUE&&(e=Bst.MAX_VALUE),{line:t,character:e}}function r(t){let e=t;return olt.objectLiteral(e)&&olt.uinteger(e.line)&&olt.uinteger(e.character)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Fst||(Fst={})),function(t){function e(t,e,r,i){if(olt.uinteger(t)&&olt.uinteger(e)&&olt.uinteger(r)&&olt.uinteger(i))return{start:Fst.create(t,e),end:Fst.create(r,i)};if(Fst.is(t)&&Fst.is(e))return{start:t,end:e};throw new Error(`Range#create called with invalid arguments[${t}, ${e}, ${r}, ${i}]`)}function r(t){let e=t;return olt.objectLiteral(e)&&Fst.is(e.start)&&Fst.is(e.end)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(zst||(zst={})),function(t){function e(t,e){return{uri:t,range:e}}function r(t){let e=t;return olt.objectLiteral(e)&&zst.is(e.range)&&(olt.string(e.uri)||olt.undefined(e.uri))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(jst||(jst={})),function(t){function e(t,e,r,i){return{targetUri:t,targetRange:e,targetSelectionRange:r,originSelectionRange:i}}function r(t){let e=t;return olt.objectLiteral(e)&&zst.is(e.targetRange)&&olt.string(e.targetUri)&&zst.is(e.targetSelectionRange)&&(zst.is(e.originSelectionRange)||olt.undefined(e.originSelectionRange))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Ust||(Ust={})),function(t){function e(t,e,r,i){return{red:t,green:e,blue:r,alpha:i}}function r(t){let e=t;return olt.objectLiteral(e)&&olt.numberRange(e.red,0,1)&&olt.numberRange(e.green,0,1)&&olt.numberRange(e.blue,0,1)&&olt.numberRange(e.alpha,0,1)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Wst||(Wst={})),function(t){function e(t,e){return{range:t,color:e}}function r(t){let e=t;return olt.objectLiteral(e)&&zst.is(e.range)&&Wst.is(e.color)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(qst||(qst={})),function(t){function e(t,e,r){return{label:t,textEdit:e,additionalTextEdits:r}}function r(t){let e=t;return olt.objectLiteral(e)&&olt.string(e.label)&&(olt.undefined(e.textEdit)||tot.is(e))&&(olt.undefined(e.additionalTextEdits)||olt.typedArray(e.additionalTextEdits,tot.is))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Yst||(Yst={})),(t=Gst||(Gst={})).Comment="comment",t.Imports="imports",t.Region="region",function(t){function e(t,e,r,i,n,a){let s={startLine:t,endLine:e};return olt.defined(r)&&(s.startCharacter=r),olt.defined(i)&&(s.endCharacter=i),olt.defined(n)&&(s.kind=n),olt.defined(a)&&(s.collapsedText=a),s}function r(t){let e=t;return olt.objectLiteral(e)&&olt.uinteger(e.startLine)&&olt.uinteger(e.startLine)&&(olt.undefined(e.startCharacter)||olt.uinteger(e.startCharacter))&&(olt.undefined(e.endCharacter)||olt.uinteger(e.endCharacter))&&(olt.undefined(e.kind)||olt.string(e.kind))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Hst||(Hst={})),function(t){function e(t,e){return{location:t,message:e}}function r(t){let e=t;return olt.defined(e)&&jst.is(e.location)&&olt.string(e.message)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Vst||(Vst={})),function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4}(Xst||(Xst={})),function(t){t.Unnecessary=1,t.Deprecated=2}(Kst||(Kst={})),function(t){function e(t){let e=t;return olt.objectLiteral(e)&&olt.string(e.href)}g(e,"is"),t.is=e}(Qst||(Qst={})),function(t){function e(t,e,r,i,n,a){let s={range:t,message:e};return olt.defined(r)&&(s.severity=r),olt.defined(i)&&(s.code=i),olt.defined(n)&&(s.source=n),olt.defined(a)&&(s.relatedInformation=a),s}function r(t){var e;let r=t;return olt.defined(r)&&zst.is(r.range)&&olt.string(r.message)&&(olt.number(r.severity)||olt.undefined(r.severity))&&(olt.integer(r.code)||olt.string(r.code)||olt.undefined(r.code))&&(olt.undefined(r.codeDescription)||olt.string(null===(e=r.codeDescription)||void 0===e?void 0:e.href))&&(olt.string(r.source)||olt.undefined(r.source))&&(olt.undefined(r.relatedInformation)||olt.typedArray(r.relatedInformation,Vst.is))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Zst||(Zst={})),function(t){function e(t,e,...r){let i={title:t,command:e};return olt.defined(r)&&r.length>0&&(i.arguments=r),i}function r(t){let e=t;return olt.defined(e)&&olt.string(e.title)&&olt.string(e.command)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Jst||(Jst={})),function(t){function e(t,e){return{range:t,newText:e}}function r(t,e){return{range:{start:t,end:t},newText:e}}function i(t){return{range:t,newText:""}}function n(t){let e=t;return olt.objectLiteral(e)&&olt.string(e.newText)&&zst.is(e.range)}g(e,"replace"),t.replace=e,g(r,"insert"),t.insert=r,g(i,"del"),t.del=i,g(n,"is"),t.is=n}(tot||(tot={})),function(t){function e(t,e,r){let i={label:t};return void 0!==e&&(i.needsConfirmation=e),void 0!==r&&(i.description=r),i}function r(t){let e=t;return olt.objectLiteral(e)&&olt.string(e.label)&&(olt.boolean(e.needsConfirmation)||void 0===e.needsConfirmation)&&(olt.string(e.description)||void 0===e.description)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(eot||(eot={})),function(t){function e(t){let e=t;return olt.string(e)}g(e,"is"),t.is=e}(rot||(rot={})),function(t){function e(t,e,r){return{range:t,newText:e,annotationId:r}}function r(t,e,r){return{range:{start:t,end:t},newText:e,annotationId:r}}function i(t,e){return{range:t,newText:"",annotationId:e}}function n(t){let e=t;return tot.is(e)&&(eot.is(e.annotationId)||rot.is(e.annotationId))}g(e,"replace"),t.replace=e,g(r,"insert"),t.insert=r,g(i,"del"),t.del=i,g(n,"is"),t.is=n}(iot||(iot={})),function(t){function e(t,e){return{textDocument:t,edits:e}}function r(t){let e=t;return olt.defined(e)&&uot.is(e.textDocument)&&Array.isArray(e.edits)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(not||(not={})),function(t){function e(t,e,r){let i={kind:"create",uri:t};return void 0!==e&&(void 0!==e.overwrite||void 0!==e.ignoreIfExists)&&(i.options=e),void 0!==r&&(i.annotationId=r),i}function r(t){let e=t;return e&&"create"===e.kind&&olt.string(e.uri)&&(void 0===e.options||(void 0===e.options.overwrite||olt.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||olt.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||rot.is(e.annotationId))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(aot||(aot={})),function(t){function e(t,e,r,i){let n={kind:"rename",oldUri:t,newUri:e};return void 0!==r&&(void 0!==r.overwrite||void 0!==r.ignoreIfExists)&&(n.options=r),void 0!==i&&(n.annotationId=i),n}function r(t){let e=t;return e&&"rename"===e.kind&&olt.string(e.oldUri)&&olt.string(e.newUri)&&(void 0===e.options||(void 0===e.options.overwrite||olt.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||olt.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||rot.is(e.annotationId))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(sot||(sot={})),function(t){function e(t,e,r){let i={kind:"delete",uri:t};return void 0!==e&&(void 0!==e.recursive||void 0!==e.ignoreIfNotExists)&&(i.options=e),void 0!==r&&(i.annotationId=r),i}function r(t){let e=t;return e&&"delete"===e.kind&&olt.string(e.uri)&&(void 0===e.options||(void 0===e.options.recursive||olt.boolean(e.options.recursive))&&(void 0===e.options.ignoreIfNotExists||olt.boolean(e.options.ignoreIfNotExists)))&&(void 0===e.annotationId||rot.is(e.annotationId))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(oot||(oot={})),function(t){function e(t){let e=t;return e&&(void 0!==e.changes||void 0!==e.documentChanges)&&(void 0===e.documentChanges||e.documentChanges.every((t=>olt.string(t.kind)?aot.is(t)||sot.is(t)||oot.is(t):not.is(t))))}g(e,"is"),t.is=e}(lot||(lot={})),function(t){function e(t){return{uri:t}}function r(t){let e=t;return olt.defined(e)&&olt.string(e.uri)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(cot||(cot={})),function(t){function e(t,e){return{uri:t,version:e}}function r(t){let e=t;return olt.defined(e)&&olt.string(e.uri)&&olt.integer(e.version)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(hot||(hot={})),function(t){function e(t,e){return{uri:t,version:e}}function r(t){let e=t;return olt.defined(e)&&olt.string(e.uri)&&(null===e.version||olt.integer(e.version))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(uot||(uot={})),function(t){function e(t,e,r,i){return{uri:t,languageId:e,version:r,text:i}}function r(t){let e=t;return olt.defined(e)&&olt.string(e.uri)&&olt.string(e.languageId)&&olt.integer(e.version)&&olt.string(e.text)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(dot||(dot={})),function(t){function e(e){let r=e;return r===t.PlainText||r===t.Markdown}t.PlainText="plaintext",t.Markdown="markdown",g(e,"is"),t.is=e}(pot||(pot={})),function(t){function e(t){let e=t;return olt.objectLiteral(t)&&pot.is(e.kind)&&olt.string(e.value)}g(e,"is"),t.is=e}(fot||(fot={})),function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25}(got||(got={})),function(t){t.PlainText=1,t.Snippet=2}(yot||(yot={})),function(t){t.Deprecated=1}(mot||(mot={})),function(t){function e(t,e,r){return{newText:t,insert:e,replace:r}}function r(t){let e=t;return e&&olt.string(e.newText)&&zst.is(e.insert)&&zst.is(e.replace)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(xot||(xot={})),function(t){t.asIs=1,t.adjustIndentation=2}(bot||(bot={})),function(t){function e(t){let e=t;return e&&(olt.string(e.detail)||void 0===e.detail)&&(olt.string(e.description)||void 0===e.description)}g(e,"is"),t.is=e}(kot||(kot={})),function(t){function e(t){return{label:t}}g(e,"create"),t.create=e}(vot||(vot={})),function(t){function e(t,e){return{items:t||[],isIncomplete:!!e}}g(e,"create"),t.create=e}(Tot||(Tot={})),function(t){function e(t){return t.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}function r(t){let e=t;return olt.string(e)||olt.objectLiteral(e)&&olt.string(e.language)&&olt.string(e.value)}g(e,"fromPlainText"),t.fromPlainText=e,g(r,"is"),t.is=r}(wot||(wot={})),function(t){function e(t){let e=t;return!!e&&olt.objectLiteral(e)&&(fot.is(e.contents)||wot.is(e.contents)||olt.typedArray(e.contents,wot.is))&&(void 0===t.range||zst.is(t.range))}g(e,"is"),t.is=e}(_ot||(_ot={})),function(t){function e(t,e){return e?{label:t,documentation:e}:{label:t}}g(e,"create"),t.create=e}(Sot||(Sot={})),function(t){function e(t,e,...r){let i={label:t};return olt.defined(e)&&(i.documentation=e),olt.defined(r)?i.parameters=r:i.parameters=[],i}g(e,"create"),t.create=e}(Cot||(Cot={})),function(t){t.Text=1,t.Read=2,t.Write=3}(Eot||(Eot={})),function(t){function e(t,e){let r={range:t};return olt.number(e)&&(r.kind=e),r}g(e,"create"),t.create=e}(Aot||(Aot={})),function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26}($ot||($ot={})),function(t){t.Deprecated=1}(Lot||(Lot={})),function(t){function e(t,e,r,i,n){let a={name:t,kind:e,location:{uri:i,range:r}};return n&&(a.containerName=n),a}g(e,"create"),t.create=e}(Rot||(Rot={})),function(t){function e(t,e,r,i){return void 0!==i?{name:t,kind:e,location:{uri:r,range:i}}:{name:t,kind:e,location:{uri:r}}}g(e,"create"),t.create=e}(Iot||(Iot={})),function(t){function e(t,e,r,i,n,a){let s={name:t,detail:e,kind:r,range:i,selectionRange:n};return void 0!==a&&(s.children=a),s}function r(t){let e=t;return e&&olt.string(e.name)&&olt.number(e.kind)&&zst.is(e.range)&&zst.is(e.selectionRange)&&(void 0===e.detail||olt.string(e.detail))&&(void 0===e.deprecated||olt.boolean(e.deprecated))&&(void 0===e.children||Array.isArray(e.children))&&(void 0===e.tags||Array.isArray(e.tags))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Not||(Not={})),function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"}(Dot||(Dot={})),function(t){t.Invoked=1,t.Automatic=2}(Mot||(Mot={})),function(t){function e(t,e,r){let i={diagnostics:t};return null!=e&&(i.only=e),null!=r&&(i.triggerKind=r),i}function r(t){let e=t;return olt.defined(e)&&olt.typedArray(e.diagnostics,Zst.is)&&(void 0===e.only||olt.typedArray(e.only,olt.string))&&(void 0===e.triggerKind||e.triggerKind===Mot.Invoked||e.triggerKind===Mot.Automatic)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Oot||(Oot={})),function(t){function e(t,e,r){let i={title:t},n=!0;return"string"==typeof e?(n=!1,i.kind=e):Jst.is(e)?i.command=e:i.edit=e,n&&void 0!==r&&(i.kind=r),i}function r(t){let e=t;return e&&olt.string(e.title)&&(void 0===e.diagnostics||olt.typedArray(e.diagnostics,Zst.is))&&(void 0===e.kind||olt.string(e.kind))&&(void 0!==e.edit||void 0!==e.command)&&(void 0===e.command||Jst.is(e.command))&&(void 0===e.isPreferred||olt.boolean(e.isPreferred))&&(void 0===e.edit||lot.is(e.edit))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Pot||(Pot={})),function(t){function e(t,e){let r={range:t};return olt.defined(e)&&(r.data=e),r}function r(t){let e=t;return olt.defined(e)&&zst.is(e.range)&&(olt.undefined(e.command)||Jst.is(e.command))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Bot||(Bot={})),function(t){function e(t,e){return{tabSize:t,insertSpaces:e}}function r(t){let e=t;return olt.defined(e)&&olt.uinteger(e.tabSize)&&olt.boolean(e.insertSpaces)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Fot||(Fot={})),function(t){function e(t,e,r){return{range:t,target:e,data:r}}function r(t){let e=t;return olt.defined(e)&&zst.is(e.range)&&(olt.undefined(e.target)||olt.string(e.target))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(zot||(zot={})),function(t){function e(t,e){return{range:t,parent:e}}function r(e){let r=e;return olt.objectLiteral(r)&&zst.is(r.range)&&(void 0===r.parent||t.is(r.parent))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(jot||(jot={})),function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"}(Uot||(Uot={})),function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"}(Wot||(Wot={})),function(t){function e(t){let e=t;return olt.objectLiteral(e)&&(void 0===e.resultId||"string"==typeof e.resultId)&&Array.isArray(e.data)&&(0===e.data.length||"number"==typeof e.data[0])}g(e,"is"),t.is=e}(qot||(qot={})),function(t){function e(t,e){return{range:t,text:e}}function r(t){let e=t;return null!=e&&zst.is(e.range)&&olt.string(e.text)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Yot||(Yot={})),function(t){function e(t,e,r){return{range:t,variableName:e,caseSensitiveLookup:r}}function r(t){let e=t;return null!=e&&zst.is(e.range)&&olt.boolean(e.caseSensitiveLookup)&&(olt.string(e.variableName)||void 0===e.variableName)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Got||(Got={})),function(t){function e(t,e){return{range:t,expression:e}}function r(t){let e=t;return null!=e&&zst.is(e.range)&&(olt.string(e.expression)||void 0===e.expression)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Hot||(Hot={})),function(t){function e(t,e){return{frameId:t,stoppedLocation:e}}function r(t){let e=t;return olt.defined(e)&&zst.is(t.stoppedLocation)}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Vot||(Vot={})),function(t){function e(t){return 1===t||2===t}t.Type=1,t.Parameter=2,g(e,"is"),t.is=e}(Xot||(Xot={})),function(t){function e(t){return{value:t}}function r(t){let e=t;return olt.objectLiteral(e)&&(void 0===e.tooltip||olt.string(e.tooltip)||fot.is(e.tooltip))&&(void 0===e.location||jst.is(e.location))&&(void 0===e.command||Jst.is(e.command))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Kot||(Kot={})),function(t){function e(t,e,r){let i={position:t,label:e};return void 0!==r&&(i.kind=r),i}function r(t){let e=t;return olt.objectLiteral(e)&&Fst.is(e.position)&&(olt.string(e.label)||olt.typedArray(e.label,Kot.is))&&(void 0===e.kind||Xot.is(e.kind))&&void 0===e.textEdits||olt.typedArray(e.textEdits,tot.is)&&(void 0===e.tooltip||olt.string(e.tooltip)||fot.is(e.tooltip))&&(void 0===e.paddingLeft||olt.boolean(e.paddingLeft))&&(void 0===e.paddingRight||olt.boolean(e.paddingRight))}g(e,"create"),t.create=e,g(r,"is"),t.is=r}(Qot||(Qot={})),function(t){function e(t){return{kind:"snippet",value:t}}g(e,"createSnippet"),t.createSnippet=e}(Zot||(Zot={})),function(t){function e(t,e,r,i){return{insertText:t,filterText:e,range:r,command:i}}g(e,"create"),t.create=e}(Jot||(Jot={})),function(t){function e(t){return{items:t}}g(e,"create"),t.create=e}(tlt||(tlt={})),function(t){t.Invoked=0,t.Automatic=1}(elt||(elt={})),function(t){function e(t,e){return{range:t,text:e}}g(e,"create"),t.create=e}(rlt||(rlt={})),function(t){function e(t,e){return{triggerKind:t,selectedCompletionInfo:e}}g(e,"create"),t.create=e}(ilt||(ilt={})),function(t){function e(t){let e=t;return olt.objectLiteral(e)&&Ost.is(e.uri)&&olt.string(e.name)}g(e,"is"),t.is=e}(nlt||(nlt={})),function(t){function e(t,e,r,i){return new slt(t,e,r,i)}function r(t){let e=t;return!!(olt.defined(e)&&olt.string(e.uri)&&(olt.undefined(e.languageId)||olt.string(e.languageId))&&olt.uinteger(e.lineCount)&&olt.func(e.getText)&&olt.func(e.positionAt)&&olt.func(e.offsetAt))}function i(t,e){let r=t.getText(),i=n(e,((t,e)=>{let r=t.range.start.line-e.range.start.line;return 0===r?t.range.start.character-e.range.start.character:r})),a=r.length;for(let e=i.length-1;e>=0;e--){let n=i[e],s=t.offsetAt(n.range.start),o=t.offsetAt(n.range.end);if(!(o<=a))throw new Error("Overlapping edit");r=r.substring(0,s)+n.newText+r.substring(o,r.length),a=s}return r}function n(t,e){if(t.length<=1)return t;let r=t.length/2|0,i=t.slice(0,r),a=t.slice(r);n(i,e),n(a,e);let s=0,o=0,l=0;for(;s<i.length&&o<a.length;)e(i[s],a[o])<=0?t[l++]=i[s++]:t[l++]=a[o++];for(;s<i.length;)t[l++]=i[s++];for(;o<a.length;)t[l++]=a[o++];return t}g(e,"create"),t.create=e,g(r,"is"),t.is=r,g(i,"applyEdits"),t.applyEdits=i,g(n,"mergeSort")}(alt||(alt={})),slt=class{static{g(this,"FullTextDocument")}constructor(t,e,r,i){this._uri=t,this._languageId=e,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let e=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(e,r)}return this._content}update(t,e){this._content=t.text,this._version=e,this._lineOffsets=void 0}getLineOffsets(){if(void 0===this._lineOffsets){let t=[],e=this._content,r=!0;for(let i=0;i<e.length;i++){r&&(t.push(i),r=!1);let n=e.charAt(i);r="\r"===n||"\n"===n,"\r"===n&&i+1<e.length&&"\n"===e.charAt(i+1)&&i++}r&&e.length>0&&t.push(e.length),this._lineOffsets=t}return this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let e=this.getLineOffsets(),r=0,i=e.length;if(0===i)return Fst.create(0,t);for(;r<i;){let n=Math.floor((r+i)/2);e[n]>t?i=n:r=n+1}let n=r-1;return Fst.create(n,t-e[n])}offsetAt(t){let e=this.getLineOffsets();if(t.line>=e.length)return this._content.length;if(t.line<0)return 0;let r=e[t.line],i=t.line+1<e.length?e[t.line+1]:this._content.length;return Math.max(Math.min(r+t.character,i),r)}get lineCount(){return this.getLineOffsets().length}},function(t){let e=Object.prototype.toString;function r(t){return typeof t<"u"}function i(t){return typeof t>"u"}function n(t){return!0===t||!1===t}function a(t){return"[object String]"===e.call(t)}function s(t){return"[object Number]"===e.call(t)}function o(t,r,i){return"[object Number]"===e.call(t)&&r<=t&&t<=i}function l(t){return"[object Number]"===e.call(t)&&-2147483648<=t&&t<=2147483647}function c(t){return"[object Number]"===e.call(t)&&0<=t&&t<=2147483647}function h(t){return"[object Function]"===e.call(t)}function u(t){return null!==t&&"object"==typeof t}function d(t,e){return Array.isArray(t)&&t.every(e)}g(r,"defined"),t.defined=r,g(i,"undefined"),t.undefined=i,g(n,"boolean"),t.boolean=n,g(a,"string"),t.string=a,g(s,"number"),t.number=s,g(o,"numberRange"),t.numberRange=o,g(l,"integer"),t.integer=l,g(c,"uinteger"),t.uinteger=c,g(h,"func"),t.func=h,g(u,"objectLiteral"),t.objectLiteral=u,g(d,"typedArray"),t.typedArray=d}(olt||(olt={}))})),mlt=y((()=>{ylt(),w6(),llt=class{static{g(this,"CstNodeBuilder")}constructor(){this.nodeStack=[]}get current(){var t;return null!==(t=this.nodeStack[this.nodeStack.length-1])&&void 0!==t?t:this.rootNode}buildRootNode(t){return this.rootNode=new plt(t),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(t){let e=new ult;return e.grammarSource=t,e.root=this.rootNode,this.current.content.push(e),this.nodeStack.push(e),e}buildLeafNode(t,e){let r=new hlt(t.startOffset,t.image.length,a6(t),t.tokenType,!e);return r.grammarSource=e,r.root=this.rootNode,this.current.content.push(r),r}removeNode(t){let e=t.container;if(e){let r=e.content.indexOf(t);r>=0&&e.content.splice(r,1)}}addHiddenNodes(t){let e=[];for(let r of t){let t=new hlt(r.startOffset,r.image.length,a6(r),r.tokenType,!0);t.root=this.rootNode,e.push(t)}let r=this.current,i=!1;if(r.content.length>0)r.content.push(...e);else{for(;r.container;){let t=r.container.content.indexOf(r);if(t>0){r.container.content.splice(t,0,...e),i=!0;break}r=r.container}i||this.rootNode.content.unshift(...e)}}construct(t){let e=this.current;"string"==typeof t.$type&&(this.current.astNode=t),t.$cstNode=e;let r=this.nodeStack.pop();0===r?.content.length&&this.removeNode(r)}},clt=class{static{g(this,"AbstractCstNode")}get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var t,e;let r="string"==typeof(null===(t=this._astNode)||void 0===t?void 0:t.$type)?this._astNode:null===(e=this.container)||void 0===e?void 0:e.astNode;if(!r)throw new Error("This node has no associated AST element");return r}set astNode(t){this._astNode=t}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}},hlt=class extends clt{static{g(this,"LeafCstNodeImpl")}get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(t,e,r,i,n=!1){super(),this._hidden=n,this._offset=t,this._tokenType=i,this._length=e,this._range=r}},ult=class extends clt{static{g(this,"CompositeCstNodeImpl")}constructor(){super(...arguments),this.content=new dlt(this)}get children(){return this.content}get offset(){var t,e;return null!==(e=null===(t=this.firstNonHiddenNode)||void 0===t?void 0:t.offset)&&void 0!==e?e:0}get length(){return this.end-this.offset}get end(){var t,e;return null!==(e=null===(t=this.lastNonHiddenNode)||void 0===t?void 0:t.end)&&void 0!==e?e:0}get range(){let t=this.firstNonHiddenNode,e=this.lastNonHiddenNode;if(t&&e){if(void 0===this._rangeCache){let{range:r}=t,{range:i}=e;this._rangeCache={start:r.start,end:i.end.line<r.start.line?r.start:i.end}}return this._rangeCache}return{start:Fst.create(0,0),end:Fst.create(0,0)}}get firstNonHiddenNode(){for(let t of this.content)if(!t.hidden)return t;return this.content[0]}get lastNonHiddenNode(){for(let t=this.content.length-1;t>=0;t--){let e=this.content[t];if(!e.hidden)return e}return this.content[this.content.length-1]}},dlt=class t extends Array{static{g(this,"CstNodeContainer")}constructor(e){super(),this.parent=e,Object.setPrototypeOf(this,t.prototype)}push(...t){return this.addParents(t),super.push(...t)}unshift(...t){return this.addParents(t),super.unshift(...t)}splice(t,e,...r){return this.addParents(r),super.splice(t,e,...r)}addParents(t){for(let e of t)e.container=this.parent}},plt=class extends ult{static{g(this,"RootCstNodeImpl")}get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(t){super(),this._text="",this._text=t??""}}}));function xlt(t){return t.$type===blt}var blt,klt,vlt,Tlt,wlt,_lt,Slt,Clt,Elt,Alt=y((()=>{gat(),glt(),m7(),Z9(),N7(),mlt(),blt=Symbol("Datatype"),g(xlt,"isDataTypeNode"),klt=g((t=>t.endsWith("​")?t:t+"​"),"withRuleSuffix"),vlt=class{static{g(this,"AbstractLangiumParser")}constructor(t){this._unorderedGroups=new Map,this.allRules=new Map,this.lexer=t.parser.Lexer;let e=this.lexer.definition,r="production"===t.LanguageMetaData.mode;this.wrapper=new Elt(e,Object.assign(Object.assign({},t.parser.ParserConfig),{skipValidations:r,errorMessageProvider:t.parser.ParserErrorMessageProvider}))}alternatives(t,e){this.wrapper.wrapOr(t,e)}optional(t,e){this.wrapper.wrapOption(t,e)}many(t,e){this.wrapper.wrapMany(t,e)}atLeastOne(t,e){this.wrapper.wrapAtLeastOne(t,e)}getRule(t){return this.allRules.get(t)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}},Tlt=class extends vlt{static{g(this,"LangiumParser")}get current(){return this.stack[this.stack.length-1]}constructor(t){super(t),this.nodeBuilder=new llt,this.stack=[],this.assignmentMap=new Map,this.linker=t.references.Linker,this.converter=t.parser.ValueConverter,this.astReflection=t.shared.AstReflection}rule(t,e){let r=this.computeRuleType(t),i=this.wrapper.DEFINE_RULE(klt(t.name),this.startImplementation(r,e).bind(this));return this.allRules.set(t.name,i),t.entry&&(this.mainRule=i),i}computeRuleType(t){if(!t.fragment){if(N9(t))return blt;return P9(t)??t.name}}parse(t,e={}){this.nodeBuilder.buildRootNode(t);let r=this.lexerResult=this.lexer.tokenize(t);this.wrapper.input=r.tokens;let i=e.rule?this.allRules.get(e.rule):this.mainRule;if(!i)throw new Error(e.rule?`No rule found with name '${e.rule}'`:"No main rule available.");let n=i.call(this.wrapper,{});return this.nodeBuilder.addHiddenNodes(r.hidden),this.unorderedGroups.clear(),this.lexerResult=void 0,{value:n,lexerErrors:r.errors,lexerReport:r.report,parserErrors:this.wrapper.errors}}startImplementation(t,e){return r=>{let i,n=!this.isRecording()&&void 0!==t;if(n){let e={$type:t};this.stack.push(e),t===blt&&(e.value="")}try{i=e(r)}catch{i=void 0}return void 0===i&&n&&(i=this.construct()),i}}extractHiddenTokens(t){let e=this.lexerResult.hidden;if(!e.length)return[];let r=t.startOffset;for(let t=0;t<e.length;t++)if(e[t].startOffset>r)return e.splice(0,t);return e.splice(0,e.length)}consume(t,e,r){let i=this.wrapper.wrapConsume(t,e);if(!this.isRecording()&&this.isValidToken(i)){let t=this.extractHiddenTokens(i);this.nodeBuilder.addHiddenNodes(t);let e=this.nodeBuilder.buildLeafNode(i,r),{assignment:n,isCrossRef:a}=this.getAssignment(r),s=this.current;if(n){let t=d8(r)?i.image:this.converter.convert(i.image,e);this.assign(n.operator,n.feature,t,e,a)}else if(xlt(s)){let t=i.image;d8(r)||(t=this.converter.convert(t,e).toString()),s.value+=t}}}isValidToken(t){return!t.isInsertedInRecovery&&!isNaN(t.startOffset)&&"number"==typeof t.endOffset&&!isNaN(t.endOffset)}subrule(t,e,r,i,n){let a;!this.isRecording()&&!r&&(a=this.nodeBuilder.buildCompositeNode(i));let s=this.wrapper.wrapSubrule(t,e,n);!this.isRecording()&&a&&a.length>0&&this.performSubruleAssignment(s,i,a)}performSubruleAssignment(t,e,r){let{assignment:i,isCrossRef:n}=this.getAssignment(e);if(i)this.assign(i.operator,i.feature,t,r,n);else if(!i){let e=this.current;if(xlt(e))e.value+=t.toString();else if("object"==typeof t&&t){let r=this.assignWithoutOverride(t,e);this.stack.pop(),this.stack.push(r)}}}action(t,e){if(!this.isRecording()){let r=this.current;if(e.feature&&e.operator){r=this.construct(),this.nodeBuilder.removeNode(r.$cstNode),this.nodeBuilder.buildCompositeNode(e).content.push(r.$cstNode);let i={$type:t};this.stack.push(i),this.assign(e.operator,e.feature,r,r.$cstNode,!1)}else r.$type=t}}construct(){if(this.isRecording())return;let t=this.current;return b7(t),this.nodeBuilder.construct(t),this.stack.pop(),xlt(t)?this.converter.convert(t.value,t.$cstNode):(L7(this.astReflection,t),t)}getAssignment(t){if(!this.assignmentMap.has(t)){let e=k7(t,o8);this.assignmentMap.set(t,{assignment:e,isCrossRef:!!e&&c8(e.terminal)})}return this.assignmentMap.get(t)}assign(t,e,r,i,n){let a,s=this.current;switch(a=n&&"string"==typeof r?this.linker.buildReference(s,e,i,r):r,t){case"=":s[e]=a;break;case"?=":s[e]=!0;break;case"+=":Array.isArray(s[e])||(s[e]=[]),s[e].push(a)}}assignWithoutOverride(t,e){for(let[r,i]of Object.entries(e)){let e=t[r];void 0===e?t[r]=i:Array.isArray(e)&&Array.isArray(i)&&(i.push(...e),t[r]=i)}let r=t.$cstNode;return r&&(r.astNode=void 0,t.$cstNode=void 0),t}get definitionErrors(){return this.wrapper.definitionErrors}},wlt=class{static{g(this,"AbstractParserErrorMessageProvider")}buildMismatchTokenMessage(t){return Drt.buildMismatchTokenMessage(t)}buildNotAllInputParsedMessage(t){return Drt.buildNotAllInputParsedMessage(t)}buildNoViableAltMessage(t){return Drt.buildNoViableAltMessage(t)}buildEarlyExitMessage(t){return Drt.buildEarlyExitMessage(t)}},_lt=class extends wlt{static{g(this,"LangiumParserErrorMessageProvider")}buildMismatchTokenMessage({expected:t,actual:e}){return`Expecting ${t.LABEL?"`"+t.LABEL+"`":t.name.endsWith(":KW")?`keyword '${t.name.substring(0,t.name.length-3)}'`:`token of type '${t.name}'`} but found \`${e.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:t}){return`Expecting end of file but found \`${t.image}\`.`}},Slt=class extends vlt{static{g(this,"LangiumCompletionParser")}constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(t){this.resetState();let e=this.lexer.tokenize(t,{mode:"partial"});return this.tokens=e.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(t,e){let r=this.wrapper.DEFINE_RULE(klt(t.name),this.startImplementation(e).bind(this));return this.allRules.set(t.name,r),t.entry&&(this.mainRule=r),r}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(t){return e=>{let r=this.keepStackSize();try{t(e)}finally{this.resetStackSize(r)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){let t=this.elementStack.length;return this.stackSize=t,t}resetStackSize(t){this.removeUnexpectedElements(),this.stackSize=t}consume(t,e,r){this.wrapper.wrapConsume(t,e),this.isRecording()||(this.lastElementStack=[...this.elementStack,r],this.nextTokenIndex=this.currIdx+1)}subrule(t,e,r,i,n){this.before(i),this.wrapper.wrapSubrule(t,e,n),this.after(i)}before(t){this.isRecording()||this.elementStack.push(t)}after(t){if(!this.isRecording()){let e=this.elementStack.lastIndexOf(t);e>=0&&this.elementStack.splice(e)}}get currIdx(){return this.wrapper.currIdx}},Clt={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new _lt},Elt=class extends cat{static{g(this,"ChevrotainWrapper")}constructor(t,e){let r=e&&"maxLookahead"in e;super(t,Object.assign(Object.assign(Object.assign({},Clt),{lookaheadStrategy:r?new snt({maxLookahead:e.maxLookahead}):new Dst({logging:e.skipValidations?()=>{}:void 0})}),e))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(t,e){return this.RULE(t,e)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(t,e){return this.consume(t,e)}wrapSubrule(t,e,r){return this.subrule(t,e,{ARGS:[r]})}wrapOr(t,e){this.or(t,e)}wrapOption(t,e){this.option(t,e)}wrapMany(t,e){this.many(t,e)}wrapAtLeastOne(t,e){this.atLeastOne(t,e)}}}));function $lt(t,e,r){return Llt({parser:e,tokens:r,ruleNames:new Map},t),e}function Llt(t,e){let r=y9(e,!1),i=V5(e.rules).filter(K6).filter((t=>r.has(t)));for(let e of i){let r=Object.assign(Object.assign({},t),{consume:1,optional:1,subrule:1,many:1,or:1});t.parser.rule(e,Rlt(r,e.definition))}}function Rlt(t,e,r=!1){let i;if(d8(e))i=jlt(t,e);else if(a8(e))i=Ilt(t,e);else if(o8(e))i=Rlt(t,e.terminal);else if(c8(e))i=zlt(t,e);else if(g8(e))i=Nlt(t,e);else if(s8(e))i=Olt(t,e);else if(b8(e))i=Plt(t,e);else if(u8(e))i=Blt(t,e);else{if(!h8(e))throw new S6(e.$cstNode,`Unexpected element type: ${e.$type}`);{let r=t.consume++;i=g((()=>t.parser.consume(r,Nrt,e)),"method")}}return Ult(t,r?void 0:Flt(e),i,e.cardinality)}function Ilt(t,e){let r=B9(e);return()=>t.parser.action(r,e)}function Nlt(t,e){let r=e.rule.ref;if(K6(r)){let i=t.subrule++,n=r.fragment,a=e.arguments.length>0?Dlt(r,e.arguments):()=>({});return s=>t.parser.subrule(i,Wlt(t,r),n,e,a(s))}if(e8(r)){let i=t.consume++,n=Ylt(t,r.name);return()=>t.parser.consume(i,n,e)}if(!r)throw new S6(e.$cstNode,`Undefined rule: ${e.rule.$refText}`);_6()}function Dlt(t,e){let r=e.map((t=>Mlt(t.value)));return e=>{let i={};for(let n=0;n<r.length;n++){let a=t.parameters[n],s=r[n];i[a.name]=s(e)}return i}}function Mlt(t){if(z6(t)){let e=Mlt(t.left),r=Mlt(t.right);return t=>e(t)||r(t)}if(F6(t)){let e=Mlt(t.left),r=Mlt(t.right);return t=>e(t)&&r(t)}if(G6(t)){let e=Mlt(t.value);return t=>!e(t)}if(X6(t)){let e=t.parameter.ref.name;return t=>void 0!==t&&!0===t[e]}if(B6(t)){let e=!!t.true;return()=>e}_6()}function Olt(t,e){if(1===e.elements.length)return Rlt(t,e.elements[0]);{let r=[];for(let i of e.elements){let e={ALT:Rlt(t,i,!0)},n=Flt(i);n&&(e.GATE=Mlt(n)),r.push(e)}let i=t.or++;return e=>t.parser.alternatives(i,r.map((t=>{let r={ALT:g((()=>t.ALT(e)),"ALT")},i=t.GATE;return i&&(r.GATE=()=>i(e)),r})))}}function Plt(t,e){if(1===e.elements.length)return Rlt(t,e.elements[0]);let r=[];for(let i of e.elements){let e={ALT:Rlt(t,i,!0)},n=Flt(i);n&&(e.GATE=Mlt(n)),r.push(e)}let i=t.or++,n=g(((t,e)=>`uGroup_${t}_${e.getRuleStack().join("-")}`),"idFunc"),a=g((e=>t.parser.alternatives(i,r.map(((r,a)=>{let s={ALT:g((()=>!0),"ALT")},o=t.parser;s.ALT=()=>{if(r.ALT(e),!o.isRecording()){let t=n(i,o);o.unorderedGroups.get(t)||o.unorderedGroups.set(t,[]);let e=o.unorderedGroups.get(t);typeof e?.[a]>"u"&&(e[a]=!0)}};let l=r.GATE;return s.GATE=l?()=>l(e):()=>{let t=o.unorderedGroups.get(n(i,o));return!t?.[a]},s})))),"alternatives"),s=Ult(t,Flt(e),a,"*");return e=>{s(e),t.parser.isRecording()||t.parser.unorderedGroups.delete(n(i,t.parser))}}function Blt(t,e){let r=e.elements.map((e=>Rlt(t,e)));return t=>r.forEach((e=>e(t)))}function Flt(t){if(u8(t))return t.guardCondition}function zlt(t,e,r=e.terminal){if(r){if(g8(r)&&K6(r.rule.ref)){let i=r.rule.ref,n=t.subrule++;return r=>t.parser.subrule(n,Wlt(t,i),!1,e,r)}if(g8(r)&&e8(r.rule.ref)){let i=t.consume++,n=Ylt(t,r.rule.ref.name);return()=>t.parser.consume(i,n,e)}if(d8(r)){let i=t.consume++,n=Ylt(t,r.value);return()=>t.parser.consume(i,n,e)}throw new Error("Could not build cross reference parser")}{if(!e.type.ref)throw new Error("Could not resolve reference to type: "+e.type.$refText);let r=E9(e.type.ref),i=r?.terminal;if(!i)throw new Error("Could not find name assignment for type: "+B9(e.type.ref));return zlt(t,e,i)}}function jlt(t,e){let r=t.consume++,i=t.tokens[e.value];if(!i)throw new Error("Could not find token for keyword: "+e.value);return()=>t.parser.consume(r,i,e)}function Ult(t,e,r,i){let n=e&&Mlt(e);if(!i){if(n){let e=t.or++;return i=>t.parser.alternatives(e,[{ALT:g((()=>r(i)),"ALT"),GATE:g((()=>n(i)),"GATE")},{ALT:iat(),GATE:g((()=>!n(i)),"GATE")}])}return r}if("*"===i){let e=t.many++;return i=>t.parser.many(e,{DEF:g((()=>r(i)),"DEF"),GATE:n?()=>n(i):void 0})}if("+"===i){let e=t.many++;if(n){let i=t.or++;return a=>t.parser.alternatives(i,[{ALT:g((()=>t.parser.atLeastOne(e,{DEF:g((()=>r(a)),"DEF")})),"ALT"),GATE:g((()=>n(a)),"GATE")},{ALT:iat(),GATE:g((()=>!n(a)),"GATE")}])}return i=>t.parser.atLeastOne(e,{DEF:g((()=>r(i)),"DEF")})}if("?"===i){let e=t.optional++;return i=>t.parser.optional(e,{DEF:g((()=>r(i)),"DEF"),GATE:n?()=>n(i):void 0})}_6()}function Wlt(t,e){let r=qlt(t,e),i=t.parser.getRule(r);if(!i)throw new Error(`Rule "${r}" not found."`);return i}function qlt(t,e){if(K6(e))return e.name;if(t.ruleNames.has(e))return t.ruleNames.get(e);{let r=e,i=r.$container,n=e.$type;for(;!K6(i);)(u8(i)||s8(i)||b8(i))&&(n=i.elements.indexOf(r).toString()+":"+n),r=i,i=i.$container;return n=i.name+":"+n,t.ruleNames.set(e,n),n}}function Ylt(t,e){let r=t.tokens[e];if(!r)throw new Error(`Token "${e}" not found."`);return r}var Glt=y((()=>{gat(),m7(),C6(),t6(),Z9(),g($lt,"createParser"),g(Llt,"buildRules"),g(Rlt,"buildElement"),g(Ilt,"buildAction"),g(Nlt,"buildRuleCall"),g(Dlt,"buildRuleCallPredicate"),g(Mlt,"buildPredicate"),g(Olt,"buildAlternatives"),g(Plt,"buildUnorderedGroup"),g(Blt,"buildGroup"),g(Flt,"getGuardCondition"),g(zlt,"buildCrossReference"),g(jlt,"buildKeyword"),g(Ult,"wrap"),g(Wlt,"getRule"),g(qlt,"getRuleName"),g(Ylt,"getToken")}));function Hlt(t){let e=t.Grammar,r=t.parser.Lexer,i=new Slt(t);return $lt(e,i,r.definition),i.finalize(),i}var Vlt=y((()=>{Alt(),Glt(),g(Hlt,"createCompletionParser")}));function Xlt(t){let e=Klt(t);return e.finalize(),e}function Klt(t){let e=t.Grammar,r=t.parser.Lexer;return $lt(e,new Tlt(t),r.definition)}var Qlt,Zlt,Jlt,tct=y((()=>{Alt(),Glt(),g(Xlt,"createLangiumParser"),g(Klt,"prepareLangiumParser")})),ect=y((()=>{gat(),m7(),N7(),Z9(),d9(),t6(),Qlt=class{static{g(this,"DefaultTokenBuilder")}constructor(){this.diagnostics=[]}buildTokens(t,e){let r=V5(y9(t,!1)),i=this.buildTerminalTokens(r),n=this.buildKeywordTokens(r,i,e);return i.forEach((t=>{let e=t.PATTERN;"object"==typeof e&&e&&"test"in e&&r9(e)?n.unshift(t):n.push(t)})),n}flushLexingReport(t){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){let t=[...this.diagnostics];return this.diagnostics=[],t}buildTerminalTokens(t){return t.filter(e8).filter((t=>!t.fragment)).map((t=>this.buildTerminalToken(t))).toArray()}buildTerminalToken(t){let e=U9(t),r=this.requiresCustomPattern(e)?this.regexPatternFunction(e):e,i={name:t.name,PATTERN:r};return"function"==typeof r&&(i.LINE_BREAKS=!0),t.hidden&&(i.GROUP=r9(e)?frt.SKIPPED:"hidden"),i}requiresCustomPattern(t){return!(!t.flags.includes("u")&&!t.flags.includes("s"))||!(!t.source.includes("?<=")&&!t.source.includes("?<!"))}regexPatternFunction(t){let e=new RegExp(t,t.flags+"y");return(t,r)=>(e.lastIndex=r,e.exec(t))}buildKeywordTokens(t,e,r){return t.filter(K6).flatMap((t=>S7(t).filter(d8))).distinct((t=>t.value)).toArray().sort(((t,e)=>e.value.length-t.value.length)).map((t=>this.buildKeywordToken(t,e,!!r?.caseInsensitive)))}buildKeywordToken(t,e,r){let i=this.buildKeywordPattern(t,r),n={name:t.value,PATTERN:i,LONGER_ALT:this.findLongerAlt(t,e)};return"function"==typeof i&&(n.LINE_BREAKS=!0),n}buildKeywordPattern(t,e){return e?new RegExp(n9(t.value)):t.value}findLongerAlt(t,e){return e.reduce(((e,r)=>{let i=r?.PATTERN;return i?.source&&a9("^"+i.source+"$",t.value)&&e.push(r),e}),[])}}})),rct=y((()=>{m7(),Z9(),Zlt=class{static{g(this,"DefaultValueConverter")}convert(t,e){let r=e.grammarSource;if(c8(r)&&(r=x9(r)),g8(r)){let i=r.rule.ref;if(!i)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(i,t,e)}return t}runConverter(t,e,r){var i;switch(t.name.toUpperCase()){case"INT":return Jlt.convertInt(e);case"STRING":return Jlt.convertString(e);case"ID":return Jlt.convertID(e)}switch(null===(i=j9(t))||void 0===i?void 0:i.toLowerCase()){case"number":return Jlt.convertNumber(e);case"boolean":return Jlt.convertBoolean(e);case"bigint":return Jlt.convertBigint(e);case"date":return Jlt.convertDate(e);default:return e}}},function(t){function e(t){let e="";for(let i=1;i<t.length-1;i++){let n=t.charAt(i);if("\\"===n){e+=r(t.charAt(++i))}else e+=n}return e}function r(t){switch(t){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"0":return"\0";default:return t}}function i(t){return"^"===t.charAt(0)?t.substring(1):t}function n(t){return parseInt(t)}function a(t){return BigInt(t)}function s(t){return new Date(t)}function o(t){return Number(t)}function l(t){return"true"===t.toLowerCase()}g(e,"convertString"),t.convertString=e,g(r,"convertEscapeCharacter"),g(i,"convertID"),t.convertID=i,g(n,"convertInt"),t.convertInt=n,g(a,"convertBigint"),t.convertBigint=a,g(s,"convertDate"),t.convertDate=s,g(o,"convertNumber"),t.convertNumber=o,g(l,"convertBoolean"),t.convertBoolean=l}(Jlt||(Jlt={}))})),ict=m((t=>{var e;function r(){if(void 0===e)throw new Error("No runtime abstraction layer installed");return e}Object.defineProperty(t,"__esModule",{value:!0}),g(r,"RAL"),function(t){function r(t){if(void 0===t)throw new Error("No runtime abstraction layer provided");e=t}g(r,"install"),t.install=r}(r||(r={})),t.default=r})),nct=m((t=>{function e(t){return!0===t||!1===t}function r(t){return"string"==typeof t||t instanceof String}function i(t){return"number"==typeof t||t instanceof Number}function n(t){return t instanceof Error}function a(t){return"function"==typeof t}function s(t){return Array.isArray(t)}function o(t){return s(t)&&t.every((t=>r(t)))}Object.defineProperty(t,"__esModule",{value:!0}),t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0,g(e,"boolean"),t.boolean=e,g(r,"string"),t.string=r,g(i,"number"),t.number=i,g(n,"error"),t.error=n,g(a,"func"),t.func=a,g(s,"array"),t.array=s,g(o,"stringArray"),t.stringArray=o})),act=m((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Emitter=t.Event=void 0;var e,r=ict();!function(t){let e={dispose(){}};t.None=function(){return e}}(e||(t.Event=e={}));var i=class{static{g(this,"CallbackList")}add(t,e=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(t),this._contexts.push(e),Array.isArray(r)&&r.push({dispose:g((()=>this.remove(t,e)),"dispose")})}remove(t,e=null){if(!this._callbacks)return;let r=!1;for(let i=0,n=this._callbacks.length;i<n;i++)if(this._callbacks[i]===t){if(this._contexts[i]===e)return this._callbacks.splice(i,1),void this._contexts.splice(i,1);r=!0}if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...t){if(!this._callbacks)return[];let e=[],i=this._callbacks.slice(0),n=this._contexts.slice(0);for(let a=0,s=i.length;a<s;a++)try{e.push(i[a].apply(n[a],t))}catch(t){(0,r.default)().console.error(t)}return e}isEmpty(){return!this._callbacks||0===this._callbacks.length}dispose(){this._callbacks=void 0,this._contexts=void 0}},n=class t{static{g(this,"Emitter")}constructor(t){this._options=t}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new i),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let a={dispose:g((()=>{this._callbacks&&(this._callbacks.remove(e,r),a.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}),"dispose")};return Array.isArray(n)&&n.push(a),a}),this._event}fire(t){this._callbacks&&this._callbacks.invoke.call(this._callbacks,t)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};t.Emitter=n,n._noop=function(){}})),sct=m((t=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=t.CancellationToken=void 0;var e,r=ict(),i=nct(),n=act();!function(t){function e(e){let r=e;return r&&(r===t.None||r===t.Cancelled||i.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:n.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:n.Event.None}),g(e,"is"),t.is=e}(e||(t.CancellationToken=e={}));var a=Object.freeze((function(t,e){let i=(0,r.default)().timer.setTimeout(t.bind(e),0);return{dispose(){i.dispose()}}})),s=class{static{g(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?a:(this._emitter||(this._emitter=new n.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},o=class{static{g(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=e.Cancelled}dispose(){this._token?this._token instanceof s&&this._token.dispose():this._token=e.None}};t.CancellationTokenSource=o})),oct={},lct=y((()=>{k(oct,v(sct(),1))}));function cct(){return new Promise((t=>{typeof setImmediate>"u"?setTimeout(t,0):setImmediate(t)}))}function hct(){return fct=performance.now(),new oct.CancellationTokenSource}function uct(t){gct=t}function dct(t){return t===yct}async function pct(t){if(t===oct.CancellationToken.None)return;let e=performance.now();if(e-fct>=gct&&(fct=e,await cct(),fct=performance.now()),t.isCancellationRequested)throw yct}var fct,gct,yct,mct,xct=y((()=>{lct(),g(cct,"delayNextTick"),fct=0,gct=10,g(hct,"startCancelableOperation"),g(uct,"setInterruptionPeriod"),yct=Symbol("OperationCancelled"),g(dct,"isOperationCancelled"),g(pct,"interruptAndCheck"),mct=class{static{g(this,"Deferred")}constructor(){this.promise=new Promise(((t,e)=>{this.resolve=e=>(t(e),this),this.reject=t=>(e(t),this)}))}}}));function bct(t,e){if(t.length<=1)return t;let r=t.length/2|0,i=t.slice(0,r),n=t.slice(r);bct(i,e),bct(n,e);let a=0,s=0,o=0;for(;a<i.length&&s<n.length;)e(i[a],n[s])<=0?t[o++]=i[a++]:t[o++]=n[s++];for(;a<i.length;)t[o++]=i[a++];for(;s<n.length;)t[o++]=n[s++];return t}function kct(t,e,r=0){let i=e?[r]:[];for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);vct(n)&&(13===n&&e+1<t.length&&10===t.charCodeAt(e+1)&&e++,i.push(r+e+1))}return i}function vct(t){return 13===t||10===t}function Tct(t){let e=t.start,r=t.end;return e.line>r.line||e.line===r.line&&e.character>r.character?{start:r,end:e}:t}function wct(t){let e=Tct(t.range);return e!==t.range?{newText:t.newText,range:e}:t}var _ct,Sct,Cct,Ect,Act,$ct,Lct,Rct,Ict,Nct,Dct,Mct=y((()=>{_ct=class t{static{g(this,"FullTextDocument")}constructor(t,e,r,i){this._uri=t,this._languageId=e,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(t){if(t){let e=this.offsetAt(t.start),r=this.offsetAt(t.end);return this._content.substring(e,r)}return this._content}update(e,r){for(let r of e)if(t.isIncremental(r)){let t=Tct(r.range),e=this.offsetAt(t.start),i=this.offsetAt(t.end);this._content=this._content.substring(0,e)+r.text+this._content.substring(i,this._content.length);let n=Math.max(t.start.line,0),a=Math.max(t.end.line,0),s=this._lineOffsets,o=kct(r.text,!1,e);if(a-n===o.length)for(let t=0,e=o.length;t<e;t++)s[t+n+1]=o[t];else o.length<1e4?s.splice(n+1,a-n,...o):this._lineOffsets=s=s.slice(0,n+1).concat(o,s.slice(a+1));let l=r.text.length-(i-e);if(0!==l)for(let t=n+1+o.length,e=s.length;t<e;t++)s[t]=s[t]+l}else{if(!t.isFull(r))throw new Error("Unknown change event received");this._content=r.text,this._lineOffsets=void 0}this._version=r}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=kct(this._content,!0)),this._lineOffsets}positionAt(t){t=Math.max(Math.min(t,this._content.length),0);let e=this.getLineOffsets(),r=0,i=e.length;if(0===i)return{line:0,character:t};for(;r<i;){let n=Math.floor((r+i)/2);e[n]>t?i=n:r=n+1}let n=r-1;return{line:n,character:(t=this.ensureBeforeEOL(t,e[n]))-e[n]}}offsetAt(t){let e=this.getLineOffsets();if(t.line>=e.length)return this._content.length;if(t.line<0)return 0;let r=e[t.line];if(t.character<=0)return r;let i=t.line+1<e.length?e[t.line+1]:this._content.length,n=Math.min(r+t.character,i);return this.ensureBeforeEOL(n,r)}ensureBeforeEOL(t,e){for(;t>e&&vct(this._content.charCodeAt(t-1));)t--;return t}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){let e=t;return null!=e&&"string"==typeof e.text&&void 0!==e.range&&(void 0===e.rangeLength||"number"==typeof e.rangeLength)}static isFull(t){let e=t;return null!=e&&"string"==typeof e.text&&void 0===e.range&&void 0===e.rangeLength}},function(t){function e(t,e,r,i){return new _ct(t,e,r,i)}function r(t,e,r){if(t instanceof _ct)return t.update(e,r),t;throw new Error("TextDocument.update: document must be created by TextDocument.create")}function i(t,e){let r=t.getText(),i=bct(e.map(wct),((t,e)=>{let r=t.range.start.line-e.range.start.line;return 0===r?t.range.start.character-e.range.start.character:r})),n=0,a=[];for(let e of i){let i=t.offsetAt(e.range.start);if(i<n)throw new Error("Overlapping edit");i>n&&a.push(r.substring(n,i)),e.newText.length&&a.push(e.newText),n=t.offsetAt(e.range.end)}return a.push(r.substr(n)),a.join("")}g(e,"create"),t.create=e,g(r,"update"),t.update=r,g(i,"applyEdits"),t.applyEdits=i}(Sct||(Sct={})),g(bct,"mergeSort"),g(kct,"computeLineOffsets"),g(vct,"isEOL"),g(Tct,"getWellformedRange"),g(wct,"getWellformedEdit")})),Oct=y((()=>{(()=>{var t={470:t=>{function e(t){if("string"!=typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function r(t,e){for(var r,i="",n=0,a=-1,s=0,o=0;o<=t.length;++o){if(o<t.length)r=t.charCodeAt(o);else{if(47===r)break;r=47}if(47===r){if(a!==o-1&&1!==s)if(a!==o-1&&2===s){if(i.length<2||2!==n||46!==i.charCodeAt(i.length-1)||46!==i.charCodeAt(i.length-2))if(i.length>2){var l=i.lastIndexOf("/");if(l!==i.length-1){-1===l?(i="",n=0):n=(i=i.slice(0,l)).length-1-i.lastIndexOf("/"),a=o,s=0;continue}}else if(2===i.length||1===i.length){i="",n=0,a=o,s=0;continue}e&&(i.length>0?i+="/..":i="..",n=2)}else i.length>0?i+="/"+t.slice(a+1,o):i=t.slice(a+1,o),n=o-a-1;a=o,s=0}else 46===r&&-1!==s?++s:s=-1}return i}g(e,"e"),g(r,"r");var i={resolve:g((function(){for(var t,i="",n=!1,a=arguments.length-1;a>=-1&&!n;a--){var s;a>=0?s=arguments[a]:(void 0===t&&(t=process.cwd()),s=t),e(s),0!==s.length&&(i=s+"/"+i,n=47===s.charCodeAt(0))}return i=r(i,!n),n?i.length>0?"/"+i:"/":i.length>0?i:"."}),"resolve"),normalize:g((function(t){if(e(t),0===t.length)return".";var i=47===t.charCodeAt(0),n=47===t.charCodeAt(t.length-1);return 0!==(t=r(t,!i)).length||i||(t="."),t.length>0&&n&&(t+="/"),i?"/"+t:t}),"normalize"),isAbsolute:g((function(t){return e(t),t.length>0&&47===t.charCodeAt(0)}),"isAbsolute"),join:g((function(){if(0===arguments.length)return".";for(var t,r=0;r<arguments.length;++r){var n=arguments[r];e(n),n.length>0&&(void 0===t?t=n:t+="/"+n)}return void 0===t?".":i.normalize(t)}),"join"),relative:g((function(t,r){if(e(t),e(r),t===r||(t=i.resolve(t))===(r=i.resolve(r)))return"";for(var n=1;n<t.length&&47===t.charCodeAt(n);++n);for(var a=t.length,s=a-n,o=1;o<r.length&&47===r.charCodeAt(o);++o);for(var l=r.length-o,c=s<l?s:l,h=-1,u=0;u<=c;++u){if(u===c){if(l>c){if(47===r.charCodeAt(o+u))return r.slice(o+u+1);if(0===u)return r.slice(o+u)}else s>c&&(47===t.charCodeAt(n+u)?h=u:0===u&&(h=0));break}var d=t.charCodeAt(n+u);if(d!==r.charCodeAt(o+u))break;47===d&&(h=u)}var p="";for(u=n+h+1;u<=a;++u)u!==a&&47!==t.charCodeAt(u)||(0===p.length?p+="..":p+="/..");return p.length>0?p+r.slice(o+h):(o+=h,47===r.charCodeAt(o)&&++o,r.slice(o))}),"relative"),_makeLong:g((function(t){return t}),"_makeLong"),dirname:g((function(t){if(e(t),0===t.length)return".";for(var r=t.charCodeAt(0),i=47===r,n=-1,a=!0,s=t.length-1;s>=1;--s)if(47===(r=t.charCodeAt(s))){if(!a){n=s;break}}else a=!1;return-1===n?i?"/":".":i&&1===n?"//":t.slice(0,n)}),"dirname"),basename:g((function(t,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');e(t);var i,n=0,a=-1,s=!0;if(void 0!==r&&r.length>0&&r.length<=t.length){if(r.length===t.length&&r===t)return"";var o=r.length-1,l=-1;for(i=t.length-1;i>=0;--i){var c=t.charCodeAt(i);if(47===c){if(!s){n=i+1;break}}else-1===l&&(s=!1,l=i+1),o>=0&&(c===r.charCodeAt(o)?-1==--o&&(a=i):(o=-1,a=l))}return n===a?a=l:-1===a&&(a=t.length),t.slice(n,a)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!s){n=i+1;break}}else-1===a&&(s=!1,a=i+1);return-1===a?"":t.slice(n,a)}),"basename"),extname:g((function(t){e(t);for(var r=-1,i=0,n=-1,a=!0,s=0,o=t.length-1;o>=0;--o){var l=t.charCodeAt(o);if(47!==l)-1===n&&(a=!1,n=o+1),46===l?-1===r?r=o:1!==s&&(s=1):-1!==r&&(s=-1);else if(!a){i=o+1;break}}return-1===r||-1===n||0===s||1===s&&r===n-1&&r===i+1?"":t.slice(r,n)}),"extname"),format:g((function(t){if(null===t||"object"!=typeof t)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return r=(e=t).dir||e.root,i=e.base||(e.name||"")+(e.ext||""),r?r===e.root?r+i:r+"/"+i:i;var e,r,i}),"format"),parse:g((function(t){e(t);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return r;var i,n=t.charCodeAt(0),a=47===n;a?(r.root="/",i=1):i=0;for(var s=-1,o=0,l=-1,c=!0,h=t.length-1,u=0;h>=i;--h)if(47!==(n=t.charCodeAt(h)))-1===l&&(c=!1,l=h+1),46===n?-1===s?s=h:1!==u&&(u=1):-1!==s&&(u=-1);else if(!c){o=h+1;break}return-1===s||-1===l||0===u||1===u&&s===l-1&&s===o+1?-1!==l&&(r.base=r.name=0===o&&a?t.slice(1,l):t.slice(o,l)):(0===o&&a?(r.name=t.slice(1,s),r.base=t.slice(1,l)):(r.name=t.slice(o,s),r.base=t.slice(o,l)),r.ext=t.slice(s,l)),o>0?r.dir=t.slice(0,o-1):a&&(r.dir="/"),r}),"parse"),sep:"/",delimiter:":",win32:null,posix:null};i.posix=i,t.exports=i}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}g(r,"r"),r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{let t;r.r(i),r.d(i,{URI:g((()=>h),"URI"),Utils:g((()=>S),"Utils")}),"object"==typeof process?t="win32"===process.platform:"object"==typeof navigator&&(t=navigator.userAgent.indexOf("Windows")>=0);let e=/^\w[\w\d+.-]*$/,n=/^\//,a=/^\/\//;function s(t,r){if(!t.scheme&&r)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!e.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path)if(t.authority){if(!n.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(a.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}g(s,"s");let o="",l="/",c=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{static{g(this,"f")}static isUri(t){return t instanceof h||!!t&&"string"==typeof t.authority&&"string"==typeof t.fragment&&"string"==typeof t.path&&"string"==typeof t.query&&"string"==typeof t.scheme&&"string"==typeof t.fsPath&&"function"==typeof t.with&&"function"==typeof t.toString}scheme;authority;path;query;fragment;constructor(t,e,r,i,n,a=!1){var c,h;"object"==typeof t?(this.scheme=t.scheme||o,this.authority=t.authority||o,this.path=t.path||o,this.query=t.query||o,this.fragment=t.fragment||o):(this.scheme=(h=a,(c=t)||h?c:"file"),this.authority=e||o,this.path=function(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==l&&(e=l+e):e=l}return e}(this.scheme,r||o),this.query=i||o,this.fragment=n||o,s(this,a))}get fsPath(){return m(this,!1)}with(t){if(!t)return this;let{scheme:e,authority:r,path:i,query:n,fragment:a}=t;return void 0===e?e=this.scheme:null===e&&(e=o),void 0===r?r=this.authority:null===r&&(r=o),void 0===i?i=this.path:null===i&&(i=o),void 0===n?n=this.query:null===n&&(n=o),void 0===a?a=this.fragment:null===a&&(a=o),e===this.scheme&&r===this.authority&&i===this.path&&n===this.query&&a===this.fragment?this:new d(e,r,i,n,a)}static parse(t,e=!1){let r=c.exec(t);return r?new d(r[2]||o,v(r[4]||o),v(r[5]||o),v(r[7]||o),v(r[9]||o),e):new d(o,o,o,o,o)}static file(e){let r=o;if(t&&(e=e.replace(/\\/g,l)),e[0]===l&&e[1]===l){let t=e.indexOf(l,2);-1===t?(r=e.substring(2),e=l):(r=e.substring(2,t),e=e.substring(t)||l)}return new d("file",r,e,o,o)}static from(t){let e=new d(t.scheme,t.authority,t.path,t.query,t.fragment);return s(e,!0),e}toString(t=!1){return x(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof h)return t;{let e=new d(t);return e._formatted=t.external,e._fsPath=t._sep===u?t.fsPath:null,e}}return t}}let u=t?1:void 0;class d extends h{static{g(this,"l")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=m(this,!1)),this._fsPath}toString(t=!1){return t?x(this,!0):(this._formatted||(this._formatted=x(this,!1)),this._formatted)}toJSON(){let t={$mid:1};return this._fsPath&&(t.fsPath=this._fsPath,t._sep=u),this._formatted&&(t.external=this._formatted),this.path&&(t.path=this.path),this.scheme&&(t.scheme=this.scheme),this.authority&&(t.authority=this.authority),this.query&&(t.query=this.query),this.fragment&&(t.fragment=this.fragment),t}}let p={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function f(t,e,r){let i,n=-1;for(let a=0;a<t.length;a++){let s=t.charCodeAt(a);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||45===s||46===s||95===s||126===s||e&&47===s||r&&91===s||r&&93===s||r&&58===s)-1!==n&&(i+=encodeURIComponent(t.substring(n,a)),n=-1),void 0!==i&&(i+=t.charAt(a));else{void 0===i&&(i=t.substr(0,a));let e=p[s];void 0!==e?(-1!==n&&(i+=encodeURIComponent(t.substring(n,a)),n=-1),i+=e):-1===n&&(n=a)}}return-1!==n&&(i+=encodeURIComponent(t.substring(n))),void 0!==i?i:t}function y(t){let e;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);35===i||63===i?(void 0===e&&(e=t.substr(0,r)),e+=p[i]):void 0!==e&&(e+=t[r])}return void 0!==e?e:t}function m(e,r){let i;return i=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?r?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,t&&(i=i.replace(/\//g,"\\")),i}function x(t,e){let r=e?y:f,i="",{scheme:n,authority:a,path:s,query:o,fragment:c}=t;if(n&&(i+=n,i+=":"),(a||"file"===n)&&(i+=l,i+=l),a){let t=a.indexOf("@");if(-1!==t){let e=a.substr(0,t);a=a.substr(t+1),t=e.lastIndexOf(":"),-1===t?i+=r(e,!1,!1):(i+=r(e.substr(0,t),!1,!1),i+=":",i+=r(e.substr(t+1),!1,!0)),i+="@"}a=a.toLowerCase(),t=a.lastIndexOf(":"),-1===t?i+=r(a,!1,!0):(i+=r(a.substr(0,t),!1,!0),i+=a.substr(t))}if(s){if(s.length>=3&&47===s.charCodeAt(0)&&58===s.charCodeAt(2)){let t=s.charCodeAt(1);t>=65&&t<=90&&(s=`/${String.fromCharCode(t+32)}:${s.substr(3)}`)}else if(s.length>=2&&58===s.charCodeAt(1)){let t=s.charCodeAt(0);t>=65&&t<=90&&(s=`${String.fromCharCode(t+32)}:${s.substr(2)}`)}i+=r(s,!0,!1)}return o&&(i+="?",i+=r(o,!1,!1)),c&&(i+="#",i+=e?c:f(c,!1,!1)),i}function b(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+b(t.substr(3)):t}}g(f,"d"),g(y,"p"),g(m,"m"),g(x,"y"),g(b,"v");let k=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function v(t){return t.match(k)?t.replace(k,(t=>b(t))):t}g(v,"C");var T=r(470);let w=T.posix||T,_="/";var S,C;(C=S||(S={})).joinPath=function(t,...e){return t.with({path:w.join(t.path,...e)})},C.resolvePath=function(t,...e){let r=t.path,i=!1;r[0]!==_&&(r=_+r,i=!0);let n=w.resolve(r,...e);return i&&n[0]===_&&!t.authority&&(n=n.substring(1)),t.with({path:n})},C.dirname=function(t){if(0===t.path.length||t.path===_)return t;let e=w.dirname(t.path);return 1===e.length&&46===e.charCodeAt(0)&&(e=""),t.with({path:e})},C.basename=function(t){return w.basename(t.path)},C.extname=function(t){return w.extname(t.path)}})(),Cct=i})(),({URI:Ect,Utils:Act}=Cct)})),Pct=y((()=>{Oct(),function(t){function e(t,e){return t?.toString()===e?.toString()}function r(t,e){let r="string"==typeof t?t:t.path,i="string"==typeof e?e:e.path,n=r.split("/").filter((t=>t.length>0)),a=i.split("/").filter((t=>t.length>0)),s=0;for(;s<n.length&&n[s]===a[s];s++);return"../".repeat(n.length-s)+a.slice(s).join("/")}function i(t){return Ect.parse(t.toString()).toString()}t.basename=Act.basename,t.dirname=Act.dirname,t.extname=Act.extname,t.joinPath=Act.joinPath,t.resolvePath=Act.resolvePath,g(e,"equals"),t.equals=e,g(r,"relative"),t.relative=r,g(i,"normalize"),t.normalize=i}($ct||($ct={}))})),Bct=y((()=>{var t;Mct(),Bct(),lct(),t6(),Pct(),(t=Lct||(Lct={}))[t.Changed=0]="Changed",t[t.Parsed=1]="Parsed",t[t.IndexedContent=2]="IndexedContent",t[t.ComputedScopes=3]="ComputedScopes",t[t.Linked=4]="Linked",t[t.IndexedReferences=5]="IndexedReferences",t[t.Validated=6]="Validated",Rct=class{static{g(this,"DefaultLangiumDocumentFactory")}constructor(t){this.serviceRegistry=t.ServiceRegistry,this.textDocuments=t.workspace.TextDocuments,this.fileSystemProvider=t.workspace.FileSystemProvider}async fromUri(t,e=oct.CancellationToken.None){let r=await this.fileSystemProvider.readFile(t);return this.createAsync(t,r,e)}fromTextDocument(t,e,r){return e=e??Ect.parse(t.uri),oct.CancellationToken.is(r)?this.createAsync(e,t,r):this.create(e,t,r)}fromString(t,e,r){return oct.CancellationToken.is(r)?this.createAsync(e,t,r):this.create(e,t,r)}fromModel(t,e){return this.create(e,{$model:t})}create(t,e,r){if("string"==typeof e){let i=this.parse(t,e,r);return this.createLangiumDocument(i,t,void 0,e)}if("$model"in e){let r={value:e.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(r,t)}{let i=this.parse(t,e.getText(),r);return this.createLangiumDocument(i,t,e)}}async createAsync(t,e,r){if("string"==typeof e){let i=await this.parseAsync(t,e,r);return this.createLangiumDocument(i,t,void 0,e)}{let i=await this.parseAsync(t,e.getText(),r);return this.createLangiumDocument(i,t,e)}}createLangiumDocument(t,e,r,i){let n;if(r)n={parseResult:t,uri:e,state:Lct.Parsed,references:[],textDocument:r};else{let r=this.createTextDocumentGetter(e,i);n={parseResult:t,uri:e,state:Lct.Parsed,references:[],get textDocument(){return r()}}}return t.value.$document=n,n}async update(t,e){var r,i;let n=null===(r=t.parseResult.value.$cstNode)||void 0===r?void 0:r.root.fullText,a=null===(i=this.textDocuments)||void 0===i?void 0:i.get(t.uri.toString()),s=a?a.getText():await this.fileSystemProvider.readFile(t.uri);if(a)Object.defineProperty(t,"textDocument",{value:a});else{let e=this.createTextDocumentGetter(t.uri,s);Object.defineProperty(t,"textDocument",{get:e})}return n!==s&&(t.parseResult=await this.parseAsync(t.uri,s,e),t.parseResult.value.$document=t),t.state=Lct.Parsed,t}parse(t,e,r){return this.serviceRegistry.getServices(t).parser.LangiumParser.parse(e,r)}parseAsync(t,e,r){return this.serviceRegistry.getServices(t).parser.AsyncParser.parse(e,r)}createTextDocumentGetter(t,e){let r,i=this.serviceRegistry;return()=>r??(r=Sct.create(t.toString(),i.getServices(t).LanguageMetaData.languageId,0,e??""))}},Ict=class{static{g(this,"DefaultLangiumDocuments")}constructor(t){this.documentMap=new Map,this.langiumDocumentFactory=t.workspace.LangiumDocumentFactory,this.serviceRegistry=t.ServiceRegistry}get all(){return V5(this.documentMap.values())}addDocument(t){let e=t.uri.toString();if(this.documentMap.has(e))throw new Error(`A document with the URI '${e}' is already present.`);this.documentMap.set(e,t)}getDocument(t){let e=t.toString();return this.documentMap.get(e)}async getOrCreateDocument(t,e){let r=this.getDocument(t);return r||(r=await this.langiumDocumentFactory.fromUri(t,e),this.addDocument(r),r)}createDocument(t,e,r){if(r)return this.langiumDocumentFactory.fromString(e,t,r).then((t=>(this.addDocument(t),t)));{let r=this.langiumDocumentFactory.fromString(e,t);return this.addDocument(r),r}}hasDocument(t){return this.documentMap.has(t.toString())}invalidateDocument(t){let e=t.toString(),r=this.documentMap.get(e);return r&&(this.serviceRegistry.getServices(t).references.Linker.unlink(r),r.state=Lct.Changed,r.precomputedScopes=void 0,r.diagnostics=void 0),r}deleteDocument(t){let e=t.toString(),r=this.documentMap.get(e);return r&&(r.state=Lct.Changed,this.documentMap.delete(e)),r}}})),Fct=y((()=>{lct(),Y5(),N7(),xct(),Bct(),Nct=Symbol("ref_resolving"),Dct=class{static{g(this,"DefaultLinker")}constructor(t){this.reflection=t.shared.AstReflection,this.langiumDocuments=()=>t.shared.workspace.LangiumDocuments,this.scopeProvider=t.references.ScopeProvider,this.astNodeLocator=t.workspace.AstNodeLocator}async link(t,e=oct.CancellationToken.None){for(let r of C7(t.parseResult.value))await pct(e),A7(r).forEach((e=>this.doLink(e,t)))}doLink(t,e){var r;let i=t.reference;if(void 0===i._ref){i._ref=Nct;try{let e=this.getCandidate(t);if(z5(e))i._ref=e;else if(i._nodeDescription=e,this.langiumDocuments().hasDocument(e.documentUri)){let r=this.loadAstNode(e);i._ref=r??this.createLinkingError(t,e)}else i._ref=void 0}catch(e){console.error(`An error occurred while resolving reference to '${i.$refText}':`,e);let n=null!==(r=e.message)&&void 0!==r?r:String(e);i._ref=Object.assign(Object.assign({},t),{message:`An error occurred while resolving reference to '${i.$refText}': ${n}`})}e.references.push(i)}}unlink(t){for(let e of t.references)delete e._ref,delete e._nodeDescription;t.references=[]}getCandidate(t){return this.scopeProvider.getScope(t).getElement(t.reference.$refText)??this.createLinkingError(t)}buildReference(t,e,r,i){let n=this,a={$refNode:r,$refText:i,get ref(){var r;if(P5(this._ref))return this._ref;if(F5(this._nodeDescription)){let r=n.loadAstNode(this._nodeDescription);this._ref=r??n.createLinkingError({reference:a,container:t,property:e},this._nodeDescription)}else if(void 0===this._ref){this._ref=Nct;let i=w7(t).$document,s=n.getLinkedNode({reference:a,container:t,property:e});if(s.error&&i&&i.state<Lct.ComputedScopes)return this._ref=void 0;this._ref=null!==(r=s.node)&&void 0!==r?r:s.error,this._nodeDescription=s.descr,i?.references.push(this)}else if(this._ref===Nct)throw new Error(`Cyclic reference resolution detected: ${n.astNodeLocator.getAstNodePath(t)}/${e} (symbol '${i}')`);return P5(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return z5(this._ref)?this._ref:void 0}};return a}getLinkedNode(t){var e;try{let e=this.getCandidate(t);if(z5(e))return{error:e};let r=this.loadAstNode(e);return r?{node:r,descr:e}:{descr:e,error:this.createLinkingError(t,e)}}catch(r){console.error(`An error occurred while resolving reference to '${t.reference.$refText}':`,r);let i=null!==(e=r.message)&&void 0!==e?e:String(r);return{error:Object.assign(Object.assign({},t),{message:`An error occurred while resolving reference to '${t.reference.$refText}': ${i}`})}}}loadAstNode(t){if(t.node)return t.node;let e=this.langiumDocuments().getDocument(t.documentUri);return e?this.astNodeLocator.getAstNode(e.parseResult.value,t.path):void 0}createLinkingError(t,e){let r=w7(t.container).$document;r&&r.state<Lct.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${r.uri}).`);let i=this.reflection.getReferenceType(t);return Object.assign(Object.assign({},t),{message:`Could not resolve reference to ${i} named '${t.reference.$refText}'.`,targetDescription:e})}}}));function zct(t){return"string"==typeof t.name}var jct,Uct,Wct,qct,Yct,Gct,Hct,Vct,Xct,Kct,Qct,Zct,Jct,tht,eht=y((()=>{Z9(),g(zct,"isNamed"),jct=class{static{g(this,"DefaultNameProvider")}getName(t){if(zct(t))return t.name}getNameNode(t){return v9(t.$cstNode,"name")}}})),rht=y((()=>{Z9(),Y5(),N7(),w6(),t6(),Pct(),Uct=class{static{g(this,"DefaultReferences")}constructor(t){this.nameProvider=t.references.NameProvider,this.index=t.shared.workspace.IndexManager,this.nodeLocator=t.workspace.AstNodeLocator}findDeclaration(t){if(t){let e=C9(t),r=t.astNode;if(e&&r){let i=r[e.feature];if(B5(i))return i.ref;if(Array.isArray(i))for(let e of i)if(B5(e)&&e.$refNode&&e.$refNode.offset<=t.offset&&e.$refNode.end>=t.end)return e.ref}if(r){let e=this.nameProvider.getNameNode(r);if(e&&(e===t||n6(t,e)))return r}}}findDeclarationNode(t){let e=this.findDeclaration(t);if(e?.$cstNode){return this.nameProvider.getNameNode(e)??e.$cstNode}}findReferences(t,e){let r=[];if(e.includeDeclaration){let e=this.getReferenceToSelf(t);e&&r.push(e)}let i=this.index.findAllReferences(t,this.nodeLocator.getAstNodePath(t));return e.documentUri&&(i=i.filter((t=>$ct.equals(t.sourceUri,e.documentUri)))),r.push(...i),V5(r)}getReferenceToSelf(t){let e=this.nameProvider.getNameNode(t);if(e){let r=T7(t),i=this.nodeLocator.getAstNodePath(t);return{sourceUri:r.uri,sourcePath:i,targetUri:r.uri,targetPath:i,segment:s6(e),local:!0}}}}})),iht=y((()=>{t6(),Wct=class{static{g(this,"MultiMap")}constructor(t){if(this.map=new Map,t)for(let[e,r]of t)this.add(e,r)}get size(){return J5.sum(V5(this.map.values()).map((t=>t.length)))}clear(){this.map.clear()}delete(t,e){if(void 0===e)return this.map.delete(t);{let r=this.map.get(t);if(r){let i=r.indexOf(e);if(i>=0)return 1===r.length?this.map.delete(t):r.splice(i,1),!0}return!1}}get(t){var e;return null!==(e=this.map.get(t))&&void 0!==e?e:[]}has(t,e){if(void 0===e)return this.map.has(t);{let r=this.map.get(t);return!!r&&r.indexOf(e)>=0}}add(t,e){return this.map.has(t)?this.map.get(t).push(e):this.map.set(t,[e]),this}addAll(t,e){return this.map.has(t)?this.map.get(t).push(...e):this.map.set(t,Array.from(e)),this}forEach(t){this.map.forEach(((e,r)=>e.forEach((e=>t(e,r,this)))))}[Symbol.iterator](){return this.entries().iterator()}entries(){return V5(this.map.entries()).flatMap((([t,e])=>e.map((e=>[t,e]))))}keys(){return V5(this.map.keys())}values(){return V5(this.map.values()).flat()}entriesGroupedByKey(){return V5(this.map.entries())}},qct=class{static{g(this,"BiMap")}get size(){return this.map.size}constructor(t){if(this.map=new Map,this.inverse=new Map,t)for(let[e,r]of t)this.set(e,r)}clear(){this.map.clear(),this.inverse.clear()}set(t,e){return this.map.set(t,e),this.inverse.set(e,t),this}get(t){return this.map.get(t)}getKey(t){return this.inverse.get(t)}delete(t){let e=this.map.get(t);return void 0!==e&&(this.map.delete(t),this.inverse.delete(e),!0)}}})),nht=y((()=>{lct(),N7(),iht(),xct(),Yct=class{static{g(this,"DefaultScopeComputation")}constructor(t){this.nameProvider=t.references.NameProvider,this.descriptions=t.workspace.AstNodeDescriptionProvider}async computeExports(t,e=oct.CancellationToken.None){return this.computeExportsForNode(t.parseResult.value,t,void 0,e)}async computeExportsForNode(t,e,r=_7,i=oct.CancellationToken.None){let n=[];this.exportNode(t,n,e);for(let a of r(t))await pct(i),this.exportNode(a,n,e);return n}exportNode(t,e,r){let i=this.nameProvider.getName(t);i&&e.push(this.descriptions.createDescription(t,i,r))}async computeLocalScopes(t,e=oct.CancellationToken.None){let r=t.parseResult.value,i=new Wct;for(let n of S7(r))await pct(e),this.processNode(n,t,i);return i}processNode(t,e,r){let i=t.$container;if(i){let n=this.nameProvider.getName(t);n&&r.add(i,this.descriptions.createDescription(t,n,e))}}}})),aht=y((()=>{t6(),Gct=class{static{g(this,"StreamScope")}constructor(t,e,r){var i;this.elements=t,this.outerScope=e,this.caseInsensitive=null!==(i=r?.caseInsensitive)&&void 0!==i&&i}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(t){let e=this.caseInsensitive?this.elements.find((e=>e.name.toLowerCase()===t.toLowerCase())):this.elements.find((e=>e.name===t));return e||(this.outerScope?this.outerScope.getElement(t):void 0)}},Hct=class{static{g(this,"MapScope")}constructor(t,e,r){var i;this.elements=new Map,this.caseInsensitive=null!==(i=r?.caseInsensitive)&&void 0!==i&&i;for(let e of t){let t=this.caseInsensitive?e.name.toLowerCase():e.name;this.elements.set(t,e)}this.outerScope=e}getElement(t){let e=this.caseInsensitive?t.toLowerCase():t,r=this.elements.get(e);return r||(this.outerScope?this.outerScope.getElement(t):void 0)}getAllElements(){let t=V5(this.elements.values());return this.outerScope&&(t=t.concat(this.outerScope.getAllElements())),t}},Vct={getElement(){},getAllElements:()=>K5}})),sht=y((()=>{Xct=class{static{g(this,"DisposableCache")}constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(t){this.toDispose.push(t)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach((t=>t.dispose()))}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}},Kct=class extends Xct{static{g(this,"SimpleCache")}constructor(){super(...arguments),this.cache=new Map}has(t){return this.throwIfDisposed(),this.cache.has(t)}set(t,e){this.throwIfDisposed(),this.cache.set(t,e)}get(t,e){if(this.throwIfDisposed(),this.cache.has(t))return this.cache.get(t);if(e){let r=e();return this.cache.set(t,r),r}}delete(t){return this.throwIfDisposed(),this.cache.delete(t)}clear(){this.throwIfDisposed(),this.cache.clear()}},Qct=class extends Xct{static{g(this,"ContextCache")}constructor(t){super(),this.cache=new Map,this.converter=t??(t=>t)}has(t,e){return this.throwIfDisposed(),this.cacheForContext(t).has(e)}set(t,e,r){this.throwIfDisposed(),this.cacheForContext(t).set(e,r)}get(t,e,r){this.throwIfDisposed();let i=this.cacheForContext(t);if(i.has(e))return i.get(e);if(r){let t=r();return i.set(e,t),t}}delete(t,e){return this.throwIfDisposed(),this.cacheForContext(t).delete(e)}clear(t){if(this.throwIfDisposed(),t){let e=this.converter(t);this.cache.delete(e)}else this.cache.clear()}cacheForContext(t){let e=this.converter(t),r=this.cache.get(e);return r||(r=new Map,this.cache.set(e,r)),r}},Zct=class extends Qct{static{g(this,"DocumentCache")}constructor(t,e){super((t=>t.toString())),e?(this.toDispose.push(t.workspace.DocumentBuilder.onDocumentPhase(e,(t=>{this.clear(t.uri.toString())}))),this.toDispose.push(t.workspace.DocumentBuilder.onUpdate(((t,e)=>{for(let t of e)this.clear(t)})))):this.toDispose.push(t.workspace.DocumentBuilder.onUpdate(((t,e)=>{let r=t.concat(e);for(let t of r)this.clear(t)})))}},Jct=class extends Kct{static{g(this,"WorkspaceCache")}constructor(t,e){super(),e?(this.toDispose.push(t.workspace.DocumentBuilder.onBuildPhase(e,(()=>{this.clear()}))),this.toDispose.push(t.workspace.DocumentBuilder.onUpdate(((t,e)=>{e.length>0&&this.clear()})))):this.toDispose.push(t.workspace.DocumentBuilder.onUpdate((()=>{this.clear()})))}}})),oht=y((()=>{aht(),N7(),t6(),sht(),tht=class{static{g(this,"DefaultScopeProvider")}constructor(t){this.reflection=t.shared.AstReflection,this.nameProvider=t.references.NameProvider,this.descriptions=t.workspace.AstNodeDescriptionProvider,this.indexManager=t.shared.workspace.IndexManager,this.globalScopeCache=new Jct(t.shared)}getScope(t){let e=[],r=this.reflection.getReferenceType(t),i=T7(t.container).precomputedScopes;if(i){let n=t.container;do{let t=i.get(n);t.length>0&&e.push(V5(t).filter((t=>this.reflection.isSubtype(t.type,r)))),n=n.$container}while(n)}let n=this.getGlobalScope(r,t);for(let t=e.length-1;t>=0;t--)n=this.createScope(e[t],n);return n}createScope(t,e,r){return new Gct(V5(t),e,r)}createScopeForNodes(t,e,r){let i=V5(t).map((t=>{let e=this.nameProvider.getName(t);if(e)return this.descriptions.createDescription(t,e)})).nonNullable();return new Gct(i,e,r)}getGlobalScope(t,e){return this.globalScopeCache.get(t,(()=>new Hct(this.indexManager.allElements(t))))}}}));function lht(t){return"string"==typeof t.$comment}function cht(t){return"object"==typeof t&&!!t&&("$ref"in t||"$error"in t)}var hht,uht,dht=y((()=>{Oct(),Y5(),N7(),Z9(),g(lht,"isAstNodeWithComment"),g(cht,"isIntermediateReference"),hht=class{static{g(this,"DefaultJsonSerializer")}constructor(t){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=t.shared.workspace.LangiumDocuments,this.astNodeLocator=t.workspace.AstNodeLocator,this.nameProvider=t.references.NameProvider,this.commentProvider=t.documentation.CommentProvider}serialize(t,e){let r=e??{},i=e?.replacer,n=g(((t,e)=>this.replacer(t,e,r)),"defaultReplacer"),a=i?(t,e)=>i(t,e,n):n;try{return this.currentDocument=T7(t),JSON.stringify(t,a,e?.space)}finally{this.currentDocument=void 0}}deserialize(t,e){let r=e??{},i=JSON.parse(t);return this.linkNode(i,i,r),i}replacer(t,e,{refText:r,sourceText:i,textRegions:n,comments:a,uriConverter:s}){var o,l,c,h;if(!this.ignoreProperties.has(t)){if(B5(e)){let t=e.ref,i=r?e.$refText:void 0;if(t){let r=T7(t),n="";return this.currentDocument&&this.currentDocument!==r&&(n=s?s(r.uri,e):r.uri.toString()),{$ref:`${n}#${this.astNodeLocator.getAstNodePath(t)}`,$refText:i}}return{$error:null!==(l=null===(o=e.error)||void 0===o?void 0:o.message)&&void 0!==l?l:"Could not resolve reference",$refText:i}}if(P5(e)){let r;if(n&&(r=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},e)),(!t||e.$document)&&r?.$textRegion&&(r.$textRegion.documentURI=null===(c=this.currentDocument)||void 0===c?void 0:c.uri.toString())),i&&!t&&(r??(r=Object.assign({},e)),r.$sourceText=null===(h=e.$cstNode)||void 0===h?void 0:h.text),a){r??(r=Object.assign({},e));let t=this.commentProvider.getComment(e);t&&(r.$comment=t.replace(/\r/g,""))}return r??e}return e}}addAstNodeRegionWithAssignmentsTo(t){let e=g((t=>({offset:t.offset,end:t.end,length:t.length,range:t.range})),"createDocumentSegment");if(t.$cstNode){let r=(t.$textRegion=e(t.$cstNode)).assignments={};return Object.keys(t).filter((t=>!t.startsWith("$"))).forEach((i=>{let n=k9(t.$cstNode,i).map(e);0!==n.length&&(r[i]=n)})),t}}linkNode(t,e,r,i,n,a){for(let[i,n]of Object.entries(t))if(Array.isArray(n))for(let a=0;a<n.length;a++){let s=n[a];cht(s)?n[a]=this.reviveReference(t,i,e,s,r):P5(s)&&this.linkNode(s,e,r,t,i,a)}else cht(n)?t[i]=this.reviveReference(t,i,e,n,r):P5(n)&&this.linkNode(n,e,r,t,i);let s=t;s.$container=i,s.$containerProperty=n,s.$containerIndex=a}reviveReference(t,e,r,i,n){let a=i.$refText,s=i.$error;if(i.$ref){let t=this.getRefNode(r,i.$ref,n.uriConverter);if(P5(t))return a||(a=this.nameProvider.getName(t)),{$refText:a??"",ref:t};s=t}if(s){let r={$refText:a??""};return r.error={container:t,property:e,message:s,reference:r},r}}getRefNode(t,e,r){try{let i=e.indexOf("#");if(0===i){return this.astNodeLocator.getAstNode(t,e.substring(1))||"Could not resolve path: "+e}if(i<0){let t=r?r(e):Ect.parse(e),i=this.langiumDocuments.getDocument(t);return i?i.parseResult.value:"Could not find document for URI: "+e}let n=r?r(e.substring(0,i)):Ect.parse(e.substring(0,i)),a=this.langiumDocuments.getDocument(n);return a?i===e.length-1?a.parseResult.value:this.astNodeLocator.getAstNode(a.parseResult.value,e.substring(i+1))||"Could not resolve URI: "+e:"Could not find document for URI: "+e}catch(t){return String(t)}}}})),pht=y((()=>{Pct(),uht=class{static{g(this,"DefaultServiceRegistry")}get map(){return this.fileExtensionMap}constructor(t){this.languageIdMap=new Map,this.fileExtensionMap=new Map,this.textDocuments=t?.workspace.TextDocuments}register(t){let e=t.LanguageMetaData;for(let r of e.fileExtensions)this.fileExtensionMap.has(r)&&console.warn(`The file extension ${r} is used by multiple languages. It is now assigned to '${e.languageId}'.`),this.fileExtensionMap.set(r,t);this.languageIdMap.set(e.languageId,t),1===this.languageIdMap.size?this.singleton=t:this.singleton=void 0}getServices(t){var e,r;if(void 0!==this.singleton)return this.singleton;if(0===this.languageIdMap.size)throw new Error("The service registry is empty. Use `register` to register the services of a language.");let i=null===(r=null===(e=this.textDocuments)||void 0===e?void 0:e.get(t))||void 0===r?void 0:r.languageId;if(void 0!==i){let t=this.languageIdMap.get(i);if(t)return t}let n=$ct.extname(t),a=this.fileExtensionMap.get(n);if(!a)throw i?new Error(`The service registry contains no services for the extension '${n}' for language '${i}'.`):new Error(`The service registry contains no services for the extension '${n}'.`);return a}hasServices(t){try{return this.getServices(t),!0}catch{return!1}}get all(){return Array.from(this.languageIdMap.values())}}}));function fht(t){return{code:t}}var ght,yht,mht=y((()=>{xdt(),iht(),xct(),t6(),g(fht,"diagnosticData"),(ght||(ght={})).all=["fast","slow","built-in"],yht=class{static{g(this,"ValidationRegistry")}constructor(t){this.entries=new Wct,this.entriesBefore=[],this.entriesAfter=[],this.reflection=t.shared.AstReflection}register(t,e=this,r="fast"){if("built-in"===r)throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(let[i,n]of Object.entries(t)){let t=n;if(Array.isArray(t))for(let n of t){let t={check:this.wrapValidationException(n,e),category:r};this.addEntry(i,t)}else if("function"==typeof t){let n={check:this.wrapValidationException(t,e),category:r};this.addEntry(i,n)}else _6()}}wrapValidationException(t,e){return async(r,i,n)=>{await this.handleException((()=>t.call(e,r,i,n)),"An error occurred during validation",i,r)}}async handleException(t,e,r,i){try{await t()}catch(t){if(dct(t))throw t;console.error(`${e}:`,t),t instanceof Error&&t.stack&&console.error(t.stack),r("error",`${e}: ${t instanceof Error?t.message:String(t)}`,{node:i})}}addEntry(t,e){if("AstNode"!==t)for(let r of this.reflection.getAllSubTypes(t))this.entries.add(r,e);else this.entries.add("AstNode",e)}getChecks(t,e){let r=V5(this.entries.get(t)).concat(this.entries.get("AstNode"));return e&&(r=r.filter((t=>e.includes(t.category)))),r.map((t=>t.check))}registerBeforeDocument(t,e=this){this.entriesBefore.push(this.wrapPreparationException(t,"An error occurred during set-up of the validation",e))}registerAfterDocument(t,e=this){this.entriesAfter.push(this.wrapPreparationException(t,"An error occurred during tear-down of the validation",e))}wrapPreparationException(t,e,r){return async(i,n,a,s)=>{await this.handleException((()=>t.call(r,i,n,a,s)),e,n,i)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}}}));function xht(t){if(t.range)return t.range;let e;return"string"==typeof t.property?e=v9(t.node.$cstNode,t.property,t.index):"string"==typeof t.keyword&&(e=_9(t.node.$cstNode,t.keyword,t.index)),e??(e=t.node.$cstNode),e?e.range:{start:{line:0,character:0},end:{line:0,character:0}}}function bht(t){switch(t){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+t)}}function kht(t){switch(t){case"error":return fht(Tht.LexingError);case"warning":return fht(Tht.LexingWarning);case"info":return fht(Tht.LexingInfo);case"hint":return fht(Tht.LexingHint);default:throw new Error("Invalid diagnostic severity: "+t)}}var vht,Tht,wht,_ht,Sht,Cht,Eht,Aht,$ht,Lht,Rht=y((()=>{var t;lct(),Z9(),N7(),w6(),xct(),mht(),vht=class{static{g(this,"DefaultDocumentValidator")}constructor(t){this.validationRegistry=t.validation.ValidationRegistry,this.metadata=t.LanguageMetaData}async validateDocument(t,e={},r=oct.CancellationToken.None){let i=t.parseResult,n=[];if(await pct(r),(!e.categories||e.categories.includes("built-in"))&&(this.processLexingErrors(i,n,e),e.stopAfterLexingErrors&&n.some((t=>{var e;return(null===(e=t.data)||void 0===e?void 0:e.code)===Tht.LexingError}))||(this.processParsingErrors(i,n,e),e.stopAfterParsingErrors&&n.some((t=>{var e;return(null===(e=t.data)||void 0===e?void 0:e.code)===Tht.ParsingError})))||(this.processLinkingErrors(t,n,e),e.stopAfterLinkingErrors&&n.some((t=>{var e;return(null===(e=t.data)||void 0===e?void 0:e.code)===Tht.LinkingError})))))return n;try{n.push(...await this.validateAst(i.value,e,r))}catch(t){if(dct(t))throw t;console.error("An error occurred during validation:",t)}return await pct(r),n}processLexingErrors(t,e,r){var i,n,a;let s=[...t.lexerErrors,...null!==(n=null===(i=t.lexerReport)||void 0===i?void 0:i.diagnostics)&&void 0!==n?n:[]];for(let t of s){let r=null!==(a=t.severity)&&void 0!==a?a:"error",i={severity:bht(r),range:{start:{line:t.line-1,character:t.column-1},end:{line:t.line-1,character:t.column+t.length-1}},message:t.message,data:kht(r),source:this.getSource()};e.push(i)}}processParsingErrors(t,e,r){for(let r of t.parserErrors){let t;if(isNaN(r.token.startOffset)){if("previousToken"in r){let e=r.previousToken;if(isNaN(e.startOffset)){let e={line:0,character:0};t={start:e,end:e}}else{let r={line:e.endLine-1,character:e.endColumn};t={start:r,end:r}}}}else t=a6(r.token);if(t){let i={severity:bht("error"),range:t,message:r.message,data:fht(Tht.ParsingError),source:this.getSource()};e.push(i)}}}processLinkingErrors(t,e,r){for(let r of t.references){let t=r.error;if(t){let r={node:t.container,property:t.property,index:t.index,data:{code:Tht.LinkingError,containerType:t.container.$type,property:t.property,refText:t.reference.$refText}};e.push(this.toDiagnostic("error",t.message,r))}}}async validateAst(t,e,r=oct.CancellationToken.None){let i=[],n=g(((t,e,r)=>{i.push(this.toDiagnostic(t,e,r))}),"acceptor");return await this.validateAstBefore(t,e,n,r),await this.validateAstNodes(t,e,n,r),await this.validateAstAfter(t,e,n,r),i}async validateAstBefore(t,e,r,i=oct.CancellationToken.None){var n;let a=this.validationRegistry.checksBefore;for(let s of a)await pct(i),await s(t,r,null!==(n=e.categories)&&void 0!==n?n:[],i)}async validateAstNodes(t,e,r,i=oct.CancellationToken.None){await Promise.all(C7(t).map((async t=>{await pct(i);let n=this.validationRegistry.getChecks(t.$type,e.categories);for(let e of n)await e(t,r,i)})))}async validateAstAfter(t,e,r,i=oct.CancellationToken.None){var n;let a=this.validationRegistry.checksAfter;for(let s of a)await pct(i),await s(t,r,null!==(n=e.categories)&&void 0!==n?n:[],i)}toDiagnostic(t,e,r){return{message:e,range:xht(r),severity:bht(t),code:r.code,codeDescription:r.codeDescription,tags:r.tags,relatedInformation:r.relatedInformation,data:r.data,source:this.getSource()}}getSource(){return this.metadata.languageId}},g(xht,"getDiagnosticRange"),g(bht,"toDiagnosticSeverity"),g(kht,"toDiagnosticData"),(t=Tht||(Tht={})).LexingError="lexing-error",t.LexingWarning="lexing-warning",t.LexingInfo="lexing-info",t.LexingHint="lexing-hint",t.ParsingError="parsing-error",t.LinkingError="linking-error"})),Iht=y((()=>{lct(),Y5(),N7(),w6(),xct(),Pct(),wht=class{static{g(this,"DefaultAstNodeDescriptionProvider")}constructor(t){this.astNodeLocator=t.workspace.AstNodeLocator,this.nameProvider=t.references.NameProvider}createDescription(t,e,r){let i=r??T7(t);e??(e=this.nameProvider.getName(t));let n=this.astNodeLocator.getAstNodePath(t);if(!e)throw new Error(`Node at path ${n} has no name.`);let a,s=g((()=>{var e;return a??(a=s6(null!==(e=this.nameProvider.getNameNode(t))&&void 0!==e?e:t.$cstNode))}),"nameSegmentGetter");return{node:t,name:e,get nameSegment(){return s()},selectionSegment:s6(t.$cstNode),type:t.$type,documentUri:i.uri,path:n}}},_ht=class{static{g(this,"DefaultReferenceDescriptionProvider")}constructor(t){this.nodeLocator=t.workspace.AstNodeLocator}async createDescriptions(t,e=oct.CancellationToken.None){let r=[],i=t.parseResult.value;for(let t of C7(i))await pct(e),A7(t).filter((t=>!z5(t))).forEach((t=>{let e=this.createDescription(t);e&&r.push(e)}));return r}createDescription(t){let e=t.reference.$nodeDescription,r=t.reference.$refNode;if(!e||!r)return;let i=T7(t.container).uri;return{sourceUri:i,sourcePath:this.nodeLocator.getAstNodePath(t.container),targetUri:e.documentUri,targetPath:e.path,segment:s6(r),local:$ct.equals(e.documentUri,i)}}}})),Nht=y((()=>{Sht=class{static{g(this,"DefaultAstNodeLocator")}constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(t){if(t.$container){let e=this.getAstNodePath(t.$container),r=this.getPathSegment(t);return e+this.segmentSeparator+r}return""}getPathSegment({$containerProperty:t,$containerIndex:e}){if(!t)throw new Error("Missing '$containerProperty' in AST node.");return void 0!==e?t+this.indexSeparator+e:t}getAstNode(t,e){return e.split(this.segmentSeparator).reduce(((t,e)=>{if(!t||0===e.length)return t;let r=e.indexOf(this.indexSeparator);if(r>0){let i=e.substring(0,r),n=parseInt(e.substring(r+1)),a=t[i];return a?.[n]}return t[e]}),t)}}})),Dht={},Mht=y((()=>{k(Dht,v(act(),1))})),Oht=y((()=>{Mht(),xct(),Cht=class{static{g(this,"DefaultConfigurationProvider")}constructor(t){this._ready=new mct,this.settings={},this.workspaceConfig=!1,this.onConfigurationSectionUpdateEmitter=new Dht.Emitter,this.serviceRegistry=t.ServiceRegistry}get ready(){return this._ready.promise}initialize(t){var e,r;this.workspaceConfig=null!==(r=null===(e=t.capabilities.workspace)||void 0===e?void 0:e.configuration)&&void 0!==r&&r}async initialized(t){if(this.workspaceConfig){if(t.register){let e=this.serviceRegistry.all;t.register({section:e.map((t=>this.toSectionName(t.LanguageMetaData.languageId)))})}if(t.fetchConfiguration){let e=this.serviceRegistry.all.map((t=>({section:this.toSectionName(t.LanguageMetaData.languageId)}))),r=await t.fetchConfiguration(e);e.forEach(((t,e)=>{this.updateSectionConfiguration(t.section,r[e])}))}}this._ready.resolve()}updateConfiguration(t){t.settings&&Object.keys(t.settings).forEach((e=>{let r=t.settings[e];this.updateSectionConfiguration(e,r),this.onConfigurationSectionUpdateEmitter.fire({section:e,configuration:r})}))}updateSectionConfiguration(t,e){this.settings[t]=e}async getConfiguration(t,e){await this.ready;let r=this.toSectionName(t);if(this.settings[r])return this.settings[r][e]}toSectionName(t){return`${t}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}}})),Pht=y((()=>{!function(t){function e(t){return{dispose:g((async()=>await t()),"dispose")}}g(e,"create"),t.create=e}(Eht||(Eht={}))})),Bht=y((()=>{lct(),Pht(),iht(),xct(),t6(),mht(),Bct(),Aht=class{static{g(this,"DefaultDocumentBuilder")}constructor(t){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new Wct,this.documentPhaseListeners=new Wct,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=Lct.Changed,this.langiumDocuments=t.workspace.LangiumDocuments,this.langiumDocumentFactory=t.workspace.LangiumDocumentFactory,this.textDocuments=t.workspace.TextDocuments,this.indexManager=t.workspace.IndexManager,this.serviceRegistry=t.ServiceRegistry}async build(t,e={},r=oct.CancellationToken.None){var i,n;for(let r of t){let t=r.uri.toString();if(r.state===Lct.Validated){if("boolean"==typeof e.validation&&e.validation)r.state=Lct.IndexedReferences,r.diagnostics=void 0,this.buildState.delete(t);else if("object"==typeof e.validation){let a=this.buildState.get(t),s=null===(i=a?.result)||void 0===i?void 0:i.validationChecks;if(s){let i=(null!==(n=e.validation.categories)&&void 0!==n?n:ght.all).filter((t=>!s.includes(t)));i.length>0&&(this.buildState.set(t,{completed:!1,options:{validation:Object.assign(Object.assign({},e.validation),{categories:i})},result:a.result}),r.state=Lct.IndexedReferences)}}}else this.buildState.delete(t)}this.currentState=Lct.Changed,await this.emitUpdate(t.map((t=>t.uri)),[]),await this.buildDocuments(t,e,r)}async update(t,e,r=oct.CancellationToken.None){this.currentState=Lct.Changed;for(let t of e)this.langiumDocuments.deleteDocument(t),this.buildState.delete(t.toString()),this.indexManager.remove(t);for(let e of t){if(!this.langiumDocuments.invalidateDocument(e)){let t=this.langiumDocumentFactory.fromModel({$type:"INVALID"},e);t.state=Lct.Changed,this.langiumDocuments.addDocument(t)}this.buildState.delete(e.toString())}let i=V5(t).concat(e).map((t=>t.toString())).toSet();this.langiumDocuments.all.filter((t=>!i.has(t.uri.toString())&&this.shouldRelink(t,i))).forEach((t=>{this.serviceRegistry.getServices(t.uri).references.Linker.unlink(t),t.state=Math.min(t.state,Lct.ComputedScopes),t.diagnostics=void 0})),await this.emitUpdate(t,e),await pct(r);let n=this.sortDocuments(this.langiumDocuments.all.filter((t=>{var e;return t.state<Lct.Linked||!(null!==(e=this.buildState.get(t.uri.toString()))&&void 0!==e&&e.completed)})).toArray());await this.buildDocuments(n,this.updateBuildOptions,r)}async emitUpdate(t,e){await Promise.all(this.updateListeners.map((r=>r(t,e))))}sortDocuments(t){let e=0,r=t.length-1;for(;e<r;){for(;e<t.length&&this.hasTextDocument(t[e]);)e++;for(;r>=0&&!this.hasTextDocument(t[r]);)r--;e<r&&([t[e],t[r]]=[t[r],t[e]])}return t}hasTextDocument(t){var e;return!(null===(e=this.textDocuments)||void 0===e||!e.get(t.uri))}shouldRelink(t,e){return!!t.references.some((t=>void 0!==t.error))||this.indexManager.isAffected(t,e)}onUpdate(t){return this.updateListeners.push(t),Eht.create((()=>{let e=this.updateListeners.indexOf(t);e>=0&&this.updateListeners.splice(e,1)}))}async buildDocuments(t,e,r){this.prepareBuild(t,e),await this.runCancelable(t,Lct.Parsed,r,(t=>this.langiumDocumentFactory.update(t,r))),await this.runCancelable(t,Lct.IndexedContent,r,(t=>this.indexManager.updateContent(t,r))),await this.runCancelable(t,Lct.ComputedScopes,r,(async t=>{let e=this.serviceRegistry.getServices(t.uri).references.ScopeComputation;t.precomputedScopes=await e.computeLocalScopes(t,r)})),await this.runCancelable(t,Lct.Linked,r,(t=>this.serviceRegistry.getServices(t.uri).references.Linker.link(t,r))),await this.runCancelable(t,Lct.IndexedReferences,r,(t=>this.indexManager.updateReferences(t,r)));let i=t.filter((t=>this.shouldValidate(t)));await this.runCancelable(i,Lct.Validated,r,(t=>this.validate(t,r)));for(let e of t){let t=this.buildState.get(e.uri.toString());t&&(t.completed=!0)}}prepareBuild(t,e){for(let r of t){let t=r.uri.toString(),i=this.buildState.get(t);(!i||i.completed)&&this.buildState.set(t,{completed:!1,options:e,result:i?.result})}}async runCancelable(t,e,r,i){let n=t.filter((t=>t.state<e));for(let t of n)await pct(r),await i(t),t.state=e,await this.notifyDocumentPhase(t,e,r);let a=t.filter((t=>t.state===e));await this.notifyBuildPhase(a,e,r),this.currentState=e}onBuildPhase(t,e){return this.buildPhaseListeners.add(t,e),Eht.create((()=>{this.buildPhaseListeners.delete(t,e)}))}onDocumentPhase(t,e){return this.documentPhaseListeners.add(t,e),Eht.create((()=>{this.documentPhaseListeners.delete(t,e)}))}waitUntil(t,e,r){let i;if(e&&"path"in e?i=e:r=e,r??(r=oct.CancellationToken.None),i){let e=this.langiumDocuments.getDocument(i);if(e&&e.state>t)return Promise.resolve(i)}return this.currentState>=t?Promise.resolve(void 0):r.isCancellationRequested?Promise.reject(yct):new Promise(((e,n)=>{let a=this.onBuildPhase(t,(()=>{if(a.dispose(),s.dispose(),i){let t=this.langiumDocuments.getDocument(i);e(t?.uri)}else e(void 0)})),s=r.onCancellationRequested((()=>{a.dispose(),s.dispose(),n(yct)}))}))}async notifyDocumentPhase(t,e,r){let i=this.documentPhaseListeners.get(e).slice();for(let e of i)try{await e(t,r)}catch(t){if(!dct(t))throw t}}async notifyBuildPhase(t,e,r){if(0===t.length)return;let i=this.buildPhaseListeners.get(e).slice();for(let e of i)await pct(r),await e(t,r)}shouldValidate(t){return!!this.getBuildOptions(t).validation}async validate(t,e){var r,i;let n=this.serviceRegistry.getServices(t.uri).validation.DocumentValidator,a=this.getBuildOptions(t).validation,s="object"==typeof a?a:void 0,o=await n.validateDocument(t,s,e);t.diagnostics?t.diagnostics.push(...o):t.diagnostics=o;let l=this.buildState.get(t.uri.toString());if(l){null!==(r=l.result)&&void 0!==r||(l.result={});let t=null!==(i=s?.categories)&&void 0!==i?i:ght.all;l.result.validationChecks?l.result.validationChecks.push(...t):l.result.validationChecks=[...t]}}getBuildOptions(t){var e,r;return null!==(r=null===(e=this.buildState.get(t.uri.toString()))||void 0===e?void 0:e.options)&&void 0!==r?r:{}}}})),Fht=y((()=>{N7(),sht(),lct(),t6(),Pct(),$ht=class{static{g(this,"DefaultIndexManager")}constructor(t){this.symbolIndex=new Map,this.symbolByTypeIndex=new Qct,this.referenceIndex=new Map,this.documents=t.workspace.LangiumDocuments,this.serviceRegistry=t.ServiceRegistry,this.astReflection=t.AstReflection}findAllReferences(t,e){let r=T7(t).uri,i=[];return this.referenceIndex.forEach((t=>{t.forEach((t=>{$ct.equals(t.targetUri,r)&&t.targetPath===e&&i.push(t)}))})),V5(i)}allElements(t,e){let r=V5(this.symbolIndex.keys());return e&&(r=r.filter((t=>!e||e.has(t)))),r.map((e=>this.getFileDescriptions(e,t))).flat()}getFileDescriptions(t,e){var r;return e?this.symbolByTypeIndex.get(t,e,(()=>{var r;return(null!==(r=this.symbolIndex.get(t))&&void 0!==r?r:[]).filter((t=>this.astReflection.isSubtype(t.type,e)))})):null!==(r=this.symbolIndex.get(t))&&void 0!==r?r:[]}remove(t){let e=t.toString();this.symbolIndex.delete(e),this.symbolByTypeIndex.clear(e),this.referenceIndex.delete(e)}async updateContent(t,e=oct.CancellationToken.None){let r=await this.serviceRegistry.getServices(t.uri).references.ScopeComputation.computeExports(t,e),i=t.uri.toString();this.symbolIndex.set(i,r),this.symbolByTypeIndex.clear(i)}async updateReferences(t,e=oct.CancellationToken.None){let r=await this.serviceRegistry.getServices(t.uri).workspace.ReferenceDescriptionProvider.createDescriptions(t,e);this.referenceIndex.set(t.uri.toString(),r)}isAffected(t,e){let r=this.referenceIndex.get(t.uri.toString());return!!r&&r.some((t=>!t.local&&e.has(t.targetUri.toString())))}}})),zht=y((()=>{lct(),xct(),Pct(),Lht=class{static{g(this,"DefaultWorkspaceManager")}constructor(t){this.initialBuildOptions={},this._ready=new mct,this.serviceRegistry=t.ServiceRegistry,this.langiumDocuments=t.workspace.LangiumDocuments,this.documentBuilder=t.workspace.DocumentBuilder,this.fileSystemProvider=t.workspace.FileSystemProvider,this.mutex=t.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(t){var e;this.folders=null!==(e=t.workspaceFolders)&&void 0!==e?e:void 0}initialized(t){return this.mutex.write((t=>{var e;return this.initializeWorkspace(null!==(e=this.folders)&&void 0!==e?e:[],t)}))}async initializeWorkspace(t,e=oct.CancellationToken.None){let r=await this.performStartup(t);await pct(e),await this.documentBuilder.build(r,this.initialBuildOptions,e)}async performStartup(t){let e=this.serviceRegistry.all.flatMap((t=>t.LanguageMetaData.fileExtensions)),r=[],i=g((t=>{r.push(t),this.langiumDocuments.hasDocument(t.uri)||this.langiumDocuments.addDocument(t)}),"collector");return await this.loadAdditionalDocuments(t,i),await Promise.all(t.map((t=>[t,this.getRootFolder(t)])).map((async t=>this.traverseFolder(...t,e,i)))),this._ready.resolve(),r}loadAdditionalDocuments(t,e){return Promise.resolve()}getRootFolder(t){return Ect.parse(t.uri)}async traverseFolder(t,e,r,i){let n=await this.fileSystemProvider.readDirectory(e);await Promise.all(n.map((async e=>{if(this.includeEntry(t,e,r))if(e.isDirectory)await this.traverseFolder(t,e.uri,r,i);else if(e.isFile){let t=await this.langiumDocuments.getOrCreateDocument(e.uri);i(t)}})))}includeEntry(t,e,r){let i=$ct.basename(e.uri);if(i.startsWith("."))return!1;if(e.isDirectory)return"node_modules"!==i&&"out"!==i;if(e.isFile){let t=$ct.extname(e.uri);return r.includes(t)}return!1}}}));function jht(t){return Array.isArray(t)&&(0===t.length||"name"in t[0])}function Uht(t){return t&&"modes"in t&&"defaultMode"in t}function Wht(t){return!jht(t)&&!Uht(t)}var qht,Yht,Ght,Hht=y((()=>{gat(),qht=class{static{g(this,"DefaultLexerErrorMessageProvider")}buildUnexpectedCharactersMessage(t,e,r,i,n){return urt.buildUnexpectedCharactersMessage(t,e,r,i,n)}buildUnableToPopLexerModeMessage(t){return urt.buildUnableToPopLexerModeMessage(t)}},Yht={mode:"full"},Ght=class{static{g(this,"DefaultLexer")}constructor(t){this.errorMessageProvider=t.parser.LexerErrorMessageProvider,this.tokenBuilder=t.parser.TokenBuilder;let e=this.tokenBuilder.buildTokens(t.Grammar,{caseInsensitive:t.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(e);let r=Wht(e)?Object.values(e):e,i="production"===t.LanguageMetaData.mode;this.chevrotainLexer=new frt(r,{positionTracking:"full",skipValidations:i,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(t,e=Yht){var r,i,n;let a=this.chevrotainLexer.tokenize(t);return{tokens:a.tokens,errors:a.errors,hidden:null!==(r=a.groups.hidden)&&void 0!==r?r:[],report:null===(n=(i=this.tokenBuilder).flushLexingReport)||void 0===n?void 0:n.call(i,t)}}toTokenTypeDictionary(t){if(Wht(t))return t;let e=Uht(t)?Object.values(t.modes).flat():t,r={};return e.forEach((t=>r[t.name]=t)),r}},g(jht,"isTokenTypeArray"),g(Uht,"isIMultiModeLexerDefinition"),g(Wht,"isTokenTypeDictionary")}));function Vht(t,e,r){let i,n;return"string"==typeof t?(n=e,i=r):(n=t.range.start,i=e),n||(n=Fst.create(0,0)),eut({index:0,tokens:Qht({lines:Kht(t),position:n,options:lut(i)}),position:n})}function Xht(t,e){let r=lut(e),i=Kht(t);if(0===i.length)return!1;let n=i[0],a=i[i.length-1],s=r.start,o=r.end;return!!s?.exec(n)&&!!o?.exec(a)}function Kht(t){let e="";return e="string"==typeof t?t:t.text,e.split(o9)}function Qht(t){var e,r,i;let n=[],a=t.position.line,s=t.position.character;for(let o=0;o<t.lines.length;o++){let l=0===o,c=o===t.lines.length-1,h=t.lines[o],u=0;if(l&&t.options.start){let r=null===(e=t.options.start)||void 0===e?void 0:e.exec(h);r&&(u=r.index+r[0].length)}else{let e=null===(r=t.options.line)||void 0===r?void 0:r.exec(h);e&&(u=e.index+e[0].length)}if(c){let e=null===(i=t.options.end)||void 0===i?void 0:i.exec(h);e&&(h=h.substring(0,e.index))}if(h=h.substring(0,tut(h)),Jht(h,u)>=h.length){if(n.length>0){let t=Fst.create(a,s);n.push({type:"break",content:"",range:zst.create(t,t)})}}else{put.lastIndex=u;let t=put.exec(h);if(t){let e=t[0],r=t[1],i=Fst.create(a,s+u),o=Fst.create(a,s+u+e.length);n.push({type:"tag",content:r,range:zst.create(i,o)}),u+=e.length,u=Jht(h,u)}if(u<h.length){let t=h.substring(u),e=Array.from(t.matchAll(fut));n.push(...Zht(e,t,a,s+u))}}a++,s=0}return n.length>0&&"break"===n[n.length-1].type?n.slice(0,-1):n}function Zht(t,e,r,i){let n=[];if(0===t.length){let t=Fst.create(r,i),a=Fst.create(r,i+e.length);n.push({type:"text",content:e,range:zst.create(t,a)})}else{let a=0;for(let s of t){let t=s.index,o=e.substring(a,t);o.length>0&&n.push({type:"text",content:e.substring(a,t),range:zst.create(Fst.create(r,a+i),Fst.create(r,t+i))});let l=o.length+1,c=s[1];if(n.push({type:"inline-tag",content:c,range:zst.create(Fst.create(r,a+l+i),Fst.create(r,a+l+c.length+i))}),l+=c.length,4===s.length){l+=s[2].length;let t=s[3];n.push({type:"text",content:t,range:zst.create(Fst.create(r,a+l+i),Fst.create(r,a+l+t.length+i))})}else n.push({type:"text",content:"",range:zst.create(Fst.create(r,a+l+i),Fst.create(r,a+l+i))});a=t+s[0].length}let s=e.substring(a);s.length>0&&n.push({type:"text",content:s,range:zst.create(Fst.create(r,a+i),Fst.create(r,a+i+s.length))})}return n}function Jht(t,e){let r=t.substring(e).match(gut);return r?e+r.index:t.length}function tut(t){let e=t.match(yut);if(e&&"number"==typeof e.index)return e.index}function eut(t){var e,r,i,n;let a=Fst.create(t.position.line,t.position.character);if(0===t.tokens.length)return new mut([],zst.create(a,a));let s=[];for(;t.index<t.tokens.length;){let e=rut(t,s[s.length-1]);e&&s.push(e)}let o=null!==(r=null===(e=s[0])||void 0===e?void 0:e.range.start)&&void 0!==r?r:a,l=null!==(n=null===(i=s[s.length-1])||void 0===i?void 0:i.range.end)&&void 0!==n?n:a;return new mut(s,zst.create(o,l))}function rut(t,e){let r=t.tokens[t.index];return"tag"===r.type?sut(t,!1):"text"===r.type||"inline-tag"===r.type?nut(t):(iut(r,e),void t.index++)}function iut(t,e){if(e){let r=new kut("",t.range);"inlines"in e?e.inlines.push(r):e.content.inlines.push(r)}}function nut(t){let e=t.tokens[t.index],r=e,i=e,n=[];for(;e&&"break"!==e.type&&"tag"!==e.type;)n.push(aut(t)),i=e,e=t.tokens[t.index];return new but(n,zst.create(r.range.start,i.range.end))}function aut(t){return"inline-tag"===t.tokens[t.index].type?sut(t,!0):out(t)}function sut(t,e){let r=t.tokens[t.index++],i=r.content.substring(1),n=t.tokens[t.index];if("text"===n?.type){if(e){let n=out(t);return new xut(i,new but([n],n.range),e,zst.create(r.range.start,n.range.end))}{let n=nut(t);return new xut(i,n,e,zst.create(r.range.start,n.range.end))}}{let t=r.range;return new xut(i,new but([],t),e,t)}}function out(t){let e=t.tokens[t.index++];return new kut(e.content,e.range)}function lut(t){if(!t)return lut({start:"/**",end:"*/",line:"*"});let{start:e,end:r,line:i}=t;return{start:cut(e,!0),end:cut(r,!1),line:cut(i,!0)}}function cut(t,e){if("string"==typeof t||"object"==typeof t){let r="string"==typeof t?i9(t):t.source;return e?new RegExp(`^\\s*${r}`):new RegExp(`\\s*${r}\\s*$`)}return t}function hut(t,e,r){var i,n;if("linkplain"===t||"linkcode"===t||"link"===t){let a=e.indexOf(" "),s=e;if(a>0){let t=Jht(e,a);s=e.substring(t),e=e.substring(0,a)}return("linkcode"===t||"link"===t&&"code"===r.link)&&(s=`\`${s}\``),null!==(n=null===(i=r.renderLink)||void 0===i?void 0:i.call(r,e,s))&&void 0!==n?n:uut(e,s)}}function uut(t,e){try{return Ect.parse(t,!0),`[${e}](${t})`}catch{return t}}function dut(t){return t.endsWith("\n")?"\n":"\n\n"}var put,fut,gut,yut,mut,xut,but,kut,vut,Tut,wut,_ut,Sut,Cut,Eut,Aut=y((()=>{ylt(),d9(),Pct(),g(Vht,"parseJSDoc"),g(Xht,"isJSDoc"),g(Kht,"getLines"),put=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,fut=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu,g(Qht,"tokenize"),g(Zht,"buildInlineTokens"),gut=/\S/,yut=/\s*$/,g(Jht,"skipWhitespace"),g(tut,"lastCharacter"),g(eut,"parseJSDocComment"),g(rut,"parseJSDocElement"),g(iut,"appendEmptyLine"),g(nut,"parseJSDocText"),g(aut,"parseJSDocInline"),g(sut,"parseJSDocTag"),g(out,"parseJSDocLine"),g(lut,"normalizeOptions"),g(cut,"normalizeOption"),mut=class{static{g(this,"JSDocCommentImpl")}constructor(t,e){this.elements=t,this.range=e}getTag(t){return this.getAllTags().find((e=>e.name===t))}getTags(t){return this.getAllTags().filter((e=>e.name===t))}getAllTags(){return this.elements.filter((t=>"name"in t))}toString(){let t="";for(let e of this.elements)if(0===t.length)t=e.toString();else{let r=e.toString();t+=dut(t)+r}return t.trim()}toMarkdown(t){let e="";for(let r of this.elements)if(0===e.length)e=r.toMarkdown(t);else{let i=r.toMarkdown(t);e+=dut(e)+i}return e.trim()}},xut=class{static{g(this,"JSDocTagImpl")}constructor(t,e,r,i){this.name=t,this.content=e,this.inline=r,this.range=i}toString(){let t=`@${this.name}`,e=this.content.toString();return 1===this.content.inlines.length?t=`${t} ${e}`:this.content.inlines.length>1&&(t=`${t}\n${e}`),this.inline?`{${t}}`:t}toMarkdown(t){var e,r;return null!==(r=null===(e=t?.renderTag)||void 0===e?void 0:e.call(t,this))&&void 0!==r?r:this.toMarkdownDefault(t)}toMarkdownDefault(t){let e=this.content.toMarkdown(t);if(this.inline){let r=hut(this.name,e,t??{});if("string"==typeof r)return r}let r="";"italic"===t?.tag||void 0===t?.tag?r="*":"bold"===t?.tag?r="**":"bold-italic"===t?.tag&&(r="***");let i=`${r}@${this.name}${r}`;return 1===this.content.inlines.length?i=`${i} — ${e}`:this.content.inlines.length>1&&(i=`${i}\n${e}`),this.inline?`{${i}}`:i}},g(hut,"renderInlineTag"),g(uut,"renderLinkDefault"),but=class{static{g(this,"JSDocTextImpl")}constructor(t,e){this.inlines=t,this.range=e}toString(){let t="";for(let e=0;e<this.inlines.length;e++){let r=this.inlines[e],i=this.inlines[e+1];t+=r.toString(),i&&i.range.start.line>r.range.start.line&&(t+="\n")}return t}toMarkdown(t){let e="";for(let r=0;r<this.inlines.length;r++){let i=this.inlines[r],n=this.inlines[r+1];e+=i.toMarkdown(t),n&&n.range.start.line>i.range.start.line&&(e+="\n")}return e}},kut=class{static{g(this,"JSDocLineImpl")}constructor(t,e){this.text=t,this.range=e}toString(){return this.text}toMarkdown(){return this.text}},g(dut,"fillNewlines")})),$ut=y((()=>{N7(),Aut(),vut=class{static{g(this,"JSDocDocumentationProvider")}constructor(t){this.indexManager=t.shared.workspace.IndexManager,this.commentProvider=t.documentation.CommentProvider}getDocumentation(t){let e=this.commentProvider.getComment(t);if(e&&Xht(e))return Vht(e).toMarkdown({renderLink:g(((e,r)=>this.documentationLinkRenderer(t,e,r)),"renderLink"),renderTag:g((e=>this.documentationTagRenderer(t,e)),"renderTag")})}documentationLinkRenderer(t,e,r){var i;let n=null!==(i=this.findNameInPrecomputedScopes(t,e))&&void 0!==i?i:this.findNameInGlobalScope(t,e);if(n&&n.nameSegment){let t=n.nameSegment.range.start.line+1,e=n.nameSegment.range.start.character+1;return`[${r}](${n.documentUri.with({fragment:`L${t},${e}`}).toString()})`}}documentationTagRenderer(t,e){}findNameInPrecomputedScopes(t,e){let r=T7(t).precomputedScopes;if(!r)return;let i=t;do{let t=r.get(i).find((t=>t.name===e));if(t)return t;i=i.$container}while(i)}findNameInGlobalScope(t,e){return this.indexManager.allElements().find((t=>t.name===e))}}})),Lut=y((()=>{dht(),w6(),Tut=class{static{g(this,"DefaultCommentProvider")}constructor(t){this.grammarConfig=()=>t.parser.GrammarConfig}getComment(t){var e;return lht(t)?t.$comment:null===(e=h6(t.$cstNode,this.grammarConfig().multilineCommentRules))||void 0===e?void 0:e.text}}})),Rut=y((()=>{xct(),Mht(),wut=class{static{g(this,"DefaultAsyncParser")}constructor(t){this.syncParser=t.parser.LangiumParser}parse(t,e){return Promise.resolve(this.syncParser.parse(t))}},_ut=class{static{g(this,"AbstractThreadedAsyncParser")}constructor(t){this.threadCount=8,this.terminationDelay=200,this.workerPool=[],this.queue=[],this.hydrator=t.serializer.Hydrator}initializeWorkers(){for(;this.workerPool.length<this.threadCount;){let t=this.createWorker();t.onReady((()=>{if(this.queue.length>0){let e=this.queue.shift();e&&(t.lock(),e.resolve(t))}})),this.workerPool.push(t)}}async parse(t,e){let r,i=await this.acquireParserWorker(e),n=new mct,a=e.onCancellationRequested((()=>{r=setTimeout((()=>{this.terminateWorker(i)}),this.terminationDelay)}));return i.parse(t).then((t=>{let e=this.hydrator.hydrate(t);n.resolve(e)})).catch((t=>{n.reject(t)})).finally((()=>{a.dispose(),clearTimeout(r)})),n.promise}terminateWorker(t){t.terminate();let e=this.workerPool.indexOf(t);e>=0&&this.workerPool.splice(e,1)}async acquireParserWorker(t){this.initializeWorkers();for(let t of this.workerPool)if(t.ready)return t.lock(),t;let e=new mct;return t.onCancellationRequested((()=>{let t=this.queue.indexOf(e);t>=0&&this.queue.splice(t,1),e.reject(yct)})),this.queue.push(e),e.promise}},Sut=class{static{g(this,"ParserWorker")}get ready(){return this._ready}get onReady(){return this.onReadyEmitter.event}constructor(t,e,r,i){this.onReadyEmitter=new Dht.Emitter,this.deferred=new mct,this._ready=!0,this._parsing=!1,this.sendMessage=t,this._terminate=i,e((t=>{let e=t;this.deferred.resolve(e),this.unlock()})),r((t=>{this.deferred.reject(t),this.unlock()}))}terminate(){this.deferred.reject(yct),this._terminate()}lock(){this._ready=!1}unlock(){this._parsing=!1,this._ready=!0,this.onReadyEmitter.fire()}parse(t){if(this._parsing)throw new Error("Parser worker is busy");return this._parsing=!0,this.deferred=new mct,this.sendMessage(t),this.deferred.promise}}})),Iut=y((()=>{lct(),xct(),Cut=class{static{g(this,"DefaultWorkspaceLock")}constructor(){this.previousTokenSource=new oct.CancellationTokenSource,this.writeQueue=[],this.readQueue=[],this.done=!0}write(t){this.cancelWrite();let e=hct();return this.previousTokenSource=e,this.enqueue(this.writeQueue,t,e.token)}read(t){return this.enqueue(this.readQueue,t)}enqueue(t,e,r=oct.CancellationToken.None){let i=new mct,n={action:e,deferred:i,cancellationToken:r};return t.push(n),this.performNextOperation(),i.promise}async performNextOperation(){if(!this.done)return;let t=[];if(this.writeQueue.length>0)t.push(this.writeQueue.shift());else{if(!(this.readQueue.length>0))return;t.push(...this.readQueue.splice(0,this.readQueue.length))}this.done=!1,await Promise.all(t.map((async({action:t,deferred:e,cancellationToken:r})=>{try{let i=await Promise.resolve().then((()=>t(r)));e.resolve(i)}catch(t){dct(t)?e.resolve(void 0):e.reject(t)}}))),this.done=!0,this.performNextOperation()}cancelWrite(){this.previousTokenSource.cancel()}}})),Nut=y((()=>{mlt(),m7(),Y5(),N7(),iht(),w6(),Eut=class{static{g(this,"DefaultHydrator")}constructor(t){this.grammarElementIdMap=new qct,this.tokenTypeIdMap=new qct,this.grammar=t.Grammar,this.lexer=t.parser.Lexer,this.linker=t.references.Linker}dehydrate(t){return{lexerErrors:t.lexerErrors,lexerReport:t.lexerReport?this.dehydrateLexerReport(t.lexerReport):void 0,parserErrors:t.parserErrors.map((t=>Object.assign(Object.assign({},t),{message:t.message}))),value:this.dehydrateAstNode(t.value,this.createDehyrationContext(t.value))}}dehydrateLexerReport(t){return t}createDehyrationContext(t){let e=new Map,r=new Map;for(let r of C7(t))e.set(r,{});if(t.$cstNode)for(let e of r6(t.$cstNode))r.set(e,{});return{astNodes:e,cstNodes:r}}dehydrateAstNode(t,e){let r=e.astNodes.get(t);r.$type=t.$type,r.$containerIndex=t.$containerIndex,r.$containerProperty=t.$containerProperty,void 0!==t.$cstNode&&(r.$cstNode=this.dehydrateCstNode(t.$cstNode,e));for(let[i,n]of Object.entries(t))if(!i.startsWith("$"))if(Array.isArray(n)){let t=[];r[i]=t;for(let r of n)P5(r)?t.push(this.dehydrateAstNode(r,e)):B5(r)?t.push(this.dehydrateReference(r,e)):t.push(r)}else P5(n)?r[i]=this.dehydrateAstNode(n,e):B5(n)?r[i]=this.dehydrateReference(n,e):void 0!==n&&(r[i]=n);return r}dehydrateReference(t,e){let r={};return r.$refText=t.$refText,t.$refNode&&(r.$refNode=e.cstNodes.get(t.$refNode)),r}dehydrateCstNode(t,e){let r=e.cstNodes.get(t);return W5(t)?r.fullText=t.fullText:r.grammarSource=this.getGrammarElementId(t.grammarSource),r.hidden=t.hidden,r.astNode=e.astNodes.get(t.astNode),j5(t)?r.content=t.content.map((t=>this.dehydrateCstNode(t,e))):U5(t)&&(r.tokenType=t.tokenType.name,r.offset=t.offset,r.length=t.length,r.startLine=t.range.start.line,r.startColumn=t.range.start.character,r.endLine=t.range.end.line,r.endColumn=t.range.end.character),r}hydrate(t){let e=t.value,r=this.createHydrationContext(e);return"$cstNode"in e&&this.hydrateCstNode(e.$cstNode,r),{lexerErrors:t.lexerErrors,lexerReport:t.lexerReport,parserErrors:t.parserErrors,value:this.hydrateAstNode(e,r)}}createHydrationContext(t){let e,r=new Map,i=new Map;for(let e of C7(t))r.set(e,{});if(t.$cstNode)for(let r of r6(t.$cstNode)){let t;"fullText"in r?(t=new plt(r.fullText),e=t):"content"in r?t=new ult:"tokenType"in r&&(t=this.hydrateCstLeafNode(r)),t&&(i.set(r,t),t.root=e)}return{astNodes:r,cstNodes:i}}hydrateAstNode(t,e){let r=e.astNodes.get(t);r.$type=t.$type,r.$containerIndex=t.$containerIndex,r.$containerProperty=t.$containerProperty,t.$cstNode&&(r.$cstNode=e.cstNodes.get(t.$cstNode));for(let[i,n]of Object.entries(t))if(!i.startsWith("$"))if(Array.isArray(n)){let t=[];r[i]=t;for(let a of n)P5(a)?t.push(this.setParent(this.hydrateAstNode(a,e),r)):B5(a)?t.push(this.hydrateReference(a,r,i,e)):t.push(a)}else P5(n)?r[i]=this.setParent(this.hydrateAstNode(n,e),r):B5(n)?r[i]=this.hydrateReference(n,r,i,e):void 0!==n&&(r[i]=n);return r}setParent(t,e){return t.$container=e,t}hydrateReference(t,e,r,i){return this.linker.buildReference(e,r,i.cstNodes.get(t.$refNode),t.$refText)}hydrateCstNode(t,e,r=0){let i=e.cstNodes.get(t);if("number"==typeof t.grammarSource&&(i.grammarSource=this.getGrammarElement(t.grammarSource)),i.astNode=e.astNodes.get(t.astNode),j5(i))for(let n of t.content){let t=this.hydrateCstNode(n,e,r++);i.content.push(t)}return i}hydrateCstLeafNode(t){let e=this.getTokenType(t.tokenType),r=t.offset,i=t.length,n=t.startLine,a=t.startColumn,s=t.endLine,o=t.endColumn,l=t.hidden;return new hlt(r,i,{start:{line:n,character:a},end:{line:s,character:o}},e,l)}getTokenType(t){return this.lexer.definition[t]}getGrammarElementId(t){if(t)return 0===this.grammarElementIdMap.size&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(t)}getGrammarElement(t){return 0===this.grammarElementIdMap.size&&this.createGrammarElementIdMap(),this.grammarElementIdMap.getKey(t)}createGrammarElementIdMap(){let t=0;for(let e of C7(this.grammar))M6(e)&&this.grammarElementIdMap.set(e,t++)}}}));function Dut(t){return{documentation:{CommentProvider:g((t=>new Tut(t)),"CommentProvider"),DocumentationProvider:g((t=>new vut(t)),"DocumentationProvider")},parser:{AsyncParser:g((t=>new wut(t)),"AsyncParser"),GrammarConfig:g((t=>J9(t)),"GrammarConfig"),LangiumParser:g((t=>Xlt(t)),"LangiumParser"),CompletionParser:g((t=>Hlt(t)),"CompletionParser"),ValueConverter:g((()=>new Zlt),"ValueConverter"),TokenBuilder:g((()=>new Qlt),"TokenBuilder"),Lexer:g((t=>new Ght(t)),"Lexer"),ParserErrorMessageProvider:g((()=>new _lt),"ParserErrorMessageProvider"),LexerErrorMessageProvider:g((()=>new qht),"LexerErrorMessageProvider")},workspace:{AstNodeLocator:g((()=>new Sht),"AstNodeLocator"),AstNodeDescriptionProvider:g((t=>new wht(t)),"AstNodeDescriptionProvider"),ReferenceDescriptionProvider:g((t=>new _ht(t)),"ReferenceDescriptionProvider")},references:{Linker:g((t=>new Dct(t)),"Linker"),NameProvider:g((()=>new jct),"NameProvider"),ScopeProvider:g((t=>new tht(t)),"ScopeProvider"),ScopeComputation:g((t=>new Yct(t)),"ScopeComputation"),References:g((t=>new Uct(t)),"References")},serializer:{Hydrator:g((t=>new Eut(t)),"Hydrator"),JsonSerializer:g((t=>new hht(t)),"JsonSerializer")},validation:{DocumentValidator:g((t=>new vht(t)),"DocumentValidator"),ValidationRegistry:g((t=>new yht(t)),"ValidationRegistry")},shared:g((()=>t.shared),"shared")}}function Mut(t){return{ServiceRegistry:g((t=>new uht(t)),"ServiceRegistry"),workspace:{LangiumDocuments:g((t=>new Ict(t)),"LangiumDocuments"),LangiumDocumentFactory:g((t=>new Rct(t)),"LangiumDocumentFactory"),DocumentBuilder:g((t=>new Aht(t)),"DocumentBuilder"),IndexManager:g((t=>new $ht(t)),"IndexManager"),WorkspaceManager:g((t=>new Lht(t)),"WorkspaceManager"),FileSystemProvider:g((e=>t.fileSystemProvider(e)),"FileSystemProvider"),WorkspaceLock:g((()=>new Cut),"WorkspaceLock"),ConfigurationProvider:g((t=>new Cht(t)),"ConfigurationProvider")}}}var Out=y((()=>{ttt(),Vlt(),tct(),ect(),rct(),Fct(),eht(),rht(),nht(),oht(),dht(),pht(),Rht(),mht(),Iht(),Nht(),Oht(),Bht(),Bct(),Fht(),zht(),Hht(),$ut(),Lut(),Alt(),Rut(),Iut(),Nut(),g(Dut,"createDefaultCoreModule"),g(Mut,"createDefaultSharedCoreModule")}));function Put(t,e,r,i,n,a,s,o,l){return Fut([t,e,r,i,n,a,s,o,l].reduce(jut,{}))}function But(t){if(t&&t[Wut])for(let e of Object.values(t))But(e);return t}function Fut(t,e){let r=new Proxy({},{deleteProperty:g((()=>!1),"deleteProperty"),set:g((()=>{throw new Error("Cannot set property on injected service container")}),"set"),get:g(((i,n)=>n===Wut||zut(i,n,t,e||r)),"get"),getOwnPropertyDescriptor:g(((i,n)=>(zut(i,n,t,e||r),Object.getOwnPropertyDescriptor(i,n))),"getOwnPropertyDescriptor"),has:g(((e,r)=>r in t),"has"),ownKeys:g((()=>[...Object.getOwnPropertyNames(t)]),"ownKeys")});return r}function zut(t,e,r,i){if(e in t){if(t[e]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:t[e]});if(t[e]===qut)throw new Error('Cycle detected. Please make "'+String(e)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies');return t[e]}if(e in r){let n=r[e];t[e]=qut;try{t[e]="function"==typeof n?n(i):Fut(n,i)}catch(r){throw t[e]=r instanceof Error?r:void 0,r}return t[e]}}function jut(t,e){if(e)for(let[r,i]of Object.entries(e))if(void 0!==i){let e=t[r];t[r]=null!==e&&null!==i&&"object"==typeof e&&"object"==typeof i?jut(e,i):i}return t}var Uut,Wut,qut,Yut,Gut,Hut,Vut,Xut,Kut,Qut=y((()=>{(Uut||(Uut={})).merge=(t,e)=>jut(jut({},t),e),g(Put,"inject"),Wut=Symbol("isProxy"),g(But,"eagerLoad"),g(Fut,"_inject"),qut=Symbol(),g(zut,"_resolve"),g(jut,"_merge")})),Zut=y((()=>{})),Jut=y((()=>{Lut(),$ut(),Aut()})),tdt=y((()=>{})),edt=y((()=>{ttt(),tdt()})),rdt=y((()=>{var t;gat(),ect(),Hht(),Yut={indentTokenName:"INDENT",dedentTokenName:"DEDENT",whitespaceTokenName:"WS",ignoreIndentationDelimiters:[]},(t=Gut||(Gut={})).REGULAR="indentation-sensitive",t.IGNORE_INDENTATION="ignore-indentation",Hut=class extends Qlt{static{g(this,"IndentationAwareTokenBuilder")}constructor(t=Yut){super(),this.indentationStack=[0],this.whitespaceRegExp=/[ \t]+/y,this.options=Object.assign(Object.assign({},Yut),t),this.indentTokenType=krt({name:this.options.indentTokenName,pattern:this.indentMatcher.bind(this),line_breaks:!1}),this.dedentTokenType=krt({name:this.options.dedentTokenName,pattern:this.dedentMatcher.bind(this),line_breaks:!1})}buildTokens(t,e){let r=super.buildTokens(t,e);if(!jht(r))throw new Error("Invalid tokens built by default builder");let i,n,a,{indentTokenName:s,dedentTokenName:o,whitespaceTokenName:l,ignoreIndentationDelimiters:c}=this.options,h=[];for(let t of r){for(let[e,r]of c)t.name===e?t.PUSH_MODE=Gut.IGNORE_INDENTATION:t.name===r&&(t.POP_MODE=!0);t.name===o?i=t:t.name===s?n=t:t.name===l?a=t:h.push(t)}if(!i||!n||!a)throw new Error("Some indentation/whitespace tokens not found!");return c.length>0?{modes:{[Gut.REGULAR]:[i,n,...h,a],[Gut.IGNORE_INDENTATION]:[...h,a]},defaultMode:Gut.REGULAR}:[i,n,a,...h]}flushLexingReport(t){let e=super.flushLexingReport(t);return Object.assign(Object.assign({},e),{remainingDedents:this.flushRemainingDedents(t)})}isStartOfLine(t,e){return 0===e||"\r\n".includes(t[e-1])}matchWhitespace(t,e,r,i){var n;this.whitespaceRegExp.lastIndex=e;let a=this.whitespaceRegExp.exec(t);return{currIndentLevel:null!==(n=a?.[0].length)&&void 0!==n?n:0,prevIndentLevel:this.indentationStack.at(-1),match:a}}createIndentationTokenInstance(t,e,r,i){let n=this.getLineNumber(e,i);return Trt(t,r,i,i+r.length,n,n,1,r.length)}getLineNumber(t,e){return t.substring(0,e).split(/\r\n|\r|\n/).length}indentMatcher(t,e,r,i){if(!this.isStartOfLine(t,e))return null;let{currIndentLevel:n,prevIndentLevel:a,match:s}=this.matchWhitespace(t,e,r,i);return n<=a?null:(this.indentationStack.push(n),s)}dedentMatcher(t,e,r,i){var n,a,s,o;if(!this.isStartOfLine(t,e))return null;let{currIndentLevel:l,prevIndentLevel:c,match:h}=this.matchWhitespace(t,e,r,i);if(l>=c)return null;let u=this.indentationStack.lastIndexOf(l);if(-1===u)return this.diagnostics.push({severity:"error",message:`Invalid dedent level ${l} at offset: ${e}. Current indentation stack: ${this.indentationStack}`,offset:e,length:null!==(a=null===(n=h?.[0])||void 0===n?void 0:n.length)&&void 0!==a?a:0,line:this.getLineNumber(t,e),column:1}),null;let d=this.indentationStack.length-u-1,p=null!==(o=null===(s=t.substring(0,e).match(/[\r\n]+$/))||void 0===s?void 0:s[0].length)&&void 0!==o?o:1;for(let i=0;i<d;i++){let i=this.createIndentationTokenInstance(this.dedentTokenType,t,"",e-(p-1));r.push(i),this.indentationStack.pop()}return null}buildTerminalToken(t){let e=super.buildTerminalToken(t),{indentTokenName:r,dedentTokenName:i,whitespaceTokenName:n}=this.options;return e.name===r?this.indentTokenType:e.name===i?this.dedentTokenType:e.name===n?krt({name:n,pattern:this.whitespaceRegExp,group:frt.SKIPPED}):e}flushRemainingDedents(t){let e=[];for(;this.indentationStack.length>1;)e.push(this.createIndentationTokenInstance(this.dedentTokenType,t,"",t.length)),this.indentationStack.pop();return this.indentationStack=[0],e}},Vut=class extends Ght{static{g(this,"IndentationAwareLexer")}constructor(t){if(super(t),!(t.parser.TokenBuilder instanceof Hut))throw new Error("IndentationAwareLexer requires an accompanying IndentationAwareTokenBuilder");this.indentationTokenBuilder=t.parser.TokenBuilder}tokenize(t,e=Yht){let r=super.tokenize(t),i=r.report;"full"===e?.mode&&r.tokens.push(...i.remainingDedents),i.remainingDedents=[];let{indentTokenType:n,dedentTokenType:a}=this.indentationTokenBuilder,s=n.tokenTypeIdx,o=a.tokenTypeIdx,l=[],c=r.tokens.length-1;for(let t=0;t<c;t++){let e=r.tokens[t],i=r.tokens[t+1];e.tokenTypeIdx!==s||i.tokenTypeIdx!==o?l.push(e):t++}return c>=0&&l.push(r.tokens[c]),r.tokens=l,r}}})),idt=y((()=>{})),ndt=y((()=>{Rut(),Vlt(),mlt(),rdt(),tct(),Alt(),Hht(),Glt(),idt(),ect(),rct()})),adt=y((()=>{Fct(),eht(),rht(),aht(),nht(),oht()})),sdt=y((()=>{Nut(),dht()})),odt=y((()=>{Xut=class{static{g(this,"EmptyFileSystemProvider")}readFile(){throw new Error("No file system is available.")}async readDirectory(){return[]}},Kut={fileSystemProvider:g((()=>new Xut),"fileSystemProvider")}}));function ldt(){let t=Put(Mut(Kut),udt),e=Put(Dut({shared:t}),hdt);return t.ServiceRegistry.register(e),e}function cdt(t){var e;let r=ldt(),i=r.serializer.JsonSerializer.deserialize(t);return r.shared.workspace.LangiumDocumentFactory.fromModel(i,Ect.parse(`memory://${null!==(e=i.name)&&void 0!==e?e:"grammar"}.langium`)),i}var hdt,udt,ddt=y((()=>{Out(),Qut(),m7(),odt(),Pct(),hdt={Grammar:g((()=>{}),"Grammar"),LanguageMetaData:g((()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})),"LanguageMetaData")},udt={AstReflection:g((()=>new g7),"AstReflection")},g(ldt,"createMinimalGrammarServices"),g(cdt,"loadGrammarFromJson")})),pdt={};x(pdt,{AstUtils:()=>x7,BiMap:()=>qct,Cancellation:()=>oct,ContextCache:()=>Qct,CstUtils:()=>e6,DONE_RESULT:()=>Q5,Deferred:()=>mct,Disposable:()=>Eht,DisposableCache:()=>Xct,DocumentCache:()=>Zct,EMPTY_STREAM:()=>K5,ErrorWithLocation:()=>S6,GrammarUtils:()=>p9,MultiMap:()=>Wct,OperationCancelled:()=>yct,Reduction:()=>J5,RegExpUtils:()=>J7,SimpleCache:()=>Kct,StreamImpl:()=>X5,TreeStreamImpl:()=>Z5,URI:()=>Ect,UriUtils:()=>$ct,WorkspaceCache:()=>Jct,assertUnreachable:()=>_6,delayNextTick:()=>cct,interruptAndCheck:()=>pct,isOperationCancelled:()=>dct,loadGrammarFromJson:()=>cdt,setInterruptionPeriod:()=>uct,startCancelableOperation:()=>hct,stream:()=>V5});var fdt=y((()=>{sht(),Mht(),k(pdt,Dht),iht(),Pht(),C6(),ddt(),xct(),t6(),Pct(),N7(),lct(),w6(),Z9(),d9()})),gdt=y((()=>{Rht(),mht()})),ydt=y((()=>{Iht(),Nht(),Oht(),Bht(),Bct(),odt(),Fht(),Iut(),zht()})),mdt={};x(mdt,{AbstractAstReflection:()=>q5,AbstractCstNode:()=>clt,AbstractLangiumParser:()=>vlt,AbstractParserErrorMessageProvider:()=>wlt,AbstractThreadedAsyncParser:()=>_ut,AstUtils:()=>x7,BiMap:()=>qct,Cancellation:()=>oct,CompositeCstNodeImpl:()=>ult,ContextCache:()=>Qct,CstNodeBuilder:()=>llt,CstUtils:()=>e6,DEFAULT_TOKENIZE_OPTIONS:()=>Yht,DONE_RESULT:()=>Q5,DatatypeSymbol:()=>blt,DefaultAstNodeDescriptionProvider:()=>wht,DefaultAstNodeLocator:()=>Sht,DefaultAsyncParser:()=>wut,DefaultCommentProvider:()=>Tut,DefaultConfigurationProvider:()=>Cht,DefaultDocumentBuilder:()=>Aht,DefaultDocumentValidator:()=>vht,DefaultHydrator:()=>Eut,DefaultIndexManager:()=>$ht,DefaultJsonSerializer:()=>hht,DefaultLangiumDocumentFactory:()=>Rct,DefaultLangiumDocuments:()=>Ict,DefaultLexer:()=>Ght,DefaultLexerErrorMessageProvider:()=>qht,DefaultLinker:()=>Dct,DefaultNameProvider:()=>jct,DefaultReferenceDescriptionProvider:()=>_ht,DefaultReferences:()=>Uct,DefaultScopeComputation:()=>Yct,DefaultScopeProvider:()=>tht,DefaultServiceRegistry:()=>uht,DefaultTokenBuilder:()=>Qlt,DefaultValueConverter:()=>Zlt,DefaultWorkspaceLock:()=>Cut,DefaultWorkspaceManager:()=>Lht,Deferred:()=>mct,Disposable:()=>Eht,DisposableCache:()=>Xct,DocumentCache:()=>Zct,DocumentState:()=>Lct,DocumentValidator:()=>Tht,EMPTY_SCOPE:()=>Vct,EMPTY_STREAM:()=>K5,EmptyFileSystem:()=>Kut,EmptyFileSystemProvider:()=>Xut,ErrorWithLocation:()=>S6,GrammarAST:()=>E6,GrammarUtils:()=>p9,IndentationAwareLexer:()=>Vut,IndentationAwareTokenBuilder:()=>Hut,JSDocDocumentationProvider:()=>vut,LangiumCompletionParser:()=>Slt,LangiumParser:()=>Tlt,LangiumParserErrorMessageProvider:()=>_lt,LeafCstNodeImpl:()=>hlt,LexingMode:()=>Gut,MapScope:()=>Hct,Module:()=>Uut,MultiMap:()=>Wct,OperationCancelled:()=>yct,ParserWorker:()=>Sut,Reduction:()=>J5,RegExpUtils:()=>J7,RootCstNodeImpl:()=>plt,SimpleCache:()=>Kct,StreamImpl:()=>X5,StreamScope:()=>Gct,TextDocument:()=>Sct,TreeStreamImpl:()=>Z5,URI:()=>Ect,UriUtils:()=>$ct,ValidationCategory:()=>ght,ValidationRegistry:()=>yht,ValueConverter:()=>Jlt,WorkspaceCache:()=>Jct,assertUnreachable:()=>_6,createCompletionParser:()=>Hlt,createDefaultCoreModule:()=>Dut,createDefaultSharedCoreModule:()=>Mut,createGrammarConfig:()=>J9,createLangiumParser:()=>Xlt,createParser:()=>$lt,delayNextTick:()=>cct,diagnosticData:()=>fht,eagerLoad:()=>But,getDiagnosticRange:()=>xht,indentationBuilderDefaultOptions:()=>Yut,inject:()=>Put,interruptAndCheck:()=>pct,isAstNode:()=>P5,isAstNodeDescription:()=>F5,isAstNodeWithComment:()=>lht,isCompositeCstNode:()=>j5,isIMultiModeLexerDefinition:()=>Uht,isJSDoc:()=>Xht,isLeafCstNode:()=>U5,isLinkingError:()=>z5,isNamed:()=>zct,isOperationCancelled:()=>dct,isReference:()=>B5,isRootCstNode:()=>W5,isTokenTypeArray:()=>jht,isTokenTypeDictionary:()=>Wht,loadGrammarFromJson:()=>cdt,parseJSDoc:()=>Vht,prepareLangiumParser:()=>Klt,setInterruptionPeriod:()=>uct,startCancelableOperation:()=>hct,stream:()=>V5,toDiagnosticData:()=>kht,toDiagnosticSeverity:()=>bht});var xdt=y((()=>{Out(),Qut(),pht(),Zut(),Y5(),Jut(),edt(),ndt(),adt(),sdt(),fdt(),k(mdt,pdt),gdt(),ydt(),m7()}));function bdt(t){return lpt.isInstance(t,Ndt)}function kdt(t){return lpt.isInstance(t,Mdt)}function vdt(t){return lpt.isInstance(t,Fdt)}function Tdt(t){return lpt.isInstance(t,Wdt)}function wdt(t){return lpt.isInstance(t,Ydt)}function _dt(t){return lpt.isInstance(t,Vdt)}function Sdt(t){return lpt.isInstance(t,Kdt)}function Cdt(t){return lpt.isInstance(t,Qdt)}function Edt(t){return lpt.isInstance(t,Zdt)}function Adt(t){return lpt.isInstance(t,Jdt)}function $dt(t){return lpt.isInstance(t,rpt)}var Ldt,Rdt,Idt,Ndt,Ddt,Mdt,Odt,Pdt,Bdt,Fdt,zdt,jdt,Udt,Wdt,qdt,Ydt,Gdt,Hdt,Vdt,Xdt,Kdt,Qdt,Zdt,Jdt,tpt,ept,rpt,ipt,npt,apt,spt,opt,lpt,cpt,hpt,upt,dpt,ppt,fpt,gpt,ypt,mpt,xpt,bpt,kpt,vpt,Tpt,wpt,_pt,Spt,Cpt,Ept,Apt,$pt,Lpt,Rpt,Ipt,Npt,Dpt,Mpt,Opt,Ppt,Bpt,Fpt,zpt,jpt,Upt=y((()=>{xdt(),xdt(),xdt(),xdt(),Ldt=Object.defineProperty,Rdt=g(((t,e)=>Ldt(t,"name",{value:e,configurable:!0})),"__name"),Idt="Statement",Ndt="Architecture",g(bdt,"isArchitecture"),Rdt(bdt,"isArchitecture"),Ddt="Axis",Mdt="Branch",g(kdt,"isBranch"),Rdt(kdt,"isBranch"),Odt="Checkout",Pdt="CherryPicking",Bdt="ClassDefStatement",Fdt="Commit",g(vdt,"isCommit"),Rdt(vdt,"isCommit"),zdt="Curve",jdt="Edge",Udt="Entry",Wdt="GitGraph",g(Tdt,"isGitGraph"),Rdt(Tdt,"isGitGraph"),qdt="Group",Ydt="Info",g(wdt,"isInfo"),Rdt(wdt,"isInfo"),Gdt="Item",Hdt="Junction",Vdt="Merge",g(_dt,"isMerge"),Rdt(_dt,"isMerge"),Xdt="Option",Kdt="Packet",g(Sdt,"isPacket"),Rdt(Sdt,"isPacket"),Qdt="PacketBlock",g(Cdt,"isPacketBlock"),Rdt(Cdt,"isPacketBlock"),Zdt="Pie",g(Edt,"isPie"),Rdt(Edt,"isPie"),Jdt="PieSection",g(Adt,"isPieSection"),Rdt(Adt,"isPieSection"),tpt="Radar",ept="Service",rpt="Treemap",g($dt,"isTreemap"),Rdt($dt,"isTreemap"),ipt="TreemapRow",npt="Direction",apt="Leaf",spt="Section",opt=class extends q5{static{g(this,"MermaidAstReflection")}static{Rdt(this,"MermaidAstReflection")}getAllTypes(){return[Ndt,Ddt,Mdt,Odt,Pdt,Bdt,Fdt,zdt,npt,jdt,Udt,Wdt,qdt,Ydt,Gdt,Hdt,apt,Vdt,Xdt,Kdt,Qdt,Zdt,Jdt,tpt,spt,ept,Idt,rpt,ipt]}computeIsSubtype(t,e){switch(t){case Mdt:case Odt:case Pdt:case Fdt:case Vdt:return this.isSubtype(Idt,e);case npt:return this.isSubtype(Wdt,e);case apt:case spt:return this.isSubtype(Gdt,e);default:return!1}}getReferenceType(t){let e=`${t.container.$type}:${t.property}`;if("Entry:axis"===e)return Ddt;throw new Error(`${e} is not a valid reference id.`)}getTypeMetaData(t){switch(t){case Ndt:return{name:Ndt,properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]};case Ddt:return{name:Ddt,properties:[{name:"label"},{name:"name"}]};case Mdt:return{name:Mdt,properties:[{name:"name"},{name:"order"}]};case Odt:return{name:Odt,properties:[{name:"branch"}]};case Pdt:return{name:Pdt,properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]};case Bdt:return{name:Bdt,properties:[{name:"className"},{name:"styleText"}]};case Fdt:return{name:Fdt,properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]};case zdt:return{name:zdt,properties:[{name:"entries",defaultValue:[]},{name:"label"},{name:"name"}]};case jdt:return{name:jdt,properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]};case Udt:return{name:Udt,properties:[{name:"axis"},{name:"value"}]};case Wdt:return{name:Wdt,properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]};case qdt:return{name:qdt,properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]};case Ydt:return{name:Ydt,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case Gdt:return{name:Gdt,properties:[{name:"classSelector"},{name:"name"}]};case Hdt:return{name:Hdt,properties:[{name:"id"},{name:"in"}]};case Vdt:return{name:Vdt,properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]};case Xdt:return{name:Xdt,properties:[{name:"name"},{name:"value",defaultValue:!1}]};case Kdt:return{name:Kdt,properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]};case Qdt:return{name:Qdt,properties:[{name:"bits"},{name:"end"},{name:"label"},{name:"start"}]};case Zdt:return{name:Zdt,properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]};case Jdt:return{name:Jdt,properties:[{name:"label"},{name:"value"}]};case tpt:return{name:tpt,properties:[{name:"accDescr"},{name:"accTitle"},{name:"axes",defaultValue:[]},{name:"curves",defaultValue:[]},{name:"options",defaultValue:[]},{name:"title"}]};case ept:return{name:ept,properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]};case rpt:return{name:rpt,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"},{name:"TreemapRows",defaultValue:[]}]};case ipt:return{name:ipt,properties:[{name:"indent"},{name:"item"}]};case npt:return{name:npt,properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]};case apt:return{name:apt,properties:[{name:"classSelector"},{name:"name"},{name:"value"}]};case spt:return{name:spt,properties:[{name:"classSelector"},{name:"name"}]};default:return{name:t,properties:[]}}}},lpt=new opt,hpt=Rdt((()=>cpt??(cpt=cdt('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Info","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@7"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}'))),"InfoGrammar"),dpt=Rdt((()=>upt??(upt=cdt('{"$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Packet","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"packet"},{"$type":"Keyword","value":"packet-beta"}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}],"cardinality":"?"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"+"},{"$type":"Assignment","feature":"bits","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]}]},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@8"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@9"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}'))),"PacketGrammar"),fpt=Rdt((()=>ppt??(ppt=cdt('{"$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Pie","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"FLOAT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/-?(0|[1-9][0-9]*)(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER_PIE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@2"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@3"}}]},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@11"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@12"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}'))),"PieGrammar"),ypt=Rdt((()=>gpt??(gpt=cdt('{"$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Architecture","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@28"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@18"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@19"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}'))),"ArchitectureGrammar"),xpt=Rdt((()=>mpt??(mpt=cdt('{"$type":"Grammar","isDeclared":true,"name":"GitGraph","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@24"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@14"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"TerminalRule","name":"REFERENCE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}'))),"GitGraphGrammar"),kpt=Rdt((()=>bpt??(bpt=cdt('{"$type":"Grammar","isDeclared":true,"name":"Radar","imports":[],"rules":[{"$type":"ParserRule","entry":true,"name":"Radar","definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":"radar-beta:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"radar-beta"},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]},{"$type":"Group","elements":[{"$type":"Keyword","value":"axis"},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"axes","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"curve"},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"curves","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"Assignment","feature":"options","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}}],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Label","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"["},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}},{"$type":"Keyword","value":"]"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Axis","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Curve","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"},{"$type":"Keyword","value":"{"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Keyword","value":"}"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"Entries","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":","},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"$type":"Assignment","feature":"entries","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"DetailedEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"axis","operator":"=","terminal":{"$type":"CrossReference","type":{"$ref":"#/rules@2"},"terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},"deprecatedSyntax":false}},{"$type":"Keyword","value":":","cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"NumberEntry","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Option","definition":{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"showLegend"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"ticks"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"max"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"min"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Keyword","value":"graticule"}},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"GRATICULE","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"circle"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"polygon"}}]},"fragment":false,"hidden":false},{"$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"FLOAT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@15"}},{"$type":"TerminalRuleCall","rule":{"$ref":"#/rules@16"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|\'([^\'\\\\\\\\]|\\\\\\\\.)*\'/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"interfaces":[{"$type":"Interface","name":"Entry","attributes":[{"$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"$type":"ReferenceType","referenceType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@2"}}}},{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"definesHiddenTokens":false,"hiddenTokens":[],"types":[],"usedGrammars":[]}'))),"RadarGrammar"),Tpt=Rdt((()=>vpt??(vpt=cdt('{"$type":"Grammar","isDeclared":true,"name":"Treemap","rules":[{"$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"BOOLEAN","type":{"$type":"ReturnType","name":"boolean"},"definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"true"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"ParserRule","entry":true,"name":"Treemap","returnType":{"$ref":"#/interfaces@4"},"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"TreemapRows","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]}}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"TREEMAP_KEYWORD","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap-beta"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"treemap"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"CLASS_DEF","definition":{"$type":"RegexToken","regex":"/classDef\\\\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\\\\s+([^;\\\\r\\\\n]*))?(?:;)?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STYLE_SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":::"}},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"SEPARATOR","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":":"}},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"COMMA","definition":{"$type":"CharacterRange","left":{"$type":"Keyword","value":","}},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WS","definition":{"$type":"RegexToken","regex":"/[ \\\\t]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"ML_COMMENT","definition":{"$type":"RegexToken","regex":"/\\\\%\\\\%[^\\\\n]*/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"NL","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false},{"$type":"ParserRule","name":"TreemapRow","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"indent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"item","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"ClassDef","dataType":"string","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Item","returnType":{"$ref":"#/interfaces@0"},"definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Section","returnType":{"$ref":"#/interfaces@1"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Leaf","returnType":{"$ref":"#/interfaces@2"},"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@23"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[],"cardinality":"?"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@22"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]},{"$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INDENTATION","definition":{"$type":"RegexToken","regex":"/[ \\\\t]{1,}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID2","definition":{"$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9_]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"NUMBER2","definition":{"$type":"RegexToken","regex":"/[0-9_\\\\.\\\\,]+/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"MyNumber","dataType":"number","definition":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"STRING2","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|\'[^\']*\'/"},"fragment":false,"hidden":false}],"interfaces":[{"$type":"Interface","name":"Item","attributes":[{"$type":"TypeAttribute","name":"name","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"classSelector","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"$type":"Interface","name":"Section","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[]},{"$type":"Interface","name":"Leaf","superTypes":[{"$ref":"#/interfaces@0"}],"attributes":[{"$type":"TypeAttribute","name":"value","type":{"$type":"SimpleType","primitiveType":"number"},"isOptional":false}]},{"$type":"Interface","name":"ClassDefStatement","attributes":[{"$type":"TypeAttribute","name":"className","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"$type":"TypeAttribute","name":"styleText","type":{"$type":"SimpleType","primitiveType":"string"},"isOptional":false}],"superTypes":[]},{"$type":"Interface","name":"Treemap","attributes":[{"$type":"TypeAttribute","name":"TreemapRows","type":{"$type":"ArrayType","elementType":{"$type":"SimpleType","typeRef":{"$ref":"#/rules@14"}}},"isOptional":false},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[],"$comment":"/**\\n * Treemap grammar for Langium\\n * Converted from mindmap grammar\\n *\\n * The ML_COMMENT and NL hidden terminals handle whitespace, comments, and newlines\\n * before the treemap keyword, allowing for empty lines and comments before the\\n * treemap declaration.\\n */"}'))),"TreemapGrammar"),wpt={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},_pt={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Spt={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Cpt={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Ept={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Apt={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},$pt={languageId:"treemap",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"},Lpt={AstReflection:Rdt((()=>new opt),"AstReflection")},Rpt={Grammar:Rdt((()=>hpt()),"Grammar"),LanguageMetaData:Rdt((()=>wpt),"LanguageMetaData"),parser:{}},Ipt={Grammar:Rdt((()=>dpt()),"Grammar"),LanguageMetaData:Rdt((()=>_pt),"LanguageMetaData"),parser:{}},Npt={Grammar:Rdt((()=>fpt()),"Grammar"),LanguageMetaData:Rdt((()=>Spt),"LanguageMetaData"),parser:{}},Dpt={Grammar:Rdt((()=>ypt()),"Grammar"),LanguageMetaData:Rdt((()=>Cpt),"LanguageMetaData"),parser:{}},Mpt={Grammar:Rdt((()=>xpt()),"Grammar"),LanguageMetaData:Rdt((()=>Ept),"LanguageMetaData"),parser:{}},Opt={Grammar:Rdt((()=>kpt()),"Grammar"),LanguageMetaData:Rdt((()=>Apt),"LanguageMetaData"),parser:{}},Ppt={Grammar:Rdt((()=>Tpt()),"Grammar"),LanguageMetaData:Rdt((()=>$pt),"LanguageMetaData"),parser:{}},Bpt={ACC_DESCR:/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,ACC_TITLE:/accTitle[\t ]*:([^\n\r]*)/,TITLE:/title([\t ][^\n\r]*|)/},Fpt=class extends Zlt{static{g(this,"AbstractMermaidValueConverter")}static{Rdt(this,"AbstractMermaidValueConverter")}runConverter(t,e,r){let i=this.runCommonConverter(t,e,r);return void 0===i&&(i=this.runCustomConverter(t,e,r)),void 0===i?super.runConverter(t,e,r):i}runCommonConverter(t,e,r){let i=Bpt[t.name];if(void 0===i)return;let n=i.exec(e);if(null!==n){if(void 0!==n[1])return n[1].trim().replace(/[\t ]{2,}/gm," ");if(void 0!==n[2])return n[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,"\n")}}},zpt=class extends Fpt{static{g(this,"CommonValueConverter")}static{Rdt(this,"CommonValueConverter")}runCustomConverter(t,e,r){}},jpt=class extends Qlt{static{g(this,"AbstractMermaidTokenBuilder")}static{Rdt(this,"AbstractMermaidTokenBuilder")}constructor(t){super(),this.keywords=new Set(t)}buildKeywordTokens(t,e,r){let i=super.buildKeywordTokens(t,e,r);return i.forEach((t=>{this.keywords.has(t.name)&&void 0!==t.PATTERN&&(t.PATTERN=new RegExp(t.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))})),i}},class extends jpt{static{g(this,"CommonTokenBuilder")}static{Rdt(this,"CommonTokenBuilder")}}}));function Wpt(t=Kut){let e=Put(Mut(t),Lpt),r=Put(Dut({shared:e}),Mpt,Ypt);return e.ServiceRegistry.register(r),{shared:e,GitGraph:r}}var qpt,Ypt,Gpt=y((()=>{Upt(),xdt(),qpt=class extends jpt{static{g(this,"GitGraphTokenBuilder")}static{Rdt(this,"GitGraphTokenBuilder")}constructor(){super(["gitGraph"])}},Ypt={parser:{TokenBuilder:Rdt((()=>new qpt),"TokenBuilder"),ValueConverter:Rdt((()=>new zpt),"ValueConverter")}},g(Wpt,"createGitGraphServices"),Rdt(Wpt,"createGitGraphServices")}));function Hpt(t=Kut){let e=Put(Mut(t),Lpt),r=Put(Dut({shared:e}),Rpt,Xpt);return e.ServiceRegistry.register(r),{shared:e,Info:r}}var Vpt,Xpt,Kpt=y((()=>{Upt(),xdt(),Vpt=class extends jpt{static{g(this,"InfoTokenBuilder")}static{Rdt(this,"InfoTokenBuilder")}constructor(){super(["info","showInfo"])}},Xpt={parser:{TokenBuilder:Rdt((()=>new Vpt),"TokenBuilder"),ValueConverter:Rdt((()=>new zpt),"ValueConverter")}},g(Hpt,"createInfoServices"),Rdt(Hpt,"createInfoServices")}));function Qpt(t=Kut){let e=Put(Mut(t),Lpt),r=Put(Dut({shared:e}),Ipt,Jpt);return e.ServiceRegistry.register(r),{shared:e,Packet:r}}var Zpt,Jpt,tft=y((()=>{Upt(),xdt(),Zpt=class extends jpt{static{g(this,"PacketTokenBuilder")}static{Rdt(this,"PacketTokenBuilder")}constructor(){super(["packet"])}},Jpt={parser:{TokenBuilder:Rdt((()=>new Zpt),"TokenBuilder"),ValueConverter:Rdt((()=>new zpt),"ValueConverter")}},g(Qpt,"createPacketServices"),Rdt(Qpt,"createPacketServices")}));function eft(t=Kut){let e=Put(Mut(t),Lpt),r=Put(Dut({shared:e}),Npt,nft);return e.ServiceRegistry.register(r),{shared:e,Pie:r}}var rft,ift,nft,aft=y((()=>{Upt(),xdt(),rft=class extends jpt{static{g(this,"PieTokenBuilder")}static{Rdt(this,"PieTokenBuilder")}constructor(){super(["pie","showData"])}},ift=class extends Fpt{static{g(this,"PieValueConverter")}static{Rdt(this,"PieValueConverter")}runCustomConverter(t,e,r){if("PIE_SECTION_LABEL"===t.name)return e.replace(/"/g,"").trim()}},nft={parser:{TokenBuilder:Rdt((()=>new rft),"TokenBuilder"),ValueConverter:Rdt((()=>new ift),"ValueConverter")}},g(eft,"createPieServices"),Rdt(eft,"createPieServices")}));function sft(t=Kut){let e=Put(Mut(t),Lpt),r=Put(Dut({shared:e}),Dpt,cft);return e.ServiceRegistry.register(r),{shared:e,Architecture:r}}var oft,lft,cft,hft=y((()=>{Upt(),xdt(),oft=class extends jpt{static{g(this,"ArchitectureTokenBuilder")}static{Rdt(this,"ArchitectureTokenBuilder")}constructor(){super(["architecture"])}},lft=class extends Fpt{static{g(this,"ArchitectureValueConverter")}static{Rdt(this,"ArchitectureValueConverter")}runCustomConverter(t,e,r){return"ARCH_ICON"===t.name?e.replace(/[()]/g,"").trim():"ARCH_TEXT_ICON"===t.name?e.replace(/["()]/g,""):"ARCH_TITLE"===t.name?e.replace(/[[\]]/g,"").trim():void 0}},cft={parser:{TokenBuilder:Rdt((()=>new oft),"TokenBuilder"),ValueConverter:Rdt((()=>new lft),"ValueConverter")}},g(sft,"createArchitectureServices"),Rdt(sft,"createArchitectureServices")}));function uft(t=Kut){let e=Put(Mut(t),Lpt),r=Put(Dut({shared:e}),Opt,pft);return e.ServiceRegistry.register(r),{shared:e,Radar:r}}var dft,pft,fft=y((()=>{Upt(),xdt(),dft=class extends jpt{static{g(this,"RadarTokenBuilder")}static{Rdt(this,"RadarTokenBuilder")}constructor(){super(["radar-beta"])}},pft={parser:{TokenBuilder:Rdt((()=>new dft),"TokenBuilder"),ValueConverter:Rdt((()=>new zpt),"ValueConverter")}},g(uft,"createRadarServices"),Rdt(uft,"createRadarServices")}));function gft(t){let e=t.validation.TreemapValidator,r=t.validation.ValidationRegistry;if(r){let t={Treemap:e.checkSingleRoot.bind(e)};r.register(t,e)}}function yft(t=Kut){let e=Put(Mut(t),Lpt),r=Put(Dut({shared:e}),Ppt,vft);return e.ServiceRegistry.register(r),gft(r),{shared:e,Treemap:r}}var mft,xft,bft,kft,vft,Tft=y((()=>{Upt(),xdt(),mft=class extends jpt{static{g(this,"TreemapTokenBuilder")}static{Rdt(this,"TreemapTokenBuilder")}constructor(){super(["treemap"])}},xft=/classDef\s+([A-Z_a-z]\w+)(?:\s+([^\n\r;]*))?;?/,bft=class extends Fpt{static{g(this,"TreemapValueConverter")}static{Rdt(this,"TreemapValueConverter")}runCustomConverter(t,e,r){if("NUMBER2"===t.name)return parseFloat(e.replace(/,/g,""));if("SEPARATOR"===t.name)return e.substring(1,e.length-1);if("STRING2"===t.name)return e.substring(1,e.length-1);if("INDENTATION"===t.name)return e.length;if("ClassDef"===t.name){if("string"!=typeof e)return e;let t=xft.exec(e);if(t)return{$type:"ClassDefStatement",className:t[1],styleText:t[2]||void 0}}}},g(gft,"registerValidationChecks"),Rdt(gft,"registerValidationChecks"),kft=class{static{g(this,"TreemapValidator")}static{Rdt(this,"TreemapValidator")}checkSingleRoot(t,e){let r;for(let i of t.TreemapRows)i.item&&(void 0===r&&void 0===i.indent?r=0:(void 0===i.indent||void 0!==r&&r>=parseInt(i.indent,10))&&e("error","Multiple root nodes are not allowed in a treemap.",{node:i,property:"item"}))}},vft={parser:{TokenBuilder:Rdt((()=>new mft),"TokenBuilder"),ValueConverter:Rdt((()=>new bft),"ValueConverter")},validation:{TreemapValidator:Rdt((()=>new kft),"TreemapValidator")}},g(yft,"createTreemapServices"),Rdt(yft,"createTreemapServices")})),wft={};x(wft,{InfoModule:()=>Xpt,createInfoServices:()=>Hpt});var _ft=y((()=>{Kpt(),Upt()})),Sft={};x(Sft,{PacketModule:()=>Jpt,createPacketServices:()=>Qpt});var Cft=y((()=>{tft(),Upt()})),Eft={};x(Eft,{PieModule:()=>nft,createPieServices:()=>eft});var Aft=y((()=>{aft(),Upt()})),$ft={};x($ft,{ArchitectureModule:()=>cft,createArchitectureServices:()=>sft});var Lft=y((()=>{hft(),Upt()})),Rft={};x(Rft,{GitGraphModule:()=>Ypt,createGitGraphServices:()=>Wpt});var Ift=y((()=>{Gpt(),Upt()})),Nft={};x(Nft,{RadarModule:()=>pft,createRadarServices:()=>uft});var Dft=y((()=>{fft(),Upt()})),Mft={};x(Mft,{TreemapModule:()=>vft,createTreemapServices:()=>yft});var Oft=y((()=>{Tft(),Upt()}));async function Pft(t,e){let r=Fft[t];if(!r)throw new Error(`Unknown diagram type: ${t}`);Bft[t]||await r();let i=Bft[t].parse(e);if(i.lexerErrors.length>0||i.parserErrors.length>0)throw new zft(i);return i.value}var Bft,Fft,zft,jft=y((()=>{Gpt(),Kpt(),tft(),aft(),hft(),fft(),Tft(),Upt(),Bft={},Fft={info:Rdt((async()=>{let{createInfoServices:t}=await Promise.resolve().then((()=>(_ft(),wft))),e=t().Info.parser.LangiumParser;Bft.info=e}),"info"),packet:Rdt((async()=>{let{createPacketServices:t}=await Promise.resolve().then((()=>(Cft(),Sft))),e=t().Packet.parser.LangiumParser;Bft.packet=e}),"packet"),pie:Rdt((async()=>{let{createPieServices:t}=await Promise.resolve().then((()=>(Aft(),Eft))),e=t().Pie.parser.LangiumParser;Bft.pie=e}),"pie"),architecture:Rdt((async()=>{let{createArchitectureServices:t}=await Promise.resolve().then((()=>(Lft(),$ft))),e=t().Architecture.parser.LangiumParser;Bft.architecture=e}),"architecture"),gitGraph:Rdt((async()=>{let{createGitGraphServices:t}=await Promise.resolve().then((()=>(Ift(),Rft))),e=t().GitGraph.parser.LangiumParser;Bft.gitGraph=e}),"gitGraph"),radar:Rdt((async()=>{let{createRadarServices:t}=await Promise.resolve().then((()=>(Dft(),Nft))),e=t().Radar.parser.LangiumParser;Bft.radar=e}),"radar"),treemap:Rdt((async()=>{let{createTreemapServices:t}=await Promise.resolve().then((()=>(Oft(),Mft))),e=t().Treemap.parser.LangiumParser;Bft.treemap=e}),"treemap")},g(Pft,"parse"),Rdt(Pft,"parse"),zft=class extends Error{static{g(this,"MermaidParseError")}constructor(t){super(`Parsing failed: ${t.lexerErrors.map((t=>t.message)).join("\n")} ${t.parserErrors.map((t=>t.message)).join("\n")}`),this.result=t}static{Rdt(this,"MermaidParseError")}}}));function Uft(t,e){t.accDescr&&e.setAccDescription?.(t.accDescr),t.accTitle&&e.setAccTitle?.(t.accTitle),t.title&&e.setDiagramTitle?.(t.title)}var Wft,qft,Yft=y((()=>{g(Uft,"populateCommonDb")})),Gft=y((()=>{Wft={NORMAL:0,REVERSE:1,HIGHLIGHT:2,MERGE:3,CHERRY_PICK:4}})),Hft=y((()=>{qft=class{constructor(t){this.init=t,this.records=this.init()}static{g(this,"ImperativeState")}reset(){this.records=this.init()}}}));function Vft(){return cL({length:7})}function Xft(t,e){let r=Object.create(null);return t.reduce(((t,i)=>{let n=e(i);return r[n]||(r[n]=!0,t.push(i)),t}),[])}function Kft(t,e,r){let i=t.indexOf(e);-1===i?t.push(r):t.splice(i,1,r)}function Qft(t){let e=t.reduce(((t,e)=>t.seq>e.seq?t:e),t[0]),r="";t.forEach((function(t){r+=t===e?"\t*":"\t|"}));let i=[r,e.id,e.seq];for(let t in tgt.records.branches)tgt.records.branches.get(t)===e.id&&i.push(t);if(et.debug(i.join(" ")),e.parents&&2==e.parents.length&&e.parents[0]&&e.parents[1]){let r=tgt.records.commits.get(e.parents[0]);Kft(t,e,r),e.parents[1]&&t.push(tgt.records.commits.get(e.parents[1]))}else{if(0==e.parents.length)return;if(e.parents[0]){let r=tgt.records.commits.get(e.parents[0]);Kft(t,e,r)}}Qft(t=Xft(t,(t=>t.id)))}var Zft,Jft,tgt,egt,rgt,igt,ngt,agt,sgt,ogt,lgt,cgt,hgt,ugt,dgt,pgt,fgt,ggt,ygt,mgt,xgt,bgt,kgt,vgt,Tgt,wgt,_gt,Sgt,Cgt,Egt,Agt,$gt,Lgt,Rgt,Igt,Ngt,Dgt,Mgt,Ogt,Pgt,Bgt,Fgt,zgt,jgt,Ugt,Wgt,qgt,Ygt,Ggt,Hgt,Vgt,Xgt,Kgt,Qgt,Zgt,Jgt,tyt,eyt,ryt,iyt,nyt,ayt,syt,oyt,lyt,cyt=y((()=>{We(),_L(),Ar(),gn(),is(),Gft(),Hft(),Cr(),Zft=me.gitGraph,Jft=g((()=>G$({...Zft,...Re().gitGraph})),"getConfig"),tgt=new qft((()=>{let t=Jft(),e=t.mainBranchName,r=t.mainBranchOrder;return{mainBranchName:e,commits:new Map,head:null,branchConfig:new Map([[e,{name:e,order:r}]]),branches:new Map([[e,null]]),currBranch:e,direction:"LR",seq:0,options:{}}})),g(Vft,"getID"),g(Xft,"uniqBy"),egt=g((function(t){tgt.records.direction=t}),"setDirection"),rgt=g((function(t){et.debug("options str",t),t=t?.trim(),t=t||"{}";try{tgt.records.options=JSON.parse(t)}catch(t){et.error("error while parsing gitGraph options",t.message)}}),"setOptions"),igt=g((function(){return tgt.records.options}),"getOptions"),ngt=g((function(t){let e=t.msg,r=t.id,i=t.type,n=t.tags;et.info("commit",e,r,i,n),et.debug("Entering commit:",e,r,i,n);let a=Jft();r=on.sanitizeText(r,a),e=on.sanitizeText(e,a),n=n?.map((t=>on.sanitizeText(t,a)));let s={id:r||tgt.records.seq+"-"+Vft(),message:e,seq:tgt.records.seq++,type:i??Wft.NORMAL,tags:n??[],parents:null==tgt.records.head?[]:[tgt.records.head.id],branch:tgt.records.currBranch};tgt.records.head=s,et.info("main branch",a.mainBranchName),tgt.records.commits.has(s.id)&&et.warn(`Commit ID ${s.id} already exists`),tgt.records.commits.set(s.id,s),tgt.records.branches.set(tgt.records.currBranch,s.id),et.debug("in pushCommit "+s.id)}),"commit"),agt=g((function(t){let e=t.name,r=t.order;if(e=on.sanitizeText(e,Jft()),tgt.records.branches.has(e))throw new Error(`Trying to create an existing branch. (Help: Either use a new name if you want create a new branch or try using "checkout ${e}")`);tgt.records.branches.set(e,null!=tgt.records.head?tgt.records.head.id:null),tgt.records.branchConfig.set(e,{name:e,order:r}),lgt(e),et.debug("in createBranch")}),"branch"),sgt=g((t=>{let e=t.branch,r=t.id,i=t.type,n=t.tags,a=Jft();e=on.sanitizeText(e,a),r&&(r=on.sanitizeText(r,a));let s=tgt.records.branches.get(tgt.records.currBranch),o=tgt.records.branches.get(e),l=s?tgt.records.commits.get(s):void 0,c=o?tgt.records.commits.get(o):void 0;if(l&&c&&l.branch===e)throw new Error(`Cannot merge branch '${e}' into itself.`);if(tgt.records.currBranch===e){let t=new Error('Incorrect usage of "merge". Cannot merge a branch to itself');throw t.hash={text:`merge ${e}`,token:`merge ${e}`,expected:["branch abc"]},t}if(void 0===l||!l){let t=new Error(`Incorrect usage of "merge". Current branch (${tgt.records.currBranch})has no commits`);throw t.hash={text:`merge ${e}`,token:`merge ${e}`,expected:["commit"]},t}if(!tgt.records.branches.has(e)){let t=new Error('Incorrect usage of "merge". Branch to be merged ('+e+") does not exist");throw t.hash={text:`merge ${e}`,token:`merge ${e}`,expected:[`branch ${e}`]},t}if(void 0===c||!c){let t=new Error('Incorrect usage of "merge". Branch to be merged ('+e+") has no commits");throw t.hash={text:`merge ${e}`,token:`merge ${e}`,expected:['"commit"']},t}if(l===c){let t=new Error('Incorrect usage of "merge". Both branches have same head');throw t.hash={text:`merge ${e}`,token:`merge ${e}`,expected:["branch abc"]},t}if(r&&tgt.records.commits.has(r)){let t=new Error('Incorrect usage of "merge". Commit with id:'+r+" already exists, use different custom id");throw t.hash={text:`merge ${e} ${r} ${i} ${n?.join(" ")}`,token:`merge ${e} ${r} ${i} ${n?.join(" ")}`,expected:[`merge ${e} ${r}_UNIQUE ${i} ${n?.join(" ")}`]},t}let h=o||"",u={id:r||`${tgt.records.seq}-${Vft()}`,message:`merged branch ${e} into ${tgt.records.currBranch}`,seq:tgt.records.seq++,parents:null==tgt.records.head?[]:[tgt.records.head.id,h],branch:tgt.records.currBranch,type:Wft.MERGE,customType:i,customId:!!r,tags:n??[]};tgt.records.head=u,tgt.records.commits.set(u.id,u),tgt.records.branches.set(tgt.records.currBranch,u.id),et.debug(tgt.records.branches),et.debug("in mergeBranch")}),"merge"),ogt=g((function(t){let e=t.id,r=t.targetId,i=t.tags,n=t.parent;et.debug("Entering cherryPick:",e,r,i);let a=Jft();if(e=on.sanitizeText(e,a),r=on.sanitizeText(r,a),i=i?.map((t=>on.sanitizeText(t,a))),n=on.sanitizeText(n,a),!e||!tgt.records.commits.has(e)){let t=new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');throw t.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},t}let s=tgt.records.commits.get(e);if(void 0===s||!s)throw new Error('Incorrect usage of "cherryPick". Source commit id should exist and provided');if(n&&(!Array.isArray(s.parents)||!s.parents.includes(n)))throw new Error("Invalid operation: The specified parent commit is not an immediate parent of the cherry-picked commit.");let o=s.branch;if(s.type===Wft.MERGE&&!n)throw new Error("Incorrect usage of cherry-pick: If the source commit is a merge commit, an immediate parent commit must be specified.");if(!r||!tgt.records.commits.has(r)){if(o===tgt.records.currBranch){let t=new Error('Incorrect usage of "cherryPick". Source commit is already on current branch');throw t.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},t}let t=tgt.records.branches.get(tgt.records.currBranch);if(void 0===t||!t){let t=new Error(`Incorrect usage of "cherry-pick". Current branch (${tgt.records.currBranch})has no commits`);throw t.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},t}let a=tgt.records.commits.get(t);if(void 0===a||!a){let t=new Error(`Incorrect usage of "cherry-pick". Current branch (${tgt.records.currBranch})has no commits`);throw t.hash={text:`cherryPick ${e} ${r}`,token:`cherryPick ${e} ${r}`,expected:["cherry-pick abc"]},t}let l={id:tgt.records.seq+"-"+Vft(),message:`cherry-picked ${s?.message} into ${tgt.records.currBranch}`,seq:tgt.records.seq++,parents:null==tgt.records.head?[]:[tgt.records.head.id,s.id],branch:tgt.records.currBranch,type:Wft.CHERRY_PICK,tags:i?i.filter(Boolean):[`cherry-pick:${s.id}${s.type===Wft.MERGE?`|parent:${n}`:""}`]};tgt.records.head=l,tgt.records.commits.set(l.id,l),tgt.records.branches.set(tgt.records.currBranch,l.id),et.debug(tgt.records.branches),et.debug("in cherryPick")}}),"cherryPick"),lgt=g((function(t){if(t=on.sanitizeText(t,Jft()),!tgt.records.branches.has(t)){let e=new Error(`Trying to checkout branch which is not yet created. (Help try using "branch ${t}")`);throw e.hash={text:`checkout ${t}`,token:`checkout ${t}`,expected:[`branch ${t}`]},e}{tgt.records.currBranch=t;let e=tgt.records.branches.get(tgt.records.currBranch);tgt.records.head=void 0!==e&&e?tgt.records.commits.get(e)??null:null}}),"checkout"),g(Kft,"upsert"),g(Qft,"prettyPrintCommitHistory"),cgt=g((function(){et.debug(tgt.records.commits),Qft([fgt()[0]])}),"prettyPrint"),hgt=g((function(){tgt.reset(),Xn()}),"clear"),ugt=g((function(){return[...tgt.records.branchConfig.values()].map(((t,e)=>null!==t.order&&void 0!==t.order?t:{...t,order:parseFloat(`0.${e}`)})).sort(((t,e)=>(t.order??0)-(e.order??0))).map((({name:t})=>({name:t})))}),"getBranchesAsObjArray"),dgt=g((function(){return tgt.records.branches}),"getBranches"),pgt=g((function(){return tgt.records.commits}),"getCommits"),fgt=g((function(){let t=[...tgt.records.commits.values()];return t.forEach((function(t){et.debug(t.id)})),t.sort(((t,e)=>t.seq-e.seq)),t}),"getCommitsArray"),ggt=g((function(){return tgt.records.currBranch}),"getCurrentBranch"),ygt=g((function(){return tgt.records.direction}),"getDirection"),mgt=g((function(){return tgt.records.head}),"getHead"),xgt={commitType:Wft,getConfig:Jft,setDirection:egt,setOptions:rgt,getOptions:igt,commit:ngt,branch:agt,merge:sgt,cherryPick:ogt,checkout:lgt,prettyPrint:cgt,clear:hgt,getBranchesAsObjArray:ugt,getBranches:dgt,getCommits:pgt,getCommitsArray:fgt,getCurrentBranch:ggt,getDirection:ygt,getHead:mgt,setAccTitle:Kn,getAccTitle:Qn,getAccDescription:Jn,setAccDescription:Zn,setDiagramTitle:ta,getDiagramTitle:ea}})),hyt=y((()=>{jft(),We(),Yft(),cyt(),Gft(),bgt=g(((t,e)=>{Uft(t,e),t.dir&&e.setDirection(t.dir);for(let r of t.statements)kgt(r,e)}),"populate"),kgt=g(((t,e)=>{let r={Commit:g((t=>e.commit(vgt(t))),"Commit"),Branch:g((t=>e.branch(Tgt(t))),"Branch"),Merge:g((t=>e.merge(wgt(t))),"Merge"),Checkout:g((t=>e.checkout(_gt(t))),"Checkout"),CherryPicking:g((t=>e.cherryPick(Sgt(t))),"CherryPicking")}[t.$type];r?r(t):et.error(`Unknown statement type: ${t.$type}`)}),"parseStatement"),vgt=g((t=>({id:t.id,msg:t.message??"",type:void 0!==t.type?Wft[t.type]:Wft.NORMAL,tags:t.tags??void 0})),"parseCommit"),Tgt=g((t=>({name:t.name,order:t.order??0})),"parseBranch"),wgt=g((t=>({branch:t.branch,id:t.id??"",type:void 0!==t.type?Wft[t.type]:void 0,tags:t.tags??void 0})),"parseMerge"),_gt=g((t=>t.branch),"parseCheckout"),Sgt=g((t=>({id:t.id,targetId:"",tags:0===t.tags?.length?void 0:t.tags,parent:t.parent})),"parseCherryPicking"),Cgt={parse:g((async t=>{let e=await Pft("gitGraph",t);et.debug(e),bgt(e,xgt)}),"parse")}})),uyt=y((()=>{QT(),ns(),We(),_L(),Gft(),Egt=na(),Agt=Egt?.gitGraph,$gt=10,Lgt=40,Rgt=new Map,Igt=new Map,Ngt=new Map,Dgt=[],Mgt=0,Ogt="LR",Pgt=g((()=>{Rgt.clear(),Igt.clear(),Ngt.clear(),Mgt=0,Dgt=[],Ogt="LR"}),"clear"),Bgt=g((t=>{let e=document.createElementNS("http://www.w3.org/2000/svg","text");return("string"==typeof t?t.split(/\\n|\n|<br\s*\/?>/gi):t).forEach((t=>{let r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","0"),r.setAttribute("class","row"),r.textContent=t.trim(),e.appendChild(r)})),e}),"drawText"),Fgt=g((t=>{let e,r,i;return"BT"===Ogt?(r=g(((t,e)=>t<=e),"comparisonFunc"),i=1/0):(r=g(((t,e)=>t>=e),"comparisonFunc"),i=0),t.forEach((t=>{let n="TB"===Ogt||"BT"==Ogt?Igt.get(t)?.y:Igt.get(t)?.x;void 0!==n&&r(n,i)&&(e=t,i=n)})),e}),"findClosestParent"),zgt=g((t=>{let e="",r=1/0;return t.forEach((t=>{let i=Igt.get(t).y;i<=r&&(e=t,r=i)})),e||void 0}),"findClosestParentBT"),jgt=g(((t,e,r)=>{let i=r,n=r,a=[];t.forEach((t=>{let r=e.get(t);if(!r)throw new Error(`Commit not found for key ${t}`);r.parents.length?(i=Wgt(r),n=Math.max(i,n)):a.push(r),qgt(r,i)})),i=n,a.forEach((t=>{Ygt(t,i,r)})),t.forEach((t=>{let r=e.get(t);if(r?.parents.length){let t=zgt(r.parents);i=Igt.get(t).y-Lgt,i<=n&&(n=i);let e=Rgt.get(r.branch).pos,a=i-$gt;Igt.set(r.id,{x:e,y:a})}}))}),"setParallelBTPos"),Ugt=g((t=>{let e=Fgt(t.parents.filter((t=>null!==t)));if(!e)throw new Error(`Closest parent not found for commit ${t.id}`);let r=Igt.get(e)?.y;if(void 0===r)throw new Error(`Closest parent position not found for commit ${t.id}`);return r}),"findClosestParentPos"),Wgt=g((t=>Ugt(t)+Lgt),"calculateCommitPosition"),qgt=g(((t,e)=>{let r=Rgt.get(t.branch);if(!r)throw new Error(`Branch not found for commit ${t.id}`);let i=r.pos,n=e+$gt;return Igt.set(t.id,{x:i,y:n}),{x:i,y:n}}),"setCommitPosition"),Ygt=g(((t,e,r)=>{let i=Rgt.get(t.branch);if(!i)throw new Error(`Branch not found for commit ${t.id}`);let n=e+r,a=i.pos;Igt.set(t.id,{x:a,y:n})}),"setRootPosition"),Ggt=g(((t,e,r,i,n,a)=>{if(a===Wft.HIGHLIGHT)t.append("rect").attr("x",r.x-10).attr("y",r.y-10).attr("width",20).attr("height",20).attr("class",`commit ${e.id} commit-highlight${n%8} ${i}-outer`),t.append("rect").attr("x",r.x-6).attr("y",r.y-6).attr("width",12).attr("height",12).attr("class",`commit ${e.id} commit${n%8} ${i}-inner`);else if(a===Wft.CHERRY_PICK)t.append("circle").attr("cx",r.x).attr("cy",r.y).attr("r",10).attr("class",`commit ${e.id} ${i}`),t.append("circle").attr("cx",r.x-3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${e.id} ${i}`),t.append("circle").attr("cx",r.x+3).attr("cy",r.y+2).attr("r",2.75).attr("fill","#fff").attr("class",`commit ${e.id} ${i}`),t.append("line").attr("x1",r.x+3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${e.id} ${i}`),t.append("line").attr("x1",r.x-3).attr("y1",r.y+1).attr("x2",r.x).attr("y2",r.y-5).attr("stroke","#fff").attr("class",`commit ${e.id} ${i}`);else{let s=t.append("circle");if(s.attr("cx",r.x),s.attr("cy",r.y),s.attr("r",e.type===Wft.MERGE?9:10),s.attr("class",`commit ${e.id} commit${n%8}`),a===Wft.MERGE){let a=t.append("circle");a.attr("cx",r.x),a.attr("cy",r.y),a.attr("r",6),a.attr("class",`commit ${i} ${e.id} commit${n%8}`)}a===Wft.REVERSE&&t.append("path").attr("d",`M ${r.x-5},${r.y-5}L${r.x+5},${r.y+5}M${r.x-5},${r.y+5}L${r.x+5},${r.y-5}`).attr("class",`commit ${i} ${e.id} commit${n%8}`)}}),"drawCommitBullet"),Hgt=g(((t,e,r,i)=>{if(e.type!==Wft.CHERRY_PICK&&(e.customId&&e.type===Wft.MERGE||e.type!==Wft.MERGE)&&Agt?.showCommitLabel){let n=t.append("g"),a=n.insert("rect").attr("class","commit-label-bkg"),s=n.append("text").attr("x",i).attr("y",r.y+25).attr("class","commit-label").text(e.id),o=s.node()?.getBBox();if(o&&(a.attr("x",r.posWithOffset-o.width/2-2).attr("y",r.y+13.5).attr("width",o.width+4).attr("height",o.height+4),"TB"===Ogt||"BT"===Ogt?(a.attr("x",r.x-(o.width+16+5)).attr("y",r.y-12),s.attr("x",r.x-(o.width+16)).attr("y",r.y+o.height-12)):s.attr("x",r.posWithOffset-o.width/2),Agt.rotateCommitLabel))if("TB"===Ogt||"BT"===Ogt)s.attr("transform","rotate(-45, "+r.x+", "+r.y+")"),a.attr("transform","rotate(-45, "+r.x+", "+r.y+")");else{let t=-7.5-(o.width+10)/25*9.5,e=10+o.width/25*8.5;n.attr("transform","translate("+t+", "+e+") rotate(-45, "+i+", "+r.y+")")}}}),"drawCommitLabel"),Vgt=g(((t,e,r,i)=>{if(e.tags.length>0){let n=0,a=0,s=0,o=[];for(let i of e.tags.reverse()){let e=t.insert("polygon"),l=t.append("circle"),c=t.append("text").attr("y",r.y-16-n).attr("class","tag-label").text(i),h=c.node()?.getBBox();if(!h)throw new Error("Tag bbox not found");a=Math.max(a,h.width),s=Math.max(s,h.height),c.attr("x",r.posWithOffset-h.width/2),o.push({tag:c,hole:l,rect:e,yOffset:n}),n+=20}for(let{tag:t,hole:e,rect:n,yOffset:l}of o){let o=s/2,c=r.y-19.2-l;if(n.attr("class","tag-label-bkg").attr("points",`\n      ${i-a/2-2},${c+2}  \n      ${i-a/2-2},${c-2}\n      ${r.posWithOffset-a/2-4},${c-o-2}\n      ${r.posWithOffset+a/2+4},${c-o-2}\n      ${r.posWithOffset+a/2+4},${c+o+2}\n      ${r.posWithOffset-a/2-4},${c+o+2}`),e.attr("cy",c).attr("cx",i-a/2+2).attr("r",1.5).attr("class","tag-hole"),"TB"===Ogt||"BT"===Ogt){let s=i+l;n.attr("class","tag-label-bkg").attr("points",`\n        ${r.x},${s+2}\n        ${r.x},${s-2}\n        ${r.x+$gt},${s-o-2}\n        ${r.x+$gt+a+4},${s-o-2}\n        ${r.x+$gt+a+4},${s+o+2}\n        ${r.x+$gt},${s+o+2}`).attr("transform","translate(12,12) rotate(45, "+r.x+","+i+")"),e.attr("cx",r.x+2).attr("cy",s).attr("transform","translate(12,12) rotate(45, "+r.x+","+i+")"),t.attr("x",r.x+5).attr("y",s+3).attr("transform","translate(14,14) rotate(45, "+r.x+","+i+")")}}}}),"drawCommitTags"),Xgt=g((t=>{switch(t.customType??t.type){case Wft.NORMAL:return"commit-normal";case Wft.REVERSE:return"commit-reverse";case Wft.HIGHLIGHT:return"commit-highlight";case Wft.MERGE:return"commit-merge";case Wft.CHERRY_PICK:return"commit-cherry-pick";default:return"commit-normal"}}),"getCommitClassType"),Kgt=g(((t,e,r,i)=>{let n={x:0,y:0};if(!(t.parents.length>0))return"TB"===e?30:"BT"===e?(i.get(t.id)??n).y-Lgt:0;{let r=Fgt(t.parents);if(r){let a=i.get(r)??n;return"TB"===e?a.y+Lgt:"BT"===e?(i.get(t.id)??n).y-Lgt:a.x+Lgt}}return 0}),"calculatePosition"),Qgt=g(((t,e,r)=>{let i="BT"===Ogt&&r?e:e+$gt,n="TB"===Ogt||"BT"===Ogt?i:Rgt.get(t.branch)?.pos,a="TB"===Ogt||"BT"===Ogt?Rgt.get(t.branch)?.pos:i;if(void 0===a||void 0===n)throw new Error(`Position were undefined for commit ${t.id}`);return{x:a,y:n,posWithOffset:i}}),"getCommitPosition"),Zgt=g(((t,e,r)=>{if(!Agt)throw new Error("GitGraph config not found");let i=t.append("g").attr("class","commit-bullets"),n=t.append("g").attr("class","commit-labels"),a="TB"===Ogt||"BT"===Ogt?30:0,s=[...e.keys()],o=Agt?.parallelCommits??!1,l=g(((t,r)=>{let i=e.get(t)?.seq,n=e.get(r)?.seq;return void 0!==i&&void 0!==n?i-n:0}),"sortKeys"),c=s.sort(l);"BT"===Ogt&&(o&&jgt(c,e,a),c=c.reverse()),c.forEach((t=>{let s=e.get(t);if(!s)throw new Error(`Commit not found for key ${t}`);o&&(a=Kgt(s,Ogt,a,Igt));let l=Qgt(s,a,o);if(r){let t=Xgt(s),e=s.customType??s.type,r=Rgt.get(s.branch)?.index??0;Ggt(i,s,l,t,r,e),Hgt(n,s,l,a),Vgt(n,s,l,a)}"TB"===Ogt||"BT"===Ogt?Igt.set(s.id,{x:l.x,y:l.posWithOffset}):Igt.set(s.id,{x:l.posWithOffset,y:l.y}),a="BT"===Ogt&&o?a+Lgt:a+Lgt+$gt,a>Mgt&&(Mgt=a)}))}),"drawCommits"),Jgt=g(((t,e,r,i,n)=>{let a=("TB"===Ogt||"BT"===Ogt?r.x<i.x:r.y<i.y)?e.branch:t.branch,s=g((t=>t.branch===a),"isOnBranchToGetCurve"),o=g((r=>r.seq>t.seq&&r.seq<e.seq),"isBetweenCommits");return[...n.values()].some((t=>o(t)&&s(t)))}),"shouldRerouteArrow"),tyt=g(((t,e,r=0)=>{let i=t+Math.abs(t-e)/2;if(r>5)return i;if(Dgt.every((t=>Math.abs(t-i)>=10)))return Dgt.push(i),i;let n=Math.abs(t-e);return tyt(t,e-n/5,r+1)}),"findLane"),eyt=g(((t,e,r,i)=>{let n=Igt.get(e.id),a=Igt.get(r.id);if(void 0===n||void 0===a)throw new Error(`Commit positions not found for commits ${e.id} and ${r.id}`);let s,o=Jgt(e,r,n,a,i),l="",c="",h=0,u=0,d=Rgt.get(r.branch)?.index;if(r.type===Wft.MERGE&&e.id!==r.parents[0]&&(d=Rgt.get(e.branch)?.index),o){l="A 10 10, 0, 0, 0,",c="A 10 10, 0, 0, 1,",h=10,u=10;let t=n.y<a.y?tyt(n.y,a.y):tyt(a.y,n.y),r=n.x<a.x?tyt(n.x,a.x):tyt(a.x,n.x);"TB"===Ogt?n.x<a.x?s=`M ${n.x} ${n.y} L ${r-h} ${n.y} ${c} ${r} ${n.y+u} L ${r} ${a.y-h} ${l} ${r+u} ${a.y} L ${a.x} ${a.y}`:(d=Rgt.get(e.branch)?.index,s=`M ${n.x} ${n.y} L ${r+h} ${n.y} ${l} ${r} ${n.y+u} L ${r} ${a.y-h} ${c} ${r-u} ${a.y} L ${a.x} ${a.y}`):"BT"===Ogt?n.x<a.x?s=`M ${n.x} ${n.y} L ${r-h} ${n.y} ${l} ${r} ${n.y-u} L ${r} ${a.y+h} ${c} ${r+u} ${a.y} L ${a.x} ${a.y}`:(d=Rgt.get(e.branch)?.index,s=`M ${n.x} ${n.y} L ${r+h} ${n.y} ${c} ${r} ${n.y-u} L ${r} ${a.y+h} ${l} ${r-u} ${a.y} L ${a.x} ${a.y}`):n.y<a.y?s=`M ${n.x} ${n.y} L ${n.x} ${t-h} ${l} ${n.x+u} ${t} L ${a.x-h} ${t} ${c} ${a.x} ${t+u} L ${a.x} ${a.y}`:(d=Rgt.get(e.branch)?.index,s=`M ${n.x} ${n.y} L ${n.x} ${t+h} ${c} ${n.x+u} ${t} L ${a.x-h} ${t} ${l} ${a.x} ${t-u} L ${a.x} ${a.y}`)}else l="A 20 20, 0, 0, 0,",c="A 20 20, 0, 0, 1,",h=20,u=20,"TB"===Ogt?(n.x<a.x&&(s=r.type===Wft.MERGE&&e.id!==r.parents[0]?`M ${n.x} ${n.y} L ${n.x} ${a.y-h} ${l} ${n.x+u} ${a.y} L ${a.x} ${a.y}`:`M ${n.x} ${n.y} L ${a.x-h} ${n.y} ${c} ${a.x} ${n.y+u} L ${a.x} ${a.y}`),n.x>a.x&&(l="A 20 20, 0, 0, 0,",c="A 20 20, 0, 0, 1,",h=20,u=20,s=r.type===Wft.MERGE&&e.id!==r.parents[0]?`M ${n.x} ${n.y} L ${n.x} ${a.y-h} ${c} ${n.x-u} ${a.y} L ${a.x} ${a.y}`:`M ${n.x} ${n.y} L ${a.x+h} ${n.y} ${l} ${a.x} ${n.y+u} L ${a.x} ${a.y}`),n.x===a.x&&(s=`M ${n.x} ${n.y} L ${a.x} ${a.y}`)):"BT"===Ogt?(n.x<a.x&&(s=r.type===Wft.MERGE&&e.id!==r.parents[0]?`M ${n.x} ${n.y} L ${n.x} ${a.y+h} ${c} ${n.x+u} ${a.y} L ${a.x} ${a.y}`:`M ${n.x} ${n.y} L ${a.x-h} ${n.y} ${l} ${a.x} ${n.y-u} L ${a.x} ${a.y}`),n.x>a.x&&(l="A 20 20, 0, 0, 0,",c="A 20 20, 0, 0, 1,",h=20,u=20,s=r.type===Wft.MERGE&&e.id!==r.parents[0]?`M ${n.x} ${n.y} L ${n.x} ${a.y+h} ${l} ${n.x-u} ${a.y} L ${a.x} ${a.y}`:`M ${n.x} ${n.y} L ${a.x-h} ${n.y} ${l} ${a.x} ${n.y-u} L ${a.x} ${a.y}`),n.x===a.x&&(s=`M ${n.x} ${n.y} L ${a.x} ${a.y}`)):(n.y<a.y&&(s=r.type===Wft.MERGE&&e.id!==r.parents[0]?`M ${n.x} ${n.y} L ${a.x-h} ${n.y} ${c} ${a.x} ${n.y+u} L ${a.x} ${a.y}`:`M ${n.x} ${n.y} L ${n.x} ${a.y-h} ${l} ${n.x+u} ${a.y} L ${a.x} ${a.y}`),n.y>a.y&&(s=r.type===Wft.MERGE&&e.id!==r.parents[0]?`M ${n.x} ${n.y} L ${a.x-h} ${n.y} ${l} ${a.x} ${n.y-u} L ${a.x} ${a.y}`:`M ${n.x} ${n.y} L ${n.x} ${a.y+h} ${c} ${n.x+u} ${a.y} L ${a.x} ${a.y}`),n.y===a.y&&(s=`M ${n.x} ${n.y} L ${a.x} ${a.y}`));if(void 0===s)throw new Error("Line definition not found");t.append("path").attr("d",s).attr("class","arrow arrow"+d%8)}),"drawArrow"),ryt=g(((t,e)=>{let r=t.append("g").attr("class","commit-arrows");[...e.keys()].forEach((t=>{let i=e.get(t);i.parents&&i.parents.length>0&&i.parents.forEach((t=>{eyt(r,e.get(t),i,e)}))}))}),"drawArrows"),iyt=g(((t,e)=>{let r=t.append("g");e.forEach(((t,e)=>{let i=e%8,n=Rgt.get(t.name)?.pos;if(void 0===n)throw new Error(`Position not found for branch ${t.name}`);let a=r.append("line");a.attr("x1",0),a.attr("y1",n),a.attr("x2",Mgt),a.attr("y2",n),a.attr("class","branch branch"+i),"TB"===Ogt?(a.attr("y1",30),a.attr("x1",n),a.attr("y2",Mgt),a.attr("x2",n)):"BT"===Ogt&&(a.attr("y1",Mgt),a.attr("x1",n),a.attr("y2",30),a.attr("x2",n)),Dgt.push(n);let s=t.name,o=Bgt(s),l=r.insert("rect"),c=r.insert("g").attr("class","branchLabel").insert("g").attr("class","label branch-label"+i);c.node().appendChild(o);let h=o.getBBox();l.attr("class","branchLabelBkg label"+i).attr("rx",4).attr("ry",4).attr("x",-h.width-4-(!0===Agt?.rotateCommitLabel?30:0)).attr("y",-h.height/2+8).attr("width",h.width+18).attr("height",h.height+4),c.attr("transform","translate("+(-h.width-14-(!0===Agt?.rotateCommitLabel?30:0))+", "+(n-h.height/2-1)+")"),"TB"===Ogt?(l.attr("x",n-h.width/2-10).attr("y",0),c.attr("transform","translate("+(n-h.width/2-5)+", 0)")):"BT"===Ogt?(l.attr("x",n-h.width/2-10).attr("y",Mgt),c.attr("transform","translate("+(n-h.width/2-5)+", "+Mgt+")")):l.attr("transform","translate(-19, "+(n-h.height/2)+")")}))}),"drawBranches"),nyt=g((function(t,e,r,i,n){return Rgt.set(t,{pos:e,index:r}),e+=50+(n?40:0)+("TB"===Ogt||"BT"===Ogt?i.width/2:0)}),"setBranchPosition"),ayt=g((function(t,e,r,i){if(Pgt(),et.debug("in gitgraph renderer",t+"\n","id:",e,r),!Agt)throw new Error("GitGraph config not found");let n=Agt.rotateCommitLabel??!1,a=i.db;Ngt=a.getCommits();let s=a.getBranchesAsObjArray();Ogt=a.getDirection();let o=nh(`[id="${e}"]`),l=0;s.forEach(((t,e)=>{let r=Bgt(t.name),i=o.append("g"),a=i.insert("g").attr("class","branchLabel"),s=a.insert("g").attr("class","label branch-label");s.node()?.appendChild(r);let c=r.getBBox();l=nyt(t.name,l,e,c,n),s.remove(),a.remove(),i.remove()})),Zgt(o,Ngt,!1),Agt.showBranches&&iyt(o,s),ryt(o,Ngt),Zgt(o,Ngt,!0),kL.insertTitle(o,"gitTitleText",Agt.titleTopMargin??0,a.getDiagramTitle()),la(void 0,o,Agt.diagramPadding,Agt.useMaxWidth)}),"draw"),syt={draw:ayt}})),dyt=y((()=>{oyt=g((t=>`\n  .commit-id,\n  .commit-msg,\n  .branch-label {\n    fill: lightgrey;\n    color: lightgrey;\n    font-family: 'trebuchet ms', verdana, arial, sans-serif;\n    font-family: var(--mermaid-font-family);\n  }\n  ${[0,1,2,3,4,5,6,7].map((e=>`\n        .branch-label${e} { fill: ${t["gitBranchLabel"+e]}; }\n        .commit${e} { stroke: ${t["git"+e]}; fill: ${t["git"+e]}; }\n        .commit-highlight${e} { stroke: ${t["gitInv"+e]}; fill: ${t["gitInv"+e]}; }\n        .label${e}  { fill: ${t["git"+e]}; }\n        .arrow${e} { stroke: ${t["git"+e]}; }\n        `)).join("\n")}\n\n  .branch {\n    stroke-width: 1;\n    stroke: ${t.lineColor};\n    stroke-dasharray: 2;\n  }\n  .commit-label { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelColor};}\n  .commit-label-bkg { font-size: ${t.commitLabelFontSize}; fill: ${t.commitLabelBackground}; opacity: 0.5; }\n  .tag-label { font-size: ${t.tagLabelFontSize}; fill: ${t.tagLabelColor};}\n  .tag-label-bkg { fill: ${t.tagLabelBackground}; stroke: ${t.tagLabelBorder}; }\n  .tag-hole { fill: ${t.textColor}; }\n\n  .commit-merge {\n    stroke: ${t.primaryColor};\n    fill: ${t.primaryColor};\n  }\n  .commit-reverse {\n    stroke: ${t.primaryColor};\n    fill: ${t.primaryColor};\n    stroke-width: 3;\n  }\n  .commit-highlight-outer {\n  }\n  .commit-highlight-inner {\n    stroke: ${t.primaryColor};\n    fill: ${t.primaryColor};\n  }\n\n  .arrow { stroke-width: 8; stroke-linecap: round; fill: none}\n  .gitTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${t.textColor};\n  }\n`),"getStyles"),lyt=oyt})),pyt={};x(pyt,{diagram:()=>fyt});var fyt,gyt,yyt,myt=y((()=>{hyt(),cyt(),uyt(),dyt(),fyt={parser:Cgt,db:xgt,renderer:syt,styles:lyt}})),xyt=y((()=>{(gyt=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[6,8,10,12,13,14,15,16,17,18,20,21,22,23,24,25,26,27,28,29,30,31,33,35,36,38,40],r=[1,26],i=[1,27],n=[1,28],a=[1,29],s=[1,30],o=[1,31],l=[1,32],c=[1,33],h=[1,34],u=[1,9],d=[1,10],p=[1,11],f=[1,12],y=[1,13],m=[1,14],x=[1,15],b=[1,16],k=[1,19],v=[1,20],T=[1,21],w=[1,22],_=[1,23],S=[1,25],C=[1,35],E={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,gantt:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NL:10,weekday:11,weekday_monday:12,weekday_tuesday:13,weekday_wednesday:14,weekday_thursday:15,weekday_friday:16,weekday_saturday:17,weekday_sunday:18,weekend:19,weekend_friday:20,weekend_saturday:21,dateFormat:22,inclusiveEndDates:23,topAxis:24,axisFormat:25,tickInterval:26,excludes:27,includes:28,todayMarker:29,title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,section:36,clickStatement:37,taskTxt:38,taskData:39,click:40,callbackname:41,callbackargs:42,href:43,clickStatementDebug:44,$accept:0,$end:1},terminals_:{2:"error",4:"gantt",6:"EOF",8:"SPACE",10:"NL",12:"weekday_monday",13:"weekday_tuesday",14:"weekday_wednesday",15:"weekday_thursday",16:"weekday_friday",17:"weekday_saturday",18:"weekday_sunday",20:"weekend_friday",21:"weekend_saturday",22:"dateFormat",23:"inclusiveEndDates",24:"topAxis",25:"axisFormat",26:"tickInterval",27:"excludes",28:"includes",29:"todayMarker",30:"title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"section",38:"taskTxt",39:"taskData",40:"click",41:"callbackname",42:"callbackargs",43:"href"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[19,1],[19,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,2],[37,2],[37,3],[37,3],[37,4],[37,3],[37,4],[37,2],[44,2],[44,3],[44,3],[44,4],[44,3],[44,4],[44,2]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 1:return a[o-1];case 2:case 6:case 7:this.$=[];break;case 3:a[o-1].push(a[o]),this.$=a[o-1];break;case 4:case 5:this.$=a[o];break;case 8:i.setWeekday("monday");break;case 9:i.setWeekday("tuesday");break;case 10:i.setWeekday("wednesday");break;case 11:i.setWeekday("thursday");break;case 12:i.setWeekday("friday");break;case 13:i.setWeekday("saturday");break;case 14:i.setWeekday("sunday");break;case 15:i.setWeekend("friday");break;case 16:i.setWeekend("saturday");break;case 17:i.setDateFormat(a[o].substr(11)),this.$=a[o].substr(11);break;case 18:i.enableInclusiveEndDates(),this.$=a[o].substr(18);break;case 19:i.TopAxis(),this.$=a[o].substr(8);break;case 20:i.setAxisFormat(a[o].substr(11)),this.$=a[o].substr(11);break;case 21:i.setTickInterval(a[o].substr(13)),this.$=a[o].substr(13);break;case 22:i.setExcludes(a[o].substr(9)),this.$=a[o].substr(9);break;case 23:i.setIncludes(a[o].substr(9)),this.$=a[o].substr(9);break;case 24:i.setTodayMarker(a[o].substr(12)),this.$=a[o].substr(12);break;case 27:i.setDiagramTitle(a[o].substr(6)),this.$=a[o].substr(6);break;case 28:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 29:case 30:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 31:i.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 33:i.addTask(a[o-1],a[o]),this.$="task";break;case 34:this.$=a[o-1],i.setClickEvent(a[o-1],a[o],null);break;case 35:this.$=a[o-2],i.setClickEvent(a[o-2],a[o-1],a[o]);break;case 36:this.$=a[o-2],i.setClickEvent(a[o-2],a[o-1],null),i.setLink(a[o-2],a[o]);break;case 37:this.$=a[o-3],i.setClickEvent(a[o-3],a[o-2],a[o-1]),i.setLink(a[o-3],a[o]);break;case 38:this.$=a[o-2],i.setClickEvent(a[o-2],a[o],null),i.setLink(a[o-2],a[o-1]);break;case 39:this.$=a[o-3],i.setClickEvent(a[o-3],a[o-1],a[o]),i.setLink(a[o-3],a[o-2]);break;case 40:this.$=a[o-1],i.setLink(a[o-1],a[o]);break;case 41:case 47:this.$=a[o-1]+" "+a[o];break;case 42:case 43:case 45:this.$=a[o-2]+" "+a[o-1]+" "+a[o];break;case 44:case 46:this.$=a[o-3]+" "+a[o-2]+" "+a[o-1]+" "+a[o]}}),"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:17,12:r,13:i,14:n,15:a,16:s,17:o,18:l,19:18,20:c,21:h,22:u,23:d,24:p,25:f,26:y,27:m,28:x,29:b,30:k,31:v,33:T,35:w,36:_,37:24,38:S,40:C},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:36,11:17,12:r,13:i,14:n,15:a,16:s,17:o,18:l,19:18,20:c,21:h,22:u,23:d,24:p,25:f,26:y,27:m,28:x,29:b,30:k,31:v,33:T,35:w,36:_,37:24,38:S,40:C},t(e,[2,5]),t(e,[2,6]),t(e,[2,17]),t(e,[2,18]),t(e,[2,19]),t(e,[2,20]),t(e,[2,21]),t(e,[2,22]),t(e,[2,23]),t(e,[2,24]),t(e,[2,25]),t(e,[2,26]),t(e,[2,27]),{32:[1,37]},{34:[1,38]},t(e,[2,30]),t(e,[2,31]),t(e,[2,32]),{39:[1,39]},t(e,[2,8]),t(e,[2,9]),t(e,[2,10]),t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),{41:[1,40],43:[1,41]},t(e,[2,4]),t(e,[2,28]),t(e,[2,29]),t(e,[2,33]),t(e,[2,34],{42:[1,42],43:[1,43]}),t(e,[2,40],{41:[1,44]}),t(e,[2,35],{43:[1,45]}),t(e,[2,36]),t(e,[2,38],{42:[1,46]}),t(e,[2,37]),t(e,[2,39])],defaultActions:{},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},A={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:g((function(t,e,r,i){switch(r){case 0:return this.begin("open_directive"),"open_directive";case 1:return this.begin("acc_title"),31;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),33;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 15:case 18:case 21:case 24:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:case 9:case 10:case 12:case 13:break;case 11:return 10;case 14:this.begin("href");break;case 16:return 43;case 17:this.begin("callbackname");break;case 19:this.popState(),this.begin("callbackargs");break;case 20:return 41;case 22:return 42;case 23:this.begin("click");break;case 25:return 40;case 26:return 4;case 27:return 22;case 28:return 23;case 29:return 24;case 30:return 25;case 31:return 26;case 32:return 28;case 33:return 27;case 34:return 29;case 35:return 12;case 36:return 13;case 37:return 14;case 38:return 15;case 39:return 16;case 40:return 17;case 41:return 18;case 42:return 20;case 43:return 21;case 44:return"date";case 45:return 30;case 46:return"accDescription";case 47:return 36;case 48:return 38;case 49:return 39;case 50:return":";case 51:return 6;case 52:return"INVALID"}}),"anonymous"),rules:[/^(?:%%\{)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:%%(?!\{)*[^\n]*)/i,/^(?:[^\}]%%*[^\n]*)/i,/^(?:%%*[^\n]*[\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:%[^\n]*)/i,/^(?:href[\s]+["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:call[\s]+)/i,/^(?:\([\s]*\))/i,/^(?:\()/i,/^(?:[^(]*)/i,/^(?:\))/i,/^(?:[^)]*)/i,/^(?:click[\s]+)/i,/^(?:[\s\n])/i,/^(?:[^\s\n]*)/i,/^(?:gantt\b)/i,/^(?:dateFormat\s[^#\n;]+)/i,/^(?:inclusiveEndDates\b)/i,/^(?:topAxis\b)/i,/^(?:axisFormat\s[^#\n;]+)/i,/^(?:tickInterval\s[^#\n;]+)/i,/^(?:includes\s[^#\n;]+)/i,/^(?:excludes\s[^#\n;]+)/i,/^(?:todayMarker\s[^\n;]+)/i,/^(?:weekday\s+monday\b)/i,/^(?:weekday\s+tuesday\b)/i,/^(?:weekday\s+wednesday\b)/i,/^(?:weekday\s+thursday\b)/i,/^(?:weekday\s+friday\b)/i,/^(?:weekday\s+saturday\b)/i,/^(?:weekday\s+sunday\b)/i,/^(?:weekend\s+friday\b)/i,/^(?:weekend\s+saturday\b)/i,/^(?:\d\d\d\d-\d\d-\d\d\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accDescription\s[^#\n;]+)/i,/^(?:section\s[^\n]+)/i,/^(?:[^:\n]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[6,7],inclusive:!1},acc_descr:{rules:[4],inclusive:!1},acc_title:{rules:[2],inclusive:!1},callbackargs:{rules:[21,22],inclusive:!1},callbackname:{rules:[18,19,20],inclusive:!1},href:{rules:[15,16],inclusive:!1},click:{rules:[24,25],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,17,23,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52],inclusive:!0}}};function $(){this.yy={}}return E.lexer=A,g($,"Parser"),$.prototype=E,E.Parser=$,new $}()).parser=gyt,yyt=gyt})),byt=m(((t,e)=>{var r,i;r=t,i=function(){var t="day";return function(e,r,i){var n=g((function(e){return e.add(4-e.isoWeekday(),t)}),"a"),a=r.prototype;a.isoWeekYear=function(){return n(this).year()},a.isoWeek=function(e){if(!this.$utils().u(e))return this.add(7*(e-this.isoWeek()),t);var r,a,s,o=n(this),l=(r=this.isoWeekYear(),s=4-(a=(this.$u?i.utc:i)().year(r).startOf("year")).isoWeekday(),a.isoWeekday()>4&&(s+=7),a.add(s,t));return o.diff(l,"week")+1},a.isoWeekday=function(t){return this.$utils().u(t)?this.day()||7:this.day(this.day()%7?t:t-7)};var s=a.startOf;a.startOf=function(t,e){var r=this.$utils(),i=!!r.u(e)||e;return"isoweek"===r.p(t)?i?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):s.bind(this)(t,e)}}},"object"==typeof t&&typeof e<"u"?e.exports=i():"function"==typeof define&&define.amd?define(i):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_isoWeek=i()})),kyt=m(((t,e)=>{var r,i;r=t,i=function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,i=/\d\d/,n=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,s={},o=g((function(t){return(t=+t)+(t>68?1900:2e3)}),"a"),l=g((function(t){return function(e){this[t]=+e}}),"f"),c=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(t){if(!t||"Z"===t)return 0;var e=t.match(/([+-]|\d\d)/g),r=60*e[1]+(+e[2]||0);return 0===r?0:"+"===e[0]?-r:r}(t)}],h=g((function(t){var e=s[t];return e&&(e.indexOf?e:e.s.concat(e.f))}),"u"),u=g((function(t,e){var r,i=s.meridiem;if(i){for(var n=1;n<=24;n+=1)if(t.indexOf(i(n,0,e))>-1){r=n>12;break}}else r=t===(e?"pm":"PM");return r}),"d"),d={A:[a,function(t){this.afternoon=u(t,!1)}],a:[a,function(t){this.afternoon=u(t,!0)}],Q:[r,function(t){this.month=3*(t-1)+1}],S:[r,function(t){this.milliseconds=100*+t}],SS:[i,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[n,l("seconds")],ss:[n,l("seconds")],m:[n,l("minutes")],mm:[n,l("minutes")],H:[n,l("hours")],h:[n,l("hours")],HH:[n,l("hours")],hh:[n,l("hours")],D:[n,l("day")],DD:[i,l("day")],Do:[a,function(t){var e=s.ordinal,r=t.match(/\d+/);if(this.day=r[0],e)for(var i=1;i<=31;i+=1)e(i).replace(/\[|\]/g,"")===t&&(this.day=i)}],w:[n,l("week")],ww:[i,l("week")],M:[n,l("month")],MM:[i,l("month")],MMM:[a,function(t){var e=h("months"),r=(h("monthsShort")||e.map((function(t){return t.slice(0,3)}))).indexOf(t)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[a,function(t){var e=h("months").indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,l("year")],YY:[i,function(t){this.year=o(t)}],YYYY:[/\d{4}/,l("year")],Z:c,ZZ:c};function p(r){var i,n;i=r,n=s&&s.formats;for(var a=(r=i.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,r,i){var a=i&&i.toUpperCase();return r||n[i]||t[i]||n[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,r){return e||r.slice(1)}))}))).match(e),o=a.length,l=0;l<o;l+=1){var c=a[l],h=d[c],u=h&&h[0],p=h&&h[1];a[l]=p?{regex:u,parser:p}:c.replace(/^\[|\]$/g,"")}return function(t){for(var e={},r=0,i=0;r<o;r+=1){var n=a[r];if("string"==typeof n)i+=n.length;else{var s=n.regex,l=n.parser,c=t.slice(i),h=s.exec(c)[0];l.call(e,h),t=t.replace(h,"")}}return function(t){var e=t.afternoon;if(void 0!==e){var r=t.hours;e?r<12&&(t.hours+=12):12===r&&(t.hours=0),delete t.afternoon}}(e),e}}return g(p,"l"),function(t,e,r){r.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(o=t.parseTwoDigitYear);var i=e.prototype,n=i.parse;i.parse=function(t){var e=t.date,i=t.utc,a=t.args;this.$u=i;var o=a[1];if("string"==typeof o){var l=!0===a[2],c=!0===a[3],h=l||c,u=a[2];c&&(u=a[2]),s=this.$locale(),!l&&u&&(s=r.Ls[u]),this.$d=function(t,e,r,i){try{if(["x","X"].indexOf(e)>-1)return new Date(("X"===e?1e3:1)*t);var n=p(e)(t),a=n.year,s=n.month,o=n.day,l=n.hours,c=n.minutes,h=n.seconds,u=n.milliseconds,d=n.zone,f=n.week,g=new Date,y=o||(a||s?1:g.getDate()),m=a||g.getFullYear(),x=0;a&&!s||(x=s>0?s-1:g.getMonth());var b,k=l||0,v=c||0,T=h||0,w=u||0;return d?new Date(Date.UTC(m,x,y,k,v,T,w+60*d.offset*1e3)):r?new Date(Date.UTC(m,x,y,k,v,T,w)):(b=new Date(m,x,y,k,v,T,w),f&&(b=i(b).week(f).toDate()),b)}catch{return new Date("")}}(e,o,i,r),this.init(),u&&!0!==u&&(this.$L=this.locale(u).$L),h&&e!=this.format(o)&&(this.$d=new Date("")),s={}}else if(o instanceof Array)for(var d=o.length,f=1;f<=d;f+=1){a[1]=o[f-1];var g=r.apply(this,a);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}f===d&&(this.$d=new Date(""))}else n.call(this,t)}}},"object"==typeof t&&typeof e<"u"?e.exports=i():"function"==typeof define&&define.amd?define(i):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_customParseFormat=i()})),vyt=m(((t,e)=>{var r,i;r=t,i=function(){return function(t,e){var r=e.prototype,i=r.format;r.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return i.bind(this)(t);var n=this.$utils(),a=(t||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return r.ordinal(e.$D);case"gggg":return e.weekYear();case"GGGG":return e.isoWeekYear();case"wo":return r.ordinal(e.week(),"W");case"w":case"ww":return n.s(e.week(),"w"===t?1:2,"0");case"W":case"WW":return n.s(e.isoWeek(),"W"===t?1:2,"0");case"k":case"kk":return n.s(String(0===e.$H?24:e.$H),"k"===t?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();case"z":return"["+e.offsetName()+"]";case"zzz":return"["+e.offsetName("long")+"]";default:return t}}));return i.bind(this)(a)}}},"object"==typeof t&&typeof e<"u"?e.exports=i():"function"==typeof define&&define.amd?define(i):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_advancedFormat=i()}));function Tyt(t,e,r){let i=!0;for(;i;)i=!1,r.forEach((function(r){let n=new RegExp("^\\s*"+r+"\\s*$");t[0].match(n)&&(e[r]=!0,t.shift(1),i=!0)}))}var wyt,_yt,Syt,Cyt,Eyt,Ayt,$yt,Lyt,Ryt,Iyt,Nyt,Dyt,Myt,Oyt,Pyt,Byt,Fyt,zyt,jyt,Uyt,Wyt,qyt,Yyt,Gyt,Hyt,Vyt,Xyt,Kyt,Qyt,Zyt,Jyt,tmt,emt,rmt,imt,nmt,amt,smt,omt,lmt,cmt,hmt,umt,dmt,pmt,fmt,gmt,ymt,mmt,xmt,bmt,kmt,vmt,Tmt,wmt,_mt,Smt,Cmt,Emt,Amt,$mt,Lmt,Rmt,Imt,Nmt,Dmt,Mmt,Omt,Pmt,Bmt,Fmt,zmt,jmt,Umt,Wmt,qmt,Ymt,Gmt,Hmt,Vmt,Xmt,Kmt,Qmt,Zmt,Jmt,txt,ext=y((()=>{wyt=v(JT(),1),_yt=v(Ue(),1),Syt=v(byt(),1),Cyt=v(kyt(),1),Eyt=v(vyt(),1),We(),ns(),_L(),is(),_yt.default.extend(Syt.default),_yt.default.extend(Cyt.default),_yt.default.extend(Eyt.default),Ayt={friday:5,saturday:6},$yt="",Lyt="",Iyt="",Nyt=[],Dyt=[],Myt=new Map,Oyt=[],Pyt=[],Byt="",Fyt="",zyt=["active","done","crit","milestone","vert"],jyt=[],Uyt=!1,Wyt=!1,qyt="sunday",Yyt="saturday",Gyt=0,Hyt=g((function(){Oyt=[],Pyt=[],Byt="",jyt=[],Smt=0,$mt=void 0,Lmt=void 0,Rmt=[],$yt="",Lyt="",Fyt="",Ryt=void 0,Iyt="",Nyt=[],Dyt=[],Uyt=!1,Wyt=!1,Gyt=0,Myt=new Map,Xn(),qyt="sunday",Yyt="saturday"}),"clear"),Vyt=g((function(t){Lyt=t}),"setAxisFormat"),Xyt=g((function(){return Lyt}),"getAxisFormat"),Kyt=g((function(t){Ryt=t}),"setTickInterval"),Qyt=g((function(){return Ryt}),"getTickInterval"),Zyt=g((function(t){Iyt=t}),"setTodayMarker"),Jyt=g((function(){return Iyt}),"getTodayMarker"),tmt=g((function(t){$yt=t}),"setDateFormat"),emt=g((function(){Uyt=!0}),"enableInclusiveEndDates"),rmt=g((function(){return Uyt}),"endDatesAreInclusive"),imt=g((function(){Wyt=!0}),"enableTopAxis"),nmt=g((function(){return Wyt}),"topAxisEnabled"),amt=g((function(t){Fyt=t}),"setDisplayMode"),smt=g((function(){return Fyt}),"getDisplayMode"),omt=g((function(){return $yt}),"getDateFormat"),lmt=g((function(t){Nyt=t.toLowerCase().split(/[\s,]+/)}),"setIncludes"),cmt=g((function(){return Nyt}),"getIncludes"),hmt=g((function(t){Dyt=t.toLowerCase().split(/[\s,]+/)}),"setExcludes"),umt=g((function(){return Dyt}),"getExcludes"),dmt=g((function(){return Myt}),"getLinks"),pmt=g((function(t){Byt=t,Oyt.push(t)}),"addSection"),fmt=g((function(){return Oyt}),"getSections"),gmt=g((function(){let t=Omt(),e=0;for(;!t&&e<10;)t=Omt(),e++;return Pyt=Rmt}),"getTasks"),ymt=g((function(t,e,r,i){let n=t.format(e.trim()),a=t.format("YYYY-MM-DD");return!i.includes(n)&&!i.includes(a)&&(!((!r.includes("weekends")||t.isoWeekday()!==Ayt[Yyt]&&t.isoWeekday()!==Ayt[Yyt]+1)&&!r.includes(t.format("dddd").toLowerCase()))||(r.includes(n)||r.includes(a)))}),"isInvalidDate"),mmt=g((function(t){qyt=t}),"setWeekday"),xmt=g((function(){return qyt}),"getWeekday"),bmt=g((function(t){Yyt=t}),"setWeekend"),kmt=g((function(t,e,r,i){if(!r.length||t.manualEndTime)return;let n,a;n=t.startTime instanceof Date?(0,_yt.default)(t.startTime):(0,_yt.default)(t.startTime,e,!0),n=n.add(1,"d"),a=t.endTime instanceof Date?(0,_yt.default)(t.endTime):(0,_yt.default)(t.endTime,e,!0);let[s,o]=vmt(n,a,e,r,i);t.endTime=s.toDate(),t.renderEndTime=o}),"checkTaskDates"),vmt=g((function(t,e,r,i,n){let a=!1,s=null;for(;t<=e;)a||(s=e.toDate()),a=ymt(t,r,i,n),a&&(e=e.add(1,"d")),t=t.add(1,"d");return[e,s]}),"fixTaskDates"),Tmt=g((function(t,e,r){if(r=r.trim(),g((t=>{let e=t.trim();return"x"===e||"X"===e}),"isTimestampFormat")(e)&&/^\d+$/.test(r))return new Date(Number(r));let i=/^after\s+(?<ids>[\d\w- ]+)/.exec(r);if(null!==i){let t=null;for(let e of i.groups.ids.split(" ")){let r=Dmt(e);void 0!==r&&(!t||r.endTime>t.endTime)&&(t=r)}if(t)return t.endTime;let e=new Date;return e.setHours(0,0,0,0),e}let n=(0,_yt.default)(r,e.trim(),!0);if(n.isValid())return n.toDate();{et.debug("Invalid date:"+r),et.debug("With date format:"+e.trim());let t=new Date(r);if(void 0===t||isNaN(t.getTime())||t.getFullYear()<-1e4||t.getFullYear()>1e4)throw new Error("Invalid date:"+r);return t}}),"getStartDate"),wmt=g((function(t){let e=/^(\d+(?:\.\d+)?)([Mdhmswy]|ms)$/.exec(t.trim());return null!==e?[Number.parseFloat(e[1]),e[2]]:[NaN,"ms"]}),"parseDuration"),_mt=g((function(t,e,r,i=!1){r=r.trim();let n=/^until\s+(?<ids>[\d\w- ]+)/.exec(r);if(null!==n){let t=null;for(let e of n.groups.ids.split(" ")){let r=Dmt(e);void 0!==r&&(!t||r.startTime<t.startTime)&&(t=r)}if(t)return t.startTime;let e=new Date;return e.setHours(0,0,0,0),e}let a=(0,_yt.default)(r,e.trim(),!0);if(a.isValid())return i&&(a=a.add(1,"d")),a.toDate();let s=(0,_yt.default)(t),[o,l]=wmt(r);if(!Number.isNaN(o)){let t=s.add(o,l);t.isValid()&&(s=t)}return s.toDate()}),"getEndDate"),Smt=0,Cmt=g((function(t){return void 0===t?"task"+(Smt+=1):t}),"parseId"),Emt=g((function(t,e){let r;r=":"===e.substr(0,1)?e.substr(1,e.length):e;let i=r.split(","),n={};Tyt(i,n,zyt);for(let t=0;t<i.length;t++)i[t]=i[t].trim();let a="";switch(i.length){case 1:n.id=Cmt(),n.startTime=t.endTime,a=i[0];break;case 2:n.id=Cmt(),n.startTime=Tmt(void 0,$yt,i[0]),a=i[1];break;case 3:n.id=Cmt(i[0]),n.startTime=Tmt(void 0,$yt,i[1]),a=i[2]}return a&&(n.endTime=_mt(n.startTime,$yt,a,Uyt),n.manualEndTime=(0,_yt.default)(a,"YYYY-MM-DD",!0).isValid(),kmt(n,$yt,Dyt,Nyt)),n}),"compileData"),Amt=g((function(t,e){let r;r=":"===e.substr(0,1)?e.substr(1,e.length):e;let i=r.split(","),n={};Tyt(i,n,zyt);for(let t=0;t<i.length;t++)i[t]=i[t].trim();switch(i.length){case 1:n.id=Cmt(),n.startTime={type:"prevTaskEnd",id:t},n.endTime={data:i[0]};break;case 2:n.id=Cmt(),n.startTime={type:"getStartDate",startData:i[0]},n.endTime={data:i[1]};break;case 3:n.id=Cmt(i[0]),n.startTime={type:"getStartDate",startData:i[1]},n.endTime={data:i[2]}}return n}),"parseData"),Rmt=[],Imt={},Nmt=g((function(t,e){let r={section:Byt,type:Byt,processed:!1,manualEndTime:!1,renderEndTime:null,raw:{data:e},task:t,classes:[]},i=Amt(Lmt,e);r.raw.startTime=i.startTime,r.raw.endTime=i.endTime,r.id=i.id,r.prevTaskId=Lmt,r.active=i.active,r.done=i.done,r.crit=i.crit,r.milestone=i.milestone,r.vert=i.vert,r.order=Gyt,Gyt++;let n=Rmt.push(r);Lmt=r.id,Imt[r.id]=n-1}),"addTask"),Dmt=g((function(t){let e=Imt[t];return Rmt[e]}),"findTaskById"),Mmt=g((function(t,e){let r={section:Byt,type:Byt,description:t,task:t,classes:[]},i=Emt($mt,e);r.startTime=i.startTime,r.endTime=i.endTime,r.id=i.id,r.active=i.active,r.done=i.done,r.crit=i.crit,r.milestone=i.milestone,r.vert=i.vert,$mt=r,Pyt.push(r)}),"addTaskOrg"),Omt=g((function(){let t=g((function(t){let e=Rmt[t],r="";switch(Rmt[t].raw.startTime.type){case"prevTaskEnd":{let t=Dmt(e.prevTaskId);e.startTime=t.endTime;break}case"getStartDate":r=Tmt(void 0,$yt,Rmt[t].raw.startTime.startData),r&&(Rmt[t].startTime=r)}return Rmt[t].startTime&&(Rmt[t].endTime=_mt(Rmt[t].startTime,$yt,Rmt[t].raw.endTime.data,Uyt),Rmt[t].endTime&&(Rmt[t].processed=!0,Rmt[t].manualEndTime=(0,_yt.default)(Rmt[t].raw.endTime.data,"YYYY-MM-DD",!0).isValid(),kmt(Rmt[t],$yt,Dyt,Nyt))),Rmt[t].processed}),"compileTask"),e=!0;for(let[r,i]of Rmt.entries())t(r),e=e&&i.processed;return e}),"compileTasks"),Pmt=g((function(t,e){let r=e;"loose"!==na().securityLevel&&(r=(0,wyt.sanitizeUrl)(e)),t.split(",").forEach((function(t){void 0!==Dmt(t)&&(zmt(t,(()=>{window.open(r,"_self")})),Myt.set(t,r))})),Bmt(t,"clickable")}),"setLink"),Bmt=g((function(t,e){t.split(",").forEach((function(t){let r=Dmt(t);void 0!==r&&r.classes.push(e)}))}),"setClass"),Fmt=g((function(t,e,r){if("loose"!==na().securityLevel||void 0===e)return;let i=[];if("string"==typeof r){i=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<i.length;t++){let e=i[t].trim();e.startsWith('"')&&e.endsWith('"')&&(e=e.substr(1,e.length-2)),i[t]=e}}0===i.length&&i.push(t),void 0!==Dmt(t)&&zmt(t,(()=>{kL.runFunc(e,...i)}))}),"setClickFun"),zmt=g((function(t,e){jyt.push((function(){let r=document.querySelector(`[id="${t}"]`);null!==r&&r.addEventListener("click",(function(){e()}))}),(function(){let r=document.querySelector(`[id="${t}-text"]`);null!==r&&r.addEventListener("click",(function(){e()}))}))}),"pushFun"),jmt=g((function(t,e,r){t.split(",").forEach((function(t){Fmt(t,e,r)})),Bmt(t,"clickable")}),"setClickEvent"),Umt=g((function(t){jyt.forEach((function(e){e(t)}))}),"bindFunctions"),Wmt={getConfig:g((()=>na().gantt),"getConfig"),clear:Hyt,setDateFormat:tmt,getDateFormat:omt,enableInclusiveEndDates:emt,endDatesAreInclusive:rmt,enableTopAxis:imt,topAxisEnabled:nmt,setAxisFormat:Vyt,getAxisFormat:Xyt,setTickInterval:Kyt,getTickInterval:Qyt,setTodayMarker:Zyt,getTodayMarker:Jyt,setAccTitle:Kn,getAccTitle:Qn,setDiagramTitle:ta,getDiagramTitle:ea,setDisplayMode:amt,getDisplayMode:smt,setAccDescription:Zn,getAccDescription:Jn,addSection:pmt,getSections:fmt,getTasks:gmt,addTask:Nmt,findTaskById:Dmt,addTaskOrg:Mmt,setIncludes:lmt,getIncludes:cmt,setExcludes:hmt,getExcludes:umt,setClickEvent:jmt,setLink:Pmt,getLinks:dmt,bindFunctions:Umt,parseDuration:wmt,isInvalidDate:ymt,setWeekday:mmt,getWeekday:xmt,setWeekend:bmt},g(Tyt,"getTaskTags")})),rxt=m(((t,e)=>{var r,i;r=t,i=function(){var t,e,r=1e3,i=6e4,n=36e5,a=864e5,s=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,o=31536e6,l=2628e6,c=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,h={years:o,months:l,days:a,hours:n,minutes:i,seconds:r,milliseconds:1,weeks:6048e5},u=g((function(t){return t instanceof b}),"c"),d=g((function(t,e,r){return new b(t,r,e.$l)}),"f"),p=g((function(t){return e.p(t)+"s"}),"m"),f=g((function(t){return t<0}),"l"),y=g((function(t){return f(t)?Math.ceil(t):Math.floor(t)}),"$"),m=g((function(t){return Math.abs(t)}),"y"),x=g((function(t,e){return t?f(t)?{negative:!0,format:""+m(t)+e}:{negative:!1,format:""+t+e}:{negative:!1,format:""}}),"v"),b=function(){function f(t,e,r){var i=this;if(this.$d={},this.$l=r,void 0===t&&(this.$ms=0,this.parseFromMilliseconds()),e)return d(t*h[p(e)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach((function(e){i.$d[p(e)]=t[e]})),this.calMilliseconds(),this;if("string"==typeof t){var n=t.match(c);if(n){var a=n.slice(2).map((function(t){return null!=t?Number(t):0}));return this.$d.years=a[0],this.$d.months=a[1],this.$d.weeks=a[2],this.$d.days=a[3],this.$d.hours=a[4],this.$d.minutes=a[5],this.$d.seconds=a[6],this.calMilliseconds(),this}}return this}g(f,"l");var m=f.prototype;return m.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(e,r){return e+(t.$d[r]||0)*h[r]}),0)},m.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=y(t/o),t%=o,this.$d.months=y(t/l),t%=l,this.$d.days=y(t/a),t%=a,this.$d.hours=y(t/n),t%=n,this.$d.minutes=y(t/i),t%=i,this.$d.seconds=y(t/r),t%=r,this.$d.milliseconds=t},m.toISOString=function(){var t=x(this.$d.years,"Y"),e=x(this.$d.months,"M"),r=+this.$d.days||0;this.$d.weeks&&(r+=7*this.$d.weeks);var i=x(r,"D"),n=x(this.$d.hours,"H"),a=x(this.$d.minutes,"M"),s=this.$d.seconds||0;this.$d.milliseconds&&(s+=this.$d.milliseconds/1e3,s=Math.round(1e3*s)/1e3);var o=x(s,"S"),l=t.negative||e.negative||i.negative||n.negative||a.negative||o.negative,c=n.format||a.format||o.format?"T":"",h=(l?"-":"")+"P"+t.format+e.format+i.format+c+n.format+a.format+o.format;return"P"===h||"-P"===h?"P0D":h},m.toJSON=function(){return this.toISOString()},m.format=function(t){var r=t||"YYYY-MM-DDTHH:mm:ss",i={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return r.replace(s,(function(t,e){return e||String(i[t])}))},m.as=function(t){return this.$ms/h[p(t)]},m.get=function(t){var e=this.$ms,r=p(t);return"milliseconds"===r?e%=1e3:e="weeks"===r?y(e/h[r]):this.$d[r],e||0},m.add=function(t,e,r){var i;return i=e?t*h[p(e)]:u(t)?t.$ms:d(t,this).$ms,d(this.$ms+i*(r?-1:1),this)},m.subtract=function(t,e){return this.add(t,e,!0)},m.locale=function(t){var e=this.clone();return e.$l=t,e},m.clone=function(){return d(this.$ms,this)},m.humanize=function(e){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},m.valueOf=function(){return this.asMilliseconds()},m.milliseconds=function(){return this.get("milliseconds")},m.asMilliseconds=function(){return this.as("milliseconds")},m.seconds=function(){return this.get("seconds")},m.asSeconds=function(){return this.as("seconds")},m.minutes=function(){return this.get("minutes")},m.asMinutes=function(){return this.as("minutes")},m.hours=function(){return this.get("hours")},m.asHours=function(){return this.as("hours")},m.days=function(){return this.get("days")},m.asDays=function(){return this.as("days")},m.weeks=function(){return this.get("weeks")},m.asWeeks=function(){return this.as("weeks")},m.months=function(){return this.get("months")},m.asMonths=function(){return this.as("months")},m.years=function(){return this.get("years")},m.asYears=function(){return this.as("years")},f}(),k=g((function(t,e,r){return t.add(e.years()*r,"y").add(e.months()*r,"M").add(e.days()*r,"d").add(e.hours()*r,"h").add(e.minutes()*r,"m").add(e.seconds()*r,"s").add(e.milliseconds()*r,"ms")}),"p");return function(r,i,n){t=n,e=n().$utils(),n.duration=function(t,e){var r=n.locale();return d(t,{$l:r},e)},n.isDuration=u;var a=i.prototype.add,s=i.prototype.subtract;i.prototype.add=function(t,e){return u(t)?k(this,t,1):a.bind(this)(t,e)},i.prototype.subtract=function(t,e){return u(t)?k(this,t,-1):s.bind(this)(t,e)}}},"object"==typeof t&&typeof e<"u"?e.exports=i():"function"==typeof define&&define.amd?define(i):(r=typeof globalThis<"u"?globalThis:r||self).dayjs_plugin_duration=i()})),ixt=y((()=>{qmt=v(Ue(),1),Ymt=v(rxt(),1),We(),QT(),gn(),ns(),Un(),qmt.default.extend(Ymt.default),Gmt=g((function(){et.debug("Something is calling, setConf, remove the call")}),"setConf"),Hmt={monday:rx,tuesday:ix,wednesday:nx,thursday:ax,friday:sx,saturday:ox,sunday:ex},Vmt=g(((t,e)=>{let r=[...t].map((()=>-1/0)),i=[...t].sort(((t,e)=>t.startTime-e.startTime||t.order-e.order)),n=0;for(let t of i)for(let i=0;i<r.length;i++)if(t.startTime>=r[i]){r[i]=t.endTime,t.order=i+e,i>n&&(n=i);break}return n}),"getMaxIntersections"),Kmt=1e4,Qmt=g((function(t,e,r,i){let n,a=na().gantt,s=na().securityLevel;"sandbox"===s&&(n=nh("#i"+e));let o=nh("sandbox"===s?n.nodes()[0].contentDocument.body:"body"),l="sandbox"===s?n.nodes()[0].contentDocument:document,c=l.getElementById(e);void 0===(Xmt=c.parentElement.offsetWidth)&&(Xmt=1200),void 0!==a.useWidth&&(Xmt=a.useWidth);let h=i.db.getTasks(),u=[];for(let t of h)u.push(t.type);u=S(u);let d={},p=2*a.topPadding;if("compact"===i.db.getDisplayMode()||"compact"===a.displayMode){let t={};for(let e of h)void 0===t[e.section]?t[e.section]=[e]:t[e.section].push(e);let e=0;for(let r of Object.keys(t)){let i=Vmt(t[r],e)+1;e+=i,p+=i*(a.barHeight+a.barGap),d[r]=i}}else{p+=h.length*(a.barHeight+a.barGap);for(let t of u)d[t]=h.filter((e=>e.type===t)).length}c.setAttribute("viewBox","0 0 "+Xmt+" "+p);let f=o.select(`[id="${e}"]`),y=ak().domain([Ms(h,(function(t){return t.startTime})),Ns(h,(function(t){return t.endTime}))]).rangeRound([0,Xmt-a.leftPadding-a.rightPadding]);function m(t,e){let r=t.startTime,i=e.startTime,n=0;return r>i?n=1:r<i&&(n=-1),n}function x(t,e,r){let n=a.barHeight,s=n+a.barGap,o=a.topPadding,l=a.leftPadding,c=Rm().domain([0,u.length]).range(["#00B9FA","#F95002"]).interpolate(fd);k(s,o,l,e,r,t,i.db.getExcludes(),i.db.getIncludes()),T(l,o,e,r),b(t,s,o,l,n,c,e),w(s,o),_(l,o,e,r)}function b(t,r,n,s,o,l,c){t.sort(((t,e)=>t.vert===e.vert?0:t.vert?1:-1));let d=[...new Set(t.map((t=>t.order)))].map((e=>t.find((t=>t.order===e))));f.append("g").selectAll("rect").data(d).enter().append("rect").attr("x",0).attr("y",(function(t,e){return t.order*r+n-2})).attr("width",(function(){return c-a.rightPadding/2})).attr("height",r).attr("class",(function(t){for(let[e,r]of u.entries())if(t.type===r)return"section section"+e%a.numberSectionStyles;return"section section0"})).enter();let p=f.append("g").selectAll("rect").data(t).enter(),g=i.db.getLinks();if(p.append("rect").attr("id",(function(t){return t.id})).attr("rx",3).attr("ry",3).attr("x",(function(t){return t.milestone?y(t.startTime)+s+.5*(y(t.endTime)-y(t.startTime))-.5*o:y(t.startTime)+s})).attr("y",(function(t,e){return e=t.order,t.vert?a.gridLineStartPadding:e*r+n})).attr("width",(function(t){return t.milestone?o:t.vert?.08*o:y(t.renderEndTime||t.endTime)-y(t.startTime)})).attr("height",(function(t){return t.vert?h.length*(a.barHeight+a.barGap)+2*a.barHeight:o})).attr("transform-origin",(function(t,e){return e=t.order,(y(t.startTime)+s+.5*(y(t.endTime)-y(t.startTime))).toString()+"px "+(e*r+n+.5*o).toString()+"px"})).attr("class",(function(t){let e="";t.classes.length>0&&(e=t.classes.join(" "));let r=0;for(let[e,i]of u.entries())t.type===i&&(r=e%a.numberSectionStyles);let i="";return t.active?t.crit?i+=" activeCrit":i=" active":t.done?i=t.crit?" doneCrit":" done":t.crit&&(i+=" crit"),0===i.length&&(i=" task"),t.milestone&&(i=" milestone "+i),t.vert&&(i=" vert "+i),i+=r,i+=" "+e,"task"+i})),p.append("text").attr("id",(function(t){return t.id+"-text"})).text((function(t){return t.task})).attr("font-size",a.fontSize).attr("x",(function(t){let e=y(t.startTime),r=y(t.renderEndTime||t.endTime);if(t.milestone&&(e+=.5*(y(t.endTime)-y(t.startTime))-.5*o,r=e+o),t.vert)return y(t.startTime)+s;let i=this.getBBox().width;return i>r-e?r+i+1.5*a.leftPadding>c?e+s-5:r+s+5:(r-e)/2+e+s})).attr("y",(function(t,e){return t.vert?a.gridLineStartPadding+h.length*(a.barHeight+a.barGap)+60:t.order*r+a.barHeight/2+(a.fontSize/2-2)+n})).attr("text-height",o).attr("class",(function(t){let e=y(t.startTime),r=y(t.endTime);t.milestone&&(r=e+o);let i=this.getBBox().width,n="";t.classes.length>0&&(n=t.classes.join(" "));let s=0;for(let[e,r]of u.entries())t.type===r&&(s=e%a.numberSectionStyles);let l="";return t.active&&(l=t.crit?"activeCritText"+s:"activeText"+s),t.done?l=t.crit?l+" doneCritText"+s:l+" doneText"+s:t.crit&&(l=l+" critText"+s),t.milestone&&(l+=" milestoneText"),t.vert&&(l+=" vertText"),i>r-e?r+i+1.5*a.leftPadding>c?n+" taskTextOutsideLeft taskTextOutside"+s+" "+l:n+" taskTextOutsideRight taskTextOutside"+s+" "+l+" width-"+i:n+" taskText taskText"+s+" "+l+" width-"+i})),"sandbox"===na().securityLevel){let t;t=nh("#i"+e);let r=t.nodes()[0].contentDocument;p.filter((function(t){return g.has(t.id)})).each((function(t){var e=r.querySelector("#"+t.id),i=r.querySelector("#"+t.id+"-text");let n=e.parentNode;var a=r.createElement("a");a.setAttribute("xlink:href",g.get(t.id)),a.setAttribute("target","_top"),n.appendChild(a),a.appendChild(e),a.appendChild(i)}))}}function k(t,e,r,n,s,o,l,c){if(0===l.length&&0===c.length)return;let h,u;for(let{startTime:t,endTime:e}of o)(void 0===h||t<h)&&(h=t),(void 0===u||e>u)&&(u=e);if(!h||!u)return;if((0,qmt.default)(u).diff((0,qmt.default)(h),"year")>5)return void et.warn("The difference between the min and max time is more than 5 years. This will cause performance issues. Skipping drawing exclude days.");let d=i.db.getDateFormat(),p=[],g=null,m=(0,qmt.default)(h);for(;m.valueOf()<=u;)i.db.isInvalidDate(m,d,l,c)?g?g.end=m:g={start:m,end:m}:g&&(p.push(g),g=null),m=m.add(1,"d");f.append("g").selectAll("rect").data(p).enter().append("rect").attr("id",(t=>"exclude-"+t.start.format("YYYY-MM-DD"))).attr("x",(t=>y(t.start.startOf("day"))+r)).attr("y",a.gridLineStartPadding).attr("width",(t=>y(t.end.endOf("day"))-y(t.start.startOf("day")))).attr("height",s-e-a.gridLineStartPadding).attr("transform-origin",(function(e,i){return(y(e.start)+r+.5*(y(e.end)-y(e.start))).toString()+"px "+(i*t+.5*s).toString()+"px"})).attr("class","exclude-range")}function v(t,e,r,i){if(r<=0||t>e)return 1/0;let n=e-t,a=qmt.default.duration({[i??"day"]:r}).asMilliseconds();return a<=0?1/0:Math.ceil(n/a)}function T(t,e,r,n){let s,o=i.db.getDateFormat(),l=i.db.getAxisFormat();s=l||("D"===o?"%d":a.axisFormat??"%Y-%m-%d");let c=Xs(y).tickSize(-n+e+a.gridLineStartPadding).tickFormat(Jb(s)),h=/^([1-9]\d*)(millisecond|second|minute|hour|day|week|month)$/.exec(i.db.getTickInterval()||a.tickInterval);if(null!==h){let t=parseInt(h[1],10);if(isNaN(t)||t<=0)et.warn(`Invalid tick interval value: "${h[1]}". Skipping custom tick interval.`);else{let e=h[2],r=i.db.getWeekday()||a.weekday,n=y.domain(),s=v(n[0],n[1],t,e);if(s>Kmt)et.warn(`The tick interval "${t}${e}" would generate ${s} ticks, which exceeds the maximum allowed (10000). This may indicate an invalid date or time range. Skipping custom tick interval.`);else switch(e){case"millisecond":c.ticks(Bm.every(t));break;case"second":c.ticks(Fm.every(t));break;case"minute":c.ticks(zm.every(t));break;case"hour":c.ticks(Um.every(t));break;case"day":c.ticks(qm.every(t));break;case"week":c.ticks(Hmt[r].every(t));break;case"month":c.ticks(gx.every(t))}}}if(f.append("g").attr("class","grid").attr("transform","translate("+t+", "+(n-50)+")").call(c).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10).attr("dy","1em"),i.db.topAxisEnabled()||a.topAxis){let r=Vs(y).tickSize(-n+e+a.gridLineStartPadding).tickFormat(Jb(s));if(null!==h){let t=parseInt(h[1],10);if(isNaN(t)||t<=0)et.warn(`Invalid tick interval value: "${h[1]}". Skipping custom tick interval.`);else{let e=h[2],n=i.db.getWeekday()||a.weekday,s=y.domain();if(v(s[0],s[1],t,e)<=Kmt)switch(e){case"millisecond":r.ticks(Bm.every(t));break;case"second":r.ticks(Fm.every(t));break;case"minute":r.ticks(zm.every(t));break;case"hour":r.ticks(Um.every(t));break;case"day":r.ticks(qm.every(t));break;case"week":r.ticks(Hmt[n].every(t));break;case"month":r.ticks(gx.every(t))}}}f.append("g").attr("class","grid").attr("transform","translate("+t+", "+e+")").call(r).selectAll("text").style("text-anchor","middle").attr("fill","#000").attr("stroke","none").attr("font-size",10)}}function w(t,e){let r=0,i=Object.keys(d).map((t=>[t,d[t]]));f.append("g").selectAll("text").data(i).enter().append((function(t){let e=t[0].split(on.lineBreakRegex),r=-(e.length-1)/2,i=l.createElementNS("http://www.w3.org/2000/svg","text");i.setAttribute("dy",r+"em");for(let[t,r]of e.entries()){let e=l.createElementNS("http://www.w3.org/2000/svg","tspan");e.setAttribute("alignment-baseline","central"),e.setAttribute("x","10"),t>0&&e.setAttribute("dy","1em"),e.textContent=r,i.appendChild(e)}return i})).attr("x",10).attr("y",(function(n,a){if(!(a>0))return n[1]*t/2+e;for(let s=0;s<a;s++)return r+=i[a-1][1],n[1]*t/2+r*t+e})).attr("font-size",a.sectionFontSize).attr("class",(function(t){for(let[e,r]of u.entries())if(t[0]===r)return"sectionTitle sectionTitle"+e%a.numberSectionStyles;return"sectionTitle"}))}function _(t,e,r,n){let s=i.db.getTodayMarker();if("off"===s)return;let o=f.append("g").attr("class","today"),l=new Date,c=o.append("line");c.attr("x1",y(l)+t).attr("x2",y(l)+t).attr("y1",a.titleTopMargin).attr("y2",n-a.titleTopMargin).attr("class","today"),""!==s&&c.attr("style",s.replace(/,/g,";"))}function S(t){let e={},r=[];for(let i=0,n=t.length;i<n;++i)Object.prototype.hasOwnProperty.call(e,t[i])||(e[t[i]]=!0,r.push(t[i]));return r}g(m,"taskCompare"),h.sort(m),x(h,Xmt,p),Rn(f,p,Xmt,a.useMaxWidth),f.append("text").text(i.db.getDiagramTitle()).attr("x",Xmt/2).attr("y",a.titleTopMargin).attr("class","titleText"),g(x,"makeGantt"),g(b,"drawRects"),g(k,"drawExcludeDays"),g(v,"getEstimatedTickCount"),g(T,"makeGrid"),g(w,"vertLabels"),g(_,"drawToday"),g(S,"checkUnique")}),"draw"),Zmt={setConf:Gmt,draw:Qmt}})),nxt=y((()=>{Jmt=g((t=>`\n  .mermaid-main-font {\n        font-family: ${t.fontFamily};\n  }\n\n  .exclude-range {\n    fill: ${t.excludeBkgColor};\n  }\n\n  .section {\n    stroke: none;\n    opacity: 0.2;\n  }\n\n  .section0 {\n    fill: ${t.sectionBkgColor};\n  }\n\n  .section2 {\n    fill: ${t.sectionBkgColor2};\n  }\n\n  .section1,\n  .section3 {\n    fill: ${t.altSectionBkgColor};\n    opacity: 0.2;\n  }\n\n  .sectionTitle0 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle1 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle2 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle3 {\n    fill: ${t.titleColor};\n  }\n\n  .sectionTitle {\n    text-anchor: start;\n    font-family: ${t.fontFamily};\n  }\n\n\n  /* Grid and axis */\n\n  .grid .tick {\n    stroke: ${t.gridColor};\n    opacity: 0.8;\n    shape-rendering: crispEdges;\n  }\n\n  .grid .tick text {\n    font-family: ${t.fontFamily};\n    fill: ${t.textColor};\n  }\n\n  .grid path {\n    stroke-width: 0;\n  }\n\n\n  /* Today line */\n\n  .today {\n    fill: none;\n    stroke: ${t.todayLineColor};\n    stroke-width: 2px;\n  }\n\n\n  /* Task styling */\n\n  /* Default task */\n\n  .task {\n    stroke-width: 2;\n  }\n\n  .taskText {\n    text-anchor: middle;\n    font-family: ${t.fontFamily};\n  }\n\n  .taskTextOutsideRight {\n    fill: ${t.taskTextDarkColor};\n    text-anchor: start;\n    font-family: ${t.fontFamily};\n  }\n\n  .taskTextOutsideLeft {\n    fill: ${t.taskTextDarkColor};\n    text-anchor: end;\n  }\n\n\n  /* Special case clickable */\n\n  .task.clickable {\n    cursor: pointer;\n  }\n\n  .taskText.clickable {\n    cursor: pointer;\n    fill: ${t.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideLeft.clickable {\n    cursor: pointer;\n    fill: ${t.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n  .taskTextOutsideRight.clickable {\n    cursor: pointer;\n    fill: ${t.taskTextClickableColor} !important;\n    font-weight: bold;\n  }\n\n\n  /* Specific task settings for the sections*/\n\n  .taskText0,\n  .taskText1,\n  .taskText2,\n  .taskText3 {\n    fill: ${t.taskTextColor};\n  }\n\n  .task0,\n  .task1,\n  .task2,\n  .task3 {\n    fill: ${t.taskBkgColor};\n    stroke: ${t.taskBorderColor};\n  }\n\n  .taskTextOutside0,\n  .taskTextOutside2\n  {\n    fill: ${t.taskTextOutsideColor};\n  }\n\n  .taskTextOutside1,\n  .taskTextOutside3 {\n    fill: ${t.taskTextOutsideColor};\n  }\n\n\n  /* Active task */\n\n  .active0,\n  .active1,\n  .active2,\n  .active3 {\n    fill: ${t.activeTaskBkgColor};\n    stroke: ${t.activeTaskBorderColor};\n  }\n\n  .activeText0,\n  .activeText1,\n  .activeText2,\n  .activeText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n\n  /* Completed task */\n\n  .done0,\n  .done1,\n  .done2,\n  .done3 {\n    stroke: ${t.doneTaskBorderColor};\n    fill: ${t.doneTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneText0,\n  .doneText1,\n  .doneText2,\n  .doneText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n\n  /* Tasks on the critical line */\n\n  .crit0,\n  .crit1,\n  .crit2,\n  .crit3 {\n    stroke: ${t.critBorderColor};\n    fill: ${t.critBkgColor};\n    stroke-width: 2;\n  }\n\n  .activeCrit0,\n  .activeCrit1,\n  .activeCrit2,\n  .activeCrit3 {\n    stroke: ${t.critBorderColor};\n    fill: ${t.activeTaskBkgColor};\n    stroke-width: 2;\n  }\n\n  .doneCrit0,\n  .doneCrit1,\n  .doneCrit2,\n  .doneCrit3 {\n    stroke: ${t.critBorderColor};\n    fill: ${t.doneTaskBkgColor};\n    stroke-width: 2;\n    cursor: pointer;\n    shape-rendering: crispEdges;\n  }\n\n  .milestone {\n    transform: rotate(45deg) scale(0.8,0.8);\n  }\n\n  .milestoneText {\n    font-style: italic;\n  }\n  .doneCritText0,\n  .doneCritText1,\n  .doneCritText2,\n  .doneCritText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n  .vert {\n    stroke: ${t.vertLineColor};\n  }\n\n  .vertText {\n    font-size: 15px;\n    text-anchor: middle;\n    fill: ${t.vertLineColor} !important;\n  }\n\n  .activeCritText0,\n  .activeCritText1,\n  .activeCritText2,\n  .activeCritText3 {\n    fill: ${t.taskTextDarkColor} !important;\n  }\n\n  .titleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${t.titleColor||t.textColor};\n    font-family: ${t.fontFamily};\n  }\n`),"getStyles"),txt=Jmt})),axt={};x(axt,{diagram:()=>sxt});var sxt,oxt,lxt,cxt,hxt,uxt,dxt,pxt,fxt,gxt=y((()=>{xyt(),ext(),ixt(),nxt(),sxt={parser:yyt,db:Wmt,renderer:Zmt,styles:txt}})),yxt=y((()=>{jft(),We(),oxt={parse:g((async t=>{let e=await Pft("info",t);et.debug(e)}),"parse")}})),mxt=y((()=>{lxt={name:"mermaid",version:"11.12.2",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.13",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}}})),xxt=y((()=>{mxt(),cxt={version:lxt.version+"-tiny"},hxt=g((()=>cxt.version),"getVersion"),uxt={getVersion:hxt}})),bxt=y((()=>{QT(),ns(),dxt=g((t=>{let{securityLevel:e}=na(),r=nh("body");if("sandbox"===e){let e=nh(`#i${t}`).node()?.contentDocument??document;r=nh(e.body)}return r.select(`#${t}`)}),"selectSvgElement")})),kxt=y((()=>{We(),bxt(),Un(),pxt=g(((t,e,r)=>{et.debug("rendering info diagram\n"+t);let i=dxt(e);Rn(i,100,400,!0),i.append("g").append("text").attr("x",100).attr("y",40).attr("class","version").attr("font-size",32).style("text-anchor","middle").text(`v${r}`)}),"draw"),fxt={draw:pxt}})),vxt={};x(vxt,{diagram:()=>Txt});var Txt,wxt,_xt,Sxt,Cxt,Ext,Axt,$xt,Lxt,Rxt,Ixt,Nxt,Dxt,Mxt,Oxt,Pxt,Bxt,Fxt,zxt,jxt,Uxt=y((()=>{yxt(),xxt(),kxt(),Txt={parser:oxt,db:uxt,renderer:fxt}})),Wxt=y((()=>{We(),is(),Cr(),wxt=me.pie,_xt={sections:new Map,showData:!1,config:wxt},Sxt=_xt.sections,Cxt=_xt.showData,Ext=structuredClone(wxt),Axt=g((()=>structuredClone(Ext)),"getConfig"),$xt=g((()=>{Sxt=new Map,Cxt=_xt.showData,Xn()}),"clear"),Lxt=g((({label:t,value:e})=>{if(e<0)throw new Error(`"${t}" has invalid value: ${e}. Negative values are not allowed in pie charts. All slice values must be >= 0.`);Sxt.has(t)||(Sxt.set(t,e),et.debug(`added new section: ${t}, with value: ${e}`))}),"addSection"),Rxt=g((()=>Sxt),"getSections"),Ixt=g((t=>{Cxt=t}),"setShowData"),Nxt=g((()=>Cxt),"getShowData"),Dxt={getConfig:Axt,clear:$xt,setDiagramTitle:ta,getDiagramTitle:ea,setAccTitle:Kn,getAccTitle:Qn,setAccDescription:Zn,getAccDescription:Jn,addSection:Lxt,getSections:Rxt,setShowData:Ixt,getShowData:Nxt}})),qxt=y((()=>{jft(),We(),Yft(),Wxt(),Mxt=g(((t,e)=>{Uft(t,e),e.setShowData(t.showData),t.sections.map(e.addSection)}),"populateDb"),Oxt={parse:g((async t=>{let e=await Pft("pie",t);et.debug(e),Mxt(e,Dxt)}),"parse")}})),Yxt=y((()=>{Pxt=g((t=>`\n  .pieCircle{\n    stroke: ${t.pieStrokeColor};\n    stroke-width : ${t.pieStrokeWidth};\n    opacity : ${t.pieOpacity};\n  }\n  .pieOuterCircle{\n    stroke: ${t.pieOuterStrokeColor};\n    stroke-width: ${t.pieOuterStrokeWidth};\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${t.pieTitleTextSize};\n    fill: ${t.pieTitleTextColor};\n    font-family: ${t.fontFamily};\n  }\n  .slice {\n    font-family: ${t.fontFamily};\n    fill: ${t.pieSectionTextColor};\n    font-size:${t.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${t.pieLegendTextColor};\n    font-family: ${t.fontFamily};\n    font-size: ${t.pieLegendTextSize};\n  }\n`),"getStyles"),Bxt=Pxt})),Gxt=y((()=>{QT(),ns(),We(),bxt(),Un(),_L(),Fxt=g((t=>{let e=[...t.values()].reduce(((t,e)=>t+e),0),r=[...t.entries()].map((([t,e])=>({label:t,value:e}))).filter((t=>t.value/e*100>=1)).sort(((t,e)=>e.value-t.value));return tv().value((t=>t.value))(r)}),"createPieArcs"),zxt=g(((t,e,r,i)=>{et.debug("rendering pie chart\n"+t);let n=i.db,a=na(),s=G$(n.getConfig(),a.pie),o=18,l=450,c=l,h=dxt(e),u=h.append("g");u.attr("transform","translate(225,225)");let{themeVariables:d}=a,[p]=bL(d.pieOuterStrokeWidth);p??=2;let f=s.textPosition,g=Math.min(c,l)/2-40,y=Bk().innerRadius(0).outerRadius(g),m=Bk().innerRadius(g*f).outerRadius(g*f);u.append("circle").attr("cx",0).attr("cy",0).attr("r",g+p/2).attr("class","pieOuterCircle");let x=n.getSections(),b=Fxt(x),k=[d.pie1,d.pie2,d.pie3,d.pie4,d.pie5,d.pie6,d.pie7,d.pie8,d.pie9,d.pie10,d.pie11,d.pie12],v=0;x.forEach((t=>{v+=t}));let T=b.filter((t=>"0"!==(t.data.value/v*100).toFixed(0))),w=cm(k);u.selectAll("mySlices").data(T).enter().append("path").attr("d",y).attr("fill",(t=>w(t.data.label))).attr("class","pieCircle"),u.selectAll("mySlices").data(T).enter().append("text").text((t=>(t.data.value/v*100).toFixed(0)+"%")).attr("transform",(t=>"translate("+m.centroid(t)+")")).style("text-anchor","middle").attr("class","slice"),u.append("text").text(n.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");let _=[...x.entries()].map((([t,e])=>({label:t,value:e}))),S=u.selectAll(".legend").data(_).enter().append("g").attr("class","legend").attr("transform",((t,e)=>"translate(216,"+(22*e-22*_.length/2)+")"));S.append("rect").attr("width",o).attr("height",o).style("fill",(t=>w(t.label))).style("stroke",(t=>w(t.label))),S.append("text").attr("x",22).attr("y",14).text((t=>n.getShowData()?`${t.label} [${t.value}]`:t.label));let C=512+Math.max(...S.selectAll("text").nodes().map((t=>t?.getBoundingClientRect().width??0)));h.attr("viewBox",`0 0 ${C} 450`),Rn(h,l,C,s.useMaxWidth)}),"draw"),jxt={draw:zxt}})),Hxt={};x(Hxt,{diagram:()=>Vxt});var Vxt,Xxt,Kxt,Qxt,Zxt,Jxt=y((()=>{qxt(),Wxt(),Yxt(),Gxt(),Vxt={parser:Oxt,db:Dxt,renderer:jxt,styles:Bxt}})),tbt=y((()=>{(Xxt=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[1,3],r=[1,4],i=[1,5],n=[1,6],a=[1,7],s=[1,4,5,10,12,13,14,18,25,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],o=[1,4,5,10,12,13,14,18,25,28,35,37,39,41,42,48,50,51,52,53,54,55,56,57,60,61,63,64,65,66,67],l=[55,56,57],c=[2,36],h=[1,37],u=[1,36],d=[1,38],p=[1,35],f=[1,43],y=[1,41],m=[1,14],x=[1,23],b=[1,18],k=[1,19],v=[1,20],T=[1,21],w=[1,22],_=[1,24],S=[1,25],C=[1,26],E=[1,27],A=[1,28],$=[1,29],L=[1,32],R=[1,33],I=[1,34],N=[1,39],D=[1,40],M=[1,42],O=[1,44],P=[1,62],B=[1,61],F=[4,5,8,10,12,13,14,18,44,47,49,55,56,57,63,64,65,66,67],z=[1,65],j=[1,66],U=[1,67],W=[1,68],q=[1,69],Y=[1,70],G=[1,71],H=[1,72],V=[1,73],X=[1,74],K=[1,75],Q=[1,76],Z=[4,5,6,7,8,9,10,11,12,13,14,15,18],J=[1,90],tt=[1,91],et=[1,92],rt=[1,99],it=[1,93],nt=[1,96],at=[1,94],st=[1,95],ot=[1,97],lt=[1,98],ct=[1,102],ht=[10,55,56,57],ut=[4,5,6,8,10,11,13,17,18,19,20,55,56,57],dt={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,idStringToken:3,ALPHA:4,NUM:5,NODE_STRING:6,DOWN:7,MINUS:8,DEFAULT:9,COMMA:10,COLON:11,AMP:12,BRKT:13,MULT:14,UNICODE_TEXT:15,styleComponent:16,UNIT:17,SPACE:18,STYLE:19,PCT:20,idString:21,style:22,stylesOpt:23,classDefStatement:24,CLASSDEF:25,start:26,eol:27,QUADRANT:28,document:29,line:30,statement:31,axisDetails:32,quadrantDetails:33,points:34,title:35,title_value:36,acc_title:37,acc_title_value:38,acc_descr:39,acc_descr_value:40,acc_descr_multiline_value:41,section:42,text:43,point_start:44,point_x:45,point_y:46,class_name:47,"X-AXIS":48,"AXIS-TEXT-DELIMITER":49,"Y-AXIS":50,QUADRANT_1:51,QUADRANT_2:52,QUADRANT_3:53,QUADRANT_4:54,NEWLINE:55,SEMI:56,EOF:57,alphaNumToken:58,textNoTagsToken:59,STR:60,MD_STR:61,alphaNum:62,PUNCTUATION:63,PLUS:64,EQUALS:65,DOT:66,UNDERSCORE:67,$accept:0,$end:1},terminals_:{2:"error",4:"ALPHA",5:"NUM",6:"NODE_STRING",7:"DOWN",8:"MINUS",9:"DEFAULT",10:"COMMA",11:"COLON",12:"AMP",13:"BRKT",14:"MULT",15:"UNICODE_TEXT",17:"UNIT",18:"SPACE",19:"STYLE",20:"PCT",25:"CLASSDEF",28:"QUADRANT",35:"title",36:"title_value",37:"acc_title",38:"acc_title_value",39:"acc_descr",40:"acc_descr_value",41:"acc_descr_multiline_value",42:"section",44:"point_start",45:"point_x",46:"point_y",47:"class_name",48:"X-AXIS",49:"AXIS-TEXT-DELIMITER",50:"Y-AXIS",51:"QUADRANT_1",52:"QUADRANT_2",53:"QUADRANT_3",54:"QUADRANT_4",55:"NEWLINE",56:"SEMI",57:"EOF",60:"STR",61:"MD_STR",63:"PUNCTUATION",64:"PLUS",65:"EQUALS",66:"DOT",67:"UNDERSCORE"},productions_:[0,[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[16,1],[21,1],[21,2],[22,1],[22,2],[23,1],[23,3],[24,5],[26,2],[26,2],[26,2],[29,0],[29,2],[30,2],[31,0],[31,1],[31,2],[31,1],[31,1],[31,1],[31,2],[31,2],[31,2],[31,1],[31,1],[34,4],[34,5],[34,5],[34,6],[32,4],[32,3],[32,2],[32,4],[32,3],[32,2],[33,2],[33,2],[33,2],[33,2],[27,1],[27,1],[27,1],[43,1],[43,2],[43,1],[43,1],[62,1],[62,2],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[58,1],[59,1],[59,1],[59,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 23:case 68:this.$=a[o];break;case 24:case 69:this.$=a[o-1]+""+a[o];break;case 26:this.$=a[o-1]+a[o];break;case 27:this.$=[a[o].trim()];break;case 28:a[o-2].push(a[o].trim()),this.$=a[o-2];break;case 29:this.$=a[o-4],i.addClass(a[o-2],a[o]);break;case 37:this.$=[];break;case 42:this.$=a[o].trim(),i.setDiagramTitle(this.$);break;case 43:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 44:case 45:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 46:i.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 47:i.addPoint(a[o-3],"",a[o-1],a[o],[]);break;case 48:i.addPoint(a[o-4],a[o-3],a[o-1],a[o],[]);break;case 49:i.addPoint(a[o-4],"",a[o-2],a[o-1],a[o]);break;case 50:i.addPoint(a[o-5],a[o-4],a[o-2],a[o-1],a[o]);break;case 51:i.setXAxisLeftText(a[o-2]),i.setXAxisRightText(a[o]);break;case 52:a[o-1].text+=" ⟶ ",i.setXAxisLeftText(a[o-1]);break;case 53:i.setXAxisLeftText(a[o]);break;case 54:i.setYAxisBottomText(a[o-2]),i.setYAxisTopText(a[o]);break;case 55:a[o-1].text+=" ⟶ ",i.setYAxisBottomText(a[o-1]);break;case 56:i.setYAxisBottomText(a[o]);break;case 57:i.setQuadrant1Text(a[o]);break;case 58:i.setQuadrant2Text(a[o]);break;case 59:i.setQuadrant3Text(a[o]);break;case 60:i.setQuadrant4Text(a[o]);break;case 64:case 66:this.$={text:a[o],type:"text"};break;case 65:this.$={text:a[o-1].text+""+a[o],type:a[o-1].type};break;case 67:this.$={text:a[o],type:"markdown"}}}),"anonymous"),table:[{18:e,26:1,27:2,28:r,55:i,56:n,57:a},{1:[3]},{18:e,26:8,27:2,28:r,55:i,56:n,57:a},{18:e,26:9,27:2,28:r,55:i,56:n,57:a},t(s,[2,33],{29:10}),t(o,[2,61]),t(o,[2,62]),t(o,[2,63]),{1:[2,30]},{1:[2,31]},t(l,c,{30:11,31:12,24:13,32:15,33:16,34:17,43:30,58:31,1:[2,32],4:h,5:u,10:d,12:p,13:f,14:y,18:m,25:x,35:b,37:k,39:v,41:T,42:w,48:_,50:S,51:C,52:E,53:A,54:$,60:L,61:R,63:I,64:N,65:D,66:M,67:O}),t(s,[2,34]),{27:45,55:i,56:n,57:a},t(l,[2,37]),t(l,c,{24:13,32:15,33:16,34:17,43:30,58:31,31:46,4:h,5:u,10:d,12:p,13:f,14:y,18:m,25:x,35:b,37:k,39:v,41:T,42:w,48:_,50:S,51:C,52:E,53:A,54:$,60:L,61:R,63:I,64:N,65:D,66:M,67:O}),t(l,[2,39]),t(l,[2,40]),t(l,[2,41]),{36:[1,47]},{38:[1,48]},{40:[1,49]},t(l,[2,45]),t(l,[2,46]),{18:[1,50]},{4:h,5:u,10:d,12:p,13:f,14:y,43:51,58:31,60:L,61:R,63:I,64:N,65:D,66:M,67:O},{4:h,5:u,10:d,12:p,13:f,14:y,43:52,58:31,60:L,61:R,63:I,64:N,65:D,66:M,67:O},{4:h,5:u,10:d,12:p,13:f,14:y,43:53,58:31,60:L,61:R,63:I,64:N,65:D,66:M,67:O},{4:h,5:u,10:d,12:p,13:f,14:y,43:54,58:31,60:L,61:R,63:I,64:N,65:D,66:M,67:O},{4:h,5:u,10:d,12:p,13:f,14:y,43:55,58:31,60:L,61:R,63:I,64:N,65:D,66:M,67:O},{4:h,5:u,10:d,12:p,13:f,14:y,43:56,58:31,60:L,61:R,63:I,64:N,65:D,66:M,67:O},{4:h,5:u,8:P,10:d,12:p,13:f,14:y,18:B,44:[1,57],47:[1,58],58:60,59:59,63:I,64:N,65:D,66:M,67:O},t(F,[2,64]),t(F,[2,66]),t(F,[2,67]),t(F,[2,70]),t(F,[2,71]),t(F,[2,72]),t(F,[2,73]),t(F,[2,74]),t(F,[2,75]),t(F,[2,76]),t(F,[2,77]),t(F,[2,78]),t(F,[2,79]),t(F,[2,80]),t(s,[2,35]),t(l,[2,38]),t(l,[2,42]),t(l,[2,43]),t(l,[2,44]),{3:64,4:z,5:j,6:U,7:W,8:q,9:Y,10:G,11:H,12:V,13:X,14:K,15:Q,21:63},t(l,[2,53],{59:59,58:60,4:h,5:u,8:P,10:d,12:p,13:f,14:y,18:B,49:[1,77],63:I,64:N,65:D,66:M,67:O}),t(l,[2,56],{59:59,58:60,4:h,5:u,8:P,10:d,12:p,13:f,14:y,18:B,49:[1,78],63:I,64:N,65:D,66:M,67:O}),t(l,[2,57],{59:59,58:60,4:h,5:u,8:P,10:d,12:p,13:f,14:y,18:B,63:I,64:N,65:D,66:M,67:O}),t(l,[2,58],{59:59,58:60,4:h,5:u,8:P,10:d,12:p,13:f,14:y,18:B,63:I,64:N,65:D,66:M,67:O}),t(l,[2,59],{59:59,58:60,4:h,5:u,8:P,10:d,12:p,13:f,14:y,18:B,63:I,64:N,65:D,66:M,67:O}),t(l,[2,60],{59:59,58:60,4:h,5:u,8:P,10:d,12:p,13:f,14:y,18:B,63:I,64:N,65:D,66:M,67:O}),{45:[1,79]},{44:[1,80]},t(F,[2,65]),t(F,[2,81]),t(F,[2,82]),t(F,[2,83]),{3:82,4:z,5:j,6:U,7:W,8:q,9:Y,10:G,11:H,12:V,13:X,14:K,15:Q,18:[1,81]},t(Z,[2,23]),t(Z,[2,1]),t(Z,[2,2]),t(Z,[2,3]),t(Z,[2,4]),t(Z,[2,5]),t(Z,[2,6]),t(Z,[2,7]),t(Z,[2,8]),t(Z,[2,9]),t(Z,[2,10]),t(Z,[2,11]),t(Z,[2,12]),t(l,[2,52],{58:31,43:83,4:h,5:u,10:d,12:p,13:f,14:y,60:L,61:R,63:I,64:N,65:D,66:M,67:O}),t(l,[2,55],{58:31,43:84,4:h,5:u,10:d,12:p,13:f,14:y,60:L,61:R,63:I,64:N,65:D,66:M,67:O}),{46:[1,85]},{45:[1,86]},{4:J,5:tt,6:et,8:rt,11:it,13:nt,16:89,17:at,18:st,19:ot,20:lt,22:88,23:87},t(Z,[2,24]),t(l,[2,51],{59:59,58:60,4:h,5:u,8:P,10:d,12:p,13:f,14:y,18:B,63:I,64:N,65:D,66:M,67:O}),t(l,[2,54],{59:59,58:60,4:h,5:u,8:P,10:d,12:p,13:f,14:y,18:B,63:I,64:N,65:D,66:M,67:O}),t(l,[2,47],{22:88,16:89,23:100,4:J,5:tt,6:et,8:rt,11:it,13:nt,17:at,18:st,19:ot,20:lt}),{46:[1,101]},t(l,[2,29],{10:ct}),t(ht,[2,27],{16:103,4:J,5:tt,6:et,8:rt,11:it,13:nt,17:at,18:st,19:ot,20:lt}),t(ut,[2,25]),t(ut,[2,13]),t(ut,[2,14]),t(ut,[2,15]),t(ut,[2,16]),t(ut,[2,17]),t(ut,[2,18]),t(ut,[2,19]),t(ut,[2,20]),t(ut,[2,21]),t(ut,[2,22]),t(l,[2,49],{10:ct}),t(l,[2,48],{22:88,16:89,23:104,4:J,5:tt,6:et,8:rt,11:it,13:nt,17:at,18:st,19:ot,20:lt}),{4:J,5:tt,6:et,8:rt,11:it,13:nt,16:89,17:at,18:st,19:ot,20:lt,22:105},t(ut,[2,26]),t(l,[2,50],{10:ct}),t(ht,[2,28],{16:103,4:J,5:tt,6:et,8:rt,11:it,13:nt,17:at,18:st,19:ot,20:lt})],defaultActions:{8:[2,30],9:[2,31]},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},pt={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:g((function(t,e,r,i){switch(r){case 0:case 1:case 3:break;case 2:return 55;case 4:return this.begin("title"),35;case 5:return this.popState(),"title_value";case 6:return this.begin("acc_title"),37;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),39;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 23:case 25:case 31:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:return 48;case 14:return 50;case 15:return 49;case 16:return 51;case 17:return 52;case 18:return 53;case 19:return 54;case 20:return 25;case 21:this.begin("md_string");break;case 22:return"MD_STR";case 24:this.begin("string");break;case 26:return"STR";case 27:this.begin("class_name");break;case 28:return this.popState(),47;case 29:return this.begin("point_start"),44;case 30:return this.begin("point_x"),45;case 32:this.popState(),this.begin("point_y");break;case 33:return this.popState(),46;case 34:return 28;case 35:return 4;case 36:return 11;case 37:return 64;case 38:return 10;case 39:case 40:return 65;case 41:return 14;case 42:return 13;case 43:return 67;case 44:return 66;case 45:return 12;case 46:return 8;case 47:return 5;case 48:return 18;case 49:return 56;case 50:return 63;case 51:return 57}}),"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?: *x-axis *)/i,/^(?: *y-axis *)/i,/^(?: *--+> *)/i,/^(?: *quadrant-1 *)/i,/^(?: *quadrant-2 *)/i,/^(?: *quadrant-3 *)/i,/^(?: *quadrant-4 *)/i,/^(?:classDef\b)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?::::)/i,/^(?:^\w+)/i,/^(?:\s*:\s*\[\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?:\s*\] *)/i,/^(?:\s*,\s*)/i,/^(?:(1)|(0(.\d+)?))/i,/^(?: *quadrantChart *)/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s)/i,/^(?:;)/i,/^(?:[!"#$%&'*+,-.`?\\_/])/i,/^(?:$)/i],conditions:{class_name:{rules:[28],inclusive:!1},point_y:{rules:[33],inclusive:!1},point_x:{rules:[32],inclusive:!1},point_start:{rules:[30,31],inclusive:!1},acc_descr_multiline:{rules:[11,12],inclusive:!1},acc_descr:{rules:[9],inclusive:!1},acc_title:{rules:[7],inclusive:!1},title:{rules:[5],inclusive:!1},md_string:{rules:[22,23],inclusive:!1},string:{rules:[25,26],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,6,8,10,13,14,15,16,17,18,19,20,21,24,27,29,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};function ft(){this.yy={}}return dt.lexer=pt,g(ft,"Parser"),ft.prototype=dt,dt.Parser=ft,new ft}()).parser=Xxt,Kxt=Xxt})),ebt=y((()=>{QT(),Cr(),We(),vr(),Qxt=oe(),Zxt=class{constructor(){this.classes=new Map,this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData()}static{g(this,"QuadrantBuilder")}getDefaultData(){return{titleText:"",quadrant1Text:"",quadrant2Text:"",quadrant3Text:"",quadrant4Text:"",xAxisLeftText:"",xAxisRightText:"",yAxisBottomText:"",yAxisTopText:"",points:[]}}getDefaultConfig(){return{showXAxis:!0,showYAxis:!0,showTitle:!0,chartHeight:me.quadrantChart?.chartWidth||500,chartWidth:me.quadrantChart?.chartHeight||500,titlePadding:me.quadrantChart?.titlePadding||10,titleFontSize:me.quadrantChart?.titleFontSize||20,quadrantPadding:me.quadrantChart?.quadrantPadding||5,xAxisLabelPadding:me.quadrantChart?.xAxisLabelPadding||5,yAxisLabelPadding:me.quadrantChart?.yAxisLabelPadding||5,xAxisLabelFontSize:me.quadrantChart?.xAxisLabelFontSize||16,yAxisLabelFontSize:me.quadrantChart?.yAxisLabelFontSize||16,quadrantLabelFontSize:me.quadrantChart?.quadrantLabelFontSize||16,quadrantTextTopPadding:me.quadrantChart?.quadrantTextTopPadding||5,pointTextPadding:me.quadrantChart?.pointTextPadding||5,pointLabelFontSize:me.quadrantChart?.pointLabelFontSize||12,pointRadius:me.quadrantChart?.pointRadius||5,xAxisPosition:me.quadrantChart?.xAxisPosition||"top",yAxisPosition:me.quadrantChart?.yAxisPosition||"left",quadrantInternalBorderStrokeWidth:me.quadrantChart?.quadrantInternalBorderStrokeWidth||1,quadrantExternalBorderStrokeWidth:me.quadrantChart?.quadrantExternalBorderStrokeWidth||2}}getDefaultThemeConfig(){return{quadrant1Fill:Qxt.quadrant1Fill,quadrant2Fill:Qxt.quadrant2Fill,quadrant3Fill:Qxt.quadrant3Fill,quadrant4Fill:Qxt.quadrant4Fill,quadrant1TextFill:Qxt.quadrant1TextFill,quadrant2TextFill:Qxt.quadrant2TextFill,quadrant3TextFill:Qxt.quadrant3TextFill,quadrant4TextFill:Qxt.quadrant4TextFill,quadrantPointFill:Qxt.quadrantPointFill,quadrantPointTextFill:Qxt.quadrantPointTextFill,quadrantXAxisTextFill:Qxt.quadrantXAxisTextFill,quadrantYAxisTextFill:Qxt.quadrantYAxisTextFill,quadrantTitleFill:Qxt.quadrantTitleFill,quadrantInternalBorderStrokeFill:Qxt.quadrantInternalBorderStrokeFill,quadrantExternalBorderStrokeFill:Qxt.quadrantExternalBorderStrokeFill}}clear(){this.config=this.getDefaultConfig(),this.themeConfig=this.getDefaultThemeConfig(),this.data=this.getDefaultData(),this.classes=new Map,et.info("clear called")}setData(t){this.data={...this.data,...t}}addPoints(t){this.data.points=[...t,...this.data.points]}addClass(t,e){this.classes.set(t,e)}setConfig(t){et.trace("setConfig called with: ",t),this.config={...this.config,...t}}setThemeConfig(t){et.trace("setThemeConfig called with: ",t),this.themeConfig={...this.themeConfig,...t}}calculateSpace(t,e,r,i){let n=2*this.config.xAxisLabelPadding+this.config.xAxisLabelFontSize,a={top:"top"===t&&e?n:0,bottom:"bottom"===t&&e?n:0},s=2*this.config.yAxisLabelPadding+this.config.yAxisLabelFontSize,o={left:"left"===this.config.yAxisPosition&&r?s:0,right:"right"===this.config.yAxisPosition&&r?s:0},l=this.config.titleFontSize+2*this.config.titlePadding,c={top:i?l:0},h=this.config.quadrantPadding+o.left,u=this.config.quadrantPadding+a.top+c.top,d=this.config.chartWidth-2*this.config.quadrantPadding-o.left-o.right,p=this.config.chartHeight-2*this.config.quadrantPadding-a.top-a.bottom-c.top;return{xAxisSpace:a,yAxisSpace:o,titleSpace:c,quadrantSpace:{quadrantLeft:h,quadrantTop:u,quadrantWidth:d,quadrantHalfWidth:d/2,quadrantHeight:p,quadrantHalfHeight:p/2}}}getAxisLabels(t,e,r,i){let{quadrantSpace:n,titleSpace:a}=i,{quadrantHalfHeight:s,quadrantHeight:o,quadrantLeft:l,quadrantHalfWidth:c,quadrantTop:h,quadrantWidth:u}=n,d=!!this.data.xAxisRightText,p=!!this.data.yAxisTopText,f=[];return this.data.xAxisLeftText&&e&&f.push({text:this.data.xAxisLeftText,fill:this.themeConfig.quadrantXAxisTextFill,x:l+(d?c/2:0),y:"top"===t?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+h+o+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:d?"center":"left",horizontalPos:"top",rotation:0}),this.data.xAxisRightText&&e&&f.push({text:this.data.xAxisRightText,fill:this.themeConfig.quadrantXAxisTextFill,x:l+c+(d?c/2:0),y:"top"===t?this.config.xAxisLabelPadding+a.top:this.config.xAxisLabelPadding+h+o+this.config.quadrantPadding,fontSize:this.config.xAxisLabelFontSize,verticalPos:d?"center":"left",horizontalPos:"top",rotation:0}),this.data.yAxisBottomText&&r&&f.push({text:this.data.yAxisBottomText,fill:this.themeConfig.quadrantYAxisTextFill,x:"left"===this.config.yAxisPosition?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+l+u+this.config.quadrantPadding,y:h+o-(p?s/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:p?"center":"left",horizontalPos:"top",rotation:-90}),this.data.yAxisTopText&&r&&f.push({text:this.data.yAxisTopText,fill:this.themeConfig.quadrantYAxisTextFill,x:"left"===this.config.yAxisPosition?this.config.yAxisLabelPadding:this.config.yAxisLabelPadding+l+u+this.config.quadrantPadding,y:h+s-(p?s/2:0),fontSize:this.config.yAxisLabelFontSize,verticalPos:p?"center":"left",horizontalPos:"top",rotation:-90}),f}getQuadrants(t){let{quadrantSpace:e}=t,{quadrantHalfHeight:r,quadrantLeft:i,quadrantHalfWidth:n,quadrantTop:a}=e,s=[{text:{text:this.data.quadrant1Text,fill:this.themeConfig.quadrant1TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+n,y:a,width:n,height:r,fill:this.themeConfig.quadrant1Fill},{text:{text:this.data.quadrant2Text,fill:this.themeConfig.quadrant2TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:a,width:n,height:r,fill:this.themeConfig.quadrant2Fill},{text:{text:this.data.quadrant3Text,fill:this.themeConfig.quadrant3TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant3Fill},{text:{text:this.data.quadrant4Text,fill:this.themeConfig.quadrant4TextFill,x:0,y:0,fontSize:this.config.quadrantLabelFontSize,verticalPos:"center",horizontalPos:"middle",rotation:0},x:i+n,y:a+r,width:n,height:r,fill:this.themeConfig.quadrant4Fill}];for(let t of s)t.text.x=t.x+t.width/2,0===this.data.points.length?(t.text.y=t.y+t.height/2,t.text.horizontalPos="middle"):(t.text.y=t.y+this.config.quadrantTextTopPadding,t.text.horizontalPos="top");return s}getQuadrantPoints(t){let{quadrantSpace:e}=t,{quadrantHeight:r,quadrantLeft:i,quadrantTop:n,quadrantWidth:a}=e,s=Rm().domain([0,1]).range([i,a+i]),o=Rm().domain([0,1]).range([r+n,n]);return this.data.points.map((t=>{let e=this.classes.get(t.className);return e&&(t={...e,...t}),{x:s(t.x),y:o(t.y),fill:t.color??this.themeConfig.quadrantPointFill,radius:t.radius??this.config.pointRadius,text:{text:t.text,fill:this.themeConfig.quadrantPointTextFill,x:s(t.x),y:o(t.y)+this.config.pointTextPadding,verticalPos:"center",horizontalPos:"top",fontSize:this.config.pointLabelFontSize,rotation:0},strokeColor:t.strokeColor??this.themeConfig.quadrantPointFill,strokeWidth:t.strokeWidth??"0px"}}))}getBorders(t){let e=this.config.quadrantExternalBorderStrokeWidth/2,{quadrantSpace:r}=t,{quadrantHalfHeight:i,quadrantHeight:n,quadrantLeft:a,quadrantHalfWidth:s,quadrantTop:o,quadrantWidth:l}=r;return[{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-e,y1:o,x2:a+l+e,y2:o},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a+l,y1:o+e,x2:a+l,y2:o+n-e},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a-e,y1:o+n,x2:a+l+e,y2:o+n},{strokeFill:this.themeConfig.quadrantExternalBorderStrokeFill,strokeWidth:this.config.quadrantExternalBorderStrokeWidth,x1:a,y1:o+e,x2:a,y2:o+n-e},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+s,y1:o+e,x2:a+s,y2:o+n-e},{strokeFill:this.themeConfig.quadrantInternalBorderStrokeFill,strokeWidth:this.config.quadrantInternalBorderStrokeWidth,x1:a+e,y1:o+i,x2:a+l-e,y2:o+i}]}getTitle(t){if(t)return{text:this.data.titleText,fill:this.themeConfig.quadrantTitleFill,fontSize:this.config.titleFontSize,horizontalPos:"top",verticalPos:"center",rotation:0,y:this.config.titlePadding,x:this.config.chartWidth/2}}build(){let t=this.config.showXAxis&&!(!this.data.xAxisLeftText&&!this.data.xAxisRightText),e=this.config.showYAxis&&!(!this.data.yAxisTopText&&!this.data.yAxisBottomText),r=this.config.showTitle&&!!this.data.titleText,i=this.data.points.length>0?"bottom":this.config.xAxisPosition,n=this.calculateSpace(i,t,e,r);return{points:this.getQuadrantPoints(n),quadrants:this.getQuadrants(n),axisLabels:this.getAxisLabels(i,t,e,n),borderLines:this.getBorders(n),title:this.getTitle(r)}}}}));function rbt(t){return!/^#?([\dA-Fa-f]{6}|[\dA-Fa-f]{3})$/.test(t)}function ibt(t){return!/^\d+$/.test(t)}function nbt(t){return!/^\d+px$/.test(t)}var abt,sbt=y((()=>{abt=class extends Error{static{g(this,"InvalidStyleError")}constructor(t,e,r){super(`value for ${t} ${e} is invalid, please use a valid ${r}`),this.name="InvalidStyleError"}},g(rbt,"validateHexCode"),g(ibt,"validateNumber"),g(nbt,"validateSizeInPixels")}));function obt(t){return zi(t.trim(),Tbt)}function lbt(t){wbt.setData({quadrant1Text:obt(t.text)})}function cbt(t){wbt.setData({quadrant2Text:obt(t.text)})}function hbt(t){wbt.setData({quadrant3Text:obt(t.text)})}function ubt(t){wbt.setData({quadrant4Text:obt(t.text)})}function dbt(t){wbt.setData({xAxisLeftText:obt(t.text)})}function pbt(t){wbt.setData({xAxisRightText:obt(t.text)})}function fbt(t){wbt.setData({yAxisTopText:obt(t.text)})}function gbt(t){wbt.setData({yAxisBottomText:obt(t.text)})}function ybt(t){let e={};for(let r of t){let[t,i]=r.trim().split(/\s*:\s*/);if("radius"===t){if(ibt(i))throw new abt(t,i,"number");e.radius=parseInt(i)}else if("color"===t){if(rbt(i))throw new abt(t,i,"hex code");e.color=i}else if("stroke-color"===t){if(rbt(i))throw new abt(t,i,"hex code");e.strokeColor=i}else{if("stroke-width"!==t)throw new Error(`style named ${t} is not supported.`);if(nbt(i))throw new abt(t,i,"number of pixels (eg. 10px)");e.strokeWidth=i}}return e}function mbt(t,e,r,i,n){let a=ybt(n);wbt.addPoints([{x:r,y:i,text:obt(t.text),className:e,...a}])}function xbt(t,e){wbt.addClass(t,ybt(e))}function bbt(t){wbt.setConfig({chartWidth:t})}function kbt(t){wbt.setConfig({chartHeight:t})}function vbt(){let t=na(),{themeVariables:e,quadrantChart:r}=t;return r&&wbt.setConfig(r),wbt.setThemeConfig({quadrant1Fill:e.quadrant1Fill,quadrant2Fill:e.quadrant2Fill,quadrant3Fill:e.quadrant3Fill,quadrant4Fill:e.quadrant4Fill,quadrant1TextFill:e.quadrant1TextFill,quadrant2TextFill:e.quadrant2TextFill,quadrant3TextFill:e.quadrant3TextFill,quadrant4TextFill:e.quadrant4TextFill,quadrantPointFill:e.quadrantPointFill,quadrantPointTextFill:e.quadrantPointTextFill,quadrantXAxisTextFill:e.quadrantXAxisTextFill,quadrantYAxisTextFill:e.quadrantYAxisTextFill,quadrantExternalBorderStrokeFill:e.quadrantExternalBorderStrokeFill,quadrantInternalBorderStrokeFill:e.quadrantInternalBorderStrokeFill,quadrantTitleFill:e.quadrantTitleFill}),wbt.setData({titleText:ea()}),wbt.build()}var Tbt,wbt,_bt,Sbt,Cbt,Ebt,Abt=y((()=>{ns(),gn(),is(),ebt(),sbt(),Tbt=na(),g(obt,"textSanitizer"),wbt=new Zxt,g(lbt,"setQuadrant1Text"),g(cbt,"setQuadrant2Text"),g(hbt,"setQuadrant3Text"),g(ubt,"setQuadrant4Text"),g(dbt,"setXAxisLeftText"),g(pbt,"setXAxisRightText"),g(fbt,"setYAxisTopText"),g(gbt,"setYAxisBottomText"),g(ybt,"parseStyles"),g(mbt,"addPoint"),g(xbt,"addClass"),g(bbt,"setWidth"),g(kbt,"setHeight"),g(vbt,"getQuadrantData"),_bt=g((function(){wbt.clear(),Xn()}),"clear"),Sbt={setWidth:bbt,setHeight:kbt,setQuadrant1Text:lbt,setQuadrant2Text:cbt,setQuadrant3Text:hbt,setQuadrant4Text:ubt,setXAxisLeftText:dbt,setXAxisRightText:pbt,setYAxisTopText:fbt,setYAxisBottomText:gbt,parseStyles:ybt,addPoint:mbt,addClass:xbt,getQuadrantData:vbt,clear:_bt,setAccTitle:Kn,getAccTitle:Qn,setDiagramTitle:ta,getDiagramTitle:ea,getAccDescription:Jn,setAccDescription:Zn}})),$bt=y((()=>{QT(),ns(),We(),Un(),Cbt=g(((t,e,r,i)=>{function n(t){return"top"===t?"hanging":"middle"}function a(t){return"left"===t?"start":"middle"}function s(t){return`translate(${t.x}, ${t.y}) rotate(${t.rotation||0})`}g(n,"getDominantBaseLine"),g(a,"getTextAnchor"),g(s,"getTransformation");let o=na();et.debug("Rendering quadrant chart\n"+t);let l,c=o.securityLevel;"sandbox"===c&&(l=nh("#i"+e));let h=nh("sandbox"===c?l.nodes()[0].contentDocument.body:"body").select(`[id="${e}"]`),u=h.append("g").attr("class","main"),d=o.quadrantChart?.chartWidth??500,p=o.quadrantChart?.chartHeight??500;Rn(h,p,d,o.quadrantChart?.useMaxWidth??!0),h.attr("viewBox","0 0 "+d+" "+p),i.db.setHeight(p),i.db.setWidth(d);let f=i.db.getQuadrantData(),y=u.append("g").attr("class","quadrants"),m=u.append("g").attr("class","border"),x=u.append("g").attr("class","data-points"),b=u.append("g").attr("class","labels"),k=u.append("g").attr("class","title");f.title&&k.append("text").attr("x",0).attr("y",0).attr("fill",f.title.fill).attr("font-size",f.title.fontSize).attr("dominant-baseline",n(f.title.horizontalPos)).attr("text-anchor",a(f.title.verticalPos)).attr("transform",s(f.title)).text(f.title.text),f.borderLines&&m.selectAll("line").data(f.borderLines).enter().append("line").attr("x1",(t=>t.x1)).attr("y1",(t=>t.y1)).attr("x2",(t=>t.x2)).attr("y2",(t=>t.y2)).style("stroke",(t=>t.strokeFill)).style("stroke-width",(t=>t.strokeWidth));let v=y.selectAll("g.quadrant").data(f.quadrants).enter().append("g").attr("class","quadrant");v.append("rect").attr("x",(t=>t.x)).attr("y",(t=>t.y)).attr("width",(t=>t.width)).attr("height",(t=>t.height)).attr("fill",(t=>t.fill)),v.append("text").attr("x",0).attr("y",0).attr("fill",(t=>t.text.fill)).attr("font-size",(t=>t.text.fontSize)).attr("dominant-baseline",(t=>n(t.text.horizontalPos))).attr("text-anchor",(t=>a(t.text.verticalPos))).attr("transform",(t=>s(t.text))).text((t=>t.text.text)),b.selectAll("g.label").data(f.axisLabels).enter().append("g").attr("class","label").append("text").attr("x",0).attr("y",0).text((t=>t.text)).attr("fill",(t=>t.fill)).attr("font-size",(t=>t.fontSize)).attr("dominant-baseline",(t=>n(t.horizontalPos))).attr("text-anchor",(t=>a(t.verticalPos))).attr("transform",(t=>s(t)));let T=x.selectAll("g.data-point").data(f.points).enter().append("g").attr("class","data-point");T.append("circle").attr("cx",(t=>t.x)).attr("cy",(t=>t.y)).attr("r",(t=>t.radius)).attr("fill",(t=>t.fill)).attr("stroke",(t=>t.strokeColor)).attr("stroke-width",(t=>t.strokeWidth)),T.append("text").attr("x",0).attr("y",0).text((t=>t.text.text)).attr("fill",(t=>t.text.fill)).attr("font-size",(t=>t.text.fontSize)).attr("dominant-baseline",(t=>n(t.text.horizontalPos))).attr("text-anchor",(t=>a(t.text.verticalPos))).attr("transform",(t=>s(t.text)))}),"draw"),Ebt={draw:Cbt}})),Lbt={};x(Lbt,{diagram:()=>Rbt});var Rbt,Ibt,Nbt,Dbt=y((()=>{tbt(),Abt(),$bt(),Rbt={parser:Kxt,db:Sbt,renderer:Ebt,styles:g((()=>""),"styles")}})),Mbt=y((()=>{(Ibt=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[1,10,12,14,16,18,19,21,23],r=[2,6],i=[1,3],n=[1,5],a=[1,6],s=[1,7],o=[1,5,10,12,14,16,18,19,21,23,34,35,36],l=[1,25],c=[1,26],h=[1,28],u=[1,29],d=[1,30],p=[1,31],f=[1,32],y=[1,33],m=[1,34],x=[1,35],b=[1,36],k=[1,37],v=[1,43],T=[1,42],w=[1,47],_=[1,50],S=[1,10,12,14,16,18,19,21,23,34,35,36],C=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36],E=[1,10,12,14,16,18,19,21,23,24,26,27,28,34,35,36,41,42,43,44,45,46,47,48,49,50],A=[1,64],$={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,eol:4,XYCHART:5,chartConfig:6,document:7,CHART_ORIENTATION:8,statement:9,title:10,text:11,X_AXIS:12,parseXAxis:13,Y_AXIS:14,parseYAxis:15,LINE:16,plotData:17,BAR:18,acc_title:19,acc_title_value:20,acc_descr:21,acc_descr_value:22,acc_descr_multiline_value:23,SQUARE_BRACES_START:24,commaSeparatedNumbers:25,SQUARE_BRACES_END:26,NUMBER_WITH_DECIMAL:27,COMMA:28,xAxisData:29,bandData:30,ARROW_DELIMITER:31,commaSeparatedTexts:32,yAxisData:33,NEWLINE:34,SEMI:35,EOF:36,alphaNum:37,STR:38,MD_STR:39,alphaNumToken:40,AMP:41,NUM:42,ALPHA:43,PLUS:44,EQUALS:45,MULT:46,DOT:47,BRKT:48,MINUS:49,UNDERSCORE:50,$accept:0,$end:1},terminals_:{2:"error",5:"XYCHART",8:"CHART_ORIENTATION",10:"title",12:"X_AXIS",14:"Y_AXIS",16:"LINE",18:"BAR",19:"acc_title",20:"acc_title_value",21:"acc_descr",22:"acc_descr_value",23:"acc_descr_multiline_value",24:"SQUARE_BRACES_START",26:"SQUARE_BRACES_END",27:"NUMBER_WITH_DECIMAL",28:"COMMA",31:"ARROW_DELIMITER",34:"NEWLINE",35:"SEMI",36:"EOF",38:"STR",39:"MD_STR",41:"AMP",42:"NUM",43:"ALPHA",44:"PLUS",45:"EQUALS",46:"MULT",47:"DOT",48:"BRKT",49:"MINUS",50:"UNDERSCORE"},productions_:[0,[3,2],[3,3],[3,2],[3,1],[6,1],[7,0],[7,2],[9,2],[9,2],[9,2],[9,2],[9,2],[9,3],[9,2],[9,3],[9,2],[9,2],[9,1],[17,3],[25,3],[25,1],[13,1],[13,2],[13,1],[29,1],[29,3],[30,3],[32,3],[32,1],[15,1],[15,2],[15,1],[33,3],[4,1],[4,1],[4,1],[11,1],[11,1],[11,1],[37,1],[37,2],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1],[40,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 5:i.setOrientation(a[o]);break;case 9:i.setDiagramTitle(a[o].text.trim());break;case 12:i.setLineData({text:"",type:"text"},a[o]);break;case 13:i.setLineData(a[o-1],a[o]);break;case 14:i.setBarData({text:"",type:"text"},a[o]);break;case 15:i.setBarData(a[o-1],a[o]);break;case 16:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 17:case 18:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 19:case 27:this.$=a[o-1];break;case 20:this.$=[Number(a[o-2]),...a[o]];break;case 21:this.$=[Number(a[o])];break;case 22:i.setXAxisTitle(a[o]);break;case 23:i.setXAxisTitle(a[o-1]);break;case 24:i.setXAxisTitle({type:"text",text:""});break;case 25:i.setXAxisBand(a[o]);break;case 26:i.setXAxisRangeData(Number(a[o-2]),Number(a[o]));break;case 28:this.$=[a[o-2],...a[o]];break;case 29:this.$=[a[o]];break;case 30:i.setYAxisTitle(a[o]);break;case 31:i.setYAxisTitle(a[o-1]);break;case 32:i.setYAxisTitle({type:"text",text:""});break;case 33:i.setYAxisRangeData(Number(a[o-2]),Number(a[o]));break;case 37:case 38:this.$={text:a[o],type:"text"};break;case 39:this.$={text:a[o],type:"markdown"};break;case 40:this.$=a[o];break;case 41:this.$=a[o-1]+""+a[o]}}),"anonymous"),table:[t(e,r,{3:1,4:2,7:4,5:i,34:n,35:a,36:s}),{1:[3]},t(e,r,{4:2,7:4,3:8,5:i,34:n,35:a,36:s}),t(e,r,{4:2,7:4,6:9,3:10,5:i,8:[1,11],34:n,35:a,36:s}),{1:[2,4],9:12,10:[1,13],12:[1,14],14:[1,15],16:[1,16],18:[1,17],19:[1,18],21:[1,19],23:[1,20]},t(o,[2,34]),t(o,[2,35]),t(o,[2,36]),{1:[2,1]},t(e,r,{4:2,7:4,3:21,5:i,34:n,35:a,36:s}),{1:[2,3]},t(o,[2,5]),t(e,[2,7],{4:22,34:n,35:a,36:s}),{11:23,37:24,38:l,39:c,40:27,41:h,42:u,43:d,44:p,45:f,46:y,47:m,48:x,49:b,50:k},{11:39,13:38,24:v,27:T,29:40,30:41,37:24,38:l,39:c,40:27,41:h,42:u,43:d,44:p,45:f,46:y,47:m,48:x,49:b,50:k},{11:45,15:44,27:w,33:46,37:24,38:l,39:c,40:27,41:h,42:u,43:d,44:p,45:f,46:y,47:m,48:x,49:b,50:k},{11:49,17:48,24:_,37:24,38:l,39:c,40:27,41:h,42:u,43:d,44:p,45:f,46:y,47:m,48:x,49:b,50:k},{11:52,17:51,24:_,37:24,38:l,39:c,40:27,41:h,42:u,43:d,44:p,45:f,46:y,47:m,48:x,49:b,50:k},{20:[1,53]},{22:[1,54]},t(S,[2,18]),{1:[2,2]},t(S,[2,8]),t(S,[2,9]),t(C,[2,37],{40:55,41:h,42:u,43:d,44:p,45:f,46:y,47:m,48:x,49:b,50:k}),t(C,[2,38]),t(C,[2,39]),t(E,[2,40]),t(E,[2,42]),t(E,[2,43]),t(E,[2,44]),t(E,[2,45]),t(E,[2,46]),t(E,[2,47]),t(E,[2,48]),t(E,[2,49]),t(E,[2,50]),t(E,[2,51]),t(S,[2,10]),t(S,[2,22],{30:41,29:56,24:v,27:T}),t(S,[2,24]),t(S,[2,25]),{31:[1,57]},{11:59,32:58,37:24,38:l,39:c,40:27,41:h,42:u,43:d,44:p,45:f,46:y,47:m,48:x,49:b,50:k},t(S,[2,11]),t(S,[2,30],{33:60,27:w}),t(S,[2,32]),{31:[1,61]},t(S,[2,12]),{17:62,24:_},{25:63,27:A},t(S,[2,14]),{17:65,24:_},t(S,[2,16]),t(S,[2,17]),t(E,[2,41]),t(S,[2,23]),{27:[1,66]},{26:[1,67]},{26:[2,29],28:[1,68]},t(S,[2,31]),{27:[1,69]},t(S,[2,13]),{26:[1,70]},{26:[2,21],28:[1,71]},t(S,[2,15]),t(S,[2,26]),t(S,[2,27]),{11:59,32:72,37:24,38:l,39:c,40:27,41:h,42:u,43:d,44:p,45:f,46:y,47:m,48:x,49:b,50:k},t(S,[2,33]),t(S,[2,19]),{25:73,27:A},{26:[2,28]},{26:[2,20]}],defaultActions:{8:[2,1],10:[2,3],21:[2,2],72:[2,28],73:[2,20]},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},L={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:g((function(t,e,r,i){switch(r){case 0:case 1:case 5:case 44:break;case 2:case 3:return this.popState(),34;case 4:return 34;case 6:return 10;case 7:return this.pushState("acc_title"),19;case 8:return this.popState(),"acc_title_value";case 9:return this.pushState("acc_descr"),21;case 10:return this.popState(),"acc_descr_value";case 11:this.pushState("acc_descr_multiline");break;case 12:case 26:case 28:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:case 15:return 5;case 16:return 8;case 17:return this.pushState("axis_data"),"X_AXIS";case 18:return this.pushState("axis_data"),"Y_AXIS";case 19:return this.pushState("axis_band_data"),24;case 20:return 31;case 21:return this.pushState("data"),16;case 22:return this.pushState("data"),18;case 23:return this.pushState("data_inner"),24;case 24:return 27;case 25:return this.popState(),26;case 27:this.pushState("string");break;case 29:return"STR";case 30:return 24;case 31:return 26;case 32:return 43;case 33:return"COLON";case 34:return 44;case 35:return 28;case 36:return 45;case 37:return 46;case 38:return 48;case 39:return 50;case 40:return 47;case 41:return 41;case 42:return 49;case 43:return 42;case 45:return 35;case 46:return 36}}),"anonymous"),rules:[/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:(\r?\n))/i,/^(?:(\r?\n))/i,/^(?:[\n\r]+)/i,/^(?:%%[^\n]*)/i,/^(?:title\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:\{)/i,/^(?:[^\}]*)/i,/^(?:xychart-beta\b)/i,/^(?:xychart\b)/i,/^(?:(?:vertical|horizontal))/i,/^(?:x-axis\b)/i,/^(?:y-axis\b)/i,/^(?:\[)/i,/^(?:-->)/i,/^(?:line\b)/i,/^(?:bar\b)/i,/^(?:\[)/i,/^(?:[+-]?(?:\d+(?:\.\d+)?|\.\d+))/i,/^(?:\])/i,/^(?:(?:`\)                                    \{ this\.pushState\(md_string\); \}\n<md_string>\(\?:\(\?!`"\)\.\)\+                  \{ return MD_STR; \}\n<md_string>\(\?:`))/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:[A-Za-z]+)/i,/^(?::)/i,/^(?:\+)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\*)/i,/^(?:#)/i,/^(?:[\_])/i,/^(?:\.)/i,/^(?:&)/i,/^(?:-)/i,/^(?:[0-9]+)/i,/^(?:\s+)/i,/^(?:;)/i,/^(?:$)/i],conditions:{data_inner:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,24,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},data:{rules:[0,1,3,4,5,6,7,9,11,14,15,16,17,18,21,22,23,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_band_data:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,25,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},axis_data:{rules:[0,1,2,4,5,6,7,9,11,14,15,16,17,18,19,20,21,22,24,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0},acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},title:{rules:[],inclusive:!1},md_string:{rules:[],inclusive:!1},string:{rules:[28,29],inclusive:!1},INITIAL:{rules:[0,1,4,5,6,7,9,11,14,15,16,17,18,21,22,26,27,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],inclusive:!0}}};function R(){this.yy={}}return $.lexer=L,g(R,"Parser"),R.prototype=$,$.Parser=R,new R}()).parser=Ibt,Nbt=Ibt}));function Obt(t){return"bar"===t.type}function Pbt(t){return"band"===t.type}function Bbt(t){return"linear"===t.type}var Fbt,zbt,jbt,Ubt,Wbt=y((()=>{g(Obt,"isBarPlot"),g(Pbt,"isBandAxisData"),g(Bbt,"isLinearAxisData")})),qbt=y((()=>{DO(),Fbt=class{constructor(t){this.parentGroup=t}static{g(this,"TextDimensionCalculatorWithFont")}getMaxDimension(t,e){if(!this.parentGroup)return{width:t.reduce(((t,e)=>Math.max(e.length,t)),0)*e,height:e};let r={width:0,height:0},i=this.parentGroup.append("g").attr("visibility","hidden").attr("font-size",e);for(let n of t){let t=$O(i,1,n),a=t?t.width:n.length*e,s=t?t.height:e;r.width=Math.max(r.width,a),r.height=Math.max(r.height,s)}return i.remove(),r}}})),Ybt=y((()=>{zbt=class{constructor(t,e,r,i){this.axisConfig=t,this.title=e,this.textDimensionCalculator=r,this.axisThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left",this.showTitle=!1,this.showLabel=!1,this.showTick=!1,this.showAxisLine=!1,this.outerPadding=0,this.titleTextHeight=0,this.labelTextHeight=0,this.range=[0,10],this.boundingRect={x:0,y:0,width:0,height:0},this.axisPosition="left"}static{g(this,"BaseAxis")}setRange(t){this.range=t,"left"===this.axisPosition||"right"===this.axisPosition?this.boundingRect.height=t[1]-t[0]:this.boundingRect.width=t[1]-t[0],this.recalculateScale()}getRange(){return[this.range[0]+this.outerPadding,this.range[1]-this.outerPadding]}setAxisPosition(t){this.axisPosition=t,this.setRange(this.range)}getTickDistance(){let t=this.getRange();return Math.abs(t[0]-t[1])/this.getTickValues().length}getAxisOuterPadding(){return this.outerPadding}getLabelDimension(){return this.textDimensionCalculator.getMaxDimension(this.getTickValues().map((t=>t.toString())),this.axisConfig.labelFontSize)}recalculateOuterPaddingToDrawBar(){.7*this.getTickDistance()>2*this.outerPadding&&(this.outerPadding=Math.floor(.7*this.getTickDistance()/2)),this.recalculateScale()}calculateSpaceIfDrawnHorizontally(t){let e=t.height;if(this.axisConfig.showAxisLine&&e>this.axisConfig.axisLineWidth&&(e-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){let r=this.getLabelDimension(),i=.2*t.width;this.outerPadding=Math.min(r.width/2,i);let n=r.height+2*this.axisConfig.labelPadding;this.labelTextHeight=r.height,n<=e&&(e-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&e>=this.axisConfig.tickLength&&(this.showTick=!0,e-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){let t=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),r=t.height+2*this.axisConfig.titlePadding;this.titleTextHeight=t.height,r<=e&&(e-=r,this.showTitle=!0)}this.boundingRect.width=t.width,this.boundingRect.height=t.height-e}calculateSpaceIfDrawnVertical(t){let e=t.width;if(this.axisConfig.showAxisLine&&e>this.axisConfig.axisLineWidth&&(e-=this.axisConfig.axisLineWidth,this.showAxisLine=!0),this.axisConfig.showLabel){let r=this.getLabelDimension(),i=.2*t.height;this.outerPadding=Math.min(r.height/2,i);let n=r.width+2*this.axisConfig.labelPadding;n<=e&&(e-=n,this.showLabel=!0)}if(this.axisConfig.showTick&&e>=this.axisConfig.tickLength&&(this.showTick=!0,e-=this.axisConfig.tickLength),this.axisConfig.showTitle&&this.title){let t=this.textDimensionCalculator.getMaxDimension([this.title],this.axisConfig.titleFontSize),r=t.height+2*this.axisConfig.titlePadding;this.titleTextHeight=t.height,r<=e&&(e-=r,this.showTitle=!0)}this.boundingRect.width=t.width-e,this.boundingRect.height=t.height}calculateSpace(t){return"left"===this.axisPosition||"right"===this.axisPosition?this.calculateSpaceIfDrawnVertical(t):this.calculateSpaceIfDrawnHorizontally(t),this.recalculateScale(),{width:this.boundingRect.width,height:this.boundingRect.height}}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}getDrawableElementsForLeftAxis(){let t=[];if(this.showAxisLine){let e=this.boundingRect.x+this.boundingRect.width-this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["left-axis","axisl-line"],data:[{path:`M ${e},${this.boundingRect.y} L ${e},${this.boundingRect.y+this.boundingRect.height} `,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["left-axis","label"],data:this.getTickValues().map((t=>({text:t.toString(),x:this.boundingRect.x+this.boundingRect.width-(this.showLabel?this.axisConfig.labelPadding:0)-(this.showTick?this.axisConfig.tickLength:0)-(this.showAxisLine?this.axisConfig.axisLineWidth:0),y:this.getScaleValue(t),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"middle",horizontalPos:"right"})))}),this.showTick){let e=this.boundingRect.x+this.boundingRect.width-(this.showAxisLine?this.axisConfig.axisLineWidth:0);t.push({type:"path",groupTexts:["left-axis","ticks"],data:this.getTickValues().map((t=>({path:`M ${e},${this.getScaleValue(t)} L ${e-this.axisConfig.tickLength},${this.getScaleValue(t)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth})))})}return this.showTitle&&t.push({type:"text",groupTexts:["left-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.axisConfig.titlePadding,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:270,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElementsForBottomAxis(){let t=[];if(this.showAxisLine){let e=this.boundingRect.y+this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["bottom-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${e} L ${this.boundingRect.x+this.boundingRect.width},${e}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["bottom-axis","label"],data:this.getTickValues().map((t=>({text:t.toString(),x:this.getScaleValue(t),y:this.boundingRect.y+this.axisConfig.labelPadding+(this.showTick?this.axisConfig.tickLength:0)+(this.showAxisLine?this.axisConfig.axisLineWidth:0),fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"})))}),this.showTick){let e=this.boundingRect.y+(this.showAxisLine?this.axisConfig.axisLineWidth:0);t.push({type:"path",groupTexts:["bottom-axis","ticks"],data:this.getTickValues().map((t=>({path:`M ${this.getScaleValue(t)},${e} L ${this.getScaleValue(t)},${e+this.axisConfig.tickLength}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth})))})}return this.showTitle&&t.push({type:"text",groupTexts:["bottom-axis","title"],data:[{text:this.title,x:this.range[0]+(this.range[1]-this.range[0])/2,y:this.boundingRect.y+this.boundingRect.height-this.axisConfig.titlePadding-this.titleTextHeight,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElementsForTopAxis(){let t=[];if(this.showAxisLine){let e=this.boundingRect.y+this.boundingRect.height-this.axisConfig.axisLineWidth/2;t.push({type:"path",groupTexts:["top-axis","axis-line"],data:[{path:`M ${this.boundingRect.x},${e} L ${this.boundingRect.x+this.boundingRect.width},${e}`,strokeFill:this.axisThemeConfig.axisLineColor,strokeWidth:this.axisConfig.axisLineWidth}]})}if(this.showLabel&&t.push({type:"text",groupTexts:["top-axis","label"],data:this.getTickValues().map((t=>({text:t.toString(),x:this.getScaleValue(t),y:this.boundingRect.y+(this.showTitle?this.titleTextHeight+2*this.axisConfig.titlePadding:0)+this.axisConfig.labelPadding,fill:this.axisThemeConfig.labelColor,fontSize:this.axisConfig.labelFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"})))}),this.showTick){let e=this.boundingRect.y;t.push({type:"path",groupTexts:["top-axis","ticks"],data:this.getTickValues().map((t=>({path:`M ${this.getScaleValue(t)},${e+this.boundingRect.height-(this.showAxisLine?this.axisConfig.axisLineWidth:0)} L ${this.getScaleValue(t)},${e+this.boundingRect.height-this.axisConfig.tickLength-(this.showAxisLine?this.axisConfig.axisLineWidth:0)}`,strokeFill:this.axisThemeConfig.tickColor,strokeWidth:this.axisConfig.tickWidth})))})}return this.showTitle&&t.push({type:"text",groupTexts:["top-axis","title"],data:[{text:this.title,x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.axisConfig.titlePadding,fill:this.axisThemeConfig.titleColor,fontSize:this.axisConfig.titleFontSize,rotation:0,verticalPos:"top",horizontalPos:"center"}]}),t}getDrawableElements(){if("left"===this.axisPosition)return this.getDrawableElementsForLeftAxis();if("right"===this.axisPosition)throw Error("Drawing of right axis is not implemented");return"bottom"===this.axisPosition?this.getDrawableElementsForBottomAxis():"top"===this.axisPosition?this.getDrawableElementsForTopAxis():[]}}})),Gbt=y((()=>{QT(),We(),Ybt(),jbt=class extends zbt{static{g(this,"BandAxis")}constructor(t,e,r,i,n){super(t,i,n,e),this.categories=r,this.scale=dm().domain(this.categories).range(this.getRange())}setRange(t){super.setRange(t)}recalculateScale(){this.scale=dm().domain(this.categories).range(this.getRange()).paddingInner(1).paddingOuter(0).align(.5),et.trace("BandAxis axis final categories, range: ",this.categories,this.getRange())}getTickValues(){return this.categories}getScaleValue(t){return this.scale(t)??this.getRange()[0]}}})),Hbt=y((()=>{QT(),Ybt(),Ubt=class extends zbt{static{g(this,"LinearAxis")}constructor(t,e,r,i,n){super(t,i,n,e),this.domain=r,this.scale=Rm().domain(this.domain).range(this.getRange())}getTickValues(){return this.scale.ticks()}recalculateScale(){let t=[...this.domain];"left"===this.axisPosition&&t.reverse(),this.scale=Rm().domain(t).range(this.getRange())}getScaleValue(t){return this.scale(t)}}}));function Vbt(t,e,r,i){let n=new Fbt(i);return Pbt(t)?new jbt(e,r,t.categories,t.title,n):new Ubt(e,r,[t.min,t.max],t.title,n)}var Xbt=y((()=>{Wbt(),qbt(),Gbt(),Hbt(),g(Vbt,"getAxis")}));function Kbt(t,e,r,i){let n=new Fbt(i);return new Qbt(n,t,e,r)}var Qbt,Zbt,Jbt,tkt=y((()=>{qbt(),Qbt=class{constructor(t,e,r,i){this.textDimensionCalculator=t,this.chartConfig=e,this.chartData=r,this.chartThemeConfig=i,this.boundingRect={x:0,y:0,width:0,height:0},this.showChartTitle=!1}static{g(this,"ChartTitle")}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}calculateSpace(t){let e=this.textDimensionCalculator.getMaxDimension([this.chartData.title],this.chartConfig.titleFontSize),r=Math.max(e.width,t.width),i=e.height+2*this.chartConfig.titlePadding;return e.width<=r&&e.height<=i&&this.chartConfig.showTitle&&this.chartData.title&&(this.boundingRect.width=r,this.boundingRect.height=i,this.showChartTitle=!0),{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){let t=[];return this.showChartTitle&&t.push({groupTexts:["chart-title"],type:"text",data:[{fontSize:this.chartConfig.titleFontSize,text:this.chartData.title,verticalPos:"middle",horizontalPos:"center",x:this.boundingRect.x+this.boundingRect.width/2,y:this.boundingRect.y+this.boundingRect.height/2,fill:this.chartThemeConfig.titleColor,rotation:0}]}),t}},g(Kbt,"getChartTitleComponent")})),ekt=y((()=>{QT(),Zbt=class{constructor(t,e,r,i,n){this.plotData=t,this.xAxis=e,this.yAxis=r,this.orientation=i,this.plotIndex=n}static{g(this,"LinePlot")}getDrawableElement(){let t,e=this.plotData.data.map((t=>[this.xAxis.getScaleValue(t[0]),this.yAxis.getScaleValue(t[1])]));return t="horizontal"===this.orientation?Vk().y((t=>t[0])).x((t=>t[1]))(e):Vk().x((t=>t[0])).y((t=>t[1]))(e),t?[{groupTexts:["plot",`line-plot-${this.plotIndex}`],type:"path",data:[{path:t,strokeFill:this.plotData.strokeFill,strokeWidth:this.plotData.strokeWidth}]}]:[]}}})),rkt=y((()=>{Jbt=class{constructor(t,e,r,i,n,a){this.barData=t,this.boundingRect=e,this.xAxis=r,this.yAxis=i,this.orientation=n,this.plotIndex=a}static{g(this,"BarPlot")}getDrawableElement(){let t=this.barData.data.map((t=>[this.xAxis.getScaleValue(t[0]),this.yAxis.getScaleValue(t[1])])),e=.95*Math.min(2*this.xAxis.getAxisOuterPadding(),this.xAxis.getTickDistance()),r=e/2;return"horizontal"===this.orientation?[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:t.map((t=>({x:this.boundingRect.x,y:t[0]-r,height:e,width:t[1]-this.boundingRect.x,fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill})))}]:[{groupTexts:["plot",`bar-plot-${this.plotIndex}`],type:"rect",data:t.map((t=>({x:t[0]-r,y:t[1],width:e,height:this.boundingRect.y+this.boundingRect.height-t[1],fill:this.barData.fill,strokeWidth:0,strokeFill:this.barData.fill})))}]}}}));function ikt(t,e,r){return new nkt(t,e,r)}var nkt,akt,skt,okt=y((()=>{ekt(),rkt(),nkt=class{constructor(t,e,r){this.chartConfig=t,this.chartData=e,this.chartThemeConfig=r,this.boundingRect={x:0,y:0,width:0,height:0}}static{g(this,"BasePlot")}setAxes(t,e){this.xAxis=t,this.yAxis=e}setBoundingBoxXY(t){this.boundingRect.x=t.x,this.boundingRect.y=t.y}calculateSpace(t){return this.boundingRect.width=t.width,this.boundingRect.height=t.height,{width:this.boundingRect.width,height:this.boundingRect.height}}getDrawableElements(){if(!this.xAxis||!this.yAxis)throw Error("Axes must be passed to render Plots");let t=[];for(let[e,r]of this.chartData.plots.entries())switch(r.type){case"line":{let i=new Zbt(r,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,e);t.push(...i.getDrawableElement())}break;case"bar":{let i=new Jbt(r,this.boundingRect,this.xAxis,this.yAxis,this.chartConfig.chartOrientation,e);t.push(...i.getDrawableElement())}}return t}},g(ikt,"getPlotComponent")})),lkt=y((()=>{Xbt(),tkt(),okt(),Wbt(),akt=class{constructor(t,e,r,i){this.chartConfig=t,this.chartData=e,this.componentStore={title:Kbt(t,e,r,i),plot:ikt(t,e,r),xAxis:Vbt(e.xAxis,t.xAxis,{titleColor:r.xAxisTitleColor,labelColor:r.xAxisLabelColor,tickColor:r.xAxisTickColor,axisLineColor:r.xAxisLineColor},i),yAxis:Vbt(e.yAxis,t.yAxis,{titleColor:r.yAxisTitleColor,labelColor:r.yAxisLabelColor,tickColor:r.yAxisTickColor,axisLineColor:r.yAxisLineColor},i)}}static{g(this,"Orchestrator")}calculateVerticalSpace(){let t=this.chartConfig.width,e=this.chartConfig.height,r=0,i=0,n=Math.floor(t*this.chartConfig.plotReservedSpacePercent/100),a=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),s=this.componentStore.plot.calculateSpace({width:n,height:a});t-=s.width,e-=s.height,s=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:e}),i=s.height,e-=s.height,this.componentStore.xAxis.setAxisPosition("bottom"),s=this.componentStore.xAxis.calculateSpace({width:t,height:e}),e-=s.height,this.componentStore.yAxis.setAxisPosition("left"),s=this.componentStore.yAxis.calculateSpace({width:t,height:e}),r=s.width,t-=s.width,t>0&&(n+=t,t=0),e>0&&(a+=e,e=0),this.componentStore.plot.calculateSpace({width:n,height:a}),this.componentStore.plot.setBoundingBoxXY({x:r,y:i}),this.componentStore.xAxis.setRange([r,r+n]),this.componentStore.xAxis.setBoundingBoxXY({x:r,y:i+a}),this.componentStore.yAxis.setRange([i,i+a]),this.componentStore.yAxis.setBoundingBoxXY({x:0,y:i}),this.chartData.plots.some((t=>Obt(t)))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateHorizontalSpace(){let t=this.chartConfig.width,e=this.chartConfig.height,r=0,i=0,n=0,a=Math.floor(t*this.chartConfig.plotReservedSpacePercent/100),s=Math.floor(e*this.chartConfig.plotReservedSpacePercent/100),o=this.componentStore.plot.calculateSpace({width:a,height:s});t-=o.width,e-=o.height,o=this.componentStore.title.calculateSpace({width:this.chartConfig.width,height:e}),r=o.height,e-=o.height,this.componentStore.xAxis.setAxisPosition("left"),o=this.componentStore.xAxis.calculateSpace({width:t,height:e}),t-=o.width,i=o.width,this.componentStore.yAxis.setAxisPosition("top"),o=this.componentStore.yAxis.calculateSpace({width:t,height:e}),e-=o.height,n=r+o.height,t>0&&(a+=t,t=0),e>0&&(s+=e,e=0),this.componentStore.plot.calculateSpace({width:a,height:s}),this.componentStore.plot.setBoundingBoxXY({x:i,y:n}),this.componentStore.yAxis.setRange([i,i+a]),this.componentStore.yAxis.setBoundingBoxXY({x:i,y:r}),this.componentStore.xAxis.setRange([n,n+s]),this.componentStore.xAxis.setBoundingBoxXY({x:0,y:n}),this.chartData.plots.some((t=>Obt(t)))&&this.componentStore.xAxis.recalculateOuterPaddingToDrawBar()}calculateSpace(){"horizontal"===this.chartConfig.chartOrientation?this.calculateHorizontalSpace():this.calculateVerticalSpace()}getDrawableElement(){this.calculateSpace();let t=[];this.componentStore.plot.setAxes(this.componentStore.xAxis,this.componentStore.yAxis);for(let e of Object.values(this.componentStore))t.push(...e.getDrawableElements());return t}}})),ckt=y((()=>{lkt(),skt=class{static{g(this,"XYChartBuilder")}static build(t,e,r,i){return new akt(t,e,r,i).getDrawableElement()}}}));function hkt(){let t=oe(),e=Re();return G$(t.xyChart,e.themeVariables.xyChart)}function ukt(){let t=Re();return G$(me.xyChart,t.xyChart)}function dkt(){return{yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]}}function pkt(t){let e=Re();return zi(t.trim(),e)}function fkt(t){Rkt=t}function gkt(t){Ikt.chartOrientation="horizontal"===t?"horizontal":"vertical"}function ykt(t){Dkt.xAxis.title=pkt(t.text)}function mkt(t,e){Dkt.xAxis={type:"linear",title:Dkt.xAxis.title,min:t,max:e},Okt=!0}function xkt(t){Dkt.xAxis={type:"band",title:Dkt.xAxis.title,categories:t.map((t=>pkt(t.text)))},Okt=!0}function bkt(t){Dkt.yAxis.title=pkt(t.text)}function kkt(t,e){Dkt.yAxis={type:"linear",title:Dkt.yAxis.title,min:t,max:e},Pkt=!0}function vkt(t){let e=Math.min(...t),r=Math.max(...t),i=Bbt(Dkt.yAxis)?Dkt.yAxis.min:1/0,n=Bbt(Dkt.yAxis)?Dkt.yAxis.max:-1/0;Dkt.yAxis={type:"linear",title:Dkt.yAxis.title,min:Math.min(i,e),max:Math.max(n,r)}}function Tkt(t){let e=[];if(0===t.length)return e;if(!Okt){let e=Bbt(Dkt.xAxis)?Dkt.xAxis.min:1/0,r=Bbt(Dkt.xAxis)?Dkt.xAxis.max:-1/0;mkt(Math.min(e,1),Math.max(r,t.length))}if(Pkt||vkt(t),Pbt(Dkt.xAxis)&&(e=Dkt.xAxis.categories.map(((e,r)=>[e,t[r]]))),Bbt(Dkt.xAxis)){let r=Dkt.xAxis.min,i=Dkt.xAxis.max,n=(i-r)/(t.length-1),a=[];for(let t=r;t<=i;t+=n)a.push(`${t}`);e=a.map(((e,r)=>[e,t[r]]))}return e}function wkt(t){return Mkt[0===t?0:t%Mkt.length]}function _kt(t,e){let r=Tkt(e);Dkt.plots.push({type:"line",strokeFill:wkt(Lkt),strokeWidth:2,data:r}),Lkt++}function Skt(t,e){let r=Tkt(e);Dkt.plots.push({type:"bar",fill:wkt(Lkt),data:r}),Lkt++}function Ckt(){if(0===Dkt.plots.length)throw Error("No Plot to render, please provide a plot with some data");return Dkt.title=ea(),skt.build(Ikt,Dkt,Nkt,Rkt)}function Ekt(){return Nkt}function Akt(){return Ikt}function $kt(){return Dkt}var Lkt,Rkt,Ikt,Nkt,Dkt,Mkt,Okt,Pkt,Bkt,Fkt,zkt,jkt,Ukt=y((()=>{Ar(),Cr(),vr(),_L(),gn(),is(),ckt(),Wbt(),Lkt=0,Ikt=ukt(),Nkt=hkt(),Dkt={yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]},Mkt=Nkt.plotColorPalette.split(",").map((t=>t.trim())),Okt=!1,Pkt=!1,g(hkt,"getChartDefaultThemeConfig"),g(ukt,"getChartDefaultConfig"),g(dkt,"getChartDefaultData"),g(pkt,"textSanitizer"),g(fkt,"setTmpSVGG"),g(gkt,"setOrientation"),g(ykt,"setXAxisTitle"),g(mkt,"setXAxisRangeData"),g(xkt,"setXAxisBand"),g(bkt,"setYAxisTitle"),g(kkt,"setYAxisRangeData"),g(vkt,"setYAxisRangeFromPlotData"),g(Tkt,"transformDataWithoutCategory"),g(wkt,"getPlotColorFromPalette"),g(_kt,"setLineData"),g(Skt,"setBarData"),g(Ckt,"getDrawableElem"),g(Ekt,"getChartThemeConfig"),g(Akt,"getChartConfig"),g($kt,"getXYChartData"),Bkt=g((function(){Xn(),Lkt=0,Ikt=ukt(),Dkt={yAxis:{type:"linear",title:"",min:1/0,max:-1/0},xAxis:{type:"band",title:"",categories:[]},title:"",plots:[]},Nkt=hkt(),Mkt=Nkt.plotColorPalette.split(",").map((t=>t.trim())),Okt=!1,Pkt=!1}),"clear"),Fkt={getDrawableElem:Ckt,clear:Bkt,setAccTitle:Kn,getAccTitle:Qn,setDiagramTitle:ta,getDiagramTitle:ea,getAccDescription:Jn,setAccDescription:Zn,setOrientation:gkt,setXAxisTitle:ykt,setXAxisRangeData:mkt,setXAxisBand:xkt,setYAxisTitle:bkt,setYAxisRangeData:kkt,setLineData:_kt,setBarData:Skt,setTmpSVGG:fkt,getChartThemeConfig:Ekt,getChartConfig:Akt,getXYChartData:$kt}})),Wkt=y((()=>{We(),bxt(),Un(),zkt=g(((t,e,r,i)=>{let n=i.db,a=n.getChartThemeConfig(),s=n.getChartConfig(),o=n.getXYChartData().plots[0].data.map((t=>t[1]));function l(t){return"top"===t?"text-before-edge":"middle"}function c(t){return"left"===t?"start":"right"===t?"end":"middle"}function h(t){return`translate(${t.x}, ${t.y}) rotate(${t.rotation||0})`}g(l,"getDominantBaseLine"),g(c,"getTextAnchor"),g(h,"getTextTransformation"),et.debug("Rendering xychart chart\n"+t);let u=dxt(e),d=u.append("g").attr("class","main"),p=d.append("rect").attr("width",s.width).attr("height",s.height).attr("class","background");Rn(u,s.height,s.width,!0),u.attr("viewBox",`0 0 ${s.width} ${s.height}`),p.attr("fill",a.backgroundColor),n.setTmpSVGG(u.append("g").attr("class","mermaid-tmp-group"));let f=n.getDrawableElem(),y={};function m(t){let e=d,r="";for(let[i]of t.entries()){let n=d;i>0&&y[r]&&(n=y[r]),r+=t[i],e=y[r],e||(e=y[r]=n.append("g").attr("class",t[i]))}return e}g(m,"getGroup");for(let t of f){if(0===t.data.length)continue;let e=m(t.groupTexts);switch(t.type){case"rect":if(e.selectAll("rect").data(t.data).enter().append("rect").attr("x",(t=>t.x)).attr("y",(t=>t.y)).attr("width",(t=>t.width)).attr("height",(t=>t.height)).attr("fill",(t=>t.fill)).attr("stroke",(t=>t.strokeFill)).attr("stroke-width",(t=>t.strokeWidth)),s.showDataLabel)if("horizontal"===s.chartOrientation){let r=function(t,e){let{data:r,label:i}=t;return e*i.length*.7<=r.width-10};g(r,"fitsHorizontally");let i=t.data.map(((t,e)=>({data:t,label:o[e].toString()}))).filter((t=>t.data.width>0&&t.data.height>0)),n=i.map((t=>{let{data:e}=t,i=.7*e.height;for(;!r(t,i)&&i>0;)i-=1;return i})),a=Math.floor(Math.min(...n));e.selectAll("text").data(i).enter().append("text").attr("x",(t=>t.data.x+t.data.width-10)).attr("y",(t=>t.data.y+t.data.height/2)).attr("text-anchor","end").attr("dominant-baseline","middle").attr("fill","black").attr("font-size",`${a}px`).text((t=>t.label))}else{let r=function(t,e,r){let{data:i,label:n}=t,a=e*n.length*.7,s=i.x+i.width/2,o=s+a/2,l=s-a/2>=i.x&&o<=i.x+i.width,c=i.y+r+e<=i.y+i.height;return l&&c};g(r,"fitsInBar");let i=t.data.map(((t,e)=>({data:t,label:o[e].toString()}))).filter((t=>t.data.width>0&&t.data.height>0)),n=i.map((t=>{let{data:e,label:i}=t,n=e.width/(.7*i.length);for(;!r(t,n,10)&&n>0;)n-=1;return n})),a=Math.floor(Math.min(...n));e.selectAll("text").data(i).enter().append("text").attr("x",(t=>t.data.x+t.data.width/2)).attr("y",(t=>t.data.y+10)).attr("text-anchor","middle").attr("dominant-baseline","hanging").attr("fill","black").attr("font-size",`${a}px`).text((t=>t.label))}break;case"text":e.selectAll("text").data(t.data).enter().append("text").attr("x",0).attr("y",0).attr("fill",(t=>t.fill)).attr("font-size",(t=>t.fontSize)).attr("dominant-baseline",(t=>l(t.verticalPos))).attr("text-anchor",(t=>c(t.horizontalPos))).attr("transform",(t=>h(t))).text((t=>t.text));break;case"path":e.selectAll("path").data(t.data).enter().append("path").attr("d",(t=>t.path)).attr("fill",(t=>t.fill?t.fill:"none")).attr("stroke",(t=>t.strokeFill)).attr("stroke-width",(t=>t.strokeWidth))}}}),"draw"),jkt={draw:zkt}})),qkt={};x(qkt,{diagram:()=>Ykt});var Ykt,Gkt,Hkt,Vkt,Xkt,Kkt,Qkt=y((()=>{Mbt(),Ukt(),Wkt(),Ykt={parser:Nbt,db:Fkt,renderer:jkt}})),Zkt=y((()=>{(Gkt=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[1,3],r=[1,4],i=[1,5],n=[1,6],a=[5,6,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],s=[1,22],o=[2,7],l=[1,26],c=[1,27],h=[1,28],u=[1,29],d=[1,33],p=[1,34],f=[1,35],y=[1,36],m=[1,37],x=[1,38],b=[1,24],k=[1,31],v=[1,32],T=[1,30],w=[1,39],_=[1,40],S=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,77,89,90],C=[1,61],E=[89,90],A=[5,8,9,11,13,21,22,23,24,27,29,41,42,43,44,45,46,54,61,63,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],$=[27,29],L=[1,70],R=[1,71],I=[1,72],N=[1,73],D=[1,74],M=[1,75],O=[1,76],P=[1,83],B=[1,80],F=[1,84],z=[1,85],j=[1,86],U=[1,87],W=[1,88],q=[1,89],Y=[1,90],G=[1,91],H=[1,92],V=[5,8,9,11,13,21,22,23,24,27,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],X=[63,64],K=[1,101],Q=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,76,77,89,90],Z=[5,8,9,11,13,21,22,23,24,41,42,43,44,45,46,54,72,74,75,76,77,80,81,82,83,84,85,86,87,88,89,90],J=[1,110],tt=[1,106],et=[1,107],rt=[1,108],it=[1,109],nt=[1,111],at=[1,116],st=[1,117],ot=[1,114],lt=[1,115],ct={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,directive:4,NEWLINE:5,RD:6,diagram:7,EOF:8,acc_title:9,acc_title_value:10,acc_descr:11,acc_descr_value:12,acc_descr_multiline_value:13,requirementDef:14,elementDef:15,relationshipDef:16,direction:17,styleStatement:18,classDefStatement:19,classStatement:20,direction_tb:21,direction_bt:22,direction_rl:23,direction_lr:24,requirementType:25,requirementName:26,STRUCT_START:27,requirementBody:28,STYLE_SEPARATOR:29,idList:30,ID:31,COLONSEP:32,id:33,TEXT:34,text:35,RISK:36,riskLevel:37,VERIFYMTHD:38,verifyType:39,STRUCT_STOP:40,REQUIREMENT:41,FUNCTIONAL_REQUIREMENT:42,INTERFACE_REQUIREMENT:43,PERFORMANCE_REQUIREMENT:44,PHYSICAL_REQUIREMENT:45,DESIGN_CONSTRAINT:46,LOW_RISK:47,MED_RISK:48,HIGH_RISK:49,VERIFY_ANALYSIS:50,VERIFY_DEMONSTRATION:51,VERIFY_INSPECTION:52,VERIFY_TEST:53,ELEMENT:54,elementName:55,elementBody:56,TYPE:57,type:58,DOCREF:59,ref:60,END_ARROW_L:61,relationship:62,LINE:63,END_ARROW_R:64,CONTAINS:65,COPIES:66,DERIVES:67,SATISFIES:68,VERIFIES:69,REFINES:70,TRACES:71,CLASSDEF:72,stylesOpt:73,CLASS:74,ALPHA:75,COMMA:76,STYLE:77,style:78,styleComponent:79,NUM:80,COLON:81,UNIT:82,SPACE:83,BRKT:84,PCT:85,MINUS:86,LABEL:87,SEMICOLON:88,unqString:89,qString:90,$accept:0,$end:1},terminals_:{2:"error",5:"NEWLINE",6:"RD",8:"EOF",9:"acc_title",10:"acc_title_value",11:"acc_descr",12:"acc_descr_value",13:"acc_descr_multiline_value",21:"direction_tb",22:"direction_bt",23:"direction_rl",24:"direction_lr",27:"STRUCT_START",29:"STYLE_SEPARATOR",31:"ID",32:"COLONSEP",34:"TEXT",36:"RISK",38:"VERIFYMTHD",40:"STRUCT_STOP",41:"REQUIREMENT",42:"FUNCTIONAL_REQUIREMENT",43:"INTERFACE_REQUIREMENT",44:"PERFORMANCE_REQUIREMENT",45:"PHYSICAL_REQUIREMENT",46:"DESIGN_CONSTRAINT",47:"LOW_RISK",48:"MED_RISK",49:"HIGH_RISK",50:"VERIFY_ANALYSIS",51:"VERIFY_DEMONSTRATION",52:"VERIFY_INSPECTION",53:"VERIFY_TEST",54:"ELEMENT",57:"TYPE",59:"DOCREF",61:"END_ARROW_L",63:"LINE",64:"END_ARROW_R",65:"CONTAINS",66:"COPIES",67:"DERIVES",68:"SATISFIES",69:"VERIFIES",70:"REFINES",71:"TRACES",72:"CLASSDEF",74:"CLASS",75:"ALPHA",76:"COMMA",77:"STYLE",80:"NUM",81:"COLON",82:"UNIT",83:"SPACE",84:"BRKT",85:"PCT",86:"MINUS",87:"LABEL",88:"SEMICOLON",89:"unqString",90:"qString"},productions_:[0,[3,3],[3,2],[3,4],[4,2],[4,2],[4,1],[7,0],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[7,2],[17,1],[17,1],[17,1],[17,1],[14,5],[14,7],[28,5],[28,5],[28,5],[28,5],[28,2],[28,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[37,1],[37,1],[37,1],[39,1],[39,1],[39,1],[39,1],[15,5],[15,7],[56,5],[56,5],[56,2],[56,1],[16,5],[16,5],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[62,1],[19,3],[20,3],[20,3],[30,1],[30,3],[30,1],[30,3],[18,3],[73,1],[73,3],[78,1],[78,2],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[79,1],[26,1],[26,1],[33,1],[33,1],[35,1],[35,1],[55,1],[55,1],[58,1],[58,1],[60,1],[60,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 4:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 5:case 6:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 7:this.$=[];break;case 17:i.setDirection("TB");break;case 18:i.setDirection("BT");break;case 19:i.setDirection("RL");break;case 20:i.setDirection("LR");break;case 21:i.addRequirement(a[o-3],a[o-4]);break;case 22:i.addRequirement(a[o-5],a[o-6]),i.setClass([a[o-5]],a[o-3]);break;case 23:i.setNewReqId(a[o-2]);break;case 24:i.setNewReqText(a[o-2]);break;case 25:i.setNewReqRisk(a[o-2]);break;case 26:i.setNewReqVerifyMethod(a[o-2]);break;case 29:this.$=i.RequirementType.REQUIREMENT;break;case 30:this.$=i.RequirementType.FUNCTIONAL_REQUIREMENT;break;case 31:this.$=i.RequirementType.INTERFACE_REQUIREMENT;break;case 32:this.$=i.RequirementType.PERFORMANCE_REQUIREMENT;break;case 33:this.$=i.RequirementType.PHYSICAL_REQUIREMENT;break;case 34:this.$=i.RequirementType.DESIGN_CONSTRAINT;break;case 35:this.$=i.RiskLevel.LOW_RISK;break;case 36:this.$=i.RiskLevel.MED_RISK;break;case 37:this.$=i.RiskLevel.HIGH_RISK;break;case 38:this.$=i.VerifyType.VERIFY_ANALYSIS;break;case 39:this.$=i.VerifyType.VERIFY_DEMONSTRATION;break;case 40:this.$=i.VerifyType.VERIFY_INSPECTION;break;case 41:this.$=i.VerifyType.VERIFY_TEST;break;case 42:i.addElement(a[o-3]);break;case 43:i.addElement(a[o-5]),i.setClass([a[o-5]],a[o-3]);break;case 44:i.setNewElementType(a[o-2]);break;case 45:i.setNewElementDocRef(a[o-2]);break;case 48:i.addRelationship(a[o-2],a[o],a[o-4]);break;case 49:i.addRelationship(a[o-2],a[o-4],a[o]);break;case 50:this.$=i.Relationships.CONTAINS;break;case 51:this.$=i.Relationships.COPIES;break;case 52:this.$=i.Relationships.DERIVES;break;case 53:this.$=i.Relationships.SATISFIES;break;case 54:this.$=i.Relationships.VERIFIES;break;case 55:this.$=i.Relationships.REFINES;break;case 56:this.$=i.Relationships.TRACES;break;case 57:this.$=a[o-2],i.defineClass(a[o-1],a[o]);break;case 58:i.setClass(a[o-1],a[o]);break;case 59:i.setClass([a[o-2]],a[o]);break;case 60:case 62:case 65:this.$=[a[o]];break;case 61:case 63:this.$=a[o-2].concat([a[o]]);break;case 64:this.$=a[o-2],i.setCssStyle(a[o-1],a[o]);break;case 66:a[o-2].push(a[o]),this.$=a[o-2];break;case 68:this.$=a[o-1]+a[o]}}),"anonymous"),table:[{3:1,4:2,6:e,9:r,11:i,13:n},{1:[3]},{3:8,4:2,5:[1,7],6:e,9:r,11:i,13:n},{5:[1,9]},{10:[1,10]},{12:[1,11]},t(a,[2,6]),{3:12,4:2,6:e,9:r,11:i,13:n},{1:[2,2]},{4:17,5:s,7:13,8:o,9:r,11:i,13:n,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:c,23:h,24:u,25:23,33:25,41:d,42:p,43:f,44:y,45:m,46:x,54:b,72:k,74:v,77:T,89:w,90:_},t(a,[2,4]),t(a,[2,5]),{1:[2,1]},{8:[1,41]},{4:17,5:s,7:42,8:o,9:r,11:i,13:n,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:c,23:h,24:u,25:23,33:25,41:d,42:p,43:f,44:y,45:m,46:x,54:b,72:k,74:v,77:T,89:w,90:_},{4:17,5:s,7:43,8:o,9:r,11:i,13:n,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:c,23:h,24:u,25:23,33:25,41:d,42:p,43:f,44:y,45:m,46:x,54:b,72:k,74:v,77:T,89:w,90:_},{4:17,5:s,7:44,8:o,9:r,11:i,13:n,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:c,23:h,24:u,25:23,33:25,41:d,42:p,43:f,44:y,45:m,46:x,54:b,72:k,74:v,77:T,89:w,90:_},{4:17,5:s,7:45,8:o,9:r,11:i,13:n,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:c,23:h,24:u,25:23,33:25,41:d,42:p,43:f,44:y,45:m,46:x,54:b,72:k,74:v,77:T,89:w,90:_},{4:17,5:s,7:46,8:o,9:r,11:i,13:n,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:c,23:h,24:u,25:23,33:25,41:d,42:p,43:f,44:y,45:m,46:x,54:b,72:k,74:v,77:T,89:w,90:_},{4:17,5:s,7:47,8:o,9:r,11:i,13:n,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:c,23:h,24:u,25:23,33:25,41:d,42:p,43:f,44:y,45:m,46:x,54:b,72:k,74:v,77:T,89:w,90:_},{4:17,5:s,7:48,8:o,9:r,11:i,13:n,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:c,23:h,24:u,25:23,33:25,41:d,42:p,43:f,44:y,45:m,46:x,54:b,72:k,74:v,77:T,89:w,90:_},{4:17,5:s,7:49,8:o,9:r,11:i,13:n,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:c,23:h,24:u,25:23,33:25,41:d,42:p,43:f,44:y,45:m,46:x,54:b,72:k,74:v,77:T,89:w,90:_},{4:17,5:s,7:50,8:o,9:r,11:i,13:n,14:14,15:15,16:16,17:18,18:19,19:20,20:21,21:l,22:c,23:h,24:u,25:23,33:25,41:d,42:p,43:f,44:y,45:m,46:x,54:b,72:k,74:v,77:T,89:w,90:_},{26:51,89:[1,52],90:[1,53]},{55:54,89:[1,55],90:[1,56]},{29:[1,59],61:[1,57],63:[1,58]},t(S,[2,17]),t(S,[2,18]),t(S,[2,19]),t(S,[2,20]),{30:60,33:62,75:C,89:w,90:_},{30:63,33:62,75:C,89:w,90:_},{30:64,33:62,75:C,89:w,90:_},t(E,[2,29]),t(E,[2,30]),t(E,[2,31]),t(E,[2,32]),t(E,[2,33]),t(E,[2,34]),t(A,[2,81]),t(A,[2,82]),{1:[2,3]},{8:[2,8]},{8:[2,9]},{8:[2,10]},{8:[2,11]},{8:[2,12]},{8:[2,13]},{8:[2,14]},{8:[2,15]},{8:[2,16]},{27:[1,65],29:[1,66]},t($,[2,79]),t($,[2,80]),{27:[1,67],29:[1,68]},t($,[2,85]),t($,[2,86]),{62:69,65:L,66:R,67:I,68:N,69:D,70:M,71:O},{62:77,65:L,66:R,67:I,68:N,69:D,70:M,71:O},{30:78,33:62,75:C,89:w,90:_},{73:79,75:P,76:B,78:81,79:82,80:F,81:z,82:j,83:U,84:W,85:q,86:Y,87:G,88:H},t(V,[2,60]),t(V,[2,62]),{73:93,75:P,76:B,78:81,79:82,80:F,81:z,82:j,83:U,84:W,85:q,86:Y,87:G,88:H},{30:94,33:62,75:C,76:B,89:w,90:_},{5:[1,95]},{30:96,33:62,75:C,89:w,90:_},{5:[1,97]},{30:98,33:62,75:C,89:w,90:_},{63:[1,99]},t(X,[2,50]),t(X,[2,51]),t(X,[2,52]),t(X,[2,53]),t(X,[2,54]),t(X,[2,55]),t(X,[2,56]),{64:[1,100]},t(S,[2,59],{76:B}),t(S,[2,64],{76:K}),{33:103,75:[1,102],89:w,90:_},t(Q,[2,65],{79:104,75:P,80:F,81:z,82:j,83:U,84:W,85:q,86:Y,87:G,88:H}),t(Z,[2,67]),t(Z,[2,69]),t(Z,[2,70]),t(Z,[2,71]),t(Z,[2,72]),t(Z,[2,73]),t(Z,[2,74]),t(Z,[2,75]),t(Z,[2,76]),t(Z,[2,77]),t(Z,[2,78]),t(S,[2,57],{76:K}),t(S,[2,58],{76:B}),{5:J,28:105,31:tt,34:et,36:rt,38:it,40:nt},{27:[1,112],76:B},{5:at,40:st,56:113,57:ot,59:lt},{27:[1,118],76:B},{33:119,89:w,90:_},{33:120,89:w,90:_},{75:P,78:121,79:82,80:F,81:z,82:j,83:U,84:W,85:q,86:Y,87:G,88:H},t(V,[2,61]),t(V,[2,63]),t(Z,[2,68]),t(S,[2,21]),{32:[1,122]},{32:[1,123]},{32:[1,124]},{32:[1,125]},{5:J,28:126,31:tt,34:et,36:rt,38:it,40:nt},t(S,[2,28]),{5:[1,127]},t(S,[2,42]),{32:[1,128]},{32:[1,129]},{5:at,40:st,56:130,57:ot,59:lt},t(S,[2,47]),{5:[1,131]},t(S,[2,48]),t(S,[2,49]),t(Q,[2,66],{79:104,75:P,80:F,81:z,82:j,83:U,84:W,85:q,86:Y,87:G,88:H}),{33:132,89:w,90:_},{35:133,89:[1,134],90:[1,135]},{37:136,47:[1,137],48:[1,138],49:[1,139]},{39:140,50:[1,141],51:[1,142],52:[1,143],53:[1,144]},t(S,[2,27]),{5:J,28:145,31:tt,34:et,36:rt,38:it,40:nt},{58:146,89:[1,147],90:[1,148]},{60:149,89:[1,150],90:[1,151]},t(S,[2,46]),{5:at,40:st,56:152,57:ot,59:lt},{5:[1,153]},{5:[1,154]},{5:[2,83]},{5:[2,84]},{5:[1,155]},{5:[2,35]},{5:[2,36]},{5:[2,37]},{5:[1,156]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,41]},t(S,[2,22]),{5:[1,157]},{5:[2,87]},{5:[2,88]},{5:[1,158]},{5:[2,89]},{5:[2,90]},t(S,[2,43]),{5:J,28:159,31:tt,34:et,36:rt,38:it,40:nt},{5:J,28:160,31:tt,34:et,36:rt,38:it,40:nt},{5:J,28:161,31:tt,34:et,36:rt,38:it,40:nt},{5:J,28:162,31:tt,34:et,36:rt,38:it,40:nt},{5:at,40:st,56:163,57:ot,59:lt},{5:at,40:st,56:164,57:ot,59:lt},t(S,[2,23]),t(S,[2,24]),t(S,[2,25]),t(S,[2,26]),t(S,[2,44]),t(S,[2,45])],defaultActions:{8:[2,2],12:[2,1],41:[2,3],42:[2,8],43:[2,9],44:[2,10],45:[2,11],46:[2,12],47:[2,13],48:[2,14],49:[2,15],50:[2,16],134:[2,83],135:[2,84],137:[2,35],138:[2,36],139:[2,37],141:[2,38],142:[2,39],143:[2,40],144:[2,41],147:[2,87],148:[2,88],150:[2,89],151:[2,90]},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},ht={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:g((function(t,e,r,i){switch(r){case 0:return"title";case 1:return this.begin("acc_title"),9;case 2:return this.popState(),"acc_title_value";case 3:return this.begin("acc_descr"),11;case 4:return this.popState(),"acc_descr_value";case 5:this.begin("acc_descr_multiline");break;case 6:case 58:case 65:this.popState();break;case 7:return"acc_descr_multiline_value";case 8:return 21;case 9:return 22;case 10:return 23;case 11:return 24;case 12:return 5;case 13:case 14:case 15:case 56:break;case 16:return 8;case 17:return 6;case 18:return 27;case 19:return 40;case 20:return 29;case 21:return 32;case 22:return 31;case 23:return 34;case 24:return 36;case 25:return 38;case 26:return 41;case 27:return 42;case 28:return 43;case 29:return 44;case 30:return 45;case 31:return 46;case 32:return 47;case 33:return 48;case 34:return 49;case 35:return 50;case 36:return 51;case 37:return 52;case 38:return 53;case 39:return 54;case 40:return 65;case 41:return 66;case 42:return 67;case 43:return 68;case 44:return 69;case 45:return 70;case 46:return 71;case 47:return 57;case 48:return 59;case 49:return this.begin("style"),77;case 50:case 68:return 75;case 51:return 81;case 52:return 88;case 53:return"PERCENT";case 54:return 86;case 55:return 84;case 57:case 64:this.begin("string");break;case 59:return this.begin("style"),72;case 60:return this.begin("style"),74;case 61:return 61;case 62:return 64;case 63:return 63;case 66:return"qString";case 67:return e.yytext=e.yytext.trim(),89;case 69:return 80;case 70:return 76}}),"anonymous"),rules:[/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:(\r?\n)+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:$)/i,/^(?:requirementDiagram\b)/i,/^(?:\{)/i,/^(?:\})/i,/^(?::{3})/i,/^(?::)/i,/^(?:id\b)/i,/^(?:text\b)/i,/^(?:risk\b)/i,/^(?:verifyMethod\b)/i,/^(?:requirement\b)/i,/^(?:functionalRequirement\b)/i,/^(?:interfaceRequirement\b)/i,/^(?:performanceRequirement\b)/i,/^(?:physicalRequirement\b)/i,/^(?:designConstraint\b)/i,/^(?:low\b)/i,/^(?:medium\b)/i,/^(?:high\b)/i,/^(?:analysis\b)/i,/^(?:demonstration\b)/i,/^(?:inspection\b)/i,/^(?:test\b)/i,/^(?:element\b)/i,/^(?:contains\b)/i,/^(?:copies\b)/i,/^(?:derives\b)/i,/^(?:satisfies\b)/i,/^(?:verifies\b)/i,/^(?:refines\b)/i,/^(?:traces\b)/i,/^(?:type\b)/i,/^(?:docref\b)/i,/^(?:style\b)/i,/^(?:\w+)/i,/^(?::)/i,/^(?:;)/i,/^(?:%)/i,/^(?:-)/i,/^(?:#)/i,/^(?: )/i,/^(?:["])/i,/^(?:\n)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:<-)/i,/^(?:->)/i,/^(?:-)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[\w][^:,\r\n\{\<\>\-\=]*)/i,/^(?:\w+)/i,/^(?:[0-9]+)/i,/^(?:,)/i],conditions:{acc_descr_multiline:{rules:[6,7,68,69,70],inclusive:!1},acc_descr:{rules:[4,68,69,70],inclusive:!1},acc_title:{rules:[2,68,69,70],inclusive:!1},style:{rules:[50,51,52,53,54,55,56,57,58,68,69,70],inclusive:!1},unqString:{rules:[68,69,70],inclusive:!1},token:{rules:[68,69,70],inclusive:!1},string:{rules:[65,66,68,69,70],inclusive:!1},INITIAL:{rules:[0,1,3,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,59,60,61,62,63,64,67,68,69,70],inclusive:!0}}};function ut(){this.yy={}}return ct.lexer=ht,g(ut,"Parser"),ut.prototype=ct,ct.Parser=ut,new ut}()).parser=Gkt,Hkt=Gkt})),Jkt=y((()=>{ns(),We(),is(),Vkt=class{constructor(){this.relations=[],this.latestRequirement=this.getInitialRequirement(),this.requirements=new Map,this.latestElement=this.getInitialElement(),this.elements=new Map,this.classes=new Map,this.direction="TB",this.RequirementType={REQUIREMENT:"Requirement",FUNCTIONAL_REQUIREMENT:"Functional Requirement",INTERFACE_REQUIREMENT:"Interface Requirement",PERFORMANCE_REQUIREMENT:"Performance Requirement",PHYSICAL_REQUIREMENT:"Physical Requirement",DESIGN_CONSTRAINT:"Design Constraint"},this.RiskLevel={LOW_RISK:"Low",MED_RISK:"Medium",HIGH_RISK:"High"},this.VerifyType={VERIFY_ANALYSIS:"Analysis",VERIFY_DEMONSTRATION:"Demonstration",VERIFY_INSPECTION:"Inspection",VERIFY_TEST:"Test"},this.Relationships={CONTAINS:"contains",COPIES:"copies",DERIVES:"derives",SATISFIES:"satisfies",VERIFIES:"verifies",REFINES:"refines",TRACES:"traces"},this.setAccTitle=Kn,this.getAccTitle=Qn,this.setAccDescription=Zn,this.getAccDescription=Jn,this.setDiagramTitle=ta,this.getDiagramTitle=ea,this.getConfig=g((()=>na().requirement),"getConfig"),this.clear(),this.setDirection=this.setDirection.bind(this),this.addRequirement=this.addRequirement.bind(this),this.setNewReqId=this.setNewReqId.bind(this),this.setNewReqRisk=this.setNewReqRisk.bind(this),this.setNewReqText=this.setNewReqText.bind(this),this.setNewReqVerifyMethod=this.setNewReqVerifyMethod.bind(this),this.addElement=this.addElement.bind(this),this.setNewElementType=this.setNewElementType.bind(this),this.setNewElementDocRef=this.setNewElementDocRef.bind(this),this.addRelationship=this.addRelationship.bind(this),this.setCssStyle=this.setCssStyle.bind(this),this.setClass=this.setClass.bind(this),this.defineClass=this.defineClass.bind(this),this.setAccTitle=this.setAccTitle.bind(this),this.setAccDescription=this.setAccDescription.bind(this)}static{g(this,"RequirementDB")}getDirection(){return this.direction}setDirection(t){this.direction=t}resetLatestRequirement(){this.latestRequirement=this.getInitialRequirement()}resetLatestElement(){this.latestElement=this.getInitialElement()}getInitialRequirement(){return{requirementId:"",text:"",risk:"",verifyMethod:"",name:"",type:"",cssStyles:[],classes:["default"]}}getInitialElement(){return{name:"",type:"",docRef:"",cssStyles:[],classes:["default"]}}addRequirement(t,e){return this.requirements.has(t)||this.requirements.set(t,{name:t,type:e,requirementId:this.latestRequirement.requirementId,text:this.latestRequirement.text,risk:this.latestRequirement.risk,verifyMethod:this.latestRequirement.verifyMethod,cssStyles:[],classes:["default"]}),this.resetLatestRequirement(),this.requirements.get(t)}getRequirements(){return this.requirements}setNewReqId(t){void 0!==this.latestRequirement&&(this.latestRequirement.requirementId=t)}setNewReqText(t){void 0!==this.latestRequirement&&(this.latestRequirement.text=t)}setNewReqRisk(t){void 0!==this.latestRequirement&&(this.latestRequirement.risk=t)}setNewReqVerifyMethod(t){void 0!==this.latestRequirement&&(this.latestRequirement.verifyMethod=t)}addElement(t){return this.elements.has(t)||(this.elements.set(t,{name:t,type:this.latestElement.type,docRef:this.latestElement.docRef,cssStyles:[],classes:["default"]}),et.info("Added new element: ",t)),this.resetLatestElement(),this.elements.get(t)}getElements(){return this.elements}setNewElementType(t){void 0!==this.latestElement&&(this.latestElement.type=t)}setNewElementDocRef(t){void 0!==this.latestElement&&(this.latestElement.docRef=t)}addRelationship(t,e,r){this.relations.push({type:t,src:e,dst:r})}getRelationships(){return this.relations}clear(){this.relations=[],this.resetLatestRequirement(),this.requirements=new Map,this.resetLatestElement(),this.elements=new Map,this.classes=new Map,Xn()}setCssStyle(t,e){for(let r of t){let t=this.requirements.get(r)??this.elements.get(r);if(!e||!t)return;for(let r of e)r.includes(",")?t.cssStyles.push(...r.split(",")):t.cssStyles.push(r)}}setClass(t,e){for(let r of t){let t=this.requirements.get(r)??this.elements.get(r);if(t)for(let r of e){t.classes.push(r);let e=this.classes.get(r)?.styles;e&&t.cssStyles.push(...e)}}}defineClass(t,e){for(let r of t){let t=this.classes.get(r);void 0===t&&(t={id:r,styles:[],textStyles:[]},this.classes.set(r,t)),e&&e.forEach((function(e){if(/color/.exec(e)){let r=e.replace("fill","bgFill");t.textStyles.push(r)}t.styles.push(e)})),this.requirements.forEach((t=>{t.classes.includes(r)&&t.cssStyles.push(...e.flatMap((t=>t.split(","))))})),this.elements.forEach((t=>{t.classes.includes(r)&&t.cssStyles.push(...e.flatMap((t=>t.split(","))))}))}}getClasses(){return this.classes}getData(){let t=na(),e=[],r=[];for(let r of this.requirements.values()){let i=r;i.id=r.name,i.cssStyles=r.cssStyles,i.cssClasses=r.classes.join(" "),i.shape="requirementBox",i.look=t.look,e.push(i)}for(let r of this.elements.values()){let i=r;i.shape="requirementBox",i.look=t.look,i.id=r.name,i.cssStyles=r.cssStyles,i.cssClasses=r.classes.join(" "),e.push(i)}for(let e of this.relations){let i=0,n=e.type===this.Relationships.CONTAINS,a={id:`${e.src}-${e.dst}-${i}`,start:this.requirements.get(e.src)?.name??this.elements.get(e.src)?.name,end:this.requirements.get(e.dst)?.name??this.elements.get(e.dst)?.name,label:`&lt;&lt;${e.type}&gt;&gt;`,classes:"relationshipLine",style:["fill:none",n?"":"stroke-dasharray: 10,7"],labelpos:"c",thickness:"normal",type:"normal",pattern:n?"normal":"dashed",arrowTypeStart:n?"requirement_contains":"",arrowTypeEnd:n?"":"requirement_arrow",look:t.look};r.push(a),i++}return{nodes:e,edges:r,other:{},config:t,direction:this.getDirection()}}}})),tvt=y((()=>{Xkt=g((t=>`\n\n  marker {\n    fill: ${t.relationColor};\n    stroke: ${t.relationColor};\n  }\n\n  marker.cross {\n    stroke: ${t.lineColor};\n  }\n\n  svg {\n    font-family: ${t.fontFamily};\n    font-size: ${t.fontSize};\n  }\n\n  .reqBox {\n    fill: ${t.requirementBackground};\n    fill-opacity: 1.0;\n    stroke: ${t.requirementBorderColor};\n    stroke-width: ${t.requirementBorderSize};\n  }\n  \n  .reqTitle, .reqLabel{\n    fill:  ${t.requirementTextColor};\n  }\n  .reqLabelBox {\n    fill: ${t.relationLabelBackground};\n    fill-opacity: 1.0;\n  }\n\n  .req-title-line {\n    stroke: ${t.requirementBorderColor};\n    stroke-width: ${t.requirementBorderSize};\n  }\n  .relationshipLine {\n    stroke: ${t.relationColor};\n    stroke-width: 1;\n  }\n  .relationshipLabel {\n    fill: ${t.relationLabelColor};\n  }\n  .divider {\n    stroke: ${t.nodeBorder};\n    stroke-width: 1;\n  }\n  .label {\n    font-family: ${t.fontFamily};\n    color: ${t.nodeTextColor||t.textColor};\n  }\n  .label text,span {\n    fill: ${t.nodeTextColor||t.textColor};\n    color: ${t.nodeTextColor||t.textColor};\n  }\n  .labelBkg {\n    background-color: ${t.edgeLabelBackground};\n  }\n\n`),"getStyles"),Kkt=Xkt})),evt={};x(evt,{draw:()=>rvt});var rvt,ivt=y((()=>{ns(),We(),Uj(),d5(),p5(),_L(),rvt=g((async function(t,e,r,i){et.info("REF0:"),et.info("Drawing requirement diagram (unified)",e);let{securityLevel:n,state:a,layout:s}=na(),o=i.db.getData(),l=$j(e,n);o.type=i.type,o.layoutAlgorithm=K4(s),o.nodeSpacing=a?.nodeSpacing??50,o.rankSpacing=a?.rankSpacing??50,o.markers=["requirement_contains","requirement_arrow"],o.diagramId=e,await X4(o,l);kL.insertTitle(l,"requirementDiagramTitleText",a?.titleTopMargin??25,i.db.getDiagramTitle()),Q4(l,8,"requirementDiagram",a?.useMaxWidth??!0)}),"draw")})),nvt={};x(nvt,{diagram:()=>avt});var avt,svt,ovt,lvt,cvt,hvt,uvt,dvt,pvt,fvt,gvt,yvt,mvt,xvt,bvt,kvt,vvt,Tvt,wvt,_vt,Svt,Cvt,Evt,Avt,$vt,Lvt,Rvt,Ivt,Nvt,Dvt,Mvt,Ovt,Pvt,Bvt,Fvt,zvt,jvt,Uvt,Wvt,qvt,Yvt,Gvt,Hvt,Vvt,Xvt,Kvt,Qvt,Zvt,Jvt,tTt,eTt=y((()=>{Zkt(),Jkt(),tvt(),ivt(),avt={parser:Hkt,get db(){return new Vkt},renderer:evt,styles:Kkt}})),rTt=y((()=>{(svt=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[1,2],r=[1,3],i=[1,4],n=[2,4],a=[1,9],s=[1,11],o=[1,13],l=[1,14],c=[1,16],h=[1,17],u=[1,18],d=[1,24],p=[1,25],f=[1,26],y=[1,27],m=[1,28],x=[1,29],b=[1,30],k=[1,31],v=[1,32],T=[1,33],w=[1,34],_=[1,35],S=[1,36],C=[1,37],E=[1,38],A=[1,39],$=[1,41],L=[1,42],R=[1,43],I=[1,44],N=[1,45],D=[1,46],M=[1,4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,48,49,50,52,53,55,60,61,62,63,71],O=[2,71],P=[4,5,16,50,52,53],B=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],F=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,49,50,52,53,55,60,61,62,63,71],z=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,48,50,52,53,55,60,61,62,63,71],j=[4,5,13,14,16,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,47,50,52,53,55,60,61,62,63,71],U=[69,70,71],W=[1,127],q={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NEWLINE:5,SD:6,document:7,line:8,statement:9,box_section:10,box_line:11,participant_statement:12,create:13,box:14,restOfLine:15,end:16,signal:17,autonumber:18,NUM:19,off:20,activate:21,actor:22,deactivate:23,note_statement:24,links_statement:25,link_statement:26,properties_statement:27,details_statement:28,title:29,legacy_title:30,acc_title:31,acc_title_value:32,acc_descr:33,acc_descr_value:34,acc_descr_multiline_value:35,loop:36,rect:37,opt:38,alt:39,else_sections:40,par:41,par_sections:42,par_over:43,critical:44,option_sections:45,break:46,option:47,and:48,else:49,participant:50,AS:51,participant_actor:52,destroy:53,actor_with_config:54,note:55,placement:56,text2:57,over:58,actor_pair:59,links:60,link:61,properties:62,details:63,spaceList:64,",":65,left_of:66,right_of:67,signaltype:68,"+":69,"-":70,ACTOR:71,config_object:72,CONFIG_START:73,CONFIG_CONTENT:74,CONFIG_END:75,SOLID_OPEN_ARROW:76,DOTTED_OPEN_ARROW:77,SOLID_ARROW:78,BIDIRECTIONAL_SOLID_ARROW:79,DOTTED_ARROW:80,BIDIRECTIONAL_DOTTED_ARROW:81,SOLID_CROSS:82,DOTTED_CROSS:83,SOLID_POINT:84,DOTTED_POINT:85,TXT:86,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NEWLINE",6:"SD",13:"create",14:"box",15:"restOfLine",16:"end",18:"autonumber",19:"NUM",20:"off",21:"activate",23:"deactivate",29:"title",30:"legacy_title",31:"acc_title",32:"acc_title_value",33:"acc_descr",34:"acc_descr_value",35:"acc_descr_multiline_value",36:"loop",37:"rect",38:"opt",39:"alt",41:"par",43:"par_over",44:"critical",46:"break",47:"option",48:"and",49:"else",50:"participant",51:"AS",52:"participant_actor",53:"destroy",55:"note",58:"over",60:"links",61:"link",62:"properties",63:"details",65:",",66:"left_of",67:"right_of",69:"+",70:"-",71:"ACTOR",73:"CONFIG_START",74:"CONFIG_CONTENT",75:"CONFIG_END",76:"SOLID_OPEN_ARROW",77:"DOTTED_OPEN_ARROW",78:"SOLID_ARROW",79:"BIDIRECTIONAL_SOLID_ARROW",80:"DOTTED_ARROW",81:"BIDIRECTIONAL_DOTTED_ARROW",82:"SOLID_CROSS",83:"DOTTED_CROSS",84:"SOLID_POINT",85:"DOTTED_POINT",86:"TXT"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[10,0],[10,2],[11,2],[11,1],[11,1],[9,1],[9,2],[9,4],[9,2],[9,4],[9,3],[9,3],[9,2],[9,3],[9,3],[9,2],[9,2],[9,2],[9,2],[9,2],[9,1],[9,1],[9,2],[9,2],[9,1],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[9,4],[45,1],[45,4],[42,1],[42,4],[40,1],[40,4],[12,5],[12,3],[12,5],[12,3],[12,3],[12,3],[24,4],[24,4],[25,3],[26,3],[27,3],[28,3],[64,2],[64,1],[59,3],[59,1],[56,1],[56,1],[17,5],[17,5],[17,4],[54,2],[72,3],[22,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[68,1],[57,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 3:return i.apply(a[o]),a[o];case 4:case 9:case 8:case 13:this.$=[];break;case 5:case 10:a[o-1].push(a[o]),this.$=a[o-1];break;case 6:case 7:case 11:case 12:case 63:this.$=a[o];break;case 15:a[o].type="createParticipant",this.$=a[o];break;case 16:a[o-1].unshift({type:"boxStart",boxData:i.parseBoxData(a[o-2])}),a[o-1].push({type:"boxEnd",boxText:a[o-2]}),this.$=a[o-1];break;case 18:this.$={type:"sequenceIndex",sequenceIndex:Number(a[o-2]),sequenceIndexStep:Number(a[o-1]),sequenceVisible:!0,signalType:i.LINETYPE.AUTONUMBER};break;case 19:this.$={type:"sequenceIndex",sequenceIndex:Number(a[o-1]),sequenceIndexStep:1,sequenceVisible:!0,signalType:i.LINETYPE.AUTONUMBER};break;case 20:this.$={type:"sequenceIndex",sequenceVisible:!1,signalType:i.LINETYPE.AUTONUMBER};break;case 21:this.$={type:"sequenceIndex",sequenceVisible:!0,signalType:i.LINETYPE.AUTONUMBER};break;case 22:this.$={type:"activeStart",signalType:i.LINETYPE.ACTIVE_START,actor:a[o-1].actor};break;case 23:this.$={type:"activeEnd",signalType:i.LINETYPE.ACTIVE_END,actor:a[o-1].actor};break;case 29:i.setDiagramTitle(a[o].substring(6)),this.$=a[o].substring(6);break;case 30:i.setDiagramTitle(a[o].substring(7)),this.$=a[o].substring(7);break;case 31:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 32:case 33:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 34:a[o-1].unshift({type:"loopStart",loopText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.LOOP_START}),a[o-1].push({type:"loopEnd",loopText:a[o-2],signalType:i.LINETYPE.LOOP_END}),this.$=a[o-1];break;case 35:a[o-1].unshift({type:"rectStart",color:i.parseMessage(a[o-2]),signalType:i.LINETYPE.RECT_START}),a[o-1].push({type:"rectEnd",color:i.parseMessage(a[o-2]),signalType:i.LINETYPE.RECT_END}),this.$=a[o-1];break;case 36:a[o-1].unshift({type:"optStart",optText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.OPT_START}),a[o-1].push({type:"optEnd",optText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.OPT_END}),this.$=a[o-1];break;case 37:a[o-1].unshift({type:"altStart",altText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.ALT_START}),a[o-1].push({type:"altEnd",signalType:i.LINETYPE.ALT_END}),this.$=a[o-1];break;case 38:a[o-1].unshift({type:"parStart",parText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.PAR_START}),a[o-1].push({type:"parEnd",signalType:i.LINETYPE.PAR_END}),this.$=a[o-1];break;case 39:a[o-1].unshift({type:"parStart",parText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.PAR_OVER_START}),a[o-1].push({type:"parEnd",signalType:i.LINETYPE.PAR_END}),this.$=a[o-1];break;case 40:a[o-1].unshift({type:"criticalStart",criticalText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.CRITICAL_START}),a[o-1].push({type:"criticalEnd",signalType:i.LINETYPE.CRITICAL_END}),this.$=a[o-1];break;case 41:a[o-1].unshift({type:"breakStart",breakText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.BREAK_START}),a[o-1].push({type:"breakEnd",optText:i.parseMessage(a[o-2]),signalType:i.LINETYPE.BREAK_END}),this.$=a[o-1];break;case 43:this.$=a[o-3].concat([{type:"option",optionText:i.parseMessage(a[o-1]),signalType:i.LINETYPE.CRITICAL_OPTION},a[o]]);break;case 45:this.$=a[o-3].concat([{type:"and",parText:i.parseMessage(a[o-1]),signalType:i.LINETYPE.PAR_AND},a[o]]);break;case 47:this.$=a[o-3].concat([{type:"else",altText:i.parseMessage(a[o-1]),signalType:i.LINETYPE.ALT_ELSE},a[o]]);break;case 48:a[o-3].draw="participant",a[o-3].type="addParticipant",a[o-3].description=i.parseMessage(a[o-1]),this.$=a[o-3];break;case 49:case 53:a[o-1].draw="participant",a[o-1].type="addParticipant",this.$=a[o-1];break;case 50:a[o-3].draw="actor",a[o-3].type="addParticipant",a[o-3].description=i.parseMessage(a[o-1]),this.$=a[o-3];break;case 51:a[o-1].draw="actor",a[o-1].type="addParticipant",this.$=a[o-1];break;case 52:a[o-1].type="destroyParticipant",this.$=a[o-1];break;case 54:this.$=[a[o-1],{type:"addNote",placement:a[o-2],actor:a[o-1].actor,text:a[o]}];break;case 55:a[o-2]=[].concat(a[o-1],a[o-1]).slice(0,2),a[o-2][0]=a[o-2][0].actor,a[o-2][1]=a[o-2][1].actor,this.$=[a[o-1],{type:"addNote",placement:i.PLACEMENT.OVER,actor:a[o-2].slice(0,2),text:a[o]}];break;case 56:this.$=[a[o-1],{type:"addLinks",actor:a[o-1].actor,text:a[o]}];break;case 57:this.$=[a[o-1],{type:"addALink",actor:a[o-1].actor,text:a[o]}];break;case 58:this.$=[a[o-1],{type:"addProperties",actor:a[o-1].actor,text:a[o]}];break;case 59:this.$=[a[o-1],{type:"addDetails",actor:a[o-1].actor,text:a[o]}];break;case 62:this.$=[a[o-2],a[o]];break;case 64:this.$=i.PLACEMENT.LEFTOF;break;case 65:this.$=i.PLACEMENT.RIGHTOF;break;case 66:this.$=[a[o-4],a[o-1],{type:"addMessage",from:a[o-4].actor,to:a[o-1].actor,signalType:a[o-3],msg:a[o],activate:!0},{type:"activeStart",signalType:i.LINETYPE.ACTIVE_START,actor:a[o-1].actor}];break;case 67:this.$=[a[o-4],a[o-1],{type:"addMessage",from:a[o-4].actor,to:a[o-1].actor,signalType:a[o-3],msg:a[o]},{type:"activeEnd",signalType:i.LINETYPE.ACTIVE_END,actor:a[o-4].actor}];break;case 68:this.$=[a[o-3],a[o-1],{type:"addMessage",from:a[o-3].actor,to:a[o-1].actor,signalType:a[o-2],msg:a[o]}];break;case 69:this.$={type:"addParticipant",actor:a[o-1],config:a[o]};break;case 70:this.$=a[o-1].trim();break;case 71:this.$={type:"addParticipant",actor:a[o]};break;case 72:this.$=i.LINETYPE.SOLID_OPEN;break;case 73:this.$=i.LINETYPE.DOTTED_OPEN;break;case 74:this.$=i.LINETYPE.SOLID;break;case 75:this.$=i.LINETYPE.BIDIRECTIONAL_SOLID;break;case 76:this.$=i.LINETYPE.DOTTED;break;case 77:this.$=i.LINETYPE.BIDIRECTIONAL_DOTTED;break;case 78:this.$=i.LINETYPE.SOLID_CROSS;break;case 79:this.$=i.LINETYPE.DOTTED_CROSS;break;case 80:this.$=i.LINETYPE.SOLID_POINT;break;case 81:this.$=i.LINETYPE.DOTTED_POINT;break;case 82:this.$=i.parseMessage(a[o].trim().substring(1))}}),"anonymous"),table:[{3:1,4:e,5:r,6:i},{1:[3]},{3:5,4:e,5:r,6:i},{3:6,4:e,5:r,6:i},t([1,4,5,13,14,18,21,23,29,30,31,33,35,36,37,38,39,41,43,44,46,50,52,53,55,60,61,62,63,71],n,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:a,5:s,8:8,9:10,12:12,13:o,14:l,17:15,18:c,21:h,22:40,23:u,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:f,33:y,35:m,36:x,37:b,38:k,39:v,41:T,43:w,44:_,46:S,50:C,52:E,53:A,55:$,60:L,61:R,62:I,63:N,71:D},t(M,[2,5]),{9:47,12:12,13:o,14:l,17:15,18:c,21:h,22:40,23:u,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:f,33:y,35:m,36:x,37:b,38:k,39:v,41:T,43:w,44:_,46:S,50:C,52:E,53:A,55:$,60:L,61:R,62:I,63:N,71:D},t(M,[2,7]),t(M,[2,8]),t(M,[2,14]),{12:48,50:C,52:E,53:A},{15:[1,49]},{5:[1,50]},{5:[1,53],19:[1,51],20:[1,52]},{22:54,71:D},{22:55,71:D},{5:[1,56]},{5:[1,57]},{5:[1,58]},{5:[1,59]},{5:[1,60]},t(M,[2,29]),t(M,[2,30]),{32:[1,61]},{34:[1,62]},t(M,[2,33]),{15:[1,63]},{15:[1,64]},{15:[1,65]},{15:[1,66]},{15:[1,67]},{15:[1,68]},{15:[1,69]},{15:[1,70]},{22:71,54:72,71:[1,73]},{22:74,71:D},{22:75,71:D},{68:76,76:[1,77],77:[1,78],78:[1,79],79:[1,80],80:[1,81],81:[1,82],82:[1,83],83:[1,84],84:[1,85],85:[1,86]},{56:87,58:[1,88],66:[1,89],67:[1,90]},{22:91,71:D},{22:92,71:D},{22:93,71:D},{22:94,71:D},t([5,51,65,76,77,78,79,80,81,82,83,84,85,86],O),t(M,[2,6]),t(M,[2,15]),t(P,[2,9],{10:95}),t(M,[2,17]),{5:[1,97],19:[1,96]},{5:[1,98]},t(M,[2,21]),{5:[1,99]},{5:[1,100]},t(M,[2,24]),t(M,[2,25]),t(M,[2,26]),t(M,[2,27]),t(M,[2,28]),t(M,[2,31]),t(M,[2,32]),t(B,n,{7:101}),t(B,n,{7:102}),t(B,n,{7:103}),t(F,n,{40:104,7:105}),t(z,n,{42:106,7:107}),t(z,n,{7:107,42:108}),t(j,n,{45:109,7:110}),t(B,n,{7:111}),{5:[1,113],51:[1,112]},{5:[1,114]},t([5,51],O,{72:115,73:[1,116]}),{5:[1,118],51:[1,117]},{5:[1,119]},{22:122,69:[1,120],70:[1,121],71:D},t(U,[2,72]),t(U,[2,73]),t(U,[2,74]),t(U,[2,75]),t(U,[2,76]),t(U,[2,77]),t(U,[2,78]),t(U,[2,79]),t(U,[2,80]),t(U,[2,81]),{22:123,71:D},{22:125,59:124,71:D},{71:[2,64]},{71:[2,65]},{57:126,86:W},{57:128,86:W},{57:129,86:W},{57:130,86:W},{4:[1,133],5:[1,135],11:132,12:134,16:[1,131],50:C,52:E,53:A},{5:[1,136]},t(M,[2,19]),t(M,[2,20]),t(M,[2,22]),t(M,[2,23]),{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,137],17:15,18:c,21:h,22:40,23:u,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:f,33:y,35:m,36:x,37:b,38:k,39:v,41:T,43:w,44:_,46:S,50:C,52:E,53:A,55:$,60:L,61:R,62:I,63:N,71:D},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,138],17:15,18:c,21:h,22:40,23:u,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:f,33:y,35:m,36:x,37:b,38:k,39:v,41:T,43:w,44:_,46:S,50:C,52:E,53:A,55:$,60:L,61:R,62:I,63:N,71:D},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,139],17:15,18:c,21:h,22:40,23:u,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:f,33:y,35:m,36:x,37:b,38:k,39:v,41:T,43:w,44:_,46:S,50:C,52:E,53:A,55:$,60:L,61:R,62:I,63:N,71:D},{16:[1,140]},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[2,46],17:15,18:c,21:h,22:40,23:u,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:f,33:y,35:m,36:x,37:b,38:k,39:v,41:T,43:w,44:_,46:S,49:[1,141],50:C,52:E,53:A,55:$,60:L,61:R,62:I,63:N,71:D},{16:[1,142]},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[2,44],17:15,18:c,21:h,22:40,23:u,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:f,33:y,35:m,36:x,37:b,38:k,39:v,41:T,43:w,44:_,46:S,48:[1,143],50:C,52:E,53:A,55:$,60:L,61:R,62:I,63:N,71:D},{16:[1,144]},{16:[1,145]},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[2,42],17:15,18:c,21:h,22:40,23:u,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:f,33:y,35:m,36:x,37:b,38:k,39:v,41:T,43:w,44:_,46:S,47:[1,146],50:C,52:E,53:A,55:$,60:L,61:R,62:I,63:N,71:D},{4:a,5:s,8:8,9:10,12:12,13:o,14:l,16:[1,147],17:15,18:c,21:h,22:40,23:u,24:19,25:20,26:21,27:22,28:23,29:d,30:p,31:f,33:y,35:m,36:x,37:b,38:k,39:v,41:T,43:w,44:_,46:S,50:C,52:E,53:A,55:$,60:L,61:R,62:I,63:N,71:D},{15:[1,148]},t(M,[2,49]),t(M,[2,53]),{5:[2,69]},{74:[1,149]},{15:[1,150]},t(M,[2,51]),t(M,[2,52]),{22:151,71:D},{22:152,71:D},{57:153,86:W},{57:154,86:W},{57:155,86:W},{65:[1,156],86:[2,63]},{5:[2,56]},{5:[2,82]},{5:[2,57]},{5:[2,58]},{5:[2,59]},t(M,[2,16]),t(P,[2,10]),{12:157,50:C,52:E,53:A},t(P,[2,12]),t(P,[2,13]),t(M,[2,18]),t(M,[2,34]),t(M,[2,35]),t(M,[2,36]),t(M,[2,37]),{15:[1,158]},t(M,[2,38]),{15:[1,159]},t(M,[2,39]),t(M,[2,40]),{15:[1,160]},t(M,[2,41]),{5:[1,161]},{75:[1,162]},{5:[1,163]},{57:164,86:W},{57:165,86:W},{5:[2,68]},{5:[2,54]},{5:[2,55]},{22:166,71:D},t(P,[2,11]),t(F,n,{7:105,40:167}),t(z,n,{7:107,42:168}),t(j,n,{7:110,45:169}),t(M,[2,48]),{5:[2,70]},t(M,[2,50]),{5:[2,66]},{5:[2,67]},{86:[2,62]},{16:[2,47]},{16:[2,45]},{16:[2,43]}],defaultActions:{5:[2,1],6:[2,2],89:[2,64],90:[2,65],115:[2,69],126:[2,56],127:[2,82],128:[2,57],129:[2,58],130:[2,59],153:[2,68],154:[2,54],155:[2,55],162:[2,70],164:[2,66],165:[2,67],166:[2,62],167:[2,47],168:[2,45],169:[2,43]},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},Y={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:g((function(t,e,r,i){switch(r){case 0:case 56:case 72:return 5;case 1:case 2:case 3:case 4:case 5:break;case 6:return 19;case 7:return this.begin("CONFIG"),73;case 8:return 74;case 9:return this.popState(),this.popState(),75;case 10:case 57:return e.yytext=e.yytext.trim(),71;case 11:case 17:return e.yytext=e.yytext.trim(),this.begin("ALIAS"),71;case 12:return this.begin("LINE"),14;case 13:return this.begin("ID"),50;case 14:return this.begin("ID"),52;case 15:return 13;case 16:return this.begin("ID"),53;case 18:return this.popState(),this.popState(),this.begin("LINE"),51;case 19:return this.popState(),this.popState(),5;case 20:return this.begin("LINE"),36;case 21:return this.begin("LINE"),37;case 22:return this.begin("LINE"),38;case 23:return this.begin("LINE"),39;case 24:return this.begin("LINE"),49;case 25:return this.begin("LINE"),41;case 26:return this.begin("LINE"),43;case 27:return this.begin("LINE"),48;case 28:return this.begin("LINE"),44;case 29:return this.begin("LINE"),47;case 30:return this.begin("LINE"),46;case 31:return this.popState(),15;case 32:return 16;case 33:return 66;case 34:return 67;case 35:return 60;case 36:return 61;case 37:return 62;case 38:return 63;case 39:return 58;case 40:return 55;case 41:return this.begin("ID"),21;case 42:return this.begin("ID"),23;case 43:return 29;case 44:return 30;case 45:return this.begin("acc_title"),31;case 46:return this.popState(),"acc_title_value";case 47:return this.begin("acc_descr"),33;case 48:return this.popState(),"acc_descr_value";case 49:this.begin("acc_descr_multiline");break;case 50:this.popState();break;case 51:return"acc_descr_multiline_value";case 52:return 6;case 53:return 18;case 54:return 20;case 55:return 65;case 58:return 78;case 59:return 79;case 60:return 80;case 61:return 81;case 62:return 76;case 63:return 77;case 64:return 82;case 65:return 83;case 66:return 84;case 67:return 85;case 68:case 69:return 86;case 70:return 69;case 71:return 70;case 73:return"INVALID"}}),"anonymous"),rules:[/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[0-9]+(?=[ \n]+))/i,/^(?:@\{)/i,/^(?:[^\}]+)/i,/^(?:\})/i,/^(?:[^\<->\->:\n,;@\s]+(?=@\{))/i,/^(?:[^\<->\->:\n,;@]+?([\-]*[^\<->\->:\n,;@]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:box\b)/i,/^(?:participant\b)/i,/^(?:actor\b)/i,/^(?:create\b)/i,/^(?:destroy\b)/i,/^(?:[^<\->\->:\n,;]+?([\-]*[^<\->\->:\n,;]+?)*?(?=((?!\n)\s)+as(?!\n)\s|[#\n;]|$))/i,/^(?:as\b)/i,/^(?:(?:))/i,/^(?:loop\b)/i,/^(?:rect\b)/i,/^(?:opt\b)/i,/^(?:alt\b)/i,/^(?:else\b)/i,/^(?:par\b)/i,/^(?:par_over\b)/i,/^(?:and\b)/i,/^(?:critical\b)/i,/^(?:option\b)/i,/^(?:break\b)/i,/^(?:(?:[:]?(?:no)?wrap)?[^#\n;]*)/i,/^(?:end\b)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:links\b)/i,/^(?:link\b)/i,/^(?:properties\b)/i,/^(?:details\b)/i,/^(?:over\b)/i,/^(?:note\b)/i,/^(?:activate\b)/i,/^(?:deactivate\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:title:\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:sequenceDiagram\b)/i,/^(?:autonumber\b)/i,/^(?:off\b)/i,/^(?:,)/i,/^(?:;)/i,/^(?:[^+<\->\->:\n,;]+((?!(-x|--x|-\)|--\)))[\-]*[^\+<\->\->:\n,;]+)*)/i,/^(?:->>)/i,/^(?:<<->>)/i,/^(?:-->>)/i,/^(?:<<-->>)/i,/^(?:->)/i,/^(?:-->)/i,/^(?:-[x])/i,/^(?:--[x])/i,/^(?:-[\)])/i,/^(?:--[\)])/i,/^(?::(?:(?:no)?wrap)?[^#\n;]*)/i,/^(?::)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[50,51],inclusive:!1},acc_descr:{rules:[48],inclusive:!1},acc_title:{rules:[46],inclusive:!1},ID:{rules:[2,3,7,10,11,17],inclusive:!1},ALIAS:{rules:[2,3,18,19],inclusive:!1},LINE:{rules:[2,3,31],inclusive:!1},CONFIG:{rules:[8,9],inclusive:!1},CONFIG_DATA:{rules:[],inclusive:!1},INITIAL:{rules:[0,1,3,4,5,6,12,13,14,15,16,20,21,22,23,24,25,26,27,28,29,30,32,33,34,35,36,37,38,39,40,41,42,43,44,45,47,49,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73],inclusive:!0}}};function G(){this.yy={}}return q.lexer=Y,g(G,"Parser"),G.prototype=q,q.Parser=G,new G}()).parser=svt,ovt=svt})),iTt=y((()=>{ns(),zD(),We(),Hft(),gn(),is(),lvt={SOLID:0,DOTTED:1,NOTE:2,SOLID_CROSS:3,DOTTED_CROSS:4,SOLID_OPEN:5,DOTTED_OPEN:6,LOOP_START:10,LOOP_END:11,ALT_START:12,ALT_ELSE:13,ALT_END:14,OPT_START:15,OPT_END:16,ACTIVE_START:17,ACTIVE_END:18,PAR_START:19,PAR_AND:20,PAR_END:21,RECT_START:22,RECT_END:23,SOLID_POINT:24,DOTTED_POINT:25,AUTONUMBER:26,CRITICAL_START:27,CRITICAL_OPTION:28,CRITICAL_END:29,BREAK_START:30,BREAK_END:31,PAR_OVER_START:32,BIDIRECTIONAL_SOLID:33,BIDIRECTIONAL_DOTTED:34},cvt={FILLED:0,OPEN:1},hvt={LEFTOF:0,RIGHTOF:1,OVER:2},uvt={ACTOR:"actor",BOUNDARY:"boundary",COLLECTIONS:"collections",CONTROL:"control",DATABASE:"database",ENTITY:"entity",PARTICIPANT:"participant",QUEUE:"queue"},dvt=class{constructor(){this.state=new qft((()=>({prevActor:void 0,actors:new Map,createdActors:new Map,destroyedActors:new Map,boxes:[],messages:[],notes:[],sequenceNumbersEnabled:!1,wrapEnabled:void 0,currentBox:void 0,lastCreated:void 0,lastDestroyed:void 0}))),this.setAccTitle=Kn,this.setAccDescription=Zn,this.setDiagramTitle=ta,this.getAccTitle=Qn,this.getAccDescription=Jn,this.getDiagramTitle=ea,this.apply=this.apply.bind(this),this.parseBoxData=this.parseBoxData.bind(this),this.parseMessage=this.parseMessage.bind(this),this.clear(),this.setWrap(na().wrap),this.LINETYPE=lvt,this.ARROWTYPE=cvt,this.PLACEMENT=hvt}static{g(this,"SequenceDB")}addBox(t){this.state.records.boxes.push({name:t.text,wrap:t.wrap??this.autoWrap(),fill:t.color,actorKeys:[]}),this.state.records.currentBox=this.state.records.boxes.slice(-1)[0]}addActor(t,e,r,i,n){let a,s=this.state.records.currentBox;if(void 0!==n){let t;t=n.includes("\n")?n+"\n":"{\n"+n+"\n}",a=FD(t,{schema:BD})}i=a?.type??i;let o=this.state.records.actors.get(t);if(o){if(this.state.records.currentBox&&o.box&&this.state.records.currentBox!==o.box)throw new Error(`A same participant should only be defined in one Box: ${o.name} can't be in '${o.box.name}' and in '${this.state.records.currentBox.name}' at the same time.`);if(s=o.box?o.box:this.state.records.currentBox,o.box=s,o&&e===o.name&&null==r)return}if(null==r?.text&&(r={text:e,type:i}),(null==i||null==r.text)&&(r={text:e,type:i}),this.state.records.actors.set(t,{box:s,name:e,description:r.text,wrap:r.wrap??this.autoWrap(),prevActor:this.state.records.prevActor,links:{},properties:{},actorCnt:null,rectData:null,type:i??"participant"}),this.state.records.prevActor){let e=this.state.records.actors.get(this.state.records.prevActor);e&&(e.nextActor=t)}this.state.records.currentBox&&this.state.records.currentBox.actorKeys.push(t),this.state.records.prevActor=t}activationCount(t){let e,r=0;if(!t)return 0;for(e=0;e<this.state.records.messages.length;e++)this.state.records.messages[e].type===this.LINETYPE.ACTIVE_START&&this.state.records.messages[e].from===t&&r++,this.state.records.messages[e].type===this.LINETYPE.ACTIVE_END&&this.state.records.messages[e].from===t&&r--;return r}addMessage(t,e,r,i){this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:t,to:e,message:r.text,wrap:r.wrap??this.autoWrap(),answer:i})}addSignal(t,e,r,i,n=!1){if(i===this.LINETYPE.ACTIVE_END&&this.activationCount(t??"")<1){let e=new Error("Trying to inactivate an inactive participant ("+t+")");throw e.hash={text:"->>-",token:"->>-",line:"1",loc:{first_line:1,last_line:1,first_column:1,last_column:1},expected:["'ACTIVE_PARTICIPANT'"]},e}return this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:t,to:e,message:r?.text??"",wrap:r?.wrap??this.autoWrap(),type:i,activate:n}),!0}hasAtLeastOneBox(){return this.state.records.boxes.length>0}hasAtLeastOneBoxWithTitle(){return this.state.records.boxes.some((t=>t.name))}getMessages(){return this.state.records.messages}getBoxes(){return this.state.records.boxes}getActors(){return this.state.records.actors}getCreatedActors(){return this.state.records.createdActors}getDestroyedActors(){return this.state.records.destroyedActors}getActor(t){return this.state.records.actors.get(t)}getActorKeys(){return[...this.state.records.actors.keys()]}enableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!0}disableSequenceNumbers(){this.state.records.sequenceNumbersEnabled=!1}showSequenceNumbers(){return this.state.records.sequenceNumbersEnabled}setWrap(t){this.state.records.wrapEnabled=t}extractWrap(t){if(void 0===t)return{};t=t.trim();let e=null!==/^:?wrap:/.exec(t)||null===/^:?nowrap:/.exec(t)&&void 0;return{cleanedText:(void 0===e?t:t.replace(/^:?(?:no)?wrap:/,"")).trim(),wrap:e}}autoWrap(){return void 0!==this.state.records.wrapEnabled?this.state.records.wrapEnabled:na().sequence?.wrap??!1}clear(){this.state.reset(),Xn()}parseMessage(t){let e=t.trim(),{wrap:r,cleanedText:i}=this.extractWrap(e),n={text:i,wrap:r};return et.debug(`parseMessage: ${JSON.stringify(n)}`),n}parseBoxData(t){let e=/^((?:rgba?|hsla?)\s*\(.*\)|\w*)(.*)$/.exec(t),r=e?.[1]?e[1].trim():"transparent",i=e?.[2]?e[2].trim():void 0;if(window?.CSS)window.CSS.supports("color",r)||(r="transparent",i=t.trim());else{let e=(new Option).style;e.color=r,e.color!==r&&(r="transparent",i=t.trim())}let{wrap:n,cleanedText:a}=this.extractWrap(i);return{text:a?zi(a,na()):void 0,color:r,wrap:n}}addNote(t,e,r){let i={actor:t,placement:e,message:r.text,wrap:r.wrap??this.autoWrap()},n=[].concat(t,t);this.state.records.notes.push(i),this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:n[0],to:n[1],message:r.text,wrap:r.wrap??this.autoWrap(),type:this.LINETYPE.NOTE,placement:e})}addLinks(t,e){let r=this.getActor(t);try{let t=zi(e.text,na());t=t.replace(/&equals;/g,"="),t=t.replace(/&amp;/g,"&");let i=JSON.parse(t);this.insertLinks(r,i)}catch(t){et.error("error while parsing actor link text",t)}}addALink(t,e){let r=this.getActor(t);try{let t={},i=zi(e.text,na()),n=i.indexOf("@");i=i.replace(/&equals;/g,"="),i=i.replace(/&amp;/g,"&");let a=i.slice(0,n-1).trim(),s=i.slice(n+1).trim();t[a]=s,this.insertLinks(r,t)}catch(t){et.error("error while parsing actor link text",t)}}insertLinks(t,e){if(null==t.links)t.links=e;else for(let r in e)t.links[r]=e[r]}addProperties(t,e){let r=this.getActor(t);try{let t=zi(e.text,na()),i=JSON.parse(t);this.insertProperties(r,i)}catch(t){et.error("error while parsing actor properties text",t)}}insertProperties(t,e){if(null==t.properties)t.properties=e;else for(let r in e)t.properties[r]=e[r]}boxEnd(){this.state.records.currentBox=void 0}addDetails(t,e){let r=this.getActor(t),i=document.getElementById(e.text);try{let t=i.innerHTML,e=JSON.parse(t);e.properties&&this.insertProperties(r,e.properties),e.links&&this.insertLinks(r,e.links)}catch(t){et.error("error while parsing actor details text",t)}}getActorProperty(t,e){if(void 0!==t?.properties)return t.properties[e]}apply(t){if(Array.isArray(t))t.forEach((t=>{this.apply(t)}));else switch(t.type){case"sequenceIndex":this.state.records.messages.push({id:this.state.records.messages.length.toString(),from:void 0,to:void 0,message:{start:t.sequenceIndex,step:t.sequenceIndexStep,visible:t.sequenceVisible},wrap:!1,type:t.signalType});break;case"addParticipant":this.addActor(t.actor,t.actor,t.description,t.draw,t.config);break;case"createParticipant":if(this.state.records.actors.has(t.actor))throw new Error("It is not possible to have actors with the same id, even if one is destroyed before the next is created. Use 'AS' aliases to simulate the behavior");this.state.records.lastCreated=t.actor,this.addActor(t.actor,t.actor,t.description,t.draw,t.config),this.state.records.createdActors.set(t.actor,this.state.records.messages.length);break;case"destroyParticipant":this.state.records.lastDestroyed=t.actor,this.state.records.destroyedActors.set(t.actor,this.state.records.messages.length);break;case"activeStart":case"activeEnd":this.addSignal(t.actor,void 0,void 0,t.signalType);break;case"addNote":this.addNote(t.actor,t.placement,t.text);break;case"addLinks":this.addLinks(t.actor,t.text);break;case"addALink":this.addALink(t.actor,t.text);break;case"addProperties":this.addProperties(t.actor,t.text);break;case"addDetails":this.addDetails(t.actor,t.text);break;case"addMessage":if(this.state.records.lastCreated){if(t.to!==this.state.records.lastCreated)throw new Error("The created participant "+this.state.records.lastCreated.name+" does not have an associated creating message after its declaration. Please check the sequence diagram.");this.state.records.lastCreated=void 0}else if(this.state.records.lastDestroyed){if(t.to!==this.state.records.lastDestroyed&&t.from!==this.state.records.lastDestroyed)throw new Error("The destroyed participant "+this.state.records.lastDestroyed.name+" does not have an associated destroying message after its declaration. Please check the sequence diagram.");this.state.records.lastDestroyed=void 0}this.addSignal(t.from,t.to,t.msg,t.signalType,t.activate);break;case"boxStart":this.addBox(t.boxData);break;case"boxEnd":this.boxEnd();break;case"loopStart":this.addSignal(void 0,void 0,t.loopText,t.signalType);break;case"loopEnd":case"rectEnd":case"optEnd":case"altEnd":case"parEnd":case"criticalEnd":case"breakEnd":this.addSignal(void 0,void 0,void 0,t.signalType);break;case"rectStart":this.addSignal(void 0,void 0,t.color,t.signalType);break;case"optStart":this.addSignal(void 0,void 0,t.optText,t.signalType);break;case"altStart":case"else":this.addSignal(void 0,void 0,t.altText,t.signalType);break;case"setAccTitle":Kn(t.text);break;case"parStart":case"and":this.addSignal(void 0,void 0,t.parText,t.signalType);break;case"criticalStart":this.addSignal(void 0,void 0,t.criticalText,t.signalType);break;case"option":this.addSignal(void 0,void 0,t.optionText,t.signalType);break;case"breakStart":this.addSignal(void 0,void 0,t.breakText,t.signalType)}}getConfig(){return na().sequence}}})),nTt=y((()=>{pvt=g((t=>`.actor {\n    stroke: ${t.actorBorder};\n    fill: ${t.actorBkg};\n  }\n\n  text.actor > tspan {\n    fill: ${t.actorTextColor};\n    stroke: none;\n  }\n\n  .actor-line {\n    stroke: ${t.actorLineColor};\n  }\n  \n  .innerArc {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n  }\n\n  .messageLine0 {\n    stroke-width: 1.5;\n    stroke-dasharray: none;\n    stroke: ${t.signalColor};\n  }\n\n  .messageLine1 {\n    stroke-width: 1.5;\n    stroke-dasharray: 2, 2;\n    stroke: ${t.signalColor};\n  }\n\n  #arrowhead path {\n    fill: ${t.signalColor};\n    stroke: ${t.signalColor};\n  }\n\n  .sequenceNumber {\n    fill: ${t.sequenceNumberColor};\n  }\n\n  #sequencenumber {\n    fill: ${t.signalColor};\n  }\n\n  #crosshead path {\n    fill: ${t.signalColor};\n    stroke: ${t.signalColor};\n  }\n\n  .messageText {\n    fill: ${t.signalTextColor};\n    stroke: none;\n  }\n\n  .labelBox {\n    stroke: ${t.labelBoxBorderColor};\n    fill: ${t.labelBoxBkgColor};\n  }\n\n  .labelText, .labelText > tspan {\n    fill: ${t.labelTextColor};\n    stroke: none;\n  }\n\n  .loopText, .loopText > tspan {\n    fill: ${t.loopTextColor};\n    stroke: none;\n  }\n\n  .loopLine {\n    stroke-width: 2px;\n    stroke-dasharray: 2, 2;\n    stroke: ${t.labelBoxBorderColor};\n    fill: ${t.labelBoxBorderColor};\n  }\n\n  .note {\n    //stroke: #decc93;\n    stroke: ${t.noteBorderColor};\n    fill: ${t.noteBkgColor};\n  }\n\n  .noteText, .noteText > tspan {\n    fill: ${t.noteTextColor};\n    stroke: none;\n  }\n\n  .activation0 {\n    fill: ${t.activationBkgColor};\n    stroke: ${t.activationBorderColor};\n  }\n\n  .activation1 {\n    fill: ${t.activationBkgColor};\n    stroke: ${t.activationBorderColor};\n  }\n\n  .activation2 {\n    fill: ${t.activationBkgColor};\n    stroke: ${t.activationBorderColor};\n  }\n\n  .actorPopupMenu {\n    position: absolute;\n  }\n\n  .actorPopupMenuPanel {\n    position: absolute;\n    fill: ${t.actorBkg};\n    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n    filter: drop-shadow(3px 5px 2px rgb(0 0 0 / 0.4));\n}\n  .actor-man line {\n    stroke: ${t.actorBorder};\n    fill: ${t.actorBkg};\n  }\n  .actor-man circle, line {\n    stroke: ${t.actorBorder};\n    fill: ${t.actorBkg};\n    stroke-width: 2px;\n  }\n\n`),"getStyles"),fvt=pvt})),aTt=y((()=>{gvt=v(JT(),1),Ar(),_L(),gn(),tw(),yvt=36,mvt="actor-top",xvt="actor-bottom",bvt="actor-box",kvt="actor-man",vvt=g((function(t,e){return yT(t,e)}),"drawRect"),Tvt=g((function(t,e,r,i,n){if(void 0===e.links||null===e.links||0===Object.keys(e.links).length)return{height:0,width:0};let a=e.links,s=e.actorCnt,o=e.rectData;var l="none";n&&(l="block !important");let c=t.append("g");c.attr("id","actor"+s+"_popup"),c.attr("class","actorPopupMenu"),c.attr("display",l);var h="";void 0!==o.class&&(h=" "+o.class);let u=o.width>r?o.width:r,d=c.append("rect");if(d.attr("class","actorPopupMenuPanel"+h),d.attr("x",o.x),d.attr("y",o.height),d.attr("fill",o.fill),d.attr("stroke",o.stroke),d.attr("width",u),d.attr("height",o.height),d.attr("rx",o.rx),d.attr("ry",o.ry),null!=a){var p=20;for(let t in a){var f=c.append("a"),g=(0,gvt.sanitizeUrl)(a[t]);f.attr("xlink:href",g),f.attr("target","_blank"),Jvt(i)(t,f,o.x+10,o.height+p,u,20,{class:"actor"},i),p+=30}}return d.attr("height",p),{height:o.height+p,width:u}}),"drawPopup"),wvt=g((function(t){return"var pu = document.getElementById('"+t+"'); if (pu != null) { pu.style.display = pu.style.display == 'block' ? 'none' : 'block'; }"}),"popupMenuToggle"),_vt=g((async function(t,e,r=null){let i=t.append("foreignObject"),n=await sn(e.text,Re()),a=i.append("xhtml:div").attr("style","width: fit-content;").attr("xmlns","http://www.w3.org/1999/xhtml").html(n).node().getBoundingClientRect();if(i.attr("height",Math.round(a.height)).attr("width",Math.round(a.width)),"noteText"===e.class){let r=t.node().firstChild;r.setAttribute("height",a.height+2*e.textMargin);let n=r.getBBox();i.attr("x",Math.round(n.x+n.width/2-a.width/2)).attr("y",Math.round(n.y+n.height/2-a.height/2))}else if(r){let{startx:t,stopx:n,starty:s}=r;if(t>n){let e=t;t=n,n=e}i.attr("x",Math.round(t+Math.abs(t-n)/2-a.width/2)),"loopText"===e.class?i.attr("y",Math.round(s)):i.attr("y",Math.round(s-a.height))}return[i]}),"drawKatex"),Svt=g((function(t,e){let r=0,i=0,n=e.text.split(on.lineBreakRegex),[a,s]=bL(e.fontSize),o=[],l=0,c=g((()=>e.y),"yfunc");if(void 0!==e.valign&&void 0!==e.textMargin&&e.textMargin>0)switch(e.valign){case"top":case"start":c=g((()=>Math.round(e.y+e.textMargin)),"yfunc");break;case"middle":case"center":c=g((()=>Math.round(e.y+(r+i+e.textMargin)/2)),"yfunc");break;case"bottom":case"end":c=g((()=>Math.round(e.y+(r+i+2*e.textMargin)-e.textMargin)),"yfunc")}if(void 0!==e.anchor&&void 0!==e.textMargin&&void 0!==e.width)switch(e.anchor){case"left":case"start":e.x=Math.round(e.x+e.textMargin),e.anchor="start",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"middle":case"center":e.x=Math.round(e.x+e.width/2),e.anchor="middle",e.dominantBaseline="middle",e.alignmentBaseline="middle";break;case"right":case"end":e.x=Math.round(e.x+e.width-e.textMargin),e.anchor="end",e.dominantBaseline="middle",e.alignmentBaseline="middle"}for(let[h,u]of n.entries()){void 0!==e.textMargin&&0===e.textMargin&&void 0!==a&&(l=h*a);let n=t.append("text");n.attr("x",e.x),n.attr("y",c()),void 0!==e.anchor&&n.attr("text-anchor",e.anchor).attr("dominant-baseline",e.dominantBaseline).attr("alignment-baseline",e.alignmentBaseline),void 0!==e.fontFamily&&n.style("font-family",e.fontFamily),void 0!==s&&n.style("font-size",s),void 0!==e.fontWeight&&n.style("font-weight",e.fontWeight),void 0!==e.fill&&n.attr("fill",e.fill),void 0!==e.class&&n.attr("class",e.class),void 0!==e.dy?n.attr("dy",e.dy):0!==l&&n.attr("dy",l);let d=u||K$;if(e.tspan){let t=n.append("tspan");t.attr("x",e.x),void 0!==e.fill&&t.attr("fill",e.fill),t.text(d)}else n.text(d);void 0!==e.valign&&void 0!==e.textMargin&&e.textMargin>0&&(i+=(n._groups||n)[0][0].getBBox().height,r=i),o.push(n)}return o}),"drawText"),Cvt=g((function(t,e){function r(t,e,r,i,n){return t+","+e+" "+(t+r)+","+e+" "+(t+r)+","+(e+i-n)+" "+(t+r-1.2*n)+","+(e+i)+" "+t+","+(e+i)}g(r,"genPoints");let i=t.append("polygon");return i.attr("points",r(e.x,e.y,e.width,e.height,7)),i.attr("class","labelBox"),e.y=e.y+e.height/2,Svt(t,e),i}),"drawLabel"),Evt=-1,Avt=g(((t,e,r,i)=>{t.select&&r.forEach((r=>{let n=e.get(r),a=t.select("#actor"+n.actorCnt);!i.mirrorActors&&n.stopy?a.attr("y2",n.stopy+n.height/2):i.mirrorActors&&a.attr("y2",n.stopy)}))}),"fixLifeLineHeights"),$vt=g((function(t,e,r,i){let n=i?e.stopy:e.starty,a=e.x+e.width/2,s=n+e.height,o=t.append("g").lower();var l=o;i||(Evt++,Object.keys(e.links||{}).length&&!r.forceMenus&&l.attr("onclick",wvt(`actor${Evt}_popup`)).attr("cursor","pointer"),l.append("line").attr("id","actor"+Evt).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),l=o.append("g"),e.actorCnt=Evt,null!=e.links&&l.attr("id","root-"+Evt));let c=vT();var h="actor";e.properties?.class?h=e.properties.class:c.fill="#eaeaea",h+=i?` ${xvt}`:` ${mvt}`,c.x=e.x,c.y=n,c.width=e.width,c.height=e.height,c.class=h,c.rx=3,c.ry=3,c.name=e.name;let u=vvt(l,c);if(e.rectData=c,e.properties?.icon){let t=e.properties.icon.trim();"@"===t.charAt(0)?kT(l,c.x+c.width-20,c.y+10,t.substr(1)):bT(l,c.x+c.width-20,c.y+10,t)}Zvt(r,rn(e.description))(e.description,l,c.x,c.y,c.width,c.height,{class:`actor ${bvt}`},r);let d=e.height;if(u.node){let t=u.node().getBBox();e.height=t.height,d=t.height}return d}),"drawActorTypeParticipant"),Lvt=g((function(t,e,r,i){let n=i?e.stopy:e.starty,a=e.x+e.width/2,s=n+e.height,o=t.append("g").lower();var l=o;i||(Evt++,Object.keys(e.links||{}).length&&!r.forceMenus&&l.attr("onclick",wvt(`actor${Evt}_popup`)).attr("cursor","pointer"),l.append("line").attr("id","actor"+Evt).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),l=o.append("g"),e.actorCnt=Evt,null!=e.links&&l.attr("id","root-"+Evt));let c=vT();var h="actor";e.properties?.class?h=e.properties.class:c.fill="#eaeaea",h+=i?` ${xvt}`:` ${mvt}`,c.x=e.x,c.y=n,c.width=e.width,c.height=e.height,c.class=h,c.name=e.name;let u={...c,x:c.x+-6,y:c.y+6,class:"actor"},d=vvt(l,c);if(vvt(l,u),e.rectData=c,e.properties?.icon){let t=e.properties.icon.trim();"@"===t.charAt(0)?kT(l,c.x+c.width-20,c.y+10,t.substr(1)):bT(l,c.x+c.width-20,c.y+10,t)}Zvt(r,rn(e.description))(e.description,l,c.x-6,c.y+6,c.width,c.height,{class:`actor ${bvt}`},r);let p=e.height;if(d.node){let t=d.node().getBBox();e.height=t.height,p=t.height}return p}),"drawActorTypeCollections"),Rvt=g((function(t,e,r,i){let n=i?e.stopy:e.starty,a=e.x+e.width/2,s=n+e.height,o=t.append("g").lower(),l=o;i||(Evt++,Object.keys(e.links||{}).length&&!r.forceMenus&&l.attr("onclick",wvt(`actor${Evt}_popup`)).attr("cursor","pointer"),l.append("line").attr("id","actor"+Evt).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),l=o.append("g"),e.actorCnt=Evt,null!=e.links&&l.attr("id","root-"+Evt));let c=vT(),h="actor";e.properties?.class?h=e.properties.class:c.fill="#eaeaea",h+=i?` ${xvt}`:` ${mvt}`,c.x=e.x,c.y=n,c.width=e.width,c.height=e.height,c.class=h,c.name=e.name;let u=c.height/2,d=u/(2.5+c.height/50),p=l.append("g"),f=l.append("g");if(p.append("path").attr("d",`M ${c.x},${c.y+u}\n    a ${d},${u} 0 0 0 0,${c.height}\n    h ${c.width-2*d}\n    a ${d},${u} 0 0 0 0,-${c.height}\n    Z\n  `).attr("class",h),f.append("path").attr("d",`M ${c.x},${c.y+u}\n      a ${d},${u} 0 0 0 0,${c.height}`).attr("stroke","#666").attr("stroke-width","1px").attr("class",h),p.attr("transform",`translate(${d}, ${-c.height/2})`),f.attr("transform",`translate(${c.width-d}, ${-c.height/2})`),e.rectData=c,e.properties?.icon){let t=e.properties.icon.trim(),r=c.x+c.width-20,i=c.y+10;"@"===t.charAt(0)?kT(l,r,i,t.substr(1)):bT(l,r,i,t)}Zvt(r,rn(e.description))(e.description,l,c.x,c.y,c.width,c.height,{class:`actor ${bvt}`},r);let g=e.height,y=p.select("path:last-child");if(y.node()){let t=y.node().getBBox();e.height=t.height,g=t.height}return g}),"drawActorTypeQueue"),Ivt=g((function(t,e,r,i){let n=i?e.stopy:e.starty,a=e.x+e.width/2,s=n+75,o=t.append("g").lower();i||(Evt++,o.append("line").attr("id","actor"+Evt).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),e.actorCnt=Evt);let l=t.append("g"),c=kvt;c+=i?` ${xvt}`:` ${mvt}`,l.attr("class",c),l.attr("name",e.name);let h=vT();h.x=e.x,h.y=n,h.fill="#eaeaea",h.width=e.width,h.height=e.height,h.class="actor";let u=e.x+e.width/2,d=n+30;l.append("defs").append("marker").attr("id","filled-head-control").attr("refX",11).attr("refY",5.8).attr("markerWidth",20).attr("markerHeight",28).attr("orient","172.5").append("path").attr("d","M 14.4 5.6 L 7.2 10.4 L 8.8 5.6 L 7.2 0.8 Z"),l.append("circle").attr("cx",u).attr("cy",d).attr("r",18).attr("fill","#eaeaf7").attr("stroke","#666").attr("stroke-width",1.2),l.append("line").attr("marker-end","url(#filled-head-control)").attr("transform",`translate(${u}, ${d-18})`);let p=l.node().getBBox();return e.height=p.height+2*(r?.sequence?.labelBoxHeight??0),Zvt(r,rn(e.description))(e.description,l,h.x,h.y+18+(i?5:10),h.width,h.height,{class:`actor ${kvt}`},r),e.height}),"drawActorTypeControl"),Nvt=g((function(t,e,r,i){let n=i?e.stopy:e.starty,a=e.x+e.width/2,s=n+75,o=t.append("g").lower(),l=t.append("g"),c=kvt;c+=i?` ${xvt}`:` ${mvt}`,l.attr("class",c),l.attr("name",e.name);let h=vT();h.x=e.x,h.y=n,h.fill="#eaeaea",h.width=e.width,h.height=e.height,h.class="actor";let u=e.x+e.width/2,d=n+(i?10:25),p=18;l.append("circle").attr("cx",u).attr("cy",d).attr("r",p).attr("width",e.width).attr("height",e.height),l.append("line").attr("x1",u-p).attr("x2",u+p).attr("y1",d+p).attr("y2",d+p).attr("stroke","#333").attr("stroke-width",2);let f=l.node().getBBox();return e.height=f.height+(r?.sequence?.labelBoxHeight??0),i||(Evt++,o.append("line").attr("id","actor"+Evt).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),e.actorCnt=Evt),Zvt(r,rn(e.description))(e.description,l,h.x,h.y+(i?(d-n+p-5)/2:(d+p-n)/2),h.width,h.height,{class:`actor ${kvt}`},r),l.attr("transform","translate(0, 9)"),e.height}),"drawActorTypeEntity"),Dvt=g((function(t,e,r,i){let n=i?e.stopy:e.starty,a=e.x+e.width/2,s=n+e.height+2*r.boxTextMargin,o=t.append("g").lower(),l=o;i||(Evt++,Object.keys(e.links||{}).length&&!r.forceMenus&&l.attr("onclick",wvt(`actor${Evt}_popup`)).attr("cursor","pointer"),l.append("line").attr("id","actor"+Evt).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),l=o.append("g"),e.actorCnt=Evt,null!=e.links&&l.attr("id","root-"+Evt));let c=vT(),h="actor";e.properties?.class?h=e.properties.class:c.fill="#eaeaea",h+=i?` ${xvt}`:` ${mvt}`,c.x=e.x,c.y=n,c.width=e.width,c.height=e.height,c.class=h,c.name=e.name,c.x=e.x,c.y=n;let u=c.width/4,d=c.width/4,p=u/2,f=p/(2.5+u/50),g=l.append("g"),y=`\n  M ${c.x},${c.y+f}\n  a ${p},${f} 0 0 0 ${u},0\n  a ${p},${f} 0 0 0 -${u},0\n  l 0,${d-2*f}\n  a ${p},${f} 0 0 0 ${u},0\n  l 0,-${d-2*f}\n`;g.append("path").attr("d",y).attr("fill","#eaeaea").attr("stroke","#000").attr("stroke-width",1).attr("class",h),i?g.attr("transform",`translate(${1.5*u}, ${c.height/4-2*f})`):g.attr("transform",`translate(${1.5*u}, ${(c.height+f)/4})`),e.rectData=c,Zvt(r,rn(e.description))(e.description,l,c.x,c.y+(i?(c.height+d)/4:(c.height+f)/2),c.width,c.height,{class:`actor ${bvt}`},r);let m=g.select("path:last-child");if(m.node()){let t=m.node().getBBox();e.height=t.height+(r.sequence.labelBoxHeight??0)}return e.height}),"drawActorTypeDatabase"),Mvt=g((function(t,e,r,i){let n=i?e.stopy:e.starty,a=e.x+e.width/2,s=n+80,o=30,l=t.append("g").lower();i||(Evt++,l.append("line").attr("id","actor"+Evt).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),e.actorCnt=Evt);let c=t.append("g"),h=kvt;h+=i?` ${xvt}`:` ${mvt}`,c.attr("class",h),c.attr("name",e.name);let u=vT();u.x=e.x,u.y=n,u.fill="#eaeaea",u.width=e.width,u.height=e.height,u.class="actor",c.append("line").attr("id","actor-man-torso"+Evt).attr("x1",e.x+e.width/2-75).attr("y1",n+10).attr("x2",e.x+e.width/2-15).attr("y2",n+10),c.append("line").attr("id","actor-man-arms"+Evt).attr("x1",e.x+e.width/2-75).attr("y1",n+0).attr("x2",e.x+e.width/2-75).attr("y2",n+20),c.append("circle").attr("cx",e.x+e.width/2).attr("cy",n+10).attr("r",o);let d=c.node().getBBox();return e.height=d.height+(r.sequence.labelBoxHeight??0),Zvt(r,rn(e.description))(e.description,c,u.x,u.y+(i?11:18),u.width,u.height,{class:`actor ${kvt}`},r),c.attr("transform","translate(0,22)"),e.height}),"drawActorTypeBoundary"),Ovt=g((function(t,e,r,i){let n=i?e.stopy:e.starty,a=e.x+e.width/2,s=n+80,o=t.append("g").lower();i||(Evt++,o.append("line").attr("id","actor"+Evt).attr("x1",a).attr("y1",s).attr("x2",a).attr("y2",2e3).attr("class","actor-line 200").attr("stroke-width","0.5px").attr("stroke","#999").attr("name",e.name),e.actorCnt=Evt);let l=t.append("g"),c=kvt;c+=i?` ${xvt}`:` ${mvt}`,l.attr("class",c),l.attr("name",e.name);let h=vT();h.x=e.x,h.y=n,h.fill="#eaeaea",h.width=e.width,h.height=e.height,h.class="actor",h.rx=3,h.ry=3,l.append("line").attr("id","actor-man-torso"+Evt).attr("x1",a).attr("y1",n+25).attr("x2",a).attr("y2",n+45),l.append("line").attr("id","actor-man-arms"+Evt).attr("x1",a-yvt/2).attr("y1",n+33).attr("x2",a+yvt/2).attr("y2",n+33),l.append("line").attr("x1",a-yvt/2).attr("y1",n+60).attr("x2",a).attr("y2",n+45),l.append("line").attr("x1",a).attr("y1",n+45).attr("x2",a+yvt/2-2).attr("y2",n+60);let u=l.append("circle");u.attr("cx",e.x+e.width/2),u.attr("cy",n+10),u.attr("r",15),u.attr("width",e.width),u.attr("height",e.height);let d=l.node().getBBox();return e.height=d.height,Zvt(r,rn(e.description))(e.description,l,h.x,h.y+35,h.width,h.height,{class:`actor ${kvt}`},r),e.height}),"drawActorTypeActor"),Pvt=g((async function(t,e,r,i){switch(e.type){case"actor":return await Ovt(t,e,r,i);case"participant":return await $vt(t,e,r,i);case"boundary":return await Mvt(t,e,r,i);case"control":return await Ivt(t,e,r,i);case"entity":return await Nvt(t,e,r,i);case"database":return await Dvt(t,e,r,i);case"collections":return await Lvt(t,e,r,i);case"queue":return await Rvt(t,e,r,i)}}),"drawActor"),Bvt=g((function(t,e,r){let i=t.append("g");Uvt(i,e),e.name&&Zvt(r)(e.name,i,e.x,e.y+r.boxTextMargin+(e.textMaxHeight||0)/2,e.width,0,{class:"text"},r),i.lower()}),"drawBox"),Fvt=g((function(t){return t.append("g")}),"anchorElement"),zvt=g((function(t,e,r,i,n){let a=vT(),s=e.anchored;a.x=e.startx,a.y=e.starty,a.class="activation"+n%3,a.width=e.stopx-e.startx,a.height=r-e.starty,vvt(s,a)}),"drawActivation"),jvt=g((async function(t,e,r,i){let{boxMargin:n,boxTextMargin:a,labelBoxHeight:s,labelBoxWidth:o,messageFontFamily:l,messageFontSize:c,messageFontWeight:h}=i,u=t.append("g"),d=g((function(t,e,r,i){return u.append("line").attr("x1",t).attr("y1",e).attr("x2",r).attr("y2",i).attr("class","loopLine")}),"drawLoopLine");d(e.startx,e.starty,e.stopx,e.starty),d(e.stopx,e.starty,e.stopx,e.stopy),d(e.startx,e.stopy,e.stopx,e.stopy),d(e.startx,e.starty,e.startx,e.stopy),void 0!==e.sections&&e.sections.forEach((function(t){d(e.startx,t.y,e.stopx,t.y).style("stroke-dasharray","3, 3")}));let p=TT();p.text=r,p.x=e.startx,p.y=e.starty,p.fontFamily=l,p.fontSize=c,p.fontWeight=h,p.anchor="middle",p.valign="middle",p.tspan=!1,p.width=o||50,p.height=s||20,p.textMargin=a,p.class="labelText",Cvt(u,p),p=Kvt(),p.text=e.title,p.x=e.startx+o/2+(e.stopx-e.startx)/2,p.y=e.starty+n+a,p.anchor="middle",p.valign="middle",p.textMargin=a,p.class="loopText",p.fontFamily=l,p.fontSize=c,p.fontWeight=h,p.wrap=!0;let f=rn(p.text)?await _vt(u,p,e):Svt(u,p);if(void 0!==e.sectionTitles)for(let[t,r]of Object.entries(e.sectionTitles))if(r.message){p.text=r.message,p.x=e.startx+(e.stopx-e.startx)/2,p.y=e.sections[t].y+n+a,p.class="loopText",p.anchor="middle",p.valign="middle",p.tspan=!1,p.fontFamily=l,p.fontSize=c,p.fontWeight=h,p.wrap=e.wrap,rn(p.text)?(e.starty=e.sections[t].y,await _vt(u,p,e)):Svt(u,p);let i=Math.round(f.map((t=>(t._groups||t)[0][0].getBBox().height)).reduce(((t,e)=>t+e)));e.sections[t].height+=i-(n+a)}return e.height=Math.round(e.stopy-e.starty),u}),"drawLoop"),Uvt=g((function(t,e){mT(t,e)}),"drawBackgroundRect"),Wvt=g((function(t){t.append("defs").append("symbol").attr("id","database").attr("fill-rule","evenodd").attr("clip-rule","evenodd").append("path").attr("transform","scale(.5)").attr("d","M12.258.001l.256.004.255.005.253.008.251.01.249.012.247.015.246.016.242.019.241.02.239.023.236.024.233.027.231.028.229.031.225.032.223.034.22.036.217.038.214.04.211.041.208.043.205.045.201.046.198.048.194.05.191.051.187.053.183.054.18.056.175.057.172.059.168.06.163.061.16.063.155.064.15.066.074.033.073.033.071.034.07.034.069.035.068.035.067.035.066.035.064.036.064.036.062.036.06.036.06.037.058.037.058.037.055.038.055.038.053.038.052.038.051.039.05.039.048.039.047.039.045.04.044.04.043.04.041.04.04.041.039.041.037.041.036.041.034.041.033.042.032.042.03.042.029.042.027.042.026.043.024.043.023.043.021.043.02.043.018.044.017.043.015.044.013.044.012.044.011.045.009.044.007.045.006.045.004.045.002.045.001.045v17l-.001.045-.002.045-.004.045-.006.045-.007.045-.009.044-.011.045-.012.044-.013.044-.015.044-.017.043-.018.044-.02.043-.021.043-.023.043-.024.043-.026.043-.027.042-.029.042-.03.042-.032.042-.033.042-.034.041-.036.041-.037.041-.039.041-.04.041-.041.04-.043.04-.044.04-.045.04-.047.039-.048.039-.05.039-.051.039-.052.038-.053.038-.055.038-.055.038-.058.037-.058.037-.06.037-.06.036-.062.036-.064.036-.064.036-.066.035-.067.035-.068.035-.069.035-.07.034-.071.034-.073.033-.074.033-.15.066-.155.064-.16.063-.163.061-.168.06-.172.059-.175.057-.18.056-.183.054-.187.053-.191.051-.194.05-.198.048-.201.046-.205.045-.208.043-.211.041-.214.04-.217.038-.22.036-.223.034-.225.032-.229.031-.231.028-.233.027-.236.024-.239.023-.241.02-.242.019-.246.016-.247.015-.249.012-.251.01-.253.008-.255.005-.256.004-.258.001-.258-.001-.256-.004-.255-.005-.253-.008-.251-.01-.249-.012-.247-.015-.245-.016-.243-.019-.241-.02-.238-.023-.236-.024-.234-.027-.231-.028-.228-.031-.226-.032-.223-.034-.22-.036-.217-.038-.214-.04-.211-.041-.208-.043-.204-.045-.201-.046-.198-.048-.195-.05-.19-.051-.187-.053-.184-.054-.179-.056-.176-.057-.172-.059-.167-.06-.164-.061-.159-.063-.155-.064-.151-.066-.074-.033-.072-.033-.072-.034-.07-.034-.069-.035-.068-.035-.067-.035-.066-.035-.064-.036-.063-.036-.062-.036-.061-.036-.06-.037-.058-.037-.057-.037-.056-.038-.055-.038-.053-.038-.052-.038-.051-.039-.049-.039-.049-.039-.046-.039-.046-.04-.044-.04-.043-.04-.041-.04-.04-.041-.039-.041-.037-.041-.036-.041-.034-.041-.033-.042-.032-.042-.03-.042-.029-.042-.027-.042-.026-.043-.024-.043-.023-.043-.021-.043-.02-.043-.018-.044-.017-.043-.015-.044-.013-.044-.012-.044-.011-.045-.009-.044-.007-.045-.006-.045-.004-.045-.002-.045-.001-.045v-17l.001-.045.002-.045.004-.045.006-.045.007-.045.009-.044.011-.045.012-.044.013-.044.015-.044.017-.043.018-.044.02-.043.021-.043.023-.043.024-.043.026-.043.027-.042.029-.042.03-.042.032-.042.033-.042.034-.041.036-.041.037-.041.039-.041.04-.041.041-.04.043-.04.044-.04.046-.04.046-.039.049-.039.049-.039.051-.039.052-.038.053-.038.055-.038.056-.038.057-.037.058-.037.06-.037.061-.036.062-.036.063-.036.064-.036.066-.035.067-.035.068-.035.069-.035.07-.034.072-.034.072-.033.074-.033.151-.066.155-.064.159-.063.164-.061.167-.06.172-.059.176-.057.179-.056.184-.054.187-.053.19-.051.195-.05.198-.048.201-.046.204-.045.208-.043.211-.041.214-.04.217-.038.22-.036.223-.034.226-.032.228-.031.231-.028.234-.027.236-.024.238-.023.241-.02.243-.019.245-.016.247-.015.249-.012.251-.01.253-.008.255-.005.256-.004.258-.001.258.001zm-9.258 20.499v.01l.001.021.003.021.004.022.005.021.006.022.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.023.018.024.019.024.021.024.022.025.023.024.024.025.052.049.056.05.061.051.066.051.07.051.075.051.079.052.084.052.088.052.092.052.097.052.102.051.105.052.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.048.144.049.147.047.152.047.155.047.16.045.163.045.167.043.171.043.176.041.178.041.183.039.187.039.19.037.194.035.197.035.202.033.204.031.209.03.212.029.216.027.219.025.222.024.226.021.23.02.233.018.236.016.24.015.243.012.246.01.249.008.253.005.256.004.259.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.021.224-.024.22-.026.216-.027.212-.028.21-.031.205-.031.202-.034.198-.034.194-.036.191-.037.187-.039.183-.04.179-.04.175-.042.172-.043.168-.044.163-.045.16-.046.155-.046.152-.047.148-.048.143-.049.139-.049.136-.05.131-.05.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.053.083-.051.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.05.023-.024.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.023.01-.022.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.127l-.077.055-.08.053-.083.054-.085.053-.087.052-.09.052-.093.051-.095.05-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.045-.118.044-.12.043-.122.042-.124.042-.126.041-.128.04-.13.04-.132.038-.134.038-.135.037-.138.037-.139.035-.142.035-.143.034-.144.033-.147.032-.148.031-.15.03-.151.03-.153.029-.154.027-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.01-.179.008-.179.008-.181.006-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.006-.179-.008-.179-.008-.178-.01-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.027-.153-.029-.151-.03-.15-.03-.148-.031-.146-.032-.145-.033-.143-.034-.141-.035-.14-.035-.137-.037-.136-.037-.134-.038-.132-.038-.13-.04-.128-.04-.126-.041-.124-.042-.122-.042-.12-.044-.117-.043-.116-.045-.113-.045-.112-.046-.109-.047-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.05-.093-.052-.09-.051-.087-.052-.085-.053-.083-.054-.08-.054-.077-.054v4.127zm0-5.654v.011l.001.021.003.021.004.021.005.022.006.022.007.022.009.022.01.022.011.023.012.023.013.023.015.024.016.023.017.024.018.024.019.024.021.024.022.024.023.025.024.024.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.052.11.051.114.051.119.052.123.05.127.051.131.05.135.049.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.044.171.042.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.022.23.02.233.018.236.016.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.012.241-.015.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.048.139-.05.136-.049.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.051.051-.049.023-.025.023-.024.021-.025.02-.024.019-.024.018-.024.017-.024.015-.023.014-.023.013-.024.012-.022.01-.023.01-.023.008-.022.006-.022.006-.022.004-.021.004-.022.001-.021.001-.021v-4.139l-.077.054-.08.054-.083.054-.085.052-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.049-.105.048-.106.047-.109.047-.111.046-.114.045-.115.044-.118.044-.12.044-.122.042-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.035-.143.033-.144.033-.147.033-.148.031-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.025-.161.024-.162.023-.163.022-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.011-.178.009-.179.009-.179.007-.181.007-.182.005-.182.004-.184.003-.184.002h-.37l-.184-.002-.184-.003-.182-.004-.182-.005-.181-.007-.179-.007-.179-.009-.178-.009-.176-.011-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.022-.162-.023-.161-.024-.159-.025-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.031-.146-.033-.145-.033-.143-.033-.141-.035-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.04-.126-.041-.124-.042-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.047-.105-.048-.102-.049-.1-.049-.097-.05-.095-.051-.093-.051-.09-.051-.087-.053-.085-.052-.083-.054-.08-.054-.077-.054v4.139zm0-5.666v.011l.001.02.003.022.004.021.005.022.006.021.007.022.009.023.01.022.011.023.012.023.013.023.015.023.016.024.017.024.018.023.019.024.021.025.022.024.023.024.024.025.052.05.056.05.061.05.066.051.07.051.075.052.079.051.084.052.088.052.092.052.097.052.102.052.105.051.11.052.114.051.119.051.123.051.127.05.131.05.135.05.139.049.144.048.147.048.152.047.155.046.16.045.163.045.167.043.171.043.176.042.178.04.183.04.187.038.19.037.194.036.197.034.202.033.204.032.209.03.212.028.216.027.219.025.222.024.226.021.23.02.233.018.236.017.24.014.243.012.246.01.249.008.253.006.256.003.259.001.26-.001.257-.003.254-.006.25-.008.247-.01.244-.013.241-.014.237-.016.233-.018.231-.02.226-.022.224-.024.22-.025.216-.027.212-.029.21-.03.205-.032.202-.033.198-.035.194-.036.191-.037.187-.039.183-.039.179-.041.175-.042.172-.043.168-.044.163-.045.16-.045.155-.047.152-.047.148-.048.143-.049.139-.049.136-.049.131-.051.126-.05.123-.051.118-.052.114-.051.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.052.07-.051.065-.051.06-.051.056-.05.051-.049.023-.025.023-.025.021-.024.02-.024.019-.024.018-.024.017-.024.015-.023.014-.024.013-.023.012-.023.01-.022.01-.023.008-.022.006-.022.006-.022.004-.022.004-.021.001-.021.001-.021v-4.153l-.077.054-.08.054-.083.053-.085.053-.087.053-.09.051-.093.051-.095.051-.097.05-.1.049-.102.048-.105.048-.106.048-.109.046-.111.046-.114.046-.115.044-.118.044-.12.043-.122.043-.124.042-.126.041-.128.04-.13.039-.132.039-.134.038-.135.037-.138.036-.139.036-.142.034-.143.034-.144.033-.147.032-.148.032-.15.03-.151.03-.153.028-.154.028-.156.027-.158.026-.159.024-.161.024-.162.023-.163.023-.165.021-.166.02-.167.019-.169.018-.169.017-.171.016-.173.015-.173.014-.175.013-.175.012-.177.01-.178.01-.179.009-.179.007-.181.006-.182.006-.182.004-.184.003-.184.001-.185.001-.185-.001-.184-.001-.184-.003-.182-.004-.182-.006-.181-.006-.179-.007-.179-.009-.178-.01-.176-.01-.176-.012-.175-.013-.173-.014-.172-.015-.171-.016-.17-.017-.169-.018-.167-.019-.166-.02-.165-.021-.163-.023-.162-.023-.161-.024-.159-.024-.157-.026-.156-.027-.155-.028-.153-.028-.151-.03-.15-.03-.148-.032-.146-.032-.145-.033-.143-.034-.141-.034-.14-.036-.137-.036-.136-.037-.134-.038-.132-.039-.13-.039-.128-.041-.126-.041-.124-.041-.122-.043-.12-.043-.117-.044-.116-.044-.113-.046-.112-.046-.109-.046-.106-.048-.105-.048-.102-.048-.1-.05-.097-.049-.095-.051-.093-.051-.09-.052-.087-.052-.085-.053-.083-.053-.08-.054-.077-.054v4.153zm8.74-8.179l-.257.004-.254.005-.25.008-.247.011-.244.012-.241.014-.237.016-.233.018-.231.021-.226.022-.224.023-.22.026-.216.027-.212.028-.21.031-.205.032-.202.033-.198.034-.194.036-.191.038-.187.038-.183.04-.179.041-.175.042-.172.043-.168.043-.163.045-.16.046-.155.046-.152.048-.148.048-.143.048-.139.049-.136.05-.131.05-.126.051-.123.051-.118.051-.114.052-.11.052-.106.052-.101.052-.096.052-.092.052-.088.052-.083.052-.079.052-.074.051-.07.052-.065.051-.06.05-.056.05-.051.05-.023.025-.023.024-.021.024-.02.025-.019.024-.018.024-.017.023-.015.024-.014.023-.013.023-.012.023-.01.023-.01.022-.008.022-.006.023-.006.021-.004.022-.004.021-.001.021-.001.021.001.021.001.021.004.021.004.022.006.021.006.023.008.022.01.022.01.023.012.023.013.023.014.023.015.024.017.023.018.024.019.024.02.025.021.024.023.024.023.025.051.05.056.05.06.05.065.051.07.052.074.051.079.052.083.052.088.052.092.052.096.052.101.052.106.052.11.052.114.052.118.051.123.051.126.051.131.05.136.05.139.049.143.048.148.048.152.048.155.046.16.046.163.045.168.043.172.043.175.042.179.041.183.04.187.038.191.038.194.036.198.034.202.033.205.032.21.031.212.028.216.027.22.026.224.023.226.022.231.021.233.018.237.016.241.014.244.012.247.011.25.008.254.005.257.004.26.001.26-.001.257-.004.254-.005.25-.008.247-.011.244-.012.241-.014.237-.016.233-.018.231-.021.226-.022.224-.023.22-.026.216-.027.212-.028.21-.031.205-.032.202-.033.198-.034.194-.036.191-.038.187-.038.183-.04.179-.041.175-.042.172-.043.168-.043.163-.045.16-.046.155-.046.152-.048.148-.048.143-.048.139-.049.136-.05.131-.05.126-.051.123-.051.118-.051.114-.052.11-.052.106-.052.101-.052.096-.052.092-.052.088-.052.083-.052.079-.052.074-.051.07-.052.065-.051.06-.05.056-.05.051-.05.023-.025.023-.024.021-.024.02-.025.019-.024.018-.024.017-.023.015-.024.014-.023.013-.023.012-.023.01-.023.01-.022.008-.022.006-.023.006-.021.004-.022.004-.021.001-.021.001-.021-.001-.021-.001-.021-.004-.021-.004-.022-.006-.021-.006-.023-.008-.022-.01-.022-.01-.023-.012-.023-.013-.023-.014-.023-.015-.024-.017-.023-.018-.024-.019-.024-.02-.025-.021-.024-.023-.024-.023-.025-.051-.05-.056-.05-.06-.05-.065-.051-.07-.052-.074-.051-.079-.052-.083-.052-.088-.052-.092-.052-.096-.052-.101-.052-.106-.052-.11-.052-.114-.052-.118-.051-.123-.051-.126-.051-.131-.05-.136-.05-.139-.049-.143-.048-.148-.048-.152-.048-.155-.046-.16-.046-.163-.045-.168-.043-.172-.043-.175-.042-.179-.041-.183-.04-.187-.038-.191-.038-.194-.036-.198-.034-.202-.033-.205-.032-.21-.031-.212-.028-.216-.027-.22-.026-.224-.023-.226-.022-.231-.021-.233-.018-.237-.016-.241-.014-.244-.012-.247-.011-.25-.008-.254-.005-.257-.004-.26-.001-.26.001z")}),"insertDatabaseIcon"),qvt=g((function(t){t.append("defs").append("symbol").attr("id","computer").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M2 2v13h20v-13h-20zm18 11h-16v-9h16v9zm-10.228 6l.466-1h3.524l.467 1h-4.457zm14.228 3h-24l2-6h2.104l-1.33 4h18.45l-1.297-4h2.073l2 6zm-5-10h-14v-7h14v7z")}),"insertComputerIcon"),Yvt=g((function(t){t.append("defs").append("symbol").attr("id","clock").attr("width","24").attr("height","24").append("path").attr("transform","scale(.5)").attr("d","M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.848 12.459c.202.038.202.333.001.372-1.907.361-6.045 1.111-6.547 1.111-.719 0-1.301-.582-1.301-1.301 0-.512.77-5.447 1.125-7.445.034-.192.312-.181.343.014l.985 6.238 5.394 1.011z")}),"insertClockIcon"),Gvt=g((function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",7.9).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto-start-reverse").append("path").attr("d","M -1 0 L 10 5 L 0 10 z")}),"insertArrowHead"),Hvt=g((function(t){t.append("defs").append("marker").attr("id","filled-head").attr("refX",15.5).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")}),"insertArrowFilledHead"),Vvt=g((function(t){t.append("defs").append("marker").attr("id","sequencenumber").attr("refX",15).attr("refY",15).attr("markerWidth",60).attr("markerHeight",40).attr("orient","auto").append("circle").attr("cx",15).attr("cy",15).attr("r",6)}),"insertSequenceNumber"),Xvt=g((function(t){t.append("defs").append("marker").attr("id","crosshead").attr("markerWidth",15).attr("markerHeight",8).attr("orient","auto").attr("refX",4).attr("refY",4.5).append("path").attr("fill","none").attr("stroke","#000000").style("stroke-dasharray","0, 0").attr("stroke-width","1pt").attr("d","M 1,2 L 6,7 M 6,2 L 1,7")}),"insertArrowCrossHead"),Kvt=g((function(){return{x:0,y:0,fill:void 0,anchor:void 0,style:"#666",width:void 0,height:void 0,textMargin:0,rx:0,ry:0,tspan:!0,valign:void 0}}),"getTextObj"),Qvt=g((function(){return{x:0,y:0,fill:"#EDF2AE",stroke:"#666",width:100,anchor:"start",height:100,rx:0,ry:0}}),"getNoteRect"),Zvt=function(){function t(t,e,r,i,a,s,o){n(e.append("text").attr("x",r+a/2).attr("y",i+s/2+5).style("text-anchor","middle").text(t),o)}function e(t,e,r,i,a,s,o,l){let{actorFontSize:c,actorFontFamily:h,actorFontWeight:u}=l,[d,p]=bL(c),f=t.split(on.lineBreakRegex);for(let t=0;t<f.length;t++){let l=t*d-d*(f.length-1)/2,c=e.append("text").attr("x",r+a/2).attr("y",i).style("text-anchor","middle").style("font-size",p).style("font-weight",u).style("font-family",h);c.append("tspan").attr("x",r+a/2).attr("dy",l).text(f[t]),c.attr("y",i+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),n(c,o)}}function r(t,r,i,a,s,o,l,c){let h=r.append("switch"),u=h.append("foreignObject").attr("x",i).attr("y",a).attr("width",s).attr("height",o).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,h,i,a,s,o,l,c),n(u,l)}async function i(t,r,i,a,s,o,l,c){let h=await nn(t,Re()),u=r.append("switch"),d=u.append("foreignObject").attr("x",i+s/2-h.width/2).attr("y",a+o/2-h.height/2).attr("width",h.width).attr("height",h.height).append("xhtml:div").style("height","100%").style("width","100%");d.append("div").style("text-align","center").style("vertical-align","middle").html(await sn(t,Re())),e(t,u,i,a,s,o,l,c),n(d,l)}function n(t,e){for(let r in e)e.hasOwnProperty(r)&&t.attr(r,e[r])}return g(t,"byText"),g(e,"byTspan"),g(r,"byFo"),g(i,"byKatex"),g(n,"_setTextAttrs"),function(n,a=!1){return a?i:"fo"===n.textPlacement?r:"old"===n.textPlacement?t:e}}(),Jvt=function(){function t(t,e,r,n,a,s,o){i(e.append("text").attr("x",r).attr("y",n).style("text-anchor","start").text(t),o)}function e(t,e,r,n,a,s,o,l){let{actorFontSize:c,actorFontFamily:h,actorFontWeight:u}=l,d=t.split(on.lineBreakRegex);for(let t=0;t<d.length;t++){let a=t*c-c*(d.length-1)/2,l=e.append("text").attr("x",r).attr("y",n).style("text-anchor","start").style("font-size",c).style("font-weight",u).style("font-family",h);l.append("tspan").attr("x",r).attr("dy",a).text(d[t]),l.attr("y",n+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(l,o)}}function r(t,r,n,a,s,o,l,c){let h=r.append("switch"),u=h.append("foreignObject").attr("x",n).attr("y",a).attr("width",s).attr("height",o).append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,h,n,a,0,o,l,c),i(u,l)}function i(t,e){for(let r in e)e.hasOwnProperty(r)&&t.attr(r,e[r])}return g(t,"byText"),g(e,"byTspan"),g(r,"byFo"),g(i,"_setTextAttrs"),function(i){return"fo"===i.textPlacement?r:"old"===i.textPlacement?t:e}}(),tTt={drawRect:vvt,drawText:Svt,drawLabel:Cvt,drawActor:Pvt,drawBox:Bvt,drawPopup:Tvt,anchorElement:Fvt,drawActivation:zvt,drawLoop:jvt,drawBackgroundRect:Uvt,insertArrowHead:Gvt,insertArrowFilledHead:Hvt,insertSequenceNumber:Vvt,insertArrowCrossHead:Xvt,insertDatabaseIcon:Wvt,insertComputerIcon:qvt,insertClockIcon:Yvt,getTextObj:Kvt,getNoteRect:Qvt,fixLifeLineHeights:Avt,sanitizeUrl:gvt.sanitizeUrl}}));async function sTt(t,e){dTt.bumpVerticalPos(10);let{startx:r,stopx:i,message:n}=e,a=on.splitBreaks(n).length,s=rn(n),o=s?await nn(n,na()):kL.calculateTextDimensions(n,fTt(uTt));if(!s){let t=o.height/a;e.height+=t,dTt.bumpVerticalPos(t)}let l,c=o.height-10,h=o.width;if(r===i){l=dTt.getVerticalPos()+c,uTt.rightAngles||(c+=uTt.boxMargin,l=dTt.getVerticalPos()+c),c+=30;let t=on.getMax(h/2,uTt.width/2);dTt.insert(r-t,dTt.getVerticalPos()-10+c,i+t,dTt.getVerticalPos()+30+c)}else c+=uTt.boxMargin,l=dTt.getVerticalPos()+c,dTt.insert(r,l-10,i,l);return dTt.bumpVerticalPos(c),e.height+=c,e.stopy=e.starty+e.height,dTt.insert(e.fromBounds,e.starty,e.toBounds,e.stopy),l}function oTt(t,e,r,i,n){dTt.bumpVerticalPos(r);let a=i;if(e.id&&e.message&&t[e.id]){let r=t[e.id].width,n=fTt(uTt);e.message=kL.wrapLabel(`[${e.message}]`,r-2*uTt.wrapPadding,n),e.width=r,e.wrap=!0;let s=kL.calculateTextDimensions(e.message,n),o=on.getMax(s.height,uTt.labelBoxHeight);a=i+o,et.debug(`${o} - ${e.message}`)}n(e),dTt.bumpVerticalPos(a)}function lTt(t,e,r,i,n,a,s){function o(r,i){r.x<n.get(t.from).x?(dTt.insert(e.stopx-i,e.starty,e.startx,e.stopy+r.height/2+uTt.noteMargin),e.stopx=e.stopx+i):(dTt.insert(e.startx,e.starty,e.stopx+i,e.stopy+r.height/2+uTt.noteMargin),e.stopx=e.stopx-i)}function l(r,i){r.x<n.get(t.to).x?(dTt.insert(e.startx-i,e.starty,e.stopx,e.stopy+r.height/2+uTt.noteMargin),e.startx=e.startx+i):(dTt.insert(e.stopx,e.starty,e.startx+i,e.stopy+r.height/2+uTt.noteMargin),e.startx=e.startx-i)}g(o,"receiverAdjustment"),g(l,"senderAdjustment");let c=[uvt.ACTOR,uvt.CONTROL,uvt.ENTITY,uvt.DATABASE];if(a.get(t.to)==i){let e=n.get(t.to);o(e,c.includes(e.type)?yvt/2+3:e.width/2+3),e.starty=r-e.height/2,dTt.bumpVerticalPos(e.height/2)}else if(s.get(t.from)==i){let e=n.get(t.from);if(uTt.mirrorActors){l(e,c.includes(e.type)?yvt/2:e.width/2)}e.stopy=r-e.height/2,dTt.bumpVerticalPos(e.height/2)}else if(s.get(t.to)==i){let e=n.get(t.to);if(uTt.mirrorActors){o(e,c.includes(e.type)?yvt/2+3:e.width/2+3)}e.stopy=r-e.height/2,dTt.bumpVerticalPos(e.height/2)}}async function cTt(t,e,r){let i={};for(let n of e)if(t.get(n.to)&&t.get(n.from)){let e=t.get(n.to);if(n.placement===r.db.PLACEMENT.LEFTOF&&!e.prevActor||n.placement===r.db.PLACEMENT.RIGHTOF&&!e.nextActor)continue;let a=void 0!==n.placement,s=!a,o=a?gTt(uTt):fTt(uTt),l=n.wrap?kL.wrapLabel(n.message,uTt.width-2*uTt.wrapPadding,o):n.message,c=(rn(l)?await nn(n.message,na()):kL.calculateTextDimensions(l,o)).width+2*uTt.wrapPadding;s&&n.from===e.nextActor?i[n.to]=on.getMax(i[n.to]||0,c):s&&n.from===e.prevActor?i[n.from]=on.getMax(i[n.from]||0,c):s&&n.from===n.to?(i[n.from]=on.getMax(i[n.from]||0,c/2),i[n.to]=on.getMax(i[n.to]||0,c/2)):n.placement===r.db.PLACEMENT.RIGHTOF?i[n.from]=on.getMax(i[n.from]||0,c):n.placement===r.db.PLACEMENT.LEFTOF?i[e.prevActor]=on.getMax(i[e.prevActor]||0,c):n.placement===r.db.PLACEMENT.OVER&&(e.prevActor&&(i[e.prevActor]=on.getMax(i[e.prevActor]||0,c/2)),e.nextActor&&(i[n.from]=on.getMax(i[n.from]||0,c/2)))}return et.debug("maxMessageWidthPerActor:",i),i}async function hTt(t,e,r){let i=0;for(let e of t.keys()){let r=t.get(e);r.wrap&&(r.description=kL.wrapLabel(r.description,uTt.width-2*uTt.wrapPadding,yTt(uTt)));let n=rn(r.description)?await nn(r.description,na()):kL.calculateTextDimensions(r.description,yTt(uTt));r.width=r.wrap?uTt.width:on.getMax(uTt.width,n.width+2*uTt.wrapPadding),r.height=r.wrap?on.getMax(n.height,uTt.height):uTt.height,i=on.getMax(i,r.height)}for(let r in e){let i=t.get(r);if(!i)continue;let n=t.get(i.nextActor);if(!n){let t=e[r]+uTt.actorMargin-i.width/2;i.margin=on.getMax(t,uTt.actorMargin);continue}let a=e[r]+uTt.actorMargin-i.width/2-n.width/2;i.margin=on.getMax(a,uTt.actorMargin)}let n=0;return r.forEach((e=>{let r=fTt(uTt),i=e.actorKeys.reduce(((e,r)=>e+(t.get(r).width+(t.get(r).margin||0))),0);i+=8*uTt.boxMargin,i-=2*uTt.boxTextMargin,e.wrap&&(e.name=kL.wrapLabel(e.name,i-2*uTt.wrapPadding,r));let a=kL.calculateTextDimensions(e.name,r);n=on.getMax(a.height,n);let s=on.getMax(i,a.width+2*uTt.wrapPadding);if(e.margin=uTt.boxTextMargin,i<s){let t=(s-i)/2;e.margin+=t}})),r.forEach((t=>t.textMaxHeight=n)),on.getMax(i,uTt.height)}var uTt,dTt,pTt,fTt,gTt,yTt,mTt,xTt,bTt,kTt,vTt,TTt,wTt,_Tt,STt,CTt,ETt,ATt,$Tt,LTt=y((()=>{QT(),aTt(),We(),gn(),gn(),tw(),ns(),je(),_L(),Un(),iTt(),uTt={},dTt={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],activations:[],models:{getHeight:g((function(){return Math.max.apply(null,0===this.actors.length?[0]:this.actors.map((t=>t.height||0)))+(0===this.loops.length?0:this.loops.map((t=>t.height||0)).reduce(((t,e)=>t+e)))+(0===this.messages.length?0:this.messages.map((t=>t.height||0)).reduce(((t,e)=>t+e)))+(0===this.notes.length?0:this.notes.map((t=>t.height||0)).reduce(((t,e)=>t+e)))}),"getHeight"),clear:g((function(){this.actors=[],this.boxes=[],this.loops=[],this.messages=[],this.notes=[]}),"clear"),addBox:g((function(t){this.boxes.push(t)}),"addBox"),addActor:g((function(t){this.actors.push(t)}),"addActor"),addLoop:g((function(t){this.loops.push(t)}),"addLoop"),addMessage:g((function(t){this.messages.push(t)}),"addMessage"),addNote:g((function(t){this.notes.push(t)}),"addNote"),lastActor:g((function(){return this.actors[this.actors.length-1]}),"lastActor"),lastLoop:g((function(){return this.loops[this.loops.length-1]}),"lastLoop"),lastMessage:g((function(){return this.messages[this.messages.length-1]}),"lastMessage"),lastNote:g((function(){return this.notes[this.notes.length-1]}),"lastNote"),actors:[],boxes:[],loops:[],messages:[],notes:[]},init:g((function(){this.sequenceItems=[],this.activations=[],this.models.clear(),this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0,vTt(na())}),"init"),updateVal:g((function(t,e,r,i){void 0===t[e]?t[e]=r:t[e]=i(r,t[e])}),"updateVal"),updateBounds:g((function(t,e,r,i){let n=this,a=0;function s(s){return g((function(o){a++;let l=n.sequenceItems.length-a+1;n.updateVal(o,"starty",e-l*uTt.boxMargin,Math.min),n.updateVal(o,"stopy",i+l*uTt.boxMargin,Math.max),n.updateVal(dTt.data,"startx",t-l*uTt.boxMargin,Math.min),n.updateVal(dTt.data,"stopx",r+l*uTt.boxMargin,Math.max),"activation"!==s&&(n.updateVal(o,"startx",t-l*uTt.boxMargin,Math.min),n.updateVal(o,"stopx",r+l*uTt.boxMargin,Math.max),n.updateVal(dTt.data,"starty",e-l*uTt.boxMargin,Math.min),n.updateVal(dTt.data,"stopy",i+l*uTt.boxMargin,Math.max))}),"updateItemBounds")}g(s,"updateFn"),this.sequenceItems.forEach(s()),this.activations.forEach(s("activation"))}),"updateBounds"),insert:g((function(t,e,r,i){let n=on.getMin(t,r),a=on.getMax(t,r),s=on.getMin(e,i),o=on.getMax(e,i);this.updateVal(dTt.data,"startx",n,Math.min),this.updateVal(dTt.data,"starty",s,Math.min),this.updateVal(dTt.data,"stopx",a,Math.max),this.updateVal(dTt.data,"stopy",o,Math.max),this.updateBounds(n,s,a,o)}),"insert"),newActivation:g((function(t,e,r){let i=r.get(t.from),n=TTt(t.from).length||0,a=i.x+i.width/2+(n-1)*uTt.activationWidth/2;this.activations.push({startx:a,starty:this.verticalPos+2,stopx:a+uTt.activationWidth,stopy:void 0,actor:t.from,anchored:tTt.anchorElement(e)})}),"newActivation"),endActivation:g((function(t){let e=this.activations.map((function(t){return t.actor})).lastIndexOf(t.from);return this.activations.splice(e,1)[0]}),"endActivation"),createLoop:g((function(t={message:void 0,wrap:!1,width:void 0},e){return{startx:void 0,starty:this.verticalPos,stopx:void 0,stopy:void 0,title:t.message,wrap:t.wrap,width:t.width,height:0,fill:e}}),"createLoop"),newLoop:g((function(t={message:void 0,wrap:!1,width:void 0},e){this.sequenceItems.push(this.createLoop(t,e))}),"newLoop"),endLoop:g((function(){return this.sequenceItems.pop()}),"endLoop"),isLoopOverlap:g((function(){return!!this.sequenceItems.length&&this.sequenceItems[this.sequenceItems.length-1].overlap}),"isLoopOverlap"),addSectionToLoop:g((function(t){let e=this.sequenceItems.pop();e.sections=e.sections||[],e.sectionTitles=e.sectionTitles||[],e.sections.push({y:dTt.getVerticalPos(),height:0}),e.sectionTitles.push(t),this.sequenceItems.push(e)}),"addSectionToLoop"),saveVerticalPos:g((function(){this.isLoopOverlap()&&(this.savedVerticalPos=this.verticalPos)}),"saveVerticalPos"),resetVerticalPos:g((function(){this.isLoopOverlap()&&(this.verticalPos=this.savedVerticalPos)}),"resetVerticalPos"),bumpVerticalPos:g((function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=on.getMax(this.data.stopy,this.verticalPos)}),"bumpVerticalPos"),getVerticalPos:g((function(){return this.verticalPos}),"getVerticalPos"),getBounds:g((function(){return{bounds:this.data,models:this.models}}),"getBounds")},pTt=g((async function(t,e){dTt.bumpVerticalPos(uTt.boxMargin),e.height=uTt.boxMargin,e.starty=dTt.getVerticalPos();let r=vT();r.x=e.startx,r.y=e.starty,r.width=e.width||uTt.width,r.class="note";let i=t.append("g"),n=tTt.drawRect(i,r),a=TT();a.x=e.startx,a.y=e.starty,a.width=r.width,a.dy="1em",a.text=e.message,a.class="noteText",a.fontFamily=uTt.noteFontFamily,a.fontSize=uTt.noteFontSize,a.fontWeight=uTt.noteFontWeight,a.anchor=uTt.noteAlign,a.textMargin=uTt.noteMargin,a.valign="center";let s=rn(a.text)?await _vt(i,a):Svt(i,a),o=Math.round(s.map((t=>(t._groups||t)[0][0].getBBox().height)).reduce(((t,e)=>t+e)));n.attr("height",o+2*uTt.noteMargin),e.height+=o+2*uTt.noteMargin,dTt.bumpVerticalPos(o+2*uTt.noteMargin),e.stopy=e.starty+o+2*uTt.noteMargin,e.stopx=e.startx+r.width,dTt.insert(e.startx,e.starty,e.stopx,e.stopy),dTt.models.addNote(e)}),"drawNote"),fTt=g((t=>({fontFamily:t.messageFontFamily,fontSize:t.messageFontSize,fontWeight:t.messageFontWeight})),"messageFont"),gTt=g((t=>({fontFamily:t.noteFontFamily,fontSize:t.noteFontSize,fontWeight:t.noteFontWeight})),"noteFont"),yTt=g((t=>({fontFamily:t.actorFontFamily,fontSize:t.actorFontSize,fontWeight:t.actorFontWeight})),"actorFont"),g(sTt,"boundMessage"),mTt=g((async function(t,e,r,i){let{startx:n,stopx:a,starty:s,message:o,type:l,sequenceIndex:c,sequenceVisible:h}=e,u=kL.calculateTextDimensions(o,fTt(uTt)),d=TT();d.x=n,d.y=s+10,d.width=a-n,d.class="messageText",d.dy="1em",d.text=o,d.fontFamily=uTt.messageFontFamily,d.fontSize=uTt.messageFontSize,d.fontWeight=uTt.messageFontWeight,d.anchor=uTt.messageAlign,d.valign="center",d.textMargin=uTt.wrapPadding,d.tspan=!1,rn(d.text)?await _vt(t,d,{startx:n,stopx:a,starty:r}):Svt(t,d);let p,f=u.width;n===a?p=uTt.rightAngles?t.append("path").attr("d",`M  ${n},${r} H ${n+on.getMax(uTt.width/2,f/2)} V ${r+25} H ${n}`):t.append("path").attr("d","M "+n+","+r+" C "+(n+60)+","+(r-10)+" "+(n+60)+","+(r+30)+" "+n+","+(r+20)):(p=t.append("line"),p.attr("x1",n),p.attr("y1",r),p.attr("x2",a),p.attr("y2",r)),l===i.db.LINETYPE.DOTTED||l===i.db.LINETYPE.DOTTED_CROSS||l===i.db.LINETYPE.DOTTED_POINT||l===i.db.LINETYPE.DOTTED_OPEN||l===i.db.LINETYPE.BIDIRECTIONAL_DOTTED?(p.style("stroke-dasharray","3, 3"),p.attr("class","messageLine1")):p.attr("class","messageLine0");let g="";uTt.arrowMarkerAbsolute&&(g=Gi(!0)),p.attr("stroke-width",2),p.attr("stroke","none"),p.style("fill","none"),(l===i.db.LINETYPE.SOLID||l===i.db.LINETYPE.DOTTED)&&p.attr("marker-end","url("+g+"#arrowhead)"),(l===i.db.LINETYPE.BIDIRECTIONAL_SOLID||l===i.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&(p.attr("marker-start","url("+g+"#arrowhead)"),p.attr("marker-end","url("+g+"#arrowhead)")),(l===i.db.LINETYPE.SOLID_POINT||l===i.db.LINETYPE.DOTTED_POINT)&&p.attr("marker-end","url("+g+"#filled-head)"),(l===i.db.LINETYPE.SOLID_CROSS||l===i.db.LINETYPE.DOTTED_CROSS)&&p.attr("marker-end","url("+g+"#crosshead)"),(h||uTt.showSequenceNumbers)&&((l===i.db.LINETYPE.BIDIRECTIONAL_SOLID||l===i.db.LINETYPE.BIDIRECTIONAL_DOTTED)&&(n<a?p.attr("x1",n+12):p.attr("x1",n+6)),t.append("line").attr("x1",n).attr("y1",r).attr("x2",n).attr("y2",r).attr("stroke-width",0).attr("marker-start","url("+g+"#sequencenumber)"),t.append("text").attr("x",n).attr("y",r+4).attr("font-family","sans-serif").attr("font-size","12px").attr("text-anchor","middle").attr("class","sequenceNumber").text(c))}),"drawMessage"),xTt=g((function(t,e,r,i,n,a,s){let o,l=0,c=0,h=0;for(let t of i){let i=e.get(t),a=i.box;o&&o!=a&&(s||dTt.models.addBox(o),c+=uTt.boxMargin+o.margin),a&&a!=o&&(s||(a.x=l+c,a.y=n),c+=a.margin),i.width=i.width||uTt.width,i.height=on.getMax(i.height||uTt.height,uTt.height),i.margin=i.margin||uTt.actorMargin,h=on.getMax(h,i.height),r.get(i.name)&&(c+=i.width/2),i.x=l+c,i.starty=dTt.getVerticalPos(),dTt.insert(i.x,n,i.x+i.width,i.height),l+=i.width+c,i.box&&(i.box.width=l+a.margin-i.box.x),c=i.margin,o=i.box,dTt.models.addActor(i)}o&&!s&&dTt.models.addBox(o),dTt.bumpVerticalPos(h)}),"addActorRenderingData"),bTt=g((async function(t,e,r,i){if(i){let i=0;dTt.bumpVerticalPos(2*uTt.boxMargin);for(let n of r){let r=e.get(n);r.stopy||(r.stopy=dTt.getVerticalPos());let a=await tTt.drawActor(t,r,uTt,!0);i=on.getMax(i,a)}dTt.bumpVerticalPos(i+uTt.boxMargin)}else for(let i of r){let r=e.get(i);await tTt.drawActor(t,r,uTt,!1)}}),"drawActors"),kTt=g((function(t,e,r,i){let n=0,a=0;for(let s of r){let r=e.get(s),o=STt(r),l=tTt.drawPopup(t,r,o,uTt,uTt.forceMenus,i);l.height>n&&(n=l.height),l.width+r.x>a&&(a=l.width+r.x)}return{maxHeight:n,maxWidth:a}}),"drawActorsPopup"),vTt=g((function(t){Z(uTt,t),t.fontFamily&&(uTt.actorFontFamily=uTt.noteFontFamily=uTt.messageFontFamily=t.fontFamily),t.fontSize&&(uTt.actorFontSize=uTt.noteFontSize=uTt.messageFontSize=t.fontSize),t.fontWeight&&(uTt.actorFontWeight=uTt.noteFontWeight=uTt.messageFontWeight=t.fontWeight)}),"setConf"),TTt=g((function(t){return dTt.activations.filter((function(e){return e.actor===t}))}),"actorActivations"),wTt=g((function(t,e){let r=e.get(t),i=TTt(t);return[i.reduce((function(t,e){return on.getMin(t,e.startx)}),r.x+r.width/2-1),i.reduce((function(t,e){return on.getMax(t,e.stopx)}),r.x+r.width/2+1)]}),"activationBounds"),g(oTt,"adjustLoopHeightForWrap"),g(lTt,"adjustCreatedDestroyedData"),_Tt=g((async function(t,e,r,i){let n,{securityLevel:a,sequence:s}=na();uTt=s,"sandbox"===a&&(n=nh("#i"+e));let o=nh("sandbox"===a?n.nodes()[0].contentDocument.body:"body"),l="sandbox"===a?n.nodes()[0].contentDocument:document;dTt.init(),et.debug(i.db);let c="sandbox"===a?o.select(`[id="${e}"]`):nh(`[id="${e}"]`),h=i.db.getActors(),u=i.db.getCreatedActors(),d=i.db.getDestroyedActors(),p=i.db.getBoxes(),f=i.db.getActorKeys(),y=i.db.getMessages(),m=i.db.getDiagramTitle(),x=i.db.hasAtLeastOneBox(),b=i.db.hasAtLeastOneBoxWithTitle(),k=await cTt(h,y,i);if(uTt.height=await hTt(h,k,p),tTt.insertComputerIcon(c),tTt.insertDatabaseIcon(c),tTt.insertClockIcon(c),x&&(dTt.bumpVerticalPos(uTt.boxMargin),b&&dTt.bumpVerticalPos(p[0].textMaxHeight)),!0===uTt.hideUnusedParticipants){let t=new Set;y.forEach((e=>{t.add(e.from),t.add(e.to)})),f=f.filter((e=>t.has(e)))}xTt(c,h,u,f,0,y,!1);let v=await ATt(y,h,k,i);function T(t,e){let r=dTt.endActivation(t);r.starty+18>e&&(r.starty=e-6,e+=12),tTt.drawActivation(c,r,e,uTt,TTt(t.from).length),dTt.insert(r.startx,e-10,r.stopx,e)}tTt.insertArrowHead(c),tTt.insertArrowCrossHead(c),tTt.insertArrowFilledHead(c),tTt.insertSequenceNumber(c),g(T,"activeEnd");let w=1,_=1,S=[],C=[],E=0;for(let t of y){let e,r,n;switch(t.type){case i.db.LINETYPE.NOTE:dTt.resetVerticalPos(),r=t.noteModel,await pTt(c,r);break;case i.db.LINETYPE.ACTIVE_START:dTt.newActivation(t,c,h);break;case i.db.LINETYPE.ACTIVE_END:T(t,dTt.getVerticalPos());break;case i.db.LINETYPE.LOOP_START:oTt(v,t,uTt.boxMargin,uTt.boxMargin+uTt.boxTextMargin,(t=>dTt.newLoop(t)));break;case i.db.LINETYPE.LOOP_END:e=dTt.endLoop(),await tTt.drawLoop(c,e,"loop",uTt),dTt.bumpVerticalPos(e.stopy-dTt.getVerticalPos()),dTt.models.addLoop(e);break;case i.db.LINETYPE.RECT_START:oTt(v,t,uTt.boxMargin,uTt.boxMargin,(t=>dTt.newLoop(void 0,t.message)));break;case i.db.LINETYPE.RECT_END:e=dTt.endLoop(),C.push(e),dTt.models.addLoop(e),dTt.bumpVerticalPos(e.stopy-dTt.getVerticalPos());break;case i.db.LINETYPE.OPT_START:oTt(v,t,uTt.boxMargin,uTt.boxMargin+uTt.boxTextMargin,(t=>dTt.newLoop(t)));break;case i.db.LINETYPE.OPT_END:e=dTt.endLoop(),await tTt.drawLoop(c,e,"opt",uTt),dTt.bumpVerticalPos(e.stopy-dTt.getVerticalPos()),dTt.models.addLoop(e);break;case i.db.LINETYPE.ALT_START:oTt(v,t,uTt.boxMargin,uTt.boxMargin+uTt.boxTextMargin,(t=>dTt.newLoop(t)));break;case i.db.LINETYPE.ALT_ELSE:oTt(v,t,uTt.boxMargin+uTt.boxTextMargin,uTt.boxMargin,(t=>dTt.addSectionToLoop(t)));break;case i.db.LINETYPE.ALT_END:e=dTt.endLoop(),await tTt.drawLoop(c,e,"alt",uTt),dTt.bumpVerticalPos(e.stopy-dTt.getVerticalPos()),dTt.models.addLoop(e);break;case i.db.LINETYPE.PAR_START:case i.db.LINETYPE.PAR_OVER_START:oTt(v,t,uTt.boxMargin,uTt.boxMargin+uTt.boxTextMargin,(t=>dTt.newLoop(t))),dTt.saveVerticalPos();break;case i.db.LINETYPE.PAR_AND:oTt(v,t,uTt.boxMargin+uTt.boxTextMargin,uTt.boxMargin,(t=>dTt.addSectionToLoop(t)));break;case i.db.LINETYPE.PAR_END:e=dTt.endLoop(),await tTt.drawLoop(c,e,"par",uTt),dTt.bumpVerticalPos(e.stopy-dTt.getVerticalPos()),dTt.models.addLoop(e);break;case i.db.LINETYPE.AUTONUMBER:w=t.message.start||w,_=t.message.step||_,t.message.visible?i.db.enableSequenceNumbers():i.db.disableSequenceNumbers();break;case i.db.LINETYPE.CRITICAL_START:oTt(v,t,uTt.boxMargin,uTt.boxMargin+uTt.boxTextMargin,(t=>dTt.newLoop(t)));break;case i.db.LINETYPE.CRITICAL_OPTION:oTt(v,t,uTt.boxMargin+uTt.boxTextMargin,uTt.boxMargin,(t=>dTt.addSectionToLoop(t)));break;case i.db.LINETYPE.CRITICAL_END:e=dTt.endLoop(),await tTt.drawLoop(c,e,"critical",uTt),dTt.bumpVerticalPos(e.stopy-dTt.getVerticalPos()),dTt.models.addLoop(e);break;case i.db.LINETYPE.BREAK_START:oTt(v,t,uTt.boxMargin,uTt.boxMargin+uTt.boxTextMargin,(t=>dTt.newLoop(t)));break;case i.db.LINETYPE.BREAK_END:e=dTt.endLoop(),await tTt.drawLoop(c,e,"break",uTt),dTt.bumpVerticalPos(e.stopy-dTt.getVerticalPos()),dTt.models.addLoop(e);break;default:try{n=t.msgModel,n.starty=dTt.getVerticalPos(),n.sequenceIndex=w,n.sequenceVisible=i.db.showSequenceNumbers();let e=await sTt(0,n);lTt(t,n,e,E,h,u,d),S.push({messageModel:n,lineStartY:e}),dTt.models.addMessage(n)}catch(t){et.error("error while drawing message",t)}}[i.db.LINETYPE.SOLID_OPEN,i.db.LINETYPE.DOTTED_OPEN,i.db.LINETYPE.SOLID,i.db.LINETYPE.DOTTED,i.db.LINETYPE.SOLID_CROSS,i.db.LINETYPE.DOTTED_CROSS,i.db.LINETYPE.SOLID_POINT,i.db.LINETYPE.DOTTED_POINT,i.db.LINETYPE.BIDIRECTIONAL_SOLID,i.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(t.type)&&(w+=_),E++}et.debug("createdActors",u),et.debug("destroyedActors",d),await bTt(c,h,f,!1);for(let t of S)await mTt(c,t.messageModel,t.lineStartY,i);uTt.mirrorActors&&await bTt(c,h,f,!0),C.forEach((t=>tTt.drawBackgroundRect(c,t))),Avt(c,h,f,uTt);for(let t of dTt.models.boxes){t.height=dTt.getVerticalPos()-t.y,dTt.insert(t.x,t.y,t.x+t.width,t.height);let e=2*uTt.boxMargin;t.startx=t.x-e,t.starty=t.y-.25*e,t.stopx=t.startx+t.width+2*e,t.stopy=t.starty+t.height+.75*e,t.stroke="rgb(0,0,0, 0.5)",tTt.drawBox(c,t,uTt)}x&&dTt.bumpVerticalPos(uTt.boxMargin);let A=kTt(c,h,f,l),{bounds:$}=dTt.getBounds();void 0===$.startx&&($.startx=0),void 0===$.starty&&($.starty=0),void 0===$.stopx&&($.stopx=0),void 0===$.stopy&&($.stopy=0);let L=$.stopy-$.starty;L<A.maxHeight&&(L=A.maxHeight);let R=L+2*uTt.diagramMarginY;uTt.mirrorActors&&(R=R-uTt.boxMargin+uTt.bottomMarginAdj);let I=$.stopx-$.startx;I<A.maxWidth&&(I=A.maxWidth);let N=I+2*uTt.diagramMarginX;m&&c.append("text").text(m).attr("x",($.stopx-$.startx)/2-2*uTt.diagramMarginX).attr("y",-25),Rn(c,R,N,uTt.useMaxWidth);let D=m?40:0;c.attr("viewBox",$.startx-uTt.diagramMarginX+" -"+(uTt.diagramMarginY+D)+" "+N+" "+(R+D)),et.debug("models:",dTt.models)}),"draw"),g(cTt,"getMaxMessageWidthPerActor"),STt=g((function(t){let e=0,r=yTt(uTt);for(let i in t.links){let t=kL.calculateTextDimensions(i,r).width+2*uTt.wrapPadding+2*uTt.boxMargin;e<t&&(e=t)}return e}),"getRequiredPopupWidth"),g(hTt,"calculateActorMargins"),CTt=g((async function(t,e,r){let i=e.get(t.from),n=e.get(t.to),a=i.x,s=n.x,o=t.wrap&&t.message,l=rn(t.message)?await nn(t.message,na()):kL.calculateTextDimensions(o?kL.wrapLabel(t.message,uTt.width,gTt(uTt)):t.message,gTt(uTt)),c={width:o?uTt.width:on.getMax(uTt.width,l.width+2*uTt.noteMargin),height:0,startx:i.x,stopx:0,starty:0,stopy:0,message:t.message};return t.placement===r.db.PLACEMENT.RIGHTOF?(c.width=o?on.getMax(uTt.width,l.width):on.getMax(i.width/2+n.width/2,l.width+2*uTt.noteMargin),c.startx=a+(i.width+uTt.actorMargin)/2):t.placement===r.db.PLACEMENT.LEFTOF?(c.width=o?on.getMax(uTt.width,l.width+2*uTt.noteMargin):on.getMax(i.width/2+n.width/2,l.width+2*uTt.noteMargin),c.startx=a-c.width+(i.width-uTt.actorMargin)/2):t.to===t.from?(l=kL.calculateTextDimensions(o?kL.wrapLabel(t.message,on.getMax(uTt.width,i.width),gTt(uTt)):t.message,gTt(uTt)),c.width=o?on.getMax(uTt.width,i.width):on.getMax(i.width,uTt.width,l.width+2*uTt.noteMargin),c.startx=a+(i.width-c.width)/2):(c.width=Math.abs(a+i.width/2-(s+n.width/2))+uTt.actorMargin,c.startx=a<s?a+i.width/2-uTt.actorMargin/2:s+n.width/2-uTt.actorMargin/2),o&&(c.message=kL.wrapLabel(t.message,c.width-2*uTt.wrapPadding,gTt(uTt))),et.debug(`NM:[${c.startx},${c.stopx},${c.starty},${c.stopy}:${c.width},${c.height}=${t.message}]`),c}),"buildNoteModel"),ETt=g((function(t,e,r){if(![r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN,r.db.LINETYPE.SOLID,r.db.LINETYPE.DOTTED,r.db.LINETYPE.SOLID_CROSS,r.db.LINETYPE.DOTTED_CROSS,r.db.LINETYPE.SOLID_POINT,r.db.LINETYPE.DOTTED_POINT,r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(t.type))return{};let[i,n]=wTt(t.from,e),[a,s]=wTt(t.to,e),o=i<=a,l=o?n:i,c=o?a:s,h=Math.abs(a-s)>2,u=g((t=>o?-t:t),"adjustValue");t.from===t.to?c=l:(t.activate&&!h&&(c+=u(uTt.activationWidth/2-1)),[r.db.LINETYPE.SOLID_OPEN,r.db.LINETYPE.DOTTED_OPEN].includes(t.type)||(c+=u(3)),[r.db.LINETYPE.BIDIRECTIONAL_SOLID,r.db.LINETYPE.BIDIRECTIONAL_DOTTED].includes(t.type)&&(l-=u(3)));let d=[i,n,a,s],p=Math.abs(l-c);t.wrap&&t.message&&(t.message=kL.wrapLabel(t.message,on.getMax(p+2*uTt.wrapPadding,uTt.width),fTt(uTt)));let f=kL.calculateTextDimensions(t.message,fTt(uTt));return{width:on.getMax(t.wrap?0:f.width+2*uTt.wrapPadding,p+2*uTt.wrapPadding,uTt.width),height:0,startx:l,stopx:c,starty:0,stopy:0,message:t.message,type:t.type,wrap:t.wrap,fromBounds:Math.min.apply(null,d),toBounds:Math.max.apply(null,d)}}),"buildMessageModel"),ATt=g((async function(t,e,r,i){let n,a,s,o={},l=[];for(let r of t){switch(r.type){case i.db.LINETYPE.LOOP_START:case i.db.LINETYPE.ALT_START:case i.db.LINETYPE.OPT_START:case i.db.LINETYPE.PAR_START:case i.db.LINETYPE.PAR_OVER_START:case i.db.LINETYPE.CRITICAL_START:case i.db.LINETYPE.BREAK_START:l.push({id:r.id,msg:r.message,from:Number.MAX_SAFE_INTEGER,to:Number.MIN_SAFE_INTEGER,width:0});break;case i.db.LINETYPE.ALT_ELSE:case i.db.LINETYPE.PAR_AND:case i.db.LINETYPE.CRITICAL_OPTION:r.message&&(n=l.pop(),o[n.id]=n,o[r.id]=n,l.push(n));break;case i.db.LINETYPE.LOOP_END:case i.db.LINETYPE.ALT_END:case i.db.LINETYPE.OPT_END:case i.db.LINETYPE.PAR_END:case i.db.LINETYPE.CRITICAL_END:case i.db.LINETYPE.BREAK_END:n=l.pop(),o[n.id]=n;break;case i.db.LINETYPE.ACTIVE_START:{let t=e.get(r.from?r.from:r.to.actor),i=TTt(r.from?r.from:r.to.actor).length,n=t.x+t.width/2+(i-1)*uTt.activationWidth/2,a={startx:n,stopx:n+uTt.activationWidth,actor:r.from,enabled:!0};dTt.activations.push(a)}break;case i.db.LINETYPE.ACTIVE_END:{let t=dTt.activations.map((t=>t.actor)).lastIndexOf(r.from);dTt.activations.splice(t,1).splice(0,1)}}void 0!==r.placement?(a=await CTt(r,e,i),r.noteModel=a,l.forEach((t=>{n=t,n.from=on.getMin(n.from,a.startx),n.to=on.getMax(n.to,a.startx+a.width),n.width=on.getMax(n.width,Math.abs(n.from-n.to))-uTt.labelBoxWidth}))):(s=ETt(r,e,i),r.msgModel=s,s.startx&&s.stopx&&l.length>0&&l.forEach((t=>{if(n=t,s.startx===s.stopx){let t=e.get(r.from),i=e.get(r.to);n.from=on.getMin(t.x-s.width/2,t.x-t.width/2,n.from),n.to=on.getMax(i.x+s.width/2,i.x+t.width/2,n.to),n.width=on.getMax(n.width,Math.abs(n.to-n.from))-uTt.labelBoxWidth}else n.from=on.getMin(s.startx,n.from),n.to=on.getMax(s.stopx,n.to),n.width=on.getMax(n.width,s.width)-uTt.labelBoxWidth})))}return dTt.activations=[],et.debug("Loop type widths:",o),o}),"calculateLoopBounds"),$Tt={bounds:dTt,drawActors:bTt,drawActorsPopup:kTt,setConf:vTt,draw:_Tt}})),RTt={};x(RTt,{diagram:()=>ITt});var ITt,NTt,DTt,MTt,OTt,PTt,BTt,FTt,zTt,jTt,UTt,WTt,qTt,YTt,GTt,HTt=y((()=>{rTt(),iTt(),nTt(),ns(),LTt(),ITt={parser:ovt,get db(){return new dvt},renderer:$Tt,styles:fvt,init:g((t=>{t.sequence||(t.sequence={}),t.wrap&&(t.sequence.wrap=t.wrap,aa({sequence:{wrap:t.wrap}}))}),"init")}})),VTt=y((()=>{(NTt=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[1,18],r=[1,19],i=[1,20],n=[1,41],a=[1,42],s=[1,26],o=[1,24],l=[1,25],c=[1,32],h=[1,33],u=[1,34],d=[1,45],p=[1,35],f=[1,36],y=[1,37],m=[1,38],x=[1,27],b=[1,28],k=[1,29],v=[1,30],T=[1,31],w=[1,44],_=[1,46],S=[1,43],C=[1,47],E=[1,9],A=[1,8,9],$=[1,58],L=[1,59],R=[1,60],I=[1,61],N=[1,62],D=[1,63],M=[1,64],O=[1,8,9,41],P=[1,76],B=[1,8,9,12,13,22,39,41,44,68,69,70,71,72,73,74,79,81],F=[1,8,9,12,13,18,20,22,39,41,44,50,60,68,69,70,71,72,73,74,79,81,86,100,102,103],z=[13,60,86,100,102,103],j=[13,60,73,74,86,100,102,103],U=[13,60,68,69,70,71,72,86,100,102,103],W=[1,100],q=[1,117],Y=[1,113],G=[1,109],H=[1,115],V=[1,110],X=[1,111],K=[1,112],Q=[1,114],Z=[1,116],J=[22,48,60,61,82,86,87,88,89,90],tt=[1,8,9,39,41,44],et=[1,8,9,22],rt=[1,145],it=[1,8,9,61],nt=[1,8,9,22,48,60,61,82,86,87,88,89,90],at={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,mermaidDoc:4,statements:5,graphConfig:6,CLASS_DIAGRAM:7,NEWLINE:8,EOF:9,statement:10,classLabel:11,SQS:12,STR:13,SQE:14,namespaceName:15,alphaNumToken:16,classLiteralName:17,DOT:18,className:19,GENERICTYPE:20,relationStatement:21,LABEL:22,namespaceStatement:23,classStatement:24,memberStatement:25,annotationStatement:26,clickStatement:27,styleStatement:28,cssClassStatement:29,noteStatement:30,classDefStatement:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,namespaceIdentifier:38,STRUCT_START:39,classStatements:40,STRUCT_STOP:41,NAMESPACE:42,classIdentifier:43,STYLE_SEPARATOR:44,members:45,CLASS:46,emptyBody:47,SPACE:48,ANNOTATION_START:49,ANNOTATION_END:50,MEMBER:51,SEPARATOR:52,relation:53,NOTE_FOR:54,noteText:55,NOTE:56,CLASSDEF:57,classList:58,stylesOpt:59,ALPHA:60,COMMA:61,direction_tb:62,direction_bt:63,direction_rl:64,direction_lr:65,relationType:66,lineType:67,AGGREGATION:68,EXTENSION:69,COMPOSITION:70,DEPENDENCY:71,LOLLIPOP:72,LINE:73,DOTTED_LINE:74,CALLBACK:75,LINK:76,LINK_TARGET:77,CLICK:78,CALLBACK_NAME:79,CALLBACK_ARGS:80,HREF:81,STYLE:82,CSSCLASS:83,style:84,styleComponent:85,NUM:86,COLON:87,UNIT:88,BRKT:89,PCT:90,commentToken:91,textToken:92,graphCodeTokens:93,textNoTagsToken:94,TAGSTART:95,TAGEND:96,"==":97,"--":98,DEFAULT:99,MINUS:100,keywords:101,UNICODE_TEXT:102,BQUOTE_STR:103,$accept:0,$end:1},terminals_:{2:"error",7:"CLASS_DIAGRAM",8:"NEWLINE",9:"EOF",12:"SQS",13:"STR",14:"SQE",18:"DOT",20:"GENERICTYPE",22:"LABEL",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",39:"STRUCT_START",41:"STRUCT_STOP",42:"NAMESPACE",44:"STYLE_SEPARATOR",46:"CLASS",48:"SPACE",49:"ANNOTATION_START",50:"ANNOTATION_END",51:"MEMBER",52:"SEPARATOR",54:"NOTE_FOR",56:"NOTE",57:"CLASSDEF",60:"ALPHA",61:"COMMA",62:"direction_tb",63:"direction_bt",64:"direction_rl",65:"direction_lr",68:"AGGREGATION",69:"EXTENSION",70:"COMPOSITION",71:"DEPENDENCY",72:"LOLLIPOP",73:"LINE",74:"DOTTED_LINE",75:"CALLBACK",76:"LINK",77:"LINK_TARGET",78:"CLICK",79:"CALLBACK_NAME",80:"CALLBACK_ARGS",81:"HREF",82:"STYLE",83:"CSSCLASS",86:"NUM",87:"COLON",88:"UNIT",89:"BRKT",90:"PCT",93:"graphCodeTokens",95:"TAGSTART",96:"TAGEND",97:"==",98:"--",99:"DEFAULT",100:"MINUS",101:"keywords",102:"UNICODE_TEXT",103:"BQUOTE_STR"},productions_:[0,[3,1],[3,1],[4,1],[6,4],[5,1],[5,2],[5,3],[11,3],[15,1],[15,1],[15,3],[15,2],[19,1],[19,3],[19,1],[19,2],[19,2],[19,2],[10,1],[10,2],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,1],[10,2],[10,2],[10,1],[23,4],[23,5],[38,2],[40,1],[40,2],[40,3],[24,1],[24,3],[24,4],[24,3],[24,6],[43,2],[43,3],[47,0],[47,2],[47,2],[26,4],[45,1],[45,2],[25,1],[25,2],[25,1],[25,1],[21,3],[21,4],[21,4],[21,5],[30,3],[30,2],[31,3],[58,1],[58,3],[32,1],[32,1],[32,1],[32,1],[53,3],[53,2],[53,2],[53,1],[66,1],[66,1],[66,1],[66,1],[66,1],[67,1],[67,1],[27,3],[27,4],[27,3],[27,4],[27,4],[27,5],[27,3],[27,4],[27,4],[27,5],[27,4],[27,5],[27,5],[27,6],[28,3],[29,3],[59,1],[59,3],[84,1],[84,2],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[85,1],[91,1],[91,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[92,1],[94,1],[94,1],[94,1],[94,1],[16,1],[16,1],[16,1],[16,1],[17,1],[55,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 8:this.$=a[o-1];break;case 9:case 10:case 13:case 15:this.$=a[o];break;case 11:case 14:this.$=a[o-2]+"."+a[o];break;case 12:case 16:case 100:this.$=a[o-1]+a[o];break;case 17:case 18:this.$=a[o-1]+"~"+a[o]+"~";break;case 19:i.addRelation(a[o]);break;case 20:a[o-1].title=i.cleanupLabel(a[o]),i.addRelation(a[o-1]);break;case 31:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 32:case 33:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 34:i.addClassesToNamespace(a[o-3],a[o-1]);break;case 35:i.addClassesToNamespace(a[o-4],a[o-1]);break;case 36:this.$=a[o],i.addNamespace(a[o]);break;case 37:case 51:case 64:case 97:this.$=[a[o]];break;case 38:this.$=[a[o-1]];break;case 39:a[o].unshift(a[o-2]),this.$=a[o];break;case 41:i.setCssClass(a[o-2],a[o]);break;case 42:i.addMembers(a[o-3],a[o-1]);break;case 44:i.setCssClass(a[o-5],a[o-3]),i.addMembers(a[o-5],a[o-1]);break;case 45:this.$=a[o],i.addClass(a[o]);break;case 46:this.$=a[o-1],i.addClass(a[o-1]),i.setClassLabel(a[o-1],a[o]);break;case 50:i.addAnnotation(a[o],a[o-2]);break;case 52:a[o].push(a[o-1]),this.$=a[o];break;case 53:case 55:case 56:break;case 54:i.addMember(a[o-1],i.cleanupLabel(a[o]));break;case 57:this.$={id1:a[o-2],id2:a[o],relation:a[o-1],relationTitle1:"none",relationTitle2:"none"};break;case 58:this.$={id1:a[o-3],id2:a[o],relation:a[o-1],relationTitle1:a[o-2],relationTitle2:"none"};break;case 59:this.$={id1:a[o-3],id2:a[o],relation:a[o-2],relationTitle1:"none",relationTitle2:a[o-1]};break;case 60:this.$={id1:a[o-4],id2:a[o],relation:a[o-2],relationTitle1:a[o-3],relationTitle2:a[o-1]};break;case 61:i.addNote(a[o],a[o-1]);break;case 62:i.addNote(a[o]);break;case 63:this.$=a[o-2],i.defineClass(a[o-1],a[o]);break;case 65:this.$=a[o-2].concat([a[o]]);break;case 66:i.setDirection("TB");break;case 67:i.setDirection("BT");break;case 68:i.setDirection("RL");break;case 69:i.setDirection("LR");break;case 70:this.$={type1:a[o-2],type2:a[o],lineType:a[o-1]};break;case 71:this.$={type1:"none",type2:a[o],lineType:a[o-1]};break;case 72:this.$={type1:a[o-1],type2:"none",lineType:a[o]};break;case 73:this.$={type1:"none",type2:"none",lineType:a[o]};break;case 74:this.$=i.relationType.AGGREGATION;break;case 75:this.$=i.relationType.EXTENSION;break;case 76:this.$=i.relationType.COMPOSITION;break;case 77:this.$=i.relationType.DEPENDENCY;break;case 78:this.$=i.relationType.LOLLIPOP;break;case 79:this.$=i.lineType.LINE;break;case 80:this.$=i.lineType.DOTTED_LINE;break;case 81:case 87:this.$=a[o-2],i.setClickEvent(a[o-1],a[o]);break;case 82:case 88:this.$=a[o-3],i.setClickEvent(a[o-2],a[o-1]),i.setTooltip(a[o-2],a[o]);break;case 83:this.$=a[o-2],i.setLink(a[o-1],a[o]);break;case 84:this.$=a[o-3],i.setLink(a[o-2],a[o-1],a[o]);break;case 85:this.$=a[o-3],i.setLink(a[o-2],a[o-1]),i.setTooltip(a[o-2],a[o]);break;case 86:this.$=a[o-4],i.setLink(a[o-3],a[o-2],a[o]),i.setTooltip(a[o-3],a[o-1]);break;case 89:this.$=a[o-3],i.setClickEvent(a[o-2],a[o-1],a[o]);break;case 90:this.$=a[o-4],i.setClickEvent(a[o-3],a[o-2],a[o-1]),i.setTooltip(a[o-3],a[o]);break;case 91:this.$=a[o-3],i.setLink(a[o-2],a[o]);break;case 92:this.$=a[o-4],i.setLink(a[o-3],a[o-1],a[o]);break;case 93:this.$=a[o-4],i.setLink(a[o-3],a[o-1]),i.setTooltip(a[o-3],a[o]);break;case 94:this.$=a[o-5],i.setLink(a[o-4],a[o-2],a[o]),i.setTooltip(a[o-4],a[o-1]);break;case 95:this.$=a[o-2],i.setCssStyle(a[o-1],a[o]);break;case 96:i.setCssClass(a[o-1],a[o]);break;case 98:a[o-2].push(a[o]),this.$=a[o-2]}}),"anonymous"),table:[{3:1,4:2,5:3,6:4,7:[1,6],10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:e,35:r,37:i,38:22,42:n,43:23,46:a,49:s,51:o,52:l,54:c,56:h,57:u,60:d,62:p,63:f,64:y,65:m,75:x,76:b,78:k,82:v,83:T,86:w,100:_,102:S,103:C},{1:[3]},{1:[2,1]},{1:[2,2]},{1:[2,3]},t(E,[2,5],{8:[1,48]}),{8:[1,49]},t(A,[2,19],{22:[1,50]}),t(A,[2,21]),t(A,[2,22]),t(A,[2,23]),t(A,[2,24]),t(A,[2,25]),t(A,[2,26]),t(A,[2,27]),t(A,[2,28]),t(A,[2,29]),t(A,[2,30]),{34:[1,51]},{36:[1,52]},t(A,[2,33]),t(A,[2,53],{53:53,66:56,67:57,13:[1,54],22:[1,55],68:$,69:L,70:R,71:I,72:N,73:D,74:M}),{39:[1,65]},t(O,[2,40],{39:[1,67],44:[1,66]}),t(A,[2,55]),t(A,[2,56]),{16:68,60:d,86:w,100:_,102:S},{16:39,17:40,19:69,60:d,86:w,100:_,102:S,103:C},{16:39,17:40,19:70,60:d,86:w,100:_,102:S,103:C},{16:39,17:40,19:71,60:d,86:w,100:_,102:S,103:C},{60:[1,72]},{13:[1,73]},{16:39,17:40,19:74,60:d,86:w,100:_,102:S,103:C},{13:P,55:75},{58:77,60:[1,78]},t(A,[2,66]),t(A,[2,67]),t(A,[2,68]),t(A,[2,69]),t(B,[2,13],{16:39,17:40,19:80,18:[1,79],20:[1,81],60:d,86:w,100:_,102:S,103:C}),t(B,[2,15],{20:[1,82]}),{15:83,16:84,17:85,60:d,86:w,100:_,102:S,103:C},{16:39,17:40,19:86,60:d,86:w,100:_,102:S,103:C},t(F,[2,123]),t(F,[2,124]),t(F,[2,125]),t(F,[2,126]),t([1,8,9,12,13,20,22,39,41,44,68,69,70,71,72,73,74,79,81],[2,127]),t(E,[2,6],{10:5,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,19:21,38:22,43:23,16:39,17:40,5:87,33:e,35:r,37:i,42:n,46:a,49:s,51:o,52:l,54:c,56:h,57:u,60:d,62:p,63:f,64:y,65:m,75:x,76:b,78:k,82:v,83:T,86:w,100:_,102:S,103:C}),{5:88,10:5,16:39,17:40,19:21,21:7,23:8,24:9,25:10,26:11,27:12,28:13,29:14,30:15,31:16,32:17,33:e,35:r,37:i,38:22,42:n,43:23,46:a,49:s,51:o,52:l,54:c,56:h,57:u,60:d,62:p,63:f,64:y,65:m,75:x,76:b,78:k,82:v,83:T,86:w,100:_,102:S,103:C},t(A,[2,20]),t(A,[2,31]),t(A,[2,32]),{13:[1,90],16:39,17:40,19:89,60:d,86:w,100:_,102:S,103:C},{53:91,66:56,67:57,68:$,69:L,70:R,71:I,72:N,73:D,74:M},t(A,[2,54]),{67:92,73:D,74:M},t(z,[2,73],{66:93,68:$,69:L,70:R,71:I,72:N}),t(j,[2,74]),t(j,[2,75]),t(j,[2,76]),t(j,[2,77]),t(j,[2,78]),t(U,[2,79]),t(U,[2,80]),{8:[1,95],24:96,40:94,43:23,46:a},{16:97,60:d,86:w,100:_,102:S},{41:[1,99],45:98,51:W},{50:[1,101]},{13:[1,102]},{13:[1,103]},{79:[1,104],81:[1,105]},{22:q,48:Y,59:106,60:G,82:H,84:107,85:108,86:V,87:X,88:K,89:Q,90:Z},{60:[1,118]},{13:P,55:119},t(A,[2,62]),t(A,[2,128]),{22:q,48:Y,59:120,60:G,61:[1,121],82:H,84:107,85:108,86:V,87:X,88:K,89:Q,90:Z},t(J,[2,64]),{16:39,17:40,19:122,60:d,86:w,100:_,102:S,103:C},t(B,[2,16]),t(B,[2,17]),t(B,[2,18]),{39:[2,36]},{15:124,16:84,17:85,18:[1,123],39:[2,9],60:d,86:w,100:_,102:S,103:C},{39:[2,10]},t(tt,[2,45],{11:125,12:[1,126]}),t(E,[2,7]),{9:[1,127]},t(et,[2,57]),{16:39,17:40,19:128,60:d,86:w,100:_,102:S,103:C},{13:[1,130],16:39,17:40,19:129,60:d,86:w,100:_,102:S,103:C},t(z,[2,72],{66:131,68:$,69:L,70:R,71:I,72:N}),t(z,[2,71]),{41:[1,132]},{24:96,40:133,43:23,46:a},{8:[1,134],41:[2,37]},t(O,[2,41],{39:[1,135]}),{41:[1,136]},t(O,[2,43]),{41:[2,51],45:137,51:W},{16:39,17:40,19:138,60:d,86:w,100:_,102:S,103:C},t(A,[2,81],{13:[1,139]}),t(A,[2,83],{13:[1,141],77:[1,140]}),t(A,[2,87],{13:[1,142],80:[1,143]}),{13:[1,144]},t(A,[2,95],{61:rt}),t(it,[2,97],{85:146,22:q,48:Y,60:G,82:H,86:V,87:X,88:K,89:Q,90:Z}),t(nt,[2,99]),t(nt,[2,101]),t(nt,[2,102]),t(nt,[2,103]),t(nt,[2,104]),t(nt,[2,105]),t(nt,[2,106]),t(nt,[2,107]),t(nt,[2,108]),t(nt,[2,109]),t(A,[2,96]),t(A,[2,61]),t(A,[2,63],{61:rt}),{60:[1,147]},t(B,[2,14]),{15:148,16:84,17:85,60:d,86:w,100:_,102:S,103:C},{39:[2,12]},t(tt,[2,46]),{13:[1,149]},{1:[2,4]},t(et,[2,59]),t(et,[2,58]),{16:39,17:40,19:150,60:d,86:w,100:_,102:S,103:C},t(z,[2,70]),t(A,[2,34]),{41:[1,151]},{24:96,40:152,41:[2,38],43:23,46:a},{45:153,51:W},t(O,[2,42]),{41:[2,52]},t(A,[2,50]),t(A,[2,82]),t(A,[2,84]),t(A,[2,85],{77:[1,154]}),t(A,[2,88]),t(A,[2,89],{13:[1,155]}),t(A,[2,91],{13:[1,157],77:[1,156]}),{22:q,48:Y,60:G,82:H,84:158,85:108,86:V,87:X,88:K,89:Q,90:Z},t(nt,[2,100]),t(J,[2,65]),{39:[2,11]},{14:[1,159]},t(et,[2,60]),t(A,[2,35]),{41:[2,39]},{41:[1,160]},t(A,[2,86]),t(A,[2,90]),t(A,[2,92]),t(A,[2,93],{77:[1,161]}),t(it,[2,98],{85:146,22:q,48:Y,60:G,82:H,86:V,87:X,88:K,89:Q,90:Z}),t(tt,[2,8]),t(O,[2,44]),t(A,[2,94])],defaultActions:{2:[2,1],3:[2,2],4:[2,3],83:[2,36],85:[2,10],124:[2,12],127:[2,4],137:[2,52],148:[2,11],152:[2,39]},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},st={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{},performAction:g((function(t,e,r,i){switch(r){case 0:return 62;case 1:return 63;case 2:return 64;case 3:return 65;case 4:case 5:case 14:case 31:case 36:case 40:case 47:break;case 6:return this.begin("acc_title"),33;case 7:return this.popState(),"acc_title_value";case 8:return this.begin("acc_descr"),35;case 9:return this.popState(),"acc_descr_value";case 10:this.begin("acc_descr_multiline");break;case 11:case 19:case 22:case 24:case 58:case 61:this.popState();break;case 12:return"acc_descr_multiline_value";case 13:case 35:return 8;case 15:case 16:return 7;case 17:case 37:case 45:return"EDGE_STATE";case 18:this.begin("callback_name");break;case 20:this.popState(),this.begin("callback_args");break;case 21:return 79;case 23:return 80;case 25:return"STR";case 26:this.begin("string");break;case 27:return 82;case 28:return 57;case 29:return this.begin("namespace"),42;case 30:case 39:return this.popState(),8;case 32:return this.begin("namespace-body"),39;case 33:case 43:return this.popState(),41;case 34:case 44:return"EOF_IN_STRUCT";case 38:return this.begin("class"),46;case 41:return this.popState(),this.popState(),41;case 42:return this.begin("class-body"),39;case 46:return"OPEN_IN_STRUCT";case 48:return"MEMBER";case 49:return 83;case 50:return 75;case 51:return 76;case 52:return 78;case 53:return 54;case 54:return 56;case 55:return 49;case 56:return 50;case 57:return 81;case 59:return"GENERICTYPE";case 60:this.begin("generic");break;case 62:return"BQUOTE_STR";case 63:this.begin("bqstring");break;case 64:case 65:case 66:case 67:return 77;case 68:case 69:return 69;case 70:case 71:return 71;case 72:return 70;case 73:return 68;case 74:return 72;case 75:return 73;case 76:return 74;case 77:return 22;case 78:return 44;case 79:return 100;case 80:return 18;case 81:return"PLUS";case 82:return 87;case 83:return 61;case 84:case 85:return 89;case 86:return 90;case 87:case 88:return"EQUALS";case 89:return 60;case 90:return 12;case 91:return 14;case 92:return"PUNCTUATION";case 93:return 86;case 94:return 102;case 95:case 96:return 48;case 97:return 9}}),"anonymous"),rules:[/^(?:.*direction\s+TB[^\n]*)/,/^(?:.*direction\s+BT[^\n]*)/,/^(?:.*direction\s+RL[^\n]*)/,/^(?:.*direction\s+LR[^\n]*)/,/^(?:%%(?!\{)*[^\n]*(\r?\n?)+)/,/^(?:%%[^\n]*(\r?\n)*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:classDiagram-v2\b)/,/^(?:classDiagram\b)/,/^(?:\[\*\])/,/^(?:call[\s]+)/,/^(?:\([\s]*\))/,/^(?:\()/,/^(?:[^(]*)/,/^(?:\))/,/^(?:[^)]*)/,/^(?:["])/,/^(?:[^"]*)/,/^(?:["])/,/^(?:style\b)/,/^(?:classDef\b)/,/^(?:namespace\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:\[\*\])/,/^(?:class\b)/,/^(?:\s*(\r?\n)+)/,/^(?:\s+)/,/^(?:[}])/,/^(?:[{])/,/^(?:[}])/,/^(?:$)/,/^(?:\[\*\])/,/^(?:[{])/,/^(?:[\n])/,/^(?:[^{}\n]*)/,/^(?:cssClass\b)/,/^(?:callback\b)/,/^(?:link\b)/,/^(?:click\b)/,/^(?:note for\b)/,/^(?:note\b)/,/^(?:<<)/,/^(?:>>)/,/^(?:href\b)/,/^(?:[~])/,/^(?:[^~]*)/,/^(?:~)/,/^(?:[`])/,/^(?:[^`]+)/,/^(?:[`])/,/^(?:_self\b)/,/^(?:_blank\b)/,/^(?:_parent\b)/,/^(?:_top\b)/,/^(?:\s*<\|)/,/^(?:\s*\|>)/,/^(?:\s*>)/,/^(?:\s*<)/,/^(?:\s*\*)/,/^(?:\s*o\b)/,/^(?:\s*\(\))/,/^(?:--)/,/^(?:\.\.)/,/^(?::{1}[^:\n;]+)/,/^(?::{3})/,/^(?:-)/,/^(?:\.)/,/^(?:\+)/,/^(?::)/,/^(?:,)/,/^(?:#)/,/^(?:#)/,/^(?:%)/,/^(?:=)/,/^(?:=)/,/^(?:\w+)/,/^(?:\[)/,/^(?:\])/,/^(?:[!"#$%&'*+,-.`?\\/])/,/^(?:[0-9]+)/,/^(?:[\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6]|[\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377]|[\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5]|[\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA]|[\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE]|[\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA]|[\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0]|[\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977]|[\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2]|[\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A]|[\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39]|[\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8]|[\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C]|[\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C]|[\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99]|[\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0]|[\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D]|[\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3]|[\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10]|[\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1]|[\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81]|[\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3]|[\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6]|[\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A]|[\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081]|[\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D]|[\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0]|[\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310]|[\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C]|[\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711]|[\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7]|[\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C]|[\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16]|[\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF]|[\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC]|[\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D]|[\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D]|[\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3]|[\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F]|[\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128]|[\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184]|[\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3]|[\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6]|[\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE]|[\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C]|[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D]|[\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC]|[\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B]|[\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788]|[\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805]|[\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB]|[\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28]|[\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5]|[\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4]|[\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E]|[\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D]|[\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36]|[\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D]|[\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC]|[\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF]|[\uFFD2-\uFFD7\uFFDA-\uFFDC])/,/^(?:\s)/,/^(?:\s)/,/^(?:$)/],conditions:{"namespace-body":{rules:[26,33,34,35,36,37,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},namespace:{rules:[26,29,30,31,32,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},"class-body":{rules:[26,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},class:{rules:[26,39,40,41,42,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr_multiline:{rules:[11,12,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_descr:{rules:[9,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},acc_title:{rules:[7,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_args:{rules:[22,23,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},callback_name:{rules:[19,20,21,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},href:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},struct:{rules:[26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},generic:{rules:[26,49,50,51,52,53,54,55,56,57,58,59,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},bqstring:{rules:[26,49,50,51,52,53,54,55,56,57,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},string:{rules:[24,25,26,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,86,87,88,89,90,91,92,93,94,95,97],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,8,10,13,14,15,16,17,18,26,27,28,29,38,49,50,51,52,53,54,55,56,57,60,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97],inclusive:!0}}};function ot(){this.yy={}}return at.lexer=st,g(ot,"Parser"),ot.prototype=at,at.Parser=ot,new ot}()).parser=NTt,DTt=NTt})),XTt=y((()=>{ns(),gn(),MTt=["#","+","~","-",""],OTt=class{static{g(this,"ClassMember")}constructor(t,e){this.memberType=e,this.visibility="",this.classifier="",this.text="";let r=zi(t,na());this.parseMember(r)}getDisplayDetails(){let t=this.visibility+Ki(this.id);return"method"===this.memberType&&(t+=`(${Ki(this.parameters.trim())})`,this.returnType&&(t+=" : "+Ki(this.returnType))),t=t.trim(),{displayText:t,cssStyle:this.parseClassifier()}}parseMember(t){let e="";if("method"===this.memberType){let r=/([#+~-])?(.+)\((.*)\)([\s$*])?(.*)([$*])?/.exec(t);if(r){let t=r[1]?r[1].trim():"";if(MTt.includes(t)&&(this.visibility=t),this.id=r[2],this.parameters=r[3]?r[3].trim():"",e=r[4]?r[4].trim():"",this.returnType=r[5]?r[5].trim():"",""===e){let t=this.returnType.substring(this.returnType.length-1);/[$*]/.exec(t)&&(e=t,this.returnType=this.returnType.substring(0,this.returnType.length-1))}}}else{let r=t.length,i=t.substring(0,1),n=t.substring(r-1);MTt.includes(i)&&(this.visibility=i),/[$*]/.exec(n)&&(e=n),this.id=t.substring(""===this.visibility?0:1,""===e?r:r-1)}this.classifier=e,this.id=this.id.startsWith(" ")?" "+this.id.trim():this.id.trim();let r=`${this.visibility?"\\"+this.visibility:""}${Ki(this.id)}${"method"===this.memberType?`(${Ki(this.parameters)})${this.returnType?" : "+Ki(this.returnType):""}`:""}`;this.text=r.replaceAll("<","&lt;").replaceAll(">","&gt;"),this.text.startsWith("\\&lt;")&&(this.text=this.text.replace("\\&lt;","~"))}parseClassifier(){switch(this.classifier){case"*":return"font-style:italic;";case"$":return"text-decoration:underline;";default:return""}}}})),KTt=y((()=>{QT(),We(),ns(),gn(),_L(),is(),XTt(),PTt="classId-",BTt=0,FTt=g((t=>on.sanitizeText(t,na())),"sanitizeText"),zTt=class{constructor(){this.relations=[],this.classes=new Map,this.styleClasses=new Map,this.notes=[],this.interfaces=[],this.namespaces=new Map,this.namespaceCounter=0,this.functions=[],this.lineType={LINE:0,DOTTED_LINE:1},this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3,LOLLIPOP:4},this.setupToolTips=g((t=>{let e=nh(".mermaidTooltip");null===(e._groups||e)[0][0]&&(e=nh("body").append("div").attr("class","mermaidTooltip").style("opacity",0)),nh(t).select("svg").selectAll("g.node").on("mouseover",(t=>{let r=nh(t.currentTarget);if(null===r.attr("title"))return;let i=this.getBoundingClientRect();e.transition().duration(200).style("opacity",".9"),e.text(r.attr("title")).style("left",window.scrollX+i.left+(i.right-i.left)/2+"px").style("top",window.scrollY+i.top-14+document.body.scrollTop+"px"),e.html(e.html().replace(/&lt;br\/&gt;/g,"<br/>")),r.classed("hover",!0)})).on("mouseout",(t=>{e.transition().duration(500).style("opacity",0),nh(t.currentTarget).classed("hover",!1)}))}),"setupToolTips"),this.direction="TB",this.setAccTitle=Kn,this.getAccTitle=Qn,this.setAccDescription=Zn,this.getAccDescription=Jn,this.setDiagramTitle=ta,this.getDiagramTitle=ea,this.getConfig=g((()=>na().class),"getConfig"),this.functions.push(this.setupToolTips.bind(this)),this.clear(),this.addRelation=this.addRelation.bind(this),this.addClassesToNamespace=this.addClassesToNamespace.bind(this),this.addNamespace=this.addNamespace.bind(this),this.setCssClass=this.setCssClass.bind(this),this.addMembers=this.addMembers.bind(this),this.addClass=this.addClass.bind(this),this.setClassLabel=this.setClassLabel.bind(this),this.addAnnotation=this.addAnnotation.bind(this),this.addMember=this.addMember.bind(this),this.cleanupLabel=this.cleanupLabel.bind(this),this.addNote=this.addNote.bind(this),this.defineClass=this.defineClass.bind(this),this.setDirection=this.setDirection.bind(this),this.setLink=this.setLink.bind(this),this.bindFunctions=this.bindFunctions.bind(this),this.clear=this.clear.bind(this),this.setTooltip=this.setTooltip.bind(this),this.setClickEvent=this.setClickEvent.bind(this),this.setCssStyle=this.setCssStyle.bind(this)}static{g(this,"ClassDB")}splitClassNameAndType(t){let e=on.sanitizeText(t,na()),r="",i=e;if(e.indexOf("~")>0){let t=e.split("~");i=FTt(t[0]),r=FTt(t[1])}return{className:i,type:r}}setClassLabel(t,e){let r=on.sanitizeText(t,na());e&&(e=FTt(e));let{className:i}=this.splitClassNameAndType(r);this.classes.get(i).label=e,this.classes.get(i).text=`${e}${this.classes.get(i).type?`<${this.classes.get(i).type}>`:""}`}addClass(t){let e=on.sanitizeText(t,na()),{className:r,type:i}=this.splitClassNameAndType(e);if(this.classes.has(r))return;let n=on.sanitizeText(r,na());this.classes.set(n,{id:n,type:i,label:n,text:`${n}${i?`&lt;${i}&gt;`:""}`,shape:"classBox",cssClasses:"default",methods:[],members:[],annotations:[],styles:[],domId:PTt+n+"-"+BTt}),BTt++}addInterface(t,e){let r={id:`interface${this.interfaces.length}`,label:t,classId:e};this.interfaces.push(r)}lookUpDomId(t){let e=on.sanitizeText(t,na());if(this.classes.has(e))return this.classes.get(e).domId;throw new Error("Class not found: "+e)}clear(){this.relations=[],this.classes=new Map,this.notes=[],this.interfaces=[],this.functions=[],this.functions.push(this.setupToolTips.bind(this)),this.namespaces=new Map,this.namespaceCounter=0,this.direction="TB",Xn()}getClass(t){return this.classes.get(t)}getClasses(){return this.classes}getRelations(){return this.relations}getNotes(){return this.notes}addRelation(t){et.debug("Adding relation: "+JSON.stringify(t));let e=[this.relationType.LOLLIPOP,this.relationType.AGGREGATION,this.relationType.COMPOSITION,this.relationType.DEPENDENCY,this.relationType.EXTENSION];t.relation.type1!==this.relationType.LOLLIPOP||e.includes(t.relation.type2)?t.relation.type2!==this.relationType.LOLLIPOP||e.includes(t.relation.type1)?(this.addClass(t.id1),this.addClass(t.id2)):(this.addClass(t.id1),this.addInterface(t.id2,t.id1),t.id2="interface"+(this.interfaces.length-1)):(this.addClass(t.id2),this.addInterface(t.id1,t.id2),t.id1="interface"+(this.interfaces.length-1)),t.id1=this.splitClassNameAndType(t.id1).className,t.id2=this.splitClassNameAndType(t.id2).className,t.relationTitle1=on.sanitizeText(t.relationTitle1.trim(),na()),t.relationTitle2=on.sanitizeText(t.relationTitle2.trim(),na()),this.relations.push(t)}addAnnotation(t,e){let r=this.splitClassNameAndType(t).className;this.classes.get(r).annotations.push(e)}addMember(t,e){this.addClass(t);let r=this.splitClassNameAndType(t).className,i=this.classes.get(r);if("string"==typeof e){let t=e.trim();t.startsWith("<<")&&t.endsWith(">>")?i.annotations.push(FTt(t.substring(2,t.length-2))):t.indexOf(")")>0?i.methods.push(new OTt(t,"method")):t&&i.members.push(new OTt(t,"attribute"))}}addMembers(t,e){Array.isArray(e)&&(e.reverse(),e.forEach((e=>this.addMember(t,e))))}addNote(t,e){let r={id:`note${this.notes.length}`,class:e,text:t};this.notes.push(r)}cleanupLabel(t){return t.startsWith(":")&&(t=t.substring(1)),FTt(t.trim())}setCssClass(t,e){t.split(",").forEach((t=>{let r=t;/\d/.exec(t[0])&&(r=PTt+r);let i=this.classes.get(r);i&&(i.cssClasses+=" "+e)}))}defineClass(t,e){for(let r of t){let t=this.styleClasses.get(r);void 0===t&&(t={id:r,styles:[],textStyles:[]},this.styleClasses.set(r,t)),e&&e.forEach((e=>{if(/color/.exec(e)){let r=e.replace("fill","bgFill");t.textStyles.push(r)}t.styles.push(e)})),this.classes.forEach((t=>{t.cssClasses.includes(r)&&t.styles.push(...e.flatMap((t=>t.split(","))))}))}}setTooltip(t,e){t.split(",").forEach((t=>{void 0!==e&&(this.classes.get(t).tooltip=FTt(e))}))}getTooltip(t,e){return e&&this.namespaces.has(e)?this.namespaces.get(e).classes.get(t).tooltip:this.classes.get(t).tooltip}setLink(t,e,r){let i=na();t.split(",").forEach((t=>{let n=t;/\d/.exec(t[0])&&(n=PTt+n);let a=this.classes.get(n);a&&(a.link=kL.formatUrl(e,i),"sandbox"===i.securityLevel?a.linkTarget="_top":a.linkTarget="string"==typeof r?FTt(r):"_blank")})),this.setCssClass(t,"clickable")}setClickEvent(t,e,r){t.split(",").forEach((t=>{this.setClickFunc(t,e,r),this.classes.get(t).haveCallback=!0})),this.setCssClass(t,"clickable")}setClickFunc(t,e,r){let i=on.sanitizeText(t,na());if("loose"!==na().securityLevel||void 0===e)return;let n=i;if(this.classes.has(n)){let t=this.lookUpDomId(n),i=[];if("string"==typeof r){i=r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);for(let t=0;t<i.length;t++){let e=i[t].trim();e.startsWith('"')&&e.endsWith('"')&&(e=e.substr(1,e.length-2)),i[t]=e}}0===i.length&&i.push(t),this.functions.push((()=>{let r=document.querySelector(`[id="${t}"]`);null!==r&&r.addEventListener("click",(()=>{kL.runFunc(e,...i)}),!1)}))}}bindFunctions(t){this.functions.forEach((e=>{e(t)}))}getDirection(){return this.direction}setDirection(t){this.direction=t}addNamespace(t){this.namespaces.has(t)||(this.namespaces.set(t,{id:t,classes:new Map,children:{},domId:PTt+t+"-"+this.namespaceCounter}),this.namespaceCounter++)}getNamespace(t){return this.namespaces.get(t)}getNamespaces(){return this.namespaces}addClassesToNamespace(t,e){if(this.namespaces.has(t))for(let r of e){let{className:e}=this.splitClassNameAndType(r);this.classes.get(e).parent=t,this.namespaces.get(t).classes.set(e,this.classes.get(e))}}setCssStyle(t,e){let r=this.classes.get(t);if(e&&r)for(let t of e)t.includes(",")?r.styles.push(...t.split(",")):r.styles.push(t)}getArrowMarker(t){let e;switch(t){case 0:e="aggregation";break;case 1:e="extension";break;case 2:e="composition";break;case 3:e="dependency";break;case 4:e="lollipop";break;default:e="none"}return e}getData(){let t=[],e=[],r=na();for(let e of this.namespaces.keys()){let i=this.namespaces.get(e);if(i){let e={id:i.id,label:i.id,isGroup:!0,padding:r.class.padding??16,shape:"rect",cssStyles:["fill: none","stroke: black"],look:r.look};t.push(e)}}for(let e of this.classes.keys()){let i=this.classes.get(e);if(i){let e=i;e.parentId=i.parent,e.look=r.look,t.push(e)}}let i=0;for(let n of this.notes){i++;let a={id:n.id,label:n.text,isGroup:!1,shape:"note",padding:r.class.padding??6,cssStyles:["text-align: left","white-space: nowrap",`fill: ${r.themeVariables.noteBkgColor}`,`stroke: ${r.themeVariables.noteBorderColor}`],look:r.look};t.push(a);let s=this.classes.get(n.class)?.id??"";if(s){let t={id:`edgeNote${i}`,start:n.id,end:s,type:"normal",thickness:"normal",classes:"relation",arrowTypeStart:"none",arrowTypeEnd:"none",arrowheadStyle:"",labelStyle:[""],style:["fill: none"],pattern:"dotted",look:r.look};e.push(t)}}for(let e of this.interfaces){let i={id:e.id,label:e.label,isGroup:!1,shape:"rect",cssStyles:["opacity: 0;"],look:r.look};t.push(i)}i=0;for(let t of this.relations){i++;let n={id:wL(t.id1,t.id2,{prefix:"id",counter:i}),start:t.id1,end:t.id2,type:"normal",label:t.title,labelpos:"c",thickness:"normal",classes:"relation",arrowTypeStart:this.getArrowMarker(t.relation.type1),arrowTypeEnd:this.getArrowMarker(t.relation.type2),startLabelRight:"none"===t.relationTitle1?"":t.relationTitle1,endLabelLeft:"none"===t.relationTitle2?"":t.relationTitle2,arrowheadStyle:"",labelStyle:["display: inline-block"],style:t.style||"",pattern:1==t.relation.lineType?"dashed":"solid",look:r.look};e.push(n)}return{nodes:t,edges:e,other:{},config:r,direction:this.getDirection()}}}})),QTt=y((()=>{m5(),jTt=g((t=>`g.classGroup text {\n  fill: ${t.nodeBorder||t.classText};\n  stroke: none;\n  font-family: ${t.fontFamily};\n  font-size: 10px;\n\n  .title {\n    font-weight: bolder;\n  }\n\n}\n\n.nodeLabel, .edgeLabel {\n  color: ${t.classText};\n}\n.edgeLabel .label rect {\n  fill: ${t.mainBkg};\n}\n.label text {\n  fill: ${t.classText};\n}\n\n.labelBkg {\n  background: ${t.mainBkg};\n}\n.edgeLabel .label span {\n  background: ${t.mainBkg};\n}\n\n.classTitle {\n  font-weight: bolder;\n}\n.node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n\n\n.divider {\n  stroke: ${t.nodeBorder};\n  stroke-width: 1;\n}\n\ng.clickable {\n  cursor: pointer;\n}\n\ng.classGroup rect {\n  fill: ${t.mainBkg};\n  stroke: ${t.nodeBorder};\n}\n\ng.classGroup line {\n  stroke: ${t.nodeBorder};\n  stroke-width: 1;\n}\n\n.classLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${t.mainBkg};\n  opacity: 0.5;\n}\n\n.classLabel .label {\n  fill: ${t.nodeBorder};\n  font-size: 10px;\n}\n\n.relation {\n  stroke: ${t.lineColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.dashed-line{\n  stroke-dasharray: 3;\n}\n\n.dotted-line{\n  stroke-dasharray: 1 2;\n}\n\n#compositionStart, .composition {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#compositionEnd, .composition {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#dependencyStart, .dependency {\n  fill: ${t.lineColor} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionStart, .extension {\n  fill: transparent !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#extensionEnd, .extension {\n  fill: transparent !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationStart, .aggregation {\n  fill: transparent !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#aggregationEnd, .aggregation {\n  fill: transparent !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopStart, .lollipop {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n#lollipopEnd, .lollipop {\n  fill: ${t.mainBkg} !important;\n  stroke: ${t.lineColor} !important;\n  stroke-width: 1;\n}\n\n.edgeTerminals {\n  font-size: 11px;\n  line-height: initial;\n}\n\n.classTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${t.textColor};\n}\n  ${o5()}\n`),"getStyles"),UTt=jTt})),ZTt=y((()=>{ns(),We(),Uj(),d5(),p5(),_L(),WTt=g(((t,e="TB")=>{if(!t.doc)return e;let r=e;for(let e of t.doc)"dir"===e.stmt&&(r=e.value);return r}),"getDir"),qTt=g((function(t,e){return e.db.getClasses()}),"getClasses"),YTt=g((async function(t,e,r,i){et.info("REF0:"),et.info("Drawing class diagram (v3)",e);let{securityLevel:n,state:a,layout:s}=na(),o=i.db.getData(),l=$j(e,n);o.type=i.type,o.layoutAlgorithm=K4(s),o.nodeSpacing=a?.nodeSpacing||50,o.rankSpacing=a?.rankSpacing||50,o.markers=["aggregation","extension","composition","dependency","lollipop"],o.diagramId=e,await X4(o,l);kL.insertTitle(l,"classDiagramTitleText",a?.titleTopMargin??25,i.db.getDiagramTitle()),Q4(l,8,"classDiagram",a?.useMaxWidth??!0)}),"draw"),GTt={getClasses:qTt,draw:YTt,getDir:WTt}})),JTt={};x(JTt,{diagram:()=>twt});var twt,ewt=y((()=>{VTt(),KTt(),QTt(),ZTt(),twt={parser:DTt,get db(){return new zTt},renderer:GTt,styles:UTt,init:g((t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute}),"init")}})),rwt={};x(rwt,{diagram:()=>iwt});var iwt,nwt,awt,swt,owt,lwt,cwt,hwt,uwt,dwt,pwt,fwt,gwt,ywt,mwt,xwt,bwt,kwt,vwt,Twt,wwt,_wt,Swt,Cwt,Ewt,Awt,$wt,Lwt,Rwt,Iwt,Nwt,Dwt,Mwt,Owt,Pwt,Bwt,Fwt=y((()=>{VTt(),KTt(),QTt(),ZTt(),iwt={parser:DTt,get db(){return new zTt},renderer:GTt,styles:UTt,init:g((t=>{t.class||(t.class={}),t.class.arrowMarkerAbsolute=t.arrowMarkerAbsolute}),"init")}})),zwt=y((()=>{(nwt=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[1,2],r=[1,3],i=[1,4],n=[2,4],a=[1,9],s=[1,11],o=[1,16],l=[1,17],c=[1,18],h=[1,19],u=[1,33],d=[1,20],p=[1,21],f=[1,22],y=[1,23],m=[1,24],x=[1,26],b=[1,27],k=[1,28],v=[1,29],T=[1,30],w=[1,31],_=[1,32],S=[1,35],C=[1,36],E=[1,37],A=[1,38],$=[1,34],L=[1,4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],R=[1,4,5,14,15,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,39,40,41,45,48,51,52,53,54,57],I=[4,5,16,17,19,21,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],N={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,SPACE:4,NL:5,SD:6,document:7,line:8,statement:9,classDefStatement:10,styleStatement:11,cssClassStatement:12,idStatement:13,DESCR:14,"--\x3e":15,HIDE_EMPTY:16,scale:17,WIDTH:18,COMPOSIT_STATE:19,STRUCT_START:20,STRUCT_STOP:21,STATE_DESCR:22,AS:23,ID:24,FORK:25,JOIN:26,CHOICE:27,CONCURRENT:28,note:29,notePosition:30,NOTE_TEXT:31,direction:32,acc_title:33,acc_title_value:34,acc_descr:35,acc_descr_value:36,acc_descr_multiline_value:37,CLICK:38,STRING:39,HREF:40,classDef:41,CLASSDEF_ID:42,CLASSDEF_STYLEOPTS:43,DEFAULT:44,style:45,STYLE_IDS:46,STYLEDEF_STYLEOPTS:47,class:48,CLASSENTITY_IDS:49,STYLECLASS:50,direction_tb:51,direction_bt:52,direction_rl:53,direction_lr:54,eol:55,";":56,EDGE_STATE:57,STYLE_SEPARATOR:58,left_of:59,right_of:60,$accept:0,$end:1},terminals_:{2:"error",4:"SPACE",5:"NL",6:"SD",14:"DESCR",15:"--\x3e",16:"HIDE_EMPTY",17:"scale",18:"WIDTH",19:"COMPOSIT_STATE",20:"STRUCT_START",21:"STRUCT_STOP",22:"STATE_DESCR",23:"AS",24:"ID",25:"FORK",26:"JOIN",27:"CHOICE",28:"CONCURRENT",29:"note",31:"NOTE_TEXT",33:"acc_title",34:"acc_title_value",35:"acc_descr",36:"acc_descr_value",37:"acc_descr_multiline_value",38:"CLICK",39:"STRING",40:"HREF",41:"classDef",42:"CLASSDEF_ID",43:"CLASSDEF_STYLEOPTS",44:"DEFAULT",45:"style",46:"STYLE_IDS",47:"STYLEDEF_STYLEOPTS",48:"class",49:"CLASSENTITY_IDS",50:"STYLECLASS",51:"direction_tb",52:"direction_bt",53:"direction_rl",54:"direction_lr",56:";",57:"EDGE_STATE",58:"STYLE_SEPARATOR",59:"left_of",60:"right_of"},productions_:[0,[3,2],[3,2],[3,2],[7,0],[7,2],[8,2],[8,1],[8,1],[9,1],[9,1],[9,1],[9,1],[9,2],[9,3],[9,4],[9,1],[9,2],[9,1],[9,4],[9,3],[9,6],[9,1],[9,1],[9,1],[9,1],[9,4],[9,4],[9,1],[9,2],[9,2],[9,1],[9,5],[9,5],[10,3],[10,3],[11,3],[12,3],[32,1],[32,1],[32,1],[32,1],[55,1],[55,1],[13,1],[13,1],[13,3],[13,3],[30,1],[30,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 3:return i.setRootDoc(a[o]),a[o];case 4:this.$=[];break;case 5:"nl"!=a[o]&&(a[o-1].push(a[o]),this.$=a[o-1]);break;case 6:case 7:case 12:this.$=a[o];break;case 8:this.$="nl";break;case 13:let t=a[o-1];t.description=i.trimColon(a[o]),this.$=t;break;case 14:this.$={stmt:"relation",state1:a[o-2],state2:a[o]};break;case 15:let e=i.trimColon(a[o]);this.$={stmt:"relation",state1:a[o-3],state2:a[o-1],description:e};break;case 19:this.$={stmt:"state",id:a[o-3],type:"default",description:"",doc:a[o-1]};break;case 20:var l=a[o],c=a[o-2].trim();if(a[o].match(":")){var h=a[o].split(":");l=h[0],c=[c,h[1]]}this.$={stmt:"state",id:l,type:"default",description:c};break;case 21:this.$={stmt:"state",id:a[o-3],type:"default",description:a[o-5],doc:a[o-1]};break;case 22:this.$={stmt:"state",id:a[o],type:"fork"};break;case 23:this.$={stmt:"state",id:a[o],type:"join"};break;case 24:this.$={stmt:"state",id:a[o],type:"choice"};break;case 25:this.$={stmt:"state",id:i.getDividerId(),type:"divider"};break;case 26:this.$={stmt:"state",id:a[o-1].trim(),note:{position:a[o-2].trim(),text:a[o].trim()}};break;case 29:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 30:case 31:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 32:this.$={stmt:"click",id:a[o-3],url:a[o-2],tooltip:a[o-1]};break;case 33:this.$={stmt:"click",id:a[o-3],url:a[o-1],tooltip:""};break;case 34:case 35:this.$={stmt:"classDef",id:a[o-1].trim(),classes:a[o].trim()};break;case 36:this.$={stmt:"style",id:a[o-1].trim(),styleClass:a[o].trim()};break;case 37:this.$={stmt:"applyClass",id:a[o-1].trim(),styleClass:a[o].trim()};break;case 38:i.setDirection("TB"),this.$={stmt:"dir",value:"TB"};break;case 39:i.setDirection("BT"),this.$={stmt:"dir",value:"BT"};break;case 40:i.setDirection("RL"),this.$={stmt:"dir",value:"RL"};break;case 41:i.setDirection("LR"),this.$={stmt:"dir",value:"LR"};break;case 44:case 45:this.$={stmt:"state",id:a[o].trim(),type:"default",description:""};break;case 46:case 47:this.$={stmt:"state",id:a[o-2].trim(),classes:[a[o].trim()],type:"default",description:""}}}),"anonymous"),table:[{3:1,4:e,5:r,6:i},{1:[3]},{3:5,4:e,5:r,6:i},{3:6,4:e,5:r,6:i},t([1,4,5,16,17,19,22,24,25,26,27,28,29,33,35,37,38,41,45,48,51,52,53,54,57],n,{7:7}),{1:[2,1]},{1:[2,2]},{1:[2,3],4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:l,19:c,22:h,24:u,25:d,26:p,27:f,28:y,29:m,32:25,33:x,35:b,37:k,38:v,41:T,45:w,48:_,51:S,52:C,53:E,54:A,57:$},t(L,[2,5]),{9:39,10:12,11:13,12:14,13:15,16:o,17:l,19:c,22:h,24:u,25:d,26:p,27:f,28:y,29:m,32:25,33:x,35:b,37:k,38:v,41:T,45:w,48:_,51:S,52:C,53:E,54:A,57:$},t(L,[2,7]),t(L,[2,8]),t(L,[2,9]),t(L,[2,10]),t(L,[2,11]),t(L,[2,12],{14:[1,40],15:[1,41]}),t(L,[2,16]),{18:[1,42]},t(L,[2,18],{20:[1,43]}),{23:[1,44]},t(L,[2,22]),t(L,[2,23]),t(L,[2,24]),t(L,[2,25]),{30:45,31:[1,46],59:[1,47],60:[1,48]},t(L,[2,28]),{34:[1,49]},{36:[1,50]},t(L,[2,31]),{13:51,24:u,57:$},{42:[1,52],44:[1,53]},{46:[1,54]},{49:[1,55]},t(R,[2,44],{58:[1,56]}),t(R,[2,45],{58:[1,57]}),t(L,[2,38]),t(L,[2,39]),t(L,[2,40]),t(L,[2,41]),t(L,[2,6]),t(L,[2,13]),{13:58,24:u,57:$},t(L,[2,17]),t(I,n,{7:59}),{24:[1,60]},{24:[1,61]},{23:[1,62]},{24:[2,48]},{24:[2,49]},t(L,[2,29]),t(L,[2,30]),{39:[1,63],40:[1,64]},{43:[1,65]},{43:[1,66]},{47:[1,67]},{50:[1,68]},{24:[1,69]},{24:[1,70]},t(L,[2,14],{14:[1,71]}),{4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:l,19:c,21:[1,72],22:h,24:u,25:d,26:p,27:f,28:y,29:m,32:25,33:x,35:b,37:k,38:v,41:T,45:w,48:_,51:S,52:C,53:E,54:A,57:$},t(L,[2,20],{20:[1,73]}),{31:[1,74]},{24:[1,75]},{39:[1,76]},{39:[1,77]},t(L,[2,34]),t(L,[2,35]),t(L,[2,36]),t(L,[2,37]),t(R,[2,46]),t(R,[2,47]),t(L,[2,15]),t(L,[2,19]),t(I,n,{7:78}),t(L,[2,26]),t(L,[2,27]),{5:[1,79]},{5:[1,80]},{4:a,5:s,8:8,9:10,10:12,11:13,12:14,13:15,16:o,17:l,19:c,21:[1,81],22:h,24:u,25:d,26:p,27:f,28:y,29:m,32:25,33:x,35:b,37:k,38:v,41:T,45:w,48:_,51:S,52:C,53:E,54:A,57:$},t(L,[2,32]),t(L,[2,33]),t(L,[2,21])],defaultActions:{5:[2,1],6:[2,2],47:[2,48],48:[2,49]},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},D={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:g((function(t,e,r,i){switch(r){case 0:return 38;case 1:return 40;case 2:return 39;case 3:return 44;case 4:case 45:return 51;case 5:case 46:return 52;case 6:case 47:return 53;case 7:case 48:return 54;case 8:case 9:case 11:case 12:case 13:case 14:case 57:case 59:case 65:break;case 10:case 80:return 5;case 15:case 35:return this.pushState("SCALE"),17;case 16:case 36:return 18;case 17:case 23:case 37:case 52:case 55:this.popState();break;case 18:return this.begin("acc_title"),33;case 19:return this.popState(),"acc_title_value";case 20:return this.begin("acc_descr"),35;case 21:return this.popState(),"acc_descr_value";case 22:this.begin("acc_descr_multiline");break;case 24:return"acc_descr_multiline_value";case 25:return this.pushState("CLASSDEF"),41;case 26:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 27:return this.popState(),this.pushState("CLASSDEFID"),42;case 28:return this.popState(),43;case 29:return this.pushState("CLASS"),48;case 30:return this.popState(),this.pushState("CLASS_STYLE"),49;case 31:return this.popState(),50;case 32:return this.pushState("STYLE"),45;case 33:return this.popState(),this.pushState("STYLEDEF_STYLES"),46;case 34:return this.popState(),47;case 38:this.pushState("STATE");break;case 39:case 42:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),25;case 40:case 43:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),26;case 41:case 44:return this.popState(),e.yytext=e.yytext.slice(0,-10).trim(),27;case 49:this.pushState("STATE_STRING");break;case 50:return this.pushState("STATE_ID"),"AS";case 51:case 67:return this.popState(),"ID";case 53:return"STATE_DESCR";case 54:return 19;case 56:return this.popState(),this.pushState("struct"),20;case 58:return this.popState(),21;case 60:return this.begin("NOTE"),29;case 61:return this.popState(),this.pushState("NOTE_ID"),59;case 62:return this.popState(),this.pushState("NOTE_ID"),60;case 63:this.popState(),this.pushState("FLOATING_NOTE");break;case 64:return this.popState(),this.pushState("FLOATING_NOTE_ID"),"AS";case 66:return"NOTE_TEXT";case 68:return this.popState(),this.pushState("NOTE_TEXT"),24;case 69:return this.popState(),e.yytext=e.yytext.substr(2).trim(),31;case 70:return this.popState(),e.yytext=e.yytext.slice(0,-8).trim(),31;case 71:case 72:return 6;case 73:return 16;case 74:return 57;case 75:return 24;case 76:return e.yytext=e.yytext.trim(),14;case 77:return 15;case 78:return 28;case 79:return 58;case 81:return"INVALID"}}),"anonymous"),rules:[/^(?:click\b)/i,/^(?:href\b)/i,/^(?:"[^"]*")/i,/^(?:default\b)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:[\s]+)/i,/^(?:((?!\n)\s)+)/i,/^(?:#[^\n]*)/i,/^(?:%[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:classDef\s+)/i,/^(?:DEFAULT\s+)/i,/^(?:\w+\s+)/i,/^(?:[^\n]*)/i,/^(?:class\s+)/i,/^(?:(\w+)+((,\s*\w+)*))/i,/^(?:[^\n]*)/i,/^(?:style\s+)/i,/^(?:[\w,]+\s+)/i,/^(?:[^\n]*)/i,/^(?:scale\s+)/i,/^(?:\d+)/i,/^(?:\s+width\b)/i,/^(?:state\s+)/i,/^(?:.*<<fork>>)/i,/^(?:.*<<join>>)/i,/^(?:.*<<choice>>)/i,/^(?:.*\[\[fork\]\])/i,/^(?:.*\[\[join\]\])/i,/^(?:.*\[\[choice\]\])/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:["])/i,/^(?:\s*as\s+)/i,/^(?:[^\n\{]*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n\s\{]+)/i,/^(?:\n)/i,/^(?:\{)/i,/^(?:%%(?!\{)[^\n]*)/i,/^(?:\})/i,/^(?:[\n])/i,/^(?:note\s+)/i,/^(?:left of\b)/i,/^(?:right of\b)/i,/^(?:")/i,/^(?:\s*as\s*)/i,/^(?:["])/i,/^(?:[^"]*)/i,/^(?:[^\n]*)/i,/^(?:\s*[^:\n\s\-]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:[\s\S]*?end note\b)/i,/^(?:stateDiagram\s+)/i,/^(?:stateDiagram-v2\s+)/i,/^(?:hide empty description\b)/i,/^(?:\[\*\])/i,/^(?:[^:\n\s\-\{]+)/i,/^(?:\s*:[^:\n;]+)/i,/^(?:-->)/i,/^(?:--)/i,/^(?::::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{LINE:{rules:[12,13],inclusive:!1},struct:{rules:[12,13,25,29,32,38,45,46,47,48,57,58,59,60,74,75,76,77,78],inclusive:!1},FLOATING_NOTE_ID:{rules:[67],inclusive:!1},FLOATING_NOTE:{rules:[64,65,66],inclusive:!1},NOTE_TEXT:{rules:[69,70],inclusive:!1},NOTE_ID:{rules:[68],inclusive:!1},NOTE:{rules:[61,62,63],inclusive:!1},STYLEDEF_STYLEOPTS:{rules:[],inclusive:!1},STYLEDEF_STYLES:{rules:[34],inclusive:!1},STYLE_IDS:{rules:[],inclusive:!1},STYLE:{rules:[33],inclusive:!1},CLASS_STYLE:{rules:[31],inclusive:!1},CLASS:{rules:[30],inclusive:!1},CLASSDEFID:{rules:[28],inclusive:!1},CLASSDEF:{rules:[26,27],inclusive:!1},acc_descr_multiline:{rules:[23,24],inclusive:!1},acc_descr:{rules:[21],inclusive:!1},acc_title:{rules:[19],inclusive:!1},SCALE:{rules:[16,17,36,37],inclusive:!1},ALIAS:{rules:[],inclusive:!1},STATE_ID:{rules:[51],inclusive:!1},STATE_STRING:{rules:[52,53],inclusive:!1},FORK_STATE:{rules:[],inclusive:!1},STATE:{rules:[12,13,39,40,41,42,43,44,49,50,54,55,56],inclusive:!1},ID:{rules:[12,13],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,13,14,15,18,20,22,25,29,32,35,38,56,60,71,72,73,74,75,76,77,79,80,81],inclusive:!0}}};function M(){this.yy={}}return N.lexer=D,g(M,"Parser"),M.prototype=N,N.Parser=M,new M}()).parser=nwt,awt=nwt})),jwt=y((()=>{swt="state",owt="root",lwt="relation",cwt="classDef",hwt="style",uwt="applyClass",dwt="default",pwt="divider",fwt="fill:none",gwt="fill: #333",ywt="text",mwt="normal",xwt="rect",bwt="rectWithTitle",kwt="stateStart",vwt="stateEnd",Twt="divider",wwt="roundedWithTitle",_wt="note",Swt="noteGroup",Ewt=`${Cwt="statediagram"}-state`,$wt=`${Awt="transition"} note-edge`,Lwt=`${Cwt}-note`,Rwt=`${Cwt}-cluster`,Iwt=`${Cwt}-cluster-alt`,Mwt="state",Pwt=`${Owt="----"}${Dwt="note"}`,Bwt=`${Owt}${Nwt="parent"}`}));function Uwt(t="",e=0,r="",i=Owt){let n=null!==r&&r.length>0?`${i}${r}`:"";return`${Mwt}-${t}${n}-${e}`}function Wwt(t,e,r){if(!e.id||"</join></fork>"===e.id||"</choice>"===e.id)return;e.cssClasses&&(Array.isArray(e.cssCompiledStyles)||(e.cssCompiledStyles=[]),e.cssClasses.split(" ").forEach((t=>{let i=r.get(t);i&&(e.cssCompiledStyles=[...e.cssCompiledStyles??[],...i.styles])})));let i=t.find((t=>t.id===e.id));i?Object.assign(i,e):t.push(e)}function qwt(t){return t?.classes?.join(" ")??""}function Ywt(t){return t?.styles??[]}var Gwt,Hwt,Vwt,Xwt,Kwt,Qwt,Zwt,Jwt,t_t,e_t,r_t,i_t,n_t,a_t,s_t,o_t,l_t,c_t,h_t,u_t,d_t,p_t,f_t,g_t,y_t,m_t,x_t,b_t,k_t,v_t,T_t,w_t,__t,S_t,C_t,E_t,A_t,$_t=y((()=>{ns(),We(),gn(),jwt(),Gwt=new Map,Hwt=0,g(Uwt,"stateDomId"),Vwt=g(((t,e,r,i,n,a,s,o)=>{et.trace("items",e),e.forEach((e=>{switch(e.stmt){case swt:case dwt:Kwt(t,e,r,i,n,a,s,o);break;case lwt:{Kwt(t,e.state1,r,i,n,a,s,o),Kwt(t,e.state2,r,i,n,a,s,o);let l={id:"edge"+Hwt,start:e.state1.id,end:e.state2.id,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:fwt,labelStyle:"",label:on.sanitizeText(e.description??"",na()),arrowheadStyle:gwt,labelpos:"c",labelType:ywt,thickness:mwt,classes:Awt,look:s};n.push(l),Hwt++}}}))}),"setupDoc"),Xwt=g(((t,e="TB")=>{let r=e;if(t.doc)for(let e of t.doc)"dir"===e.stmt&&(r=e.value);return r}),"getDir"),g(Wwt,"insertOrUpdateNode"),g(qwt,"getClassesFromDbInfo"),g(Ywt,"getStylesFromDbInfo"),Kwt=g(((t,e,r,i,n,a,s,o)=>{let l=e.id,c=r.get(l),h=qwt(c),u=Ywt(c),d=na();if(et.info("dataFetcher parsedItem",e,c,u),"root"!==l){let r=xwt;!0===e.start?r=kwt:!1===e.start&&(r=vwt),e.type!==dwt&&(r=e.type),Gwt.get(l)||Gwt.set(l,{id:l,shape:r,description:on.sanitizeText(l,d),cssClasses:`${h} ${Ewt}`,cssStyles:u});let c=Gwt.get(l);e.description&&(Array.isArray(c.description)?(c.shape=bwt,c.description.push(e.description)):c.description?.length&&c.description.length>0?(c.shape=bwt,c.description===l?c.description=[e.description]:c.description=[c.description,e.description]):(c.shape=xwt,c.description=e.description),c.description=on.sanitizeTextOrArray(c.description,d)),1===c.description?.length&&c.shape===bwt&&("group"===c.type?c.shape=wwt:c.shape=xwt),!c.type&&e.doc&&(et.info("Setting cluster for XCX",l,Xwt(e)),c.type="group",c.isGroup=!0,c.dir=Xwt(e),c.shape=e.type===pwt?Twt:wwt,c.cssClasses=`${c.cssClasses} ${Rwt} ${a?Iwt:""}`);let p={labelStyle:"",shape:c.shape,label:c.description,cssClasses:c.cssClasses,cssCompiledStyles:[],cssStyles:c.cssStyles,id:l,dir:c.dir,domId:Uwt(l,Hwt),type:c.type,isGroup:"group"===c.type,padding:8,rx:10,ry:10,look:s};if(p.shape===Twt&&(p.label=""),t&&"root"!==t.id&&(et.trace("Setting node ",l," to be child of its parent ",t.id),p.parentId=t.id),p.centerLabel=!0,e.note){let t={labelStyle:"",shape:_wt,label:e.note.text,cssClasses:Lwt,cssStyles:[],cssCompiledStyles:[],id:l+Pwt+"-"+Hwt,domId:Uwt(l,Hwt,Dwt),type:c.type,isGroup:"group"===c.type,padding:d.flowchart?.padding,look:s,position:e.note.position},r=l+Bwt,a={labelStyle:"",shape:Swt,label:e.note.text,cssClasses:c.cssClasses,cssStyles:[],id:l+Bwt,domId:Uwt(l,Hwt,Nwt),type:"group",isGroup:!0,padding:16,look:s,position:e.note.position};Hwt++,a.id=r,t.parentId=r,Wwt(i,a,o),Wwt(i,t,o),Wwt(i,p,o);let h=l,u=t.id;"left of"===e.note.position&&(h=t.id,u=l),n.push({id:h+"-"+u,start:h,end:u,arrowhead:"none",arrowTypeEnd:"",style:fwt,labelStyle:"",classes:$wt,arrowheadStyle:gwt,labelpos:"c",labelType:ywt,thickness:mwt,look:s})}else Wwt(i,p,o)}e.doc&&(et.trace("Adding nodes children "),Vwt(e,e.doc,r,i,n,!a,s,o))}),"dataFetcher"),Qwt=g((()=>{Gwt.clear(),Hwt=0}),"reset")})),L_t=y((()=>{ns(),We(),Uj(),d5(),p5(),_L(),jwt(),Zwt=g(((t,e="TB")=>{if(!t.doc)return e;let r=e;for(let e of t.doc)"dir"===e.stmt&&(r=e.value);return r}),"getDir"),Jwt=g((function(t,e){return e.db.getClasses()}),"getClasses"),t_t=g((async function(t,e,r,i){et.info("REF0:"),et.info("Drawing state diagram (v2)",e);let{securityLevel:n,state:a,layout:s}=na();i.db.extract(i.db.getRootDocV2());let o=i.db.getData(),l=$j(e,n);o.type=i.type,o.layoutAlgorithm=s,o.nodeSpacing=a?.nodeSpacing||50,o.rankSpacing=a?.rankSpacing||50,o.markers=["barb"],o.diagramId=e,await X4(o,l);try{("function"==typeof i.db.getLinks?i.db.getLinks():new Map).forEach(((t,e)=>{let r="string"==typeof e?e:"string"==typeof e?.id?e.id:"";if(!r)return void et.warn("⚠️ Invalid or missing stateId from key:",JSON.stringify(e));let i,n=l.node()?.querySelectorAll("g");if(n?.forEach((t=>{t.textContent?.trim()===r&&(i=t)})),!i)return void et.warn("⚠️ Could not find node matching text:",r);let a=i.parentNode;if(!a)return void et.warn("⚠️ Node has no parent, cannot wrap:",r);let s=document.createElementNS("http://www.w3.org/2000/svg","a"),o=t.url.replace(/^"+|"+$/g,"");if(s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),s.setAttribute("target","_blank"),t.tooltip){let e=t.tooltip.replace(/^"+|"+$/g,"");s.setAttribute("title",e)}a.replaceChild(s,i),s.appendChild(i),et.info("🔗 Wrapped node in <a> tag for:",r,t.url)}))}catch(t){et.error("❌ Error injecting clickable links:",t)}kL.insertTitle(l,"statediagramTitleText",a?.titleTopMargin??25,i.db.getDiagramTitle()),Q4(l,8,Cwt,a?.useMaxWidth??!0)}),"draw"),e_t={getClasses:Jwt,draw:t_t,getDir:Zwt}})),R_t=y((()=>{ns(),We(),_L(),gn(),is(),$_t(),L_t(),jwt(),r_t={START_NODE:"[*]",START_TYPE:"start",END_NODE:"[*]",END_TYPE:"end",COLOR_KEYWORD:"color",FILL_KEYWORD:"fill",BG_FILL:"bgFill",STYLECLASS_SEP:","},i_t=g((()=>new Map),"newClassesList"),n_t=g((()=>({relations:[],states:new Map,documents:{}})),"newDoc"),a_t=g((t=>JSON.parse(JSON.stringify(t))),"clone"),s_t=class{constructor(t){this.version=t,this.nodes=[],this.edges=[],this.rootDoc=[],this.classes=i_t(),this.documents={root:n_t()},this.currentDocument=this.documents.root,this.startEndCount=0,this.dividerCnt=0,this.links=new Map,this.getAccTitle=Qn,this.setAccTitle=Kn,this.getAccDescription=Jn,this.setAccDescription=Zn,this.setDiagramTitle=ta,this.getDiagramTitle=ea,this.clear(),this.setRootDoc=this.setRootDoc.bind(this),this.getDividerId=this.getDividerId.bind(this),this.setDirection=this.setDirection.bind(this),this.trimColon=this.trimColon.bind(this)}static{g(this,"StateDB")}static{this.relationType={AGGREGATION:0,EXTENSION:1,COMPOSITION:2,DEPENDENCY:3}}extract(t){this.clear(!0);for(let e of Array.isArray(t)?t:t.doc)switch(e.stmt){case swt:this.addState(e.id.trim(),e.type,e.doc,e.description,e.note);break;case lwt:this.addRelation(e.state1,e.state2,e.description);break;case cwt:this.addStyleClass(e.id.trim(),e.classes);break;case hwt:this.handleStyleDef(e);break;case uwt:this.setCssClass(e.id.trim(),e.styleClass);break;case"click":this.addLink(e.id,e.url,e.tooltip)}let e=this.getStates(),r=na();Qwt(),Kwt(void 0,this.getRootDocV2(),e,this.nodes,this.edges,!0,r.look,this.classes);for(let t of this.nodes)if(Array.isArray(t.label)){if(t.description=t.label.slice(1),t.isGroup&&t.description.length>0)throw new Error(`Group nodes can only have label. Remove the additional description for node [${t.id}]`);t.label=t.label[0]}}handleStyleDef(t){let e=t.id.trim().split(","),r=t.styleClass.split(",");for(let t of e){let e=this.getState(t);if(!e){let r=t.trim();this.addState(r),e=this.getState(r)}e&&(e.styles=r.map((t=>t.replace(/;/g,"")?.trim())))}}setRootDoc(t){et.info("Setting root doc",t),this.rootDoc=t,1===this.version?this.extract(t):this.extract(this.getRootDocV2())}docTranslator(t,e,r){if(e.stmt===lwt)return this.docTranslator(t,e.state1,!0),void this.docTranslator(t,e.state2,!1);if(e.stmt===swt&&(e.id===r_t.START_NODE?(e.id=t.id+(r?"_start":"_end"),e.start=r):e.id=e.id.trim()),e.stmt!==owt&&e.stmt!==swt||!e.doc)return;let i=[],n=[];for(let t of e.doc)if(t.type===pwt){let e=a_t(t);e.doc=a_t(n),i.push(e),n=[]}else n.push(t);if(i.length>0&&n.length>0){let t={stmt:swt,id:lL(),type:"divider",doc:a_t(n)};i.push(a_t(t)),e.doc=i}e.doc.forEach((t=>this.docTranslator(e,t,!0)))}getRootDocV2(){return this.docTranslator({id:owt,stmt:owt},{id:owt,stmt:owt,doc:this.rootDoc},!0),{id:owt,doc:this.rootDoc}}addState(t,e=dwt,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0){let l=t?.trim();if(this.currentDocument.states.has(l)){let t=this.currentDocument.states.get(l);if(!t)throw new Error(`State not found: ${l}`);t.doc||(t.doc=r),t.type||(t.type=e)}else et.info("Adding state ",l,i),this.currentDocument.states.set(l,{stmt:swt,id:l,descriptions:[],type:e,doc:r,note:n,classes:[],styles:[],textStyles:[]});if(i&&(et.info("Setting state description",l,i),(Array.isArray(i)?i:[i]).forEach((t=>this.addDescription(l,t.trim())))),n){let t=this.currentDocument.states.get(l);if(!t)throw new Error(`State not found: ${l}`);t.note=n,t.note.text=on.sanitizeText(t.note.text,na())}a&&(et.info("Setting state classes",l,a),(Array.isArray(a)?a:[a]).forEach((t=>this.setCssClass(l,t.trim())))),s&&(et.info("Setting state styles",l,s),(Array.isArray(s)?s:[s]).forEach((t=>this.setStyle(l,t.trim())))),o&&(et.info("Setting state styles",l,s),(Array.isArray(o)?o:[o]).forEach((t=>this.setTextStyle(l,t.trim()))))}clear(t){this.nodes=[],this.edges=[],this.documents={root:n_t()},this.currentDocument=this.documents.root,this.startEndCount=0,this.classes=i_t(),t||(this.links=new Map,Xn())}getState(t){return this.currentDocument.states.get(t)}getStates(){return this.currentDocument.states}logDocuments(){et.info("Documents = ",this.documents)}getRelations(){return this.currentDocument.relations}addLink(t,e,r){this.links.set(t,{url:e,tooltip:r}),et.warn("Adding link",t,e,r)}getLinks(){return this.links}startIdIfNeeded(t=""){return t===r_t.START_NODE?(this.startEndCount++,`${r_t.START_TYPE}${this.startEndCount}`):t}startTypeIfNeeded(t="",e=dwt){return t===r_t.START_NODE?r_t.START_TYPE:e}endIdIfNeeded(t=""){return t===r_t.END_NODE?(this.startEndCount++,`${r_t.END_TYPE}${this.startEndCount}`):t}endTypeIfNeeded(t="",e=dwt){return t===r_t.END_NODE?r_t.END_TYPE:e}addRelationObjs(t,e,r=""){let i=this.startIdIfNeeded(t.id.trim()),n=this.startTypeIfNeeded(t.id.trim(),t.type),a=this.startIdIfNeeded(e.id.trim()),s=this.startTypeIfNeeded(e.id.trim(),e.type);this.addState(i,n,t.doc,t.description,t.note,t.classes,t.styles,t.textStyles),this.addState(a,s,e.doc,e.description,e.note,e.classes,e.styles,e.textStyles),this.currentDocument.relations.push({id1:i,id2:a,relationTitle:on.sanitizeText(r,na())})}addRelation(t,e,r){if("object"==typeof t&&"object"==typeof e)this.addRelationObjs(t,e,r);else if("string"==typeof t&&"string"==typeof e){let i=this.startIdIfNeeded(t.trim()),n=this.startTypeIfNeeded(t),a=this.endIdIfNeeded(e.trim()),s=this.endTypeIfNeeded(e);this.addState(i,n),this.addState(a,s),this.currentDocument.relations.push({id1:i,id2:a,relationTitle:r?on.sanitizeText(r,na()):void 0})}}addDescription(t,e){let r=this.currentDocument.states.get(t),i=e.startsWith(":")?e.replace(":","").trim():e;r?.descriptions?.push(on.sanitizeText(i,na()))}cleanupLabel(t){return t.startsWith(":")?t.slice(2).trim():t.trim()}getDividerId(){return this.dividerCnt++,`divider-id-${this.dividerCnt}`}addStyleClass(t,e=""){this.classes.has(t)||this.classes.set(t,{id:t,styles:[],textStyles:[]});let r=this.classes.get(t);e&&r&&e.split(r_t.STYLECLASS_SEP).forEach((t=>{let e=t.replace(/([^;]*);/,"$1").trim();if(RegExp(r_t.COLOR_KEYWORD).exec(t)){let t=e.replace(r_t.FILL_KEYWORD,r_t.BG_FILL).replace(r_t.COLOR_KEYWORD,r_t.FILL_KEYWORD);r.textStyles.push(t)}r.styles.push(e)}))}getClasses(){return this.classes}setCssClass(t,e){t.split(",").forEach((t=>{let r=this.getState(t);if(!r){let e=t.trim();this.addState(e),r=this.getState(e)}r?.classes?.push(e)}))}setStyle(t,e){this.getState(t)?.styles?.push(e)}setTextStyle(t,e){this.getState(t)?.textStyles?.push(e)}getDirectionStatement(){return this.rootDoc.find((t=>"dir"===t.stmt))}getDirection(){return this.getDirectionStatement()?.value??"TB"}setDirection(t){let e=this.getDirectionStatement();e?e.value=t:this.rootDoc.unshift({stmt:"dir",value:t})}trimColon(t){return t.startsWith(":")?t.slice(1).trim():t.trim()}getData(){let t=na();return{nodes:this.nodes,edges:this.edges,other:{},config:t,direction:Zwt(this.getRootDocV2())}}getConfig(){return na().state}}})),I_t=y((()=>{o_t=g((t=>`\ndefs #statediagram-barbEnd {\n    fill: ${t.transitionColor};\n    stroke: ${t.transitionColor};\n  }\ng.stateGroup text {\n  fill: ${t.nodeBorder};\n  stroke: none;\n  font-size: 10px;\n}\ng.stateGroup text {\n  fill: ${t.textColor};\n  stroke: none;\n  font-size: 10px;\n\n}\ng.stateGroup .state-title {\n  font-weight: bolder;\n  fill: ${t.stateLabelColor};\n}\n\ng.stateGroup rect {\n  fill: ${t.mainBkg};\n  stroke: ${t.nodeBorder};\n}\n\ng.stateGroup line {\n  stroke: ${t.lineColor};\n  stroke-width: 1;\n}\n\n.transition {\n  stroke: ${t.transitionColor};\n  stroke-width: 1;\n  fill: none;\n}\n\n.stateGroup .composit {\n  fill: ${t.background};\n  border-bottom: 1px\n}\n\n.stateGroup .alt-composit {\n  fill: #e0e0e0;\n  border-bottom: 1px\n}\n\n.state-note {\n  stroke: ${t.noteBorderColor};\n  fill: ${t.noteBkgColor};\n\n  text {\n    fill: ${t.noteTextColor};\n    stroke: none;\n    font-size: 10px;\n  }\n}\n\n.stateLabel .box {\n  stroke: none;\n  stroke-width: 0;\n  fill: ${t.mainBkg};\n  opacity: 0.5;\n}\n\n.edgeLabel .label rect {\n  fill: ${t.labelBackgroundColor};\n  opacity: 0.5;\n}\n.edgeLabel {\n  background-color: ${t.edgeLabelBackground};\n  p {\n    background-color: ${t.edgeLabelBackground};\n  }\n  rect {\n    opacity: 0.5;\n    background-color: ${t.edgeLabelBackground};\n    fill: ${t.edgeLabelBackground};\n  }\n  text-align: center;\n}\n.edgeLabel .label text {\n  fill: ${t.transitionLabelColor||t.tertiaryTextColor};\n}\n.label div .edgeLabel {\n  color: ${t.transitionLabelColor||t.tertiaryTextColor};\n}\n\n.stateLabel text {\n  fill: ${t.stateLabelColor};\n  font-size: 10px;\n  font-weight: bold;\n}\n\n.node circle.state-start {\n  fill: ${t.specialStateColor};\n  stroke: ${t.specialStateColor};\n}\n\n.node .fork-join {\n  fill: ${t.specialStateColor};\n  stroke: ${t.specialStateColor};\n}\n\n.node circle.state-end {\n  fill: ${t.innerEndBackground};\n  stroke: ${t.background};\n  stroke-width: 1.5\n}\n.end-state-inner {\n  fill: ${t.compositeBackground||t.background};\n  // stroke: ${t.background};\n  stroke-width: 1.5\n}\n\n.node rect {\n  fill: ${t.stateBkg||t.mainBkg};\n  stroke: ${t.stateBorder||t.nodeBorder};\n  stroke-width: 1px;\n}\n.node polygon {\n  fill: ${t.mainBkg};\n  stroke: ${t.stateBorder||t.nodeBorder};;\n  stroke-width: 1px;\n}\n#statediagram-barbEnd {\n  fill: ${t.lineColor};\n}\n\n.statediagram-cluster rect {\n  fill: ${t.compositeTitleBackground};\n  stroke: ${t.stateBorder||t.nodeBorder};\n  stroke-width: 1px;\n}\n\n.cluster-label, .nodeLabel {\n  color: ${t.stateLabelColor};\n  // line-height: 1;\n}\n\n.statediagram-cluster rect.outer {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state .divider {\n  stroke: ${t.stateBorder||t.nodeBorder};\n}\n\n.statediagram-state .title-state {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-cluster.statediagram-cluster .inner {\n  fill: ${t.compositeBackground||t.background};\n}\n.statediagram-cluster.statediagram-cluster-alt .inner {\n  fill: ${t.altBackground?t.altBackground:"#efefef"};\n}\n\n.statediagram-cluster .inner {\n  rx:0;\n  ry:0;\n}\n\n.statediagram-state rect.basic {\n  rx: 5px;\n  ry: 5px;\n}\n.statediagram-state rect.divider {\n  stroke-dasharray: 10,10;\n  fill: ${t.altBackground?t.altBackground:"#efefef"};\n}\n\n.note-edge {\n  stroke-dasharray: 5;\n}\n\n.statediagram-note rect {\n  fill: ${t.noteBkgColor};\n  stroke: ${t.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n.statediagram-note rect {\n  fill: ${t.noteBkgColor};\n  stroke: ${t.noteBorderColor};\n  stroke-width: 1px;\n  rx: 0;\n  ry: 0;\n}\n\n.statediagram-note text {\n  fill: ${t.noteTextColor};\n}\n\n.statediagram-note .nodeLabel {\n  color: ${t.noteTextColor};\n}\n.statediagram .edgeLabel {\n  color: red; // ${t.noteTextColor};\n}\n\n#dependencyStart, #dependencyEnd {\n  fill: ${t.lineColor};\n  stroke: ${t.lineColor};\n  stroke-width: 1;\n}\n\n.statediagramTitleText {\n  text-anchor: middle;\n  font-size: 18px;\n  fill: ${t.textColor};\n}\n`),"getStyles"),l_t=o_t})),N_t=y((()=>{QT(),R_t(),_L(),gn(),ns(),We(),c_t=g((t=>t.append("circle").attr("class","start-state").attr("r",na().state.sizeUnit).attr("cx",na().state.padding+na().state.sizeUnit).attr("cy",na().state.padding+na().state.sizeUnit)),"drawStartState"),h_t=g((t=>t.append("line").style("stroke","grey").style("stroke-dasharray","3").attr("x1",na().state.textHeight).attr("class","divider").attr("x2",2*na().state.textHeight).attr("y1",0).attr("y2",0)),"drawDivider"),u_t=g(((t,e)=>{let r=t.append("text").attr("x",2*na().state.padding).attr("y",na().state.textHeight+2*na().state.padding).attr("font-size",na().state.fontSize).attr("class","state-title").text(e.id),i=r.node().getBBox();return t.insert("rect",":first-child").attr("x",na().state.padding).attr("y",na().state.padding).attr("width",i.width+2*na().state.padding).attr("height",i.height+2*na().state.padding).attr("rx",na().state.radius),r}),"drawSimpleState"),d_t=g(((t,e)=>{let r=g((function(t,e,r){let i=t.append("tspan").attr("x",2*na().state.padding).text(e);r||i.attr("dy",na().state.textHeight)}),"addTspan"),i=t.append("text").attr("x",2*na().state.padding).attr("y",na().state.textHeight+1.3*na().state.padding).attr("font-size",na().state.fontSize).attr("class","state-title").text(e.descriptions[0]).node().getBBox(),n=i.height,a=t.append("text").attr("x",na().state.padding).attr("y",n+.4*na().state.padding+na().state.dividerMargin+na().state.textHeight).attr("class","state-description"),s=!0,o=!0;e.descriptions.forEach((function(t){s||(r(a,t,o),o=!1),s=!1}));let l=t.append("line").attr("x1",na().state.padding).attr("y1",na().state.padding+n+na().state.dividerMargin/2).attr("y2",na().state.padding+n+na().state.dividerMargin/2).attr("class","descr-divider"),c=a.node().getBBox(),h=Math.max(c.width,i.width);return l.attr("x2",h+3*na().state.padding),t.insert("rect",":first-child").attr("x",na().state.padding).attr("y",na().state.padding).attr("width",h+2*na().state.padding).attr("height",c.height+n+2*na().state.padding).attr("rx",na().state.radius),t}),"drawDescrState"),p_t=g(((t,e,r)=>{let i=na().state.padding,n=2*na().state.padding,a=t.node().getBBox(),s=a.width,o=a.x,l=t.append("text").attr("x",0).attr("y",na().state.titleShift).attr("font-size",na().state.fontSize).attr("class","state-title").text(e.id),c=l.node().getBBox().width+n,h=Math.max(c,s);h===s&&(h+=n);let u,d=t.node().getBBox();e.doc,u=o-i,c>s&&(u=(s-h)/2+i),Math.abs(o-d.x)<i&&c>s&&(u=o-(c-s)/2);let p=1-na().state.textHeight;return t.insert("rect",":first-child").attr("x",u).attr("y",p).attr("class",r?"alt-composit":"composit").attr("width",h).attr("height",d.height+na().state.textHeight+na().state.titleShift+1).attr("rx","0"),l.attr("x",u+i),c<=s&&l.attr("x",o+(h-n)/2-c/2+i),t.insert("rect",":first-child").attr("x",u).attr("y",na().state.titleShift-na().state.textHeight-na().state.padding).attr("width",h).attr("height",3*na().state.textHeight).attr("rx",na().state.radius),t.insert("rect",":first-child").attr("x",u).attr("y",na().state.titleShift-na().state.textHeight-na().state.padding).attr("width",h).attr("height",d.height+3+2*na().state.textHeight).attr("rx",na().state.radius),t}),"addTitleAndBox"),f_t=g((t=>(t.append("circle").attr("class","end-state-outer").attr("r",na().state.sizeUnit+na().state.miniPadding).attr("cx",na().state.padding+na().state.sizeUnit+na().state.miniPadding).attr("cy",na().state.padding+na().state.sizeUnit+na().state.miniPadding),t.append("circle").attr("class","end-state-inner").attr("r",na().state.sizeUnit).attr("cx",na().state.padding+na().state.sizeUnit+2).attr("cy",na().state.padding+na().state.sizeUnit+2))),"drawEndState"),g_t=g(((t,e)=>{let r=na().state.forkWidth,i=na().state.forkHeight;if(e.parentId){let t=r;r=i,i=t}return t.append("rect").style("stroke","black").style("fill","black").attr("width",r).attr("height",i).attr("x",na().state.padding).attr("y",na().state.padding)}),"drawForkJoinState"),y_t=g(((t,e,r,i)=>{let n=0,a=i.append("text");a.style("text-anchor","start"),a.attr("class","noteText");let s=t.replace(/\r\n/g,"<br/>");s=s.replace(/\n/g,"<br/>");let o=s.split(on.lineBreakRegex),l=1.25*na().state.noteMargin;for(let t of o){let i=t.trim();if(i.length>0){let t=a.append("tspan");if(t.text(i),0===l){l+=t.node().getBBox().height}n+=l,t.attr("x",e+na().state.noteMargin),t.attr("y",r+n+1.25*na().state.noteMargin)}}return{textWidth:a.node().getBBox().width,textHeight:n}}),"_drawLongText"),m_t=g(((t,e)=>{e.attr("class","state-note");let r=e.append("rect").attr("x",0).attr("y",na().state.padding),i=e.append("g"),{textWidth:n,textHeight:a}=y_t(t,0,0,i);return r.attr("height",a+2*na().state.noteMargin),r.attr("width",n+2*na().state.noteMargin),r}),"drawNote"),x_t=g((function(t,e){let r=e.id,i={id:r,label:e.id,width:0,height:0},n=t.append("g").attr("id",r).attr("class","stateGroup");"start"===e.type&&c_t(n),"end"===e.type&&f_t(n),("fork"===e.type||"join"===e.type)&&g_t(n,e),"note"===e.type&&m_t(e.note.text,n),"divider"===e.type&&h_t(n),"default"===e.type&&0===e.descriptions.length&&u_t(n,e),"default"===e.type&&e.descriptions.length>0&&d_t(n,e);let a=n.node().getBBox();return i.width=a.width+2*na().state.padding,i.height=a.height+2*na().state.padding,i}),"drawState"),b_t=0,k_t=g((function(t,e,r){let i=g((function(t){switch(t){case s_t.relationType.AGGREGATION:return"aggregation";case s_t.relationType.EXTENSION:return"extension";case s_t.relationType.COMPOSITION:return"composition";case s_t.relationType.DEPENDENCY:return"dependency"}}),"getRelationType");e.points=e.points.filter((t=>!Number.isNaN(t.y)));let n=e.points,a=Vk().x((function(t){return t.x})).y((function(t){return t.y})).curve(hv),s=t.append("path").attr("d",a(n)).attr("id","edge"+b_t).attr("class","transition"),o="";if(na().state.arrowMarkerAbsolute&&(o=Gi(!0)),s.attr("marker-end","url("+o+"#"+i(s_t.relationType.DEPENDENCY)+"End)"),void 0!==r.title){let i=t.append("g").attr("class","stateLabel"),{x:n,y:a}=kL.calcLabelPosition(e.points),s=on.getRows(r.title),o=0,l=[],c=0,h=0;for(let t=0;t<=s.length;t++){let e=i.append("text").attr("text-anchor","middle").text(s[t]).attr("x",n).attr("y",a+o),r=e.node().getBBox();c=Math.max(c,r.width),h=Math.min(h,r.x),et.info(r.x,n,a+o),0===o&&(o=e.node().getBBox().height,et.info("Title height",o,a)),l.push(e)}let u=o*s.length;if(s.length>1){let t=(s.length-1)*o*.5;l.forEach(((e,r)=>e.attr("y",a+r*o-t))),u=o*s.length}let d=i.node().getBBox();i.insert("rect",":first-child").attr("class","box").attr("x",n-c/2-na().state.padding/2).attr("y",a-u/2-na().state.padding/2-3.5).attr("width",c+na().state.padding).attr("height",u+na().state.padding),et.info(d)}b_t++}),"drawEdge")})),D_t=y((()=>{QT(),w4(),h0(),We(),gn(),N_t(),ns(),Un(),T_t={},w_t=g((function(){}),"setConf"),__t=g((function(t){t.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}),"insertMarkers"),S_t=g((function(t,e,r,i){v_t=na().state;let n,a=na().securityLevel;"sandbox"===a&&(n=nh("#i"+e));let s=nh("sandbox"===a?n.nodes()[0].contentDocument.body:"body"),o="sandbox"===a?n.nodes()[0].contentDocument:document;et.debug("Rendering diagram "+t);let l=s.select(`[id='${e}']`);__t(l);let c=i.db.getRootDoc();E_t(c,l,void 0,!1,s,o,i);let h=v_t.padding,u=l.node().getBBox(),d=u.width+2*h,p=u.height+2*h;Rn(l,p,1.75*d,v_t.useMaxWidth),l.attr("viewBox",`${u.x-v_t.padding}  ${u.y-v_t.padding} `+d+" "+p)}),"draw"),C_t=g((t=>t?t.length*v_t.fontSizeFactor:1),"getLabelWidth"),E_t=g(((t,e,r,i,n,a,s)=>{let o,l=new l0({compound:!0,multigraph:!0}),c=!0;for(o=0;o<t.length;o++)if("relation"===t[o].stmt){c=!1;break}r?l.setGraph({rankdir:"LR",multigraph:!0,compound:!0,ranker:"tight-tree",ranksep:c?1:v_t.edgeLengthFactor,nodeSep:c?1:50,isMultiGraph:!0}):l.setGraph({rankdir:"TB",multigraph:!0,compound:!0,ranksep:c?1:v_t.edgeLengthFactor,nodeSep:c?1:50,ranker:"tight-tree",isMultiGraph:!0}),l.setDefaultEdgeLabel((function(){return{}}));let h=s.db.getStates(),u=s.db.getRelations(),d=Object.keys(h);for(let t of d){let o,c=h[t];if(r&&(c.parentId=r),c.doc){let t=e.append("g").attr("id",c.id).attr("class","stateGroup");o=E_t(c.doc,t,c.id,!i,n,a,s);{t=p_t(t,c,i);let e=t.node().getBBox();o.width=e.width,o.height=e.height+v_t.padding/2,T_t[c.id]={y:v_t.compositTitleSize}}}else o=x_t(e,c,l);if(c.note){let t={descriptions:[],id:c.id+"-note",note:c.note,type:"note"},r=x_t(e,t,l);"left of"===c.note.position?(l.setNode(o.id+"-note",r),l.setNode(o.id,o)):(l.setNode(o.id,o),l.setNode(o.id+"-note",r)),l.setParent(o.id,o.id+"-group"),l.setParent(o.id+"-note",o.id+"-group")}else l.setNode(o.id,o)}et.debug("Count=",l.nodeCount(),l);let p=0;u.forEach((function(t){p++,et.debug("Setting edge",t),l.setEdge(t.id1,t.id2,{relation:t,width:C_t(t.title),height:v_t.labelHeight*on.getRows(t.title).length,labelpos:"c"},"id"+p)})),K3(l),et.debug("Graph after layout",l.nodes());let f=e.node();l.nodes().forEach((function(t){void 0!==t&&void 0!==l.node(t)?(et.warn("Node "+t+": "+JSON.stringify(l.node(t))),n.select("#"+f.id+" #"+t).attr("transform","translate("+(l.node(t).x-l.node(t).width/2)+","+(l.node(t).y+(T_t[t]?T_t[t].y:0)-l.node(t).height/2)+" )"),n.select("#"+f.id+" #"+t).attr("data-x-shift",l.node(t).x-l.node(t).width/2),a.querySelectorAll("#"+f.id+" #"+t+" .divider").forEach((t=>{let e=t.parentElement,r=0,i=0;e&&(e.parentElement&&(r=e.parentElement.getBBox().width),i=parseInt(e.getAttribute("data-x-shift"),10),Number.isNaN(i)&&(i=0)),t.setAttribute("x1",0-i+8),t.setAttribute("x2",r-i-8)}))):et.debug("No Node "+t+": "+JSON.stringify(l.node(t)))}));let g=f.getBBox();l.edges().forEach((function(t){void 0!==t&&void 0!==l.edge(t)&&(et.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(l.edge(t))),k_t(e,l.edge(t),l.edge(t).relation))})),g=f.getBBox();let y={id:r||"root",label:r||"root",width:0,height:0};return y.width=g.width+2*v_t.padding,y.height=g.height+2*v_t.padding,et.debug("Doc rendered",y,l),y}),"renderDoc"),A_t={setConf:w_t,draw:S_t}})),M_t={};x(M_t,{diagram:()=>O_t});var O_t,P_t=y((()=>{zwt(),R_t(),I_t(),D_t(),O_t={parser:awt,get db(){return new s_t(1)},renderer:A_t,styles:l_t,init:g((t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute}),"init")}})),B_t={};x(B_t,{diagram:()=>F_t});var F_t,z_t,j_t,U_t,W_t,q_t,Y_t,G_t,H_t,V_t,X_t,K_t,Q_t,Z_t,J_t,tSt,eSt,rSt,iSt,nSt,aSt,sSt,oSt,lSt,cSt,hSt,uSt,dSt,pSt,fSt,gSt,ySt=y((()=>{zwt(),R_t(),I_t(),L_t(),F_t={parser:awt,get db(){return new s_t(2)},renderer:e_t,styles:l_t,init:g((t=>{t.state||(t.state={}),t.state.arrowMarkerAbsolute=t.arrowMarkerAbsolute}),"init")}})),mSt=y((()=>{(z_t=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[6,8,10,11,12,14,16,17,18],r=[1,9],i=[1,10],n=[1,11],a=[1,12],s=[1,13],o=[1,14],l={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,journey:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,taskName:18,taskData:19,$accept:0,$end:1},terminals_:{2:"error",4:"journey",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",18:"taskName",19:"taskData"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,2]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 1:return a[o-1];case 2:case 6:case 7:this.$=[];break;case 3:a[o-1].push(a[o]),this.$=a[o-1];break;case 4:case 5:this.$=a[o];break;case 8:i.setDiagramTitle(a[o].substr(6)),this.$=a[o].substr(6);break;case 9:this.$=a[o].trim(),i.setAccTitle(this.$);break;case 10:case 11:this.$=a[o].trim(),i.setAccDescription(this.$);break;case 12:i.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 13:i.addTask(a[o-1],a[o]),this.$="task"}}),"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:i,14:n,16:a,17:s,18:o},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:15,11:r,12:i,14:n,16:a,17:s,18:o},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,16]},{15:[1,17]},t(e,[2,11]),t(e,[2,12]),{19:[1,18]},t(e,[2,4]),t(e,[2,9]),t(e,[2,10]),t(e,[2,13])],defaultActions:{},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},c={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:g((function(t,e,r,i){switch(r){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 18;case 16:return 19;case 17:return":";case 18:return 6;case 19:return"INVALID"}}),"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:journey\b)/i,/^(?:title\s[^#\n;]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^#:\n;]+)/i,/^(?:[^#:\n;]+)/i,/^(?::[^#\n;]+)/i,/^(?::)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18,19],inclusive:!0}}};function h(){this.yy={}}return l.lexer=c,g(h,"Parser"),h.prototype=l,l.Parser=h,new h}()).parser=z_t,j_t=z_t})),xSt=y((()=>{ns(),is(),U_t="",W_t=[],q_t=[],Y_t=[],G_t=g((function(){W_t.length=0,q_t.length=0,U_t="",Y_t.length=0,Xn()}),"clear"),H_t=g((function(t){U_t=t,W_t.push(t)}),"addSection"),V_t=g((function(){return W_t}),"getSections"),X_t=g((function(){let t=J_t(),e=0;for(;!t&&e<100;)t=J_t(),e++;return q_t.push(...Y_t),q_t}),"getTasks"),K_t=g((function(){let t=[];return q_t.forEach((e=>{e.people&&t.push(...e.people)})),[...new Set(t)].sort()}),"updateActors"),Q_t=g((function(t,e){let r=e.substr(1).split(":"),i=0,n=[];1===r.length?(i=Number(r[0]),n=[]):(i=Number(r[0]),n=r[1].split(","));let a=n.map((t=>t.trim())),s={section:U_t,type:U_t,people:a,task:t,score:i};Y_t.push(s)}),"addTask"),Z_t=g((function(t){let e={section:U_t,type:U_t,description:t,task:t,classes:[]};q_t.push(e)}),"addTaskOrg"),J_t=g((function(){let t=g((function(t){return Y_t[t].processed}),"compileTask"),e=!0;for(let[r,i]of Y_t.entries())t(r),e=e&&i.processed;return e}),"compileTasks"),tSt=g((function(){return K_t()}),"getActors"),eSt={getConfig:g((()=>na().journey),"getConfig"),clear:G_t,setDiagramTitle:ta,getDiagramTitle:ea,setAccTitle:Kn,getAccTitle:Qn,setAccDescription:Zn,getAccDescription:Jn,addSection:H_t,getSections:V_t,getTasks:X_t,addTask:Q_t,addTaskOrg:Z_t,getActors:tSt}})),bSt=y((()=>{m5(),rSt=g((t=>`.label {\n    font-family: ${t.fontFamily};\n    color: ${t.textColor};\n  }\n  .mouth {\n    stroke: #666;\n  }\n\n  line {\n    stroke: ${t.textColor}\n  }\n\n  .legend {\n    fill: ${t.textColor};\n    font-family: ${t.fontFamily};\n  }\n\n  .label text {\n    fill: #333;\n  }\n  .label {\n    color: ${t.textColor}\n  }\n\n  .face {\n    ${t.faceColor?`fill: ${t.faceColor}`:"fill: #FFF8DC"};\n    stroke: #999;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${t.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${t.lineColor};\n    stroke-width: 1.5px;\n  }\n\n  .flowchart-link {\n    stroke: ${t.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${t.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n    }\n    text-align: center;\n  }\n\n  .cluster rect {\n  }\n\n  .cluster text {\n    fill: ${t.titleColor};\n  }\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${t.fontFamily};\n    font-size: 12px;\n    background: ${t.tertiaryColor};\n    border: 1px solid ${t.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .task-type-0, .section-type-0  {\n    ${t.fillType0?`fill: ${t.fillType0}`:""};\n  }\n  .task-type-1, .section-type-1  {\n    ${t.fillType0?`fill: ${t.fillType1}`:""};\n  }\n  .task-type-2, .section-type-2  {\n    ${t.fillType0?`fill: ${t.fillType2}`:""};\n  }\n  .task-type-3, .section-type-3  {\n    ${t.fillType0?`fill: ${t.fillType3}`:""};\n  }\n  .task-type-4, .section-type-4  {\n    ${t.fillType0?`fill: ${t.fillType4}`:""};\n  }\n  .task-type-5, .section-type-5  {\n    ${t.fillType0?`fill: ${t.fillType5}`:""};\n  }\n  .task-type-6, .section-type-6  {\n    ${t.fillType0?`fill: ${t.fillType6}`:""};\n  }\n  .task-type-7, .section-type-7  {\n    ${t.fillType0?`fill: ${t.fillType7}`:""};\n  }\n\n  .actor-0 {\n    ${t.actor0?`fill: ${t.actor0}`:""};\n  }\n  .actor-1 {\n    ${t.actor1?`fill: ${t.actor1}`:""};\n  }\n  .actor-2 {\n    ${t.actor2?`fill: ${t.actor2}`:""};\n  }\n  .actor-3 {\n    ${t.actor3?`fill: ${t.actor3}`:""};\n  }\n  .actor-4 {\n    ${t.actor4?`fill: ${t.actor4}`:""};\n  }\n  .actor-5 {\n    ${t.actor5?`fill: ${t.actor5}`:""};\n  }\n  ${o5()}\n`),"getStyles"),iSt=rSt})),kSt=y((()=>{QT(),tw(),nSt=g((function(t,e){return yT(t,e)}),"drawRect"),aSt=g((function(t,e){let r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=t.append("g");function n(t){let r=Bk().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);t.append("path").attr("class","mouth").attr("d",r).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(t){let r=Bk().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);t.append("path").attr("class","mouth").attr("d",r).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function s(t){t.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return i.append("circle").attr("cx",e.cx-5).attr("cy",e.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",e.cx+5).attr("cy",e.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),g(n,"smile"),g(a,"sad"),g(s,"ambivalent"),e.score>3?n(i):e.score<3?a(i):s(i),r}),"drawFace"),sSt=g((function(t,e){let r=t.append("circle");return r.attr("cx",e.cx),r.attr("cy",e.cy),r.attr("class","actor-"+e.pos),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("r",e.r),void 0!==r.class&&r.attr("class",r.class),void 0!==e.title&&r.append("title").text(e.title),r}),"drawCircle"),oSt=g((function(t,e){return xT(t,e)}),"drawText"),lSt=g((function(t,e){function r(t,e,r,i,n){return t+","+e+" "+(t+r)+","+e+" "+(t+r)+","+(e+i-n)+" "+(t+r-1.2*n)+","+(e+i)+" "+t+","+(e+i)}g(r,"genPoints");let i=t.append("polygon");i.attr("points",r(e.x,e.y,50,20,7)),i.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,oSt(t,e)}),"drawLabel"),cSt=g((function(t,e,r){let i=t.append("g"),n=vT();n.x=e.x,n.y=e.y,n.fill=e.fill,n.width=r.width*e.taskCount+r.diagramMarginX*(e.taskCount-1),n.height=r.height,n.class="journey-section section-type-"+e.num,n.rx=3,n.ry=3,nSt(i,n),pSt(r)(e.text,i,n.x,n.y,n.width,n.height,{class:"journey-section section-type-"+e.num},r,e.colour)}),"drawSection"),hSt=-1,uSt=g((function(t,e,r){let i=e.x+r.width/2,n=t.append("g");hSt++,n.append("line").attr("id","task"+hSt).attr("x1",i).attr("y1",e.y).attr("x2",i).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),aSt(n,{cx:i,cy:300+30*(5-e.score),score:e.score});let a=vT();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=r.width,a.height=r.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,nSt(n,a);let s=e.x+14;e.people.forEach((t=>{let r=e.actors[t].color,i={cx:s,cy:e.y,r:7,fill:r,stroke:"#000",title:t,pos:e.actors[t].position};sSt(n,i),s+=10})),pSt(r)(e.task,n,a.x,a.y,a.width,a.height,{class:"task"},r,e.colour)}),"drawTask"),dSt=g((function(t,e){mT(t,e)}),"drawBackgroundRect"),pSt=function(){function t(t,e,r,n,a,s,o,l){i(e.append("text").attr("x",r+a/2).attr("y",n+s/2+5).style("font-color",l).style("text-anchor","middle").text(t),o)}function e(t,e,r,n,a,s,o,l,c){let{taskFontSize:h,taskFontFamily:u}=l,d=t.split(/<br\s*\/?>/gi);for(let t=0;t<d.length;t++){let l=t*h-h*(d.length-1)/2,p=e.append("text").attr("x",r+a/2).attr("y",n).attr("fill",c).style("text-anchor","middle").style("font-size",h).style("font-family",u);p.append("tspan").attr("x",r+a/2).attr("dy",l).text(d[t]),p.attr("y",n+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(p,o)}}function r(t,r,n,a,s,o,l,c){let h=r.append("switch"),u=h.append("foreignObject").attr("x",n).attr("y",a).attr("width",s).attr("height",o).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,h,n,a,s,o,l,c),i(u,l)}function i(t,e){for(let r in e)r in e&&t.attr(r,e[r])}return g(t,"byText"),g(e,"byTspan"),g(r,"byFo"),g(i,"_setTextAttrs"),function(i){return"fo"===i.textPlacement?r:"old"===i.textPlacement?t:e}}(),fSt=g((function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")}),"initGraphics"),gSt={drawRect:nSt,drawCircle:sSt,drawSection:cSt,drawText:oSt,drawLabel:lSt,drawTask:uSt,drawBackgroundRect:dSt,initGraphics:fSt}}));function vSt(t){let e=na().journey,r=e.maxLabelWidth;_St=0;let i=60;Object.keys(wSt).forEach((n=>{let a=wSt[n].color,s={cx:20,cy:i,r:7,fill:a,stroke:"#000",pos:wSt[n].position};gSt.drawCircle(t,s);let o=t.append("text").attr("visibility","hidden").text(n),l=o.node().getBoundingClientRect().width;o.remove();let c=[];if(l<=r)c=[n];else{let e=n.split(" "),i="";o=t.append("text").attr("visibility","hidden"),e.forEach((t=>{let e=i?`${i} ${t}`:t;if(o.text(e),o.node().getBoundingClientRect().width>r){if(i&&c.push(i),i=t,o.text(t),o.node().getBoundingClientRect().width>r){let e="";for(let i of t)e+=i,o.text(e+"-"),o.node().getBoundingClientRect().width>r&&(c.push(e.slice(0,-1)+"-"),e=i);i=e}}else i=e})),i&&c.push(i),o.remove()}c.forEach(((r,n)=>{let a={x:40,y:i+7+20*n,fill:"#666",text:r,textMargin:e.boxTextMargin??5},s=gSt.drawText(t,a).node().getBoundingClientRect().width;s>_St&&s>e.leftMargin-s&&(_St=s)})),i+=Math.max(20,20*c.length)}))}var TSt,wSt,_St,SSt,CSt,ESt,ASt,$St,LSt,RSt,ISt,NSt=y((()=>{QT(),kSt(),ns(),Un(),TSt=g((function(t){Object.keys(t).forEach((function(e){SSt[e]=t[e]}))}),"setConf"),wSt={},_St=0,g(vSt,"drawActorLegend"),SSt=na().journey,CSt=0,ESt=g((function(t,e,r,i){let n,a=na(),s=a.journey.titleColor,o=a.journey.titleFontSize,l=a.journey.titleFontFamily,c=a.securityLevel;"sandbox"===c&&(n=nh("#i"+e));let h=nh("sandbox"===c?n.nodes()[0].contentDocument.body:"body");ASt.init();let u=h.select("#"+e);gSt.initGraphics(u);let d=i.db.getTasks(),p=i.db.getDiagramTitle(),f=i.db.getActors();for(let t in wSt)delete wSt[t];let g=0;f.forEach((t=>{wSt[t]={color:SSt.actorColours[g%SSt.actorColours.length],position:g},g++})),vSt(u),CSt=SSt.leftMargin+_St,ASt.insert(0,0,CSt,50*Object.keys(wSt).length),RSt(u,d,0);let y=ASt.getBounds();p&&u.append("text").text(p).attr("x",CSt).attr("font-size",o).attr("font-weight","bold").attr("y",25).attr("fill",s).attr("font-family",l);let m=y.stopy-y.starty+2*SSt.diagramMarginY,x=CSt+y.stopx+2*SSt.diagramMarginX;Rn(u,m,x,SSt.useMaxWidth),u.append("line").attr("x1",CSt).attr("y1",4*SSt.height).attr("x2",x-CSt-4).attr("y2",4*SSt.height).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)");let b=p?70:0;u.attr("viewBox",`${y.startx} -25 ${x} ${m+b}`),u.attr("preserveAspectRatio","xMinYMin meet"),u.attr("height",m+b+25)}),"draw"),ASt={data:{startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},verticalPos:0,sequenceItems:[],init:g((function(){this.sequenceItems=[],this.data={startx:void 0,stopx:void 0,starty:void 0,stopy:void 0},this.verticalPos=0}),"init"),updateVal:g((function(t,e,r,i){void 0===t[e]?t[e]=r:t[e]=i(r,t[e])}),"updateVal"),updateBounds:g((function(t,e,r,i){let n=na().journey,a=this,s=0;function o(o){return g((function(l){s++;let c=a.sequenceItems.length-s+1;a.updateVal(l,"starty",e-c*n.boxMargin,Math.min),a.updateVal(l,"stopy",i+c*n.boxMargin,Math.max),a.updateVal(ASt.data,"startx",t-c*n.boxMargin,Math.min),a.updateVal(ASt.data,"stopx",r+c*n.boxMargin,Math.max),"activation"!==o&&(a.updateVal(l,"startx",t-c*n.boxMargin,Math.min),a.updateVal(l,"stopx",r+c*n.boxMargin,Math.max),a.updateVal(ASt.data,"starty",e-c*n.boxMargin,Math.min),a.updateVal(ASt.data,"stopy",i+c*n.boxMargin,Math.max))}),"updateItemBounds")}g(o,"updateFn"),this.sequenceItems.forEach(o())}),"updateBounds"),insert:g((function(t,e,r,i){let n=Math.min(t,r),a=Math.max(t,r),s=Math.min(e,i),o=Math.max(e,i);this.updateVal(ASt.data,"startx",n,Math.min),this.updateVal(ASt.data,"starty",s,Math.min),this.updateVal(ASt.data,"stopx",a,Math.max),this.updateVal(ASt.data,"stopy",o,Math.max),this.updateBounds(n,s,a,o)}),"insert"),bumpVerticalPos:g((function(t){this.verticalPos=this.verticalPos+t,this.data.stopy=this.verticalPos}),"bumpVerticalPos"),getVerticalPos:g((function(){return this.verticalPos}),"getVerticalPos"),getBounds:g((function(){return this.data}),"getBounds")},$St=SSt.sectionFills,LSt=SSt.sectionColours,RSt=g((function(t,e,r){let i=na().journey,n="",a=r+(2*i.height+i.diagramMarginY),s=0,o="#CCC",l="black",c=0;for(let[r,h]of e.entries()){if(n!==h.section){o=$St[s%$St.length],c=s%$St.length,l=LSt[s%LSt.length];let a=0,u=h.section;for(let t=r;t<e.length&&e[t].section==u;t++)a+=1;let d={x:r*i.taskMargin+r*i.width+CSt,y:50,text:h.section,fill:o,num:c,colour:l,taskCount:a};gSt.drawSection(t,d,i),n=h.section,s++}let u=h.people.reduce(((t,e)=>(wSt[e]&&(t[e]=wSt[e]),t)),{});h.x=r*i.taskMargin+r*i.width+CSt,h.y=a,h.width=i.diagramMarginX,h.height=i.diagramMarginY,h.colour=l,h.fill=o,h.num=c,h.actors=u,gSt.drawTask(t,h,i),ASt.insert(h.x,h.y,h.x+h.width+i.taskMargin,450)}}),"drawTasks"),ISt={setConf:TSt,draw:ESt}})),DSt={};x(DSt,{diagram:()=>MSt});var MSt,OSt,PSt,BSt=y((()=>{mSt(),xSt(),bSt(),NSt(),MSt={parser:j_t,db:eSt,renderer:ISt,styles:iSt,init:g((t=>{ISt.setConf(t.journey),eSt.clear()}),"init")}})),FSt=y((()=>{(OSt=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[6,8,10,11,12,14,16,17,20,21],r=[1,9],i=[1,10],n=[1,11],a=[1,12],s=[1,13],o=[1,16],l=[1,17],c={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,timeline:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,title:11,acc_title:12,acc_title_value:13,acc_descr:14,acc_descr_value:15,acc_descr_multiline_value:16,section:17,period_statement:18,event_statement:19,period:20,event:21,$accept:0,$end:1},terminals_:{2:"error",4:"timeline",6:"EOF",8:"SPACE",10:"NEWLINE",11:"title",12:"acc_title",13:"acc_title_value",14:"acc_descr",15:"acc_descr_value",16:"acc_descr_multiline_value",17:"section",20:"period",21:"event"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,1],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[18,1],[19,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 1:return a[o-1];case 2:case 6:case 7:this.$=[];break;case 3:a[o-1].push(a[o]),this.$=a[o-1];break;case 4:case 5:this.$=a[o];break;case 8:i.getCommonDb().setDiagramTitle(a[o].substr(6)),this.$=a[o].substr(6);break;case 9:this.$=a[o].trim(),i.getCommonDb().setAccTitle(this.$);break;case 10:case 11:this.$=a[o].trim(),i.getCommonDb().setAccDescription(this.$);break;case 12:i.addSection(a[o].substr(8)),this.$=a[o].substr(8);break;case 15:i.addTask(a[o],0,""),this.$=a[o];break;case 16:i.addEvent(a[o].substr(2)),this.$=a[o]}}),"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},t(e,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:r,12:i,14:n,16:a,17:s,18:14,19:15,20:o,21:l},t(e,[2,7],{1:[2,1]}),t(e,[2,3]),{9:18,11:r,12:i,14:n,16:a,17:s,18:14,19:15,20:o,21:l},t(e,[2,5]),t(e,[2,6]),t(e,[2,8]),{13:[1,19]},{15:[1,20]},t(e,[2,11]),t(e,[2,12]),t(e,[2,13]),t(e,[2,14]),t(e,[2,15]),t(e,[2,16]),t(e,[2,4]),t(e,[2,9]),t(e,[2,10])],defaultActions:{},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},h={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:g((function(t,e,r,i){switch(r){case 0:case 1:case 3:case 4:break;case 2:return 10;case 5:return 4;case 6:return 11;case 7:return this.begin("acc_title"),12;case 8:return this.popState(),"acc_title_value";case 9:return this.begin("acc_descr"),14;case 10:return this.popState(),"acc_descr_value";case 11:this.begin("acc_descr_multiline");break;case 12:this.popState();break;case 13:return"acc_descr_multiline_value";case 14:return 17;case 15:return 21;case 16:return 20;case 17:return 6;case 18:return"INVALID"}}),"anonymous"),rules:[/^(?:%(?!\{)[^\n]*)/i,/^(?:[^\}]%%[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:#[^\n]*)/i,/^(?:timeline\b)/i,/^(?:title\s[^\n]+)/i,/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:section\s[^:\n]+)/i,/^(?::\s(?:[^:\n]|:(?!\s))+)/i,/^(?:[^#:\n]+)/i,/^(?:$)/i,/^(?:.)/i],conditions:{acc_descr_multiline:{rules:[12,13],inclusive:!1},acc_descr:{rules:[10],inclusive:!1},acc_title:{rules:[8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,9,11,14,15,16,17,18],inclusive:!0}}};function u(){this.yy={}}return c.lexer=h,g(u,"Parser"),u.prototype=c,c.Parser=u,new u}()).parser=OSt,PSt=OSt})),zSt={};x(zSt,{addEvent:()=>ZSt,addSection:()=>VSt,addTask:()=>QSt,addTaskOrg:()=>JSt,clear:()=>HSt,default:()=>eCt,getCommonDb:()=>GSt,getSections:()=>XSt,getTasks:()=>KSt});var jSt,USt,WSt,qSt,YSt,GSt,HSt,VSt,XSt,KSt,QSt,ZSt,JSt,tCt,eCt,rCt=y((()=>{is(),jSt="",USt=0,WSt=[],qSt=[],YSt=[],GSt=g((()=>qn),"getCommonDb"),HSt=g((function(){WSt.length=0,qSt.length=0,jSt="",YSt.length=0,Xn()}),"clear"),VSt=g((function(t){jSt=t,WSt.push(t)}),"addSection"),XSt=g((function(){return WSt}),"getSections"),KSt=g((function(){let t=tCt(),e=0;for(;!t&&e<100;)t=tCt(),e++;return qSt.push(...YSt),qSt}),"getTasks"),QSt=g((function(t,e,r){let i={id:USt++,section:jSt,type:jSt,task:t,score:e||0,events:r?[r]:[]};YSt.push(i)}),"addTask"),ZSt=g((function(t){YSt.find((t=>t.id===USt-1)).events.push(t)}),"addEvent"),JSt=g((function(t){let e={section:jSt,type:jSt,description:t,task:t,classes:[]};qSt.push(e)}),"addTaskOrg"),tCt=g((function(){let t=g((function(t){return YSt[t].processed}),"compileTask"),e=!0;for(let[r,i]of YSt.entries())t(r),e=e&&i.processed;return e}),"compileTasks"),eCt={clear:HSt,getCommonDb:GSt,addSection:VSt,getSections:XSt,getTasks:KSt,addTask:QSt,addTaskOrg:JSt,addEvent:ZSt}}));function iCt(t,e){t.each((function(){var t,r=nh(this),i=r.text().split(/(\s+|<br>)/).reverse(),n=[],a=r.attr("y"),s=parseFloat(r.attr("dy")),o=r.text(null).append("tspan").attr("x",0).attr("y",a).attr("dy",s+"em");for(let s=0;s<i.length;s++)t=i[i.length-1-s],n.push(t),o.text(n.join(" ").trim()),(o.node().getComputedTextLength()>e||"<br>"===t)&&(n.pop(),o.text(n.join(" ").trim()),n="<br>"===t?[""]:[t],o=r.append("tspan").attr("x",0).attr("y",a).attr("dy","1.1em").text(t))}))}var nCt,aCt,sCt,oCt,lCt,cCt,hCt,uCt,dCt,pCt,fCt,gCt,yCt,mCt,xCt,bCt,kCt,vCt,TCt,wCt,_Ct,SCt,CCt,ECt,ACt=y((()=>{QT(),nCt=g((function(t,e){let r=t.append("rect");return r.attr("x",e.x),r.attr("y",e.y),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("width",e.width),r.attr("height",e.height),r.attr("rx",e.rx),r.attr("ry",e.ry),void 0!==e.class&&r.attr("class",e.class),r}),"drawRect"),aCt=g((function(t,e){let r=t.append("circle").attr("cx",e.cx).attr("cy",e.cy).attr("class","face").attr("r",15).attr("stroke-width",2).attr("overflow","visible"),i=t.append("g");function n(t){let r=Bk().startAngle(Math.PI/2).endAngle(Math.PI/2*3).innerRadius(7.5).outerRadius(6.8181818181818175);t.append("path").attr("class","mouth").attr("d",r).attr("transform","translate("+e.cx+","+(e.cy+2)+")")}function a(t){let r=Bk().startAngle(3*Math.PI/2).endAngle(Math.PI/2*5).innerRadius(7.5).outerRadius(6.8181818181818175);t.append("path").attr("class","mouth").attr("d",r).attr("transform","translate("+e.cx+","+(e.cy+7)+")")}function s(t){t.append("line").attr("class","mouth").attr("stroke",2).attr("x1",e.cx-5).attr("y1",e.cy+7).attr("x2",e.cx+5).attr("y2",e.cy+7).attr("class","mouth").attr("stroke-width","1px").attr("stroke","#666")}return i.append("circle").attr("cx",e.cx-5).attr("cy",e.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),i.append("circle").attr("cx",e.cx+5).attr("cy",e.cy-5).attr("r",1.5).attr("stroke-width",2).attr("fill","#666").attr("stroke","#666"),g(n,"smile"),g(a,"sad"),g(s,"ambivalent"),e.score>3?n(i):e.score<3?a(i):s(i),r}),"drawFace"),sCt=g((function(t,e){let r=t.append("circle");return r.attr("cx",e.cx),r.attr("cy",e.cy),r.attr("class","actor-"+e.pos),r.attr("fill",e.fill),r.attr("stroke",e.stroke),r.attr("r",e.r),void 0!==r.class&&r.attr("class",r.class),void 0!==e.title&&r.append("title").text(e.title),r}),"drawCircle"),oCt=g((function(t,e){let r=e.text.replace(/<br\s*\/?>/gi," "),i=t.append("text");i.attr("x",e.x),i.attr("y",e.y),i.attr("class","legend"),i.style("text-anchor",e.anchor),void 0!==e.class&&i.attr("class",e.class);let n=i.append("tspan");return n.attr("x",e.x+2*e.textMargin),n.text(r),i}),"drawText"),lCt=g((function(t,e){function r(t,e,r,i,n){return t+","+e+" "+(t+r)+","+e+" "+(t+r)+","+(e+i-n)+" "+(t+r-1.2*n)+","+(e+i)+" "+t+","+(e+i)}g(r,"genPoints");let i=t.append("polygon");i.attr("points",r(e.x,e.y,50,20,7)),i.attr("class","labelBox"),e.y=e.y+e.labelMargin,e.x=e.x+.5*e.labelMargin,oCt(t,e)}),"drawLabel"),cCt=g((function(t,e,r){let i=t.append("g"),n=fCt();n.x=e.x,n.y=e.y,n.fill=e.fill,n.width=r.width,n.height=r.height,n.class="journey-section section-type-"+e.num,n.rx=3,n.ry=3,nCt(i,n),gCt(r)(e.text,i,n.x,n.y,n.width,n.height,{class:"journey-section section-type-"+e.num},r,e.colour)}),"drawSection"),hCt=-1,uCt=g((function(t,e,r){let i=e.x+r.width/2,n=t.append("g");hCt++,n.append("line").attr("id","task"+hCt).attr("x1",i).attr("y1",e.y).attr("x2",i).attr("y2",450).attr("class","task-line").attr("stroke-width","1px").attr("stroke-dasharray","4 2").attr("stroke","#666"),aCt(n,{cx:i,cy:300+30*(5-e.score),score:e.score});let a=fCt();a.x=e.x,a.y=e.y,a.fill=e.fill,a.width=r.width,a.height=r.height,a.class="task task-type-"+e.num,a.rx=3,a.ry=3,nCt(n,a),gCt(r)(e.task,n,a.x,a.y,a.width,a.height,{class:"task"},r,e.colour)}),"drawTask"),dCt=g((function(t,e){nCt(t,{x:e.startx,y:e.starty,width:e.stopx-e.startx,height:e.stopy-e.starty,fill:e.fill,class:"rect"}).lower()}),"drawBackgroundRect"),pCt=g((function(){return{x:0,y:0,fill:void 0,"text-anchor":"start",width:100,height:100,textMargin:0,rx:0,ry:0}}),"getTextObj"),fCt=g((function(){return{x:0,y:0,width:100,anchor:"start",height:100,rx:0,ry:0}}),"getNoteRect"),gCt=function(){function t(t,e,r,n,a,s,o,l){i(e.append("text").attr("x",r+a/2).attr("y",n+s/2+5).style("font-color",l).style("text-anchor","middle").text(t),o)}function e(t,e,r,n,a,s,o,l,c){let{taskFontSize:h,taskFontFamily:u}=l,d=t.split(/<br\s*\/?>/gi);for(let t=0;t<d.length;t++){let l=t*h-h*(d.length-1)/2,p=e.append("text").attr("x",r+a/2).attr("y",n).attr("fill",c).style("text-anchor","middle").style("font-size",h).style("font-family",u);p.append("tspan").attr("x",r+a/2).attr("dy",l).text(d[t]),p.attr("y",n+s/2).attr("dominant-baseline","central").attr("alignment-baseline","central"),i(p,o)}}function r(t,r,n,a,s,o,l,c){let h=r.append("switch"),u=h.append("foreignObject").attr("x",n).attr("y",a).attr("width",s).attr("height",o).attr("position","fixed").append("xhtml:div").style("display","table").style("height","100%").style("width","100%");u.append("div").attr("class","label").style("display","table-cell").style("text-align","center").style("vertical-align","middle").text(t),e(t,h,n,a,s,o,l,c),i(u,l)}function i(t,e){for(let r in e)r in e&&t.attr(r,e[r])}return g(t,"byText"),g(e,"byTspan"),g(r,"byFo"),g(i,"_setTextAttrs"),function(i){return"fo"===i.textPlacement?r:"old"===i.textPlacement?t:e}}(),yCt=g((function(t){t.append("defs").append("marker").attr("id","arrowhead").attr("refX",5).attr("refY",2).attr("markerWidth",6).attr("markerHeight",4).attr("orient","auto").append("path").attr("d","M 0,0 V 4 L6,2 Z")}),"initGraphics"),g(iCt,"wrap"),mCt=g((function(t,e,r,i){let n=r%12-1,a=t.append("g");e.section=n,a.attr("class",(e.class?e.class+" ":"")+"timeline-node section-"+n);let s=a.append("g"),o=a.append("g"),l=o.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(iCt,e.width).node().getBBox(),c=i.fontSize?.replace?i.fontSize.replace("px",""):i.fontSize;return e.height=l.height+1.1*c*.5+e.padding,e.height=Math.max(e.height,e.maxHeight),e.width=e.width+2*e.padding,o.attr("transform","translate("+e.width/2+", "+e.padding/2+")"),bCt(s,e,n,i),e}),"drawNode"),xCt=g((function(t,e,r){let i=t.append("g"),n=i.append("text").text(e.descr).attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle").call(iCt,e.width).node().getBBox(),a=r.fontSize?.replace?r.fontSize.replace("px",""):r.fontSize;return i.remove(),n.height+1.1*a*.5+e.padding}),"getVirtualNodeHeight"),bCt=g((function(t,e,r){t.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("d",`M0 ${e.height-5} v${10-e.height} q0,-5 5,-5 h${e.width-10} q5,0 5,5 v${e.height-5} H0 Z`),t.append("line").attr("class","node-line-"+r).attr("x1",0).attr("y1",e.height).attr("x2",e.width).attr("y2",e.height)}),"defaultBkg"),kCt={drawRect:nCt,drawCircle:sCt,drawSection:cCt,drawText:oCt,drawLabel:lCt,drawTask:uCt,drawBackgroundRect:dCt,getTextObj:pCt,getNoteRect:fCt,initGraphics:yCt,drawNode:mCt,getVirtualNodeHeight:xCt}})),$Ct=y((()=>{QT(),ACt(),We(),ns(),Un(),vCt=g((function(t,e,r,i){let n=na(),a=n.timeline?.leftMargin??50;et.debug("timeline",i.db);let s,o=n.securityLevel;"sandbox"===o&&(s=nh("#i"+e));let l=nh("sandbox"===o?s.nodes()[0].contentDocument.body:"body").select("#"+e);l.append("g");let c=i.db.getTasks(),h=i.db.getCommonDb().getDiagramTitle();et.debug("task",c),kCt.initGraphics(l);let u=i.db.getSections();et.debug("sections",u);let d=0,p=0,f=0,g=0,y=50+a,m=50;g=50;let x=0,b=!0;u.forEach((function(t){let e={number:x,descr:t,section:x,width:150,padding:20,maxHeight:d},r=kCt.getVirtualNodeHeight(l,e,n);et.debug("sectionHeight before draw",r),d=Math.max(d,r+20)}));let k=0,v=0;et.debug("tasks.length",c.length);for(let[t,e]of c.entries()){let r={number:t,descr:e,section:e.section,width:150,padding:20,maxHeight:p},i=kCt.getVirtualNodeHeight(l,r,n);et.debug("taskHeight before draw",i),p=Math.max(p,i+20),k=Math.max(k,e.events.length);let a=0;for(let t of e.events){let r={descr:t,section:e.section,number:e.section,width:150,padding:20,maxHeight:50};a+=kCt.getVirtualNodeHeight(l,r,n)}e.events.length>0&&(a+=10*(e.events.length-1)),v=Math.max(v,a)}et.debug("maxSectionHeight before draw",d),et.debug("maxTaskHeight before draw",p),u&&u.length>0?u.forEach((t=>{let e=c.filter((e=>e.section===t)),r={number:x,descr:t,section:x,width:200*Math.max(e.length,1)-50,padding:20,maxHeight:d};et.debug("sectionNode",r);let i=l.append("g"),a=kCt.drawNode(i,r,x,n);et.debug("sectionNode output",a),i.attr("transform",`translate(${y}, 50)`),m+=d+50,e.length>0&&TCt(l,e,x,y,m,p,n,k,v,d,!1),y+=200*Math.max(e.length,1),m=50,x++})):(b=!1,TCt(l,c,x,y,m,p,n,k,v,d,!0));let T=l.node().getBBox();et.debug("bounds",T),h&&l.append("text").text(h).attr("x",T.width/2-a).attr("font-size","4ex").attr("font-weight","bold").attr("y",20),f=b?d+p+150:p+100,l.append("g").attr("class","lineWrapper").append("line").attr("x1",a).attr("y1",f).attr("x2",T.width+3*a).attr("y2",f).attr("stroke-width",4).attr("stroke","black").attr("marker-end","url(#arrowhead)"),In(void 0,l,n.timeline?.padding??50,n.timeline?.useMaxWidth??!1)}),"draw"),TCt=g((function(t,e,r,i,n,a,s,o,l,c,h){for(let o of e){let e={descr:o.task,section:r,number:r,width:150,padding:20,maxHeight:a};et.debug("taskNode",e);let c=t.append("g").attr("class","taskWrapper"),u=kCt.drawNode(c,e,r,s).height;if(et.debug("taskHeight after draw",u),c.attr("transform",`translate(${i}, ${n})`),a=Math.max(a,u),o.events){let e=t.append("g").attr("class","lineWrapper"),c=a;n+=100,c+=wCt(t,o.events,r,i,n,s),n-=100,e.append("line").attr("x1",i+95).attr("y1",n+a).attr("x2",i+95).attr("y2",n+a+100+l+100).attr("stroke-width",2).attr("stroke","black").attr("marker-end","url(#arrowhead)").attr("stroke-dasharray","5,5")}i+=200,h&&!s.timeline?.disableMulticolor&&r++}n-=10}),"drawTasks"),wCt=g((function(t,e,r,i,n,a){let s=0,o=n;n+=100;for(let o of e){let e={descr:o,section:r,number:r,width:150,padding:20,maxHeight:50};et.debug("eventNode",e);let l=t.append("g").attr("class","eventWrapper"),c=kCt.drawNode(l,e,r,a).height;s+=c,l.attr("transform",`translate(${i}, ${n})`),n=n+10+c}return n=o,s}),"drawEvents"),_Ct={setConf:g((()=>{}),"setConf"),draw:vCt}})),LCt=y((()=>{yr(),SCt=g((t=>{let e="";for(let e=0;e<t.THEME_COLOR_LIMIT;e++)t["lineColor"+e]=t["lineColor"+e]||t["cScaleInv"+e],zt(t["lineColor"+e])?t["lineColor"+e]=qt(t["lineColor"+e],20):t["lineColor"+e]=Gt(t["lineColor"+e],20);for(let r=0;r<t.THEME_COLOR_LIMIT;r++){let i=""+(17-3*r);e+=`\n    .section-${r-1} rect, .section-${r-1} path, .section-${r-1} circle, .section-${r-1} path  {\n      fill: ${t["cScale"+r]};\n    }\n    .section-${r-1} text {\n     fill: ${t["cScaleLabel"+r]};\n    }\n    .node-icon-${r-1} {\n      font-size: 40px;\n      color: ${t["cScaleLabel"+r]};\n    }\n    .section-edge-${r-1}{\n      stroke: ${t["cScale"+r]};\n    }\n    .edge-depth-${r-1}{\n      stroke-width: ${i};\n    }\n    .section-${r-1} line {\n      stroke: ${t["cScaleInv"+r]} ;\n      stroke-width: 3;\n    }\n\n    .lineWrapper line{\n      stroke: ${t["cScaleLabel"+r]} ;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n    `}return e}),"genSections"),CCt=g((t=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${SCt(t)}\n  .section-root rect, .section-root path, .section-root circle  {\n    fill: ${t.git0};\n  }\n  .section-root text {\n    fill: ${t.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .eventWrapper  {\n   filter: brightness(120%);\n  }\n`),"getStyles"),ECt=CCt})),RCt={};x(RCt,{diagram:()=>ICt});var ICt,NCt,DCt,MCt,OCt,PCt,BCt,FCt,zCt,jCt,UCt,WCt,qCt,YCt,GCt,HCt,VCt,XCt,KCt,QCt,ZCt,JCt,tEt,eEt,rEt,iEt=y((()=>{FSt(),rCt(),$Ct(),LCt(),ICt={db:zSt,renderer:_Ct,parser:PSt,styles:ECt}})),nEt=y((()=>{(NCt=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[1,4],r=[1,13],i=[1,12],n=[1,15],a=[1,16],s=[1,20],o=[1,19],l=[6,7,8],c=[1,26],h=[1,24],u=[1,25],d=[6,7,11],p=[1,31],f=[6,7,11,24],y=[1,6,13,16,17,20,23],m=[1,35],x=[1,36],b=[1,6,7,11,13,16,17,20,23],k=[1,38],v={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,mindMap:4,spaceLines:5,SPACELINE:6,NL:7,KANBAN:8,document:9,stop:10,EOF:11,statement:12,SPACELIST:13,node:14,shapeData:15,ICON:16,CLASS:17,nodeWithId:18,nodeWithoutId:19,NODE_DSTART:20,NODE_DESCR:21,NODE_DEND:22,NODE_ID:23,SHAPE_DATA:24,$accept:0,$end:1},terminals_:{2:"error",6:"SPACELINE",7:"NL",8:"KANBAN",11:"EOF",13:"SPACELIST",16:"ICON",17:"CLASS",20:"NODE_DSTART",21:"NODE_DESCR",22:"NODE_DEND",23:"NODE_ID",24:"SHAPE_DATA"},productions_:[0,[3,1],[3,2],[5,1],[5,2],[5,2],[4,2],[4,3],[10,1],[10,1],[10,1],[10,2],[10,2],[9,3],[9,2],[12,3],[12,2],[12,2],[12,2],[12,1],[12,2],[12,1],[12,1],[12,1],[12,1],[14,1],[14,1],[19,3],[18,1],[18,4],[15,2],[15,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 6:case 7:return i;case 8:i.getLogger().trace("Stop NL ");break;case 9:i.getLogger().trace("Stop EOF ");break;case 11:i.getLogger().trace("Stop NL2 ");break;case 12:i.getLogger().trace("Stop EOF2 ");break;case 15:i.getLogger().info("Node: ",a[o-1].id),i.addNode(a[o-2].length,a[o-1].id,a[o-1].descr,a[o-1].type,a[o]);break;case 16:i.getLogger().info("Node: ",a[o].id),i.addNode(a[o-1].length,a[o].id,a[o].descr,a[o].type);break;case 17:i.getLogger().trace("Icon: ",a[o]),i.decorateNode({icon:a[o]});break;case 18:case 23:i.decorateNode({class:a[o]});break;case 19:i.getLogger().trace("SPACELIST");break;case 20:i.getLogger().trace("Node: ",a[o-1].id),i.addNode(0,a[o-1].id,a[o-1].descr,a[o-1].type,a[o]);break;case 21:i.getLogger().trace("Node: ",a[o].id),i.addNode(0,a[o].id,a[o].descr,a[o].type);break;case 22:i.decorateNode({icon:a[o]});break;case 27:i.getLogger().trace("node found ..",a[o-2]),this.$={id:a[o-1],descr:a[o-1],type:i.getType(a[o-2],a[o])};break;case 28:this.$={id:a[o],descr:a[o],type:0};break;case 29:i.getLogger().trace("node found ..",a[o-3]),this.$={id:a[o-3],descr:a[o-1],type:i.getType(a[o-2],a[o])};break;case 30:this.$=a[o-1]+a[o];break;case 31:this.$=a[o]}}),"anonymous"),table:[{3:1,4:2,5:3,6:[1,5],8:e},{1:[3]},{1:[2,1]},{4:6,6:[1,7],7:[1,8],8:e},{6:r,7:[1,10],9:9,12:11,13:i,14:14,16:n,17:a,18:17,19:18,20:s,23:o},t(l,[2,3]),{1:[2,2]},t(l,[2,4]),t(l,[2,5]),{1:[2,6],6:r,12:21,13:i,14:14,16:n,17:a,18:17,19:18,20:s,23:o},{6:r,9:22,12:11,13:i,14:14,16:n,17:a,18:17,19:18,20:s,23:o},{6:c,7:h,10:23,11:u},t(d,[2,24],{18:17,19:18,14:27,16:[1,28],17:[1,29],20:s,23:o}),t(d,[2,19]),t(d,[2,21],{15:30,24:p}),t(d,[2,22]),t(d,[2,23]),t(f,[2,25]),t(f,[2,26]),t(f,[2,28],{20:[1,32]}),{21:[1,33]},{6:c,7:h,10:34,11:u},{1:[2,7],6:r,12:21,13:i,14:14,16:n,17:a,18:17,19:18,20:s,23:o},t(y,[2,14],{7:m,11:x}),t(b,[2,8]),t(b,[2,9]),t(b,[2,10]),t(d,[2,16],{15:37,24:p}),t(d,[2,17]),t(d,[2,18]),t(d,[2,20],{24:k}),t(f,[2,31]),{21:[1,39]},{22:[1,40]},t(y,[2,13],{7:m,11:x}),t(b,[2,11]),t(b,[2,12]),t(d,[2,15],{24:k}),t(f,[2,30]),{22:[1,41]},t(f,[2,27]),t(f,[2,29])],defaultActions:{2:[2,1],6:[2,2]},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},T={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:g((function(t,e,r,i){switch(r){case 0:return this.pushState("shapeData"),e.yytext="",24;case 1:return this.pushState("shapeDataStr"),24;case 2:return this.popState(),24;case 3:let r=/\n\s*/g;return e.yytext=e.yytext.replace(r,"<br/>"),24;case 4:return 24;case 5:case 10:case 29:case 32:this.popState();break;case 6:return t.getLogger().trace("Found comment",e.yytext),6;case 7:return 8;case 8:this.begin("CLASS");break;case 9:return this.popState(),17;case 11:t.getLogger().trace("Begin icon"),this.begin("ICON");break;case 12:return t.getLogger().trace("SPACELINE"),6;case 13:return 7;case 14:return 16;case 15:t.getLogger().trace("end icon"),this.popState();break;case 16:return t.getLogger().trace("Exploding node"),this.begin("NODE"),20;case 17:return t.getLogger().trace("Cloud"),this.begin("NODE"),20;case 18:return t.getLogger().trace("Explosion Bang"),this.begin("NODE"),20;case 19:return t.getLogger().trace("Cloud Bang"),this.begin("NODE"),20;case 20:case 21:case 22:case 23:return this.begin("NODE"),20;case 24:return 13;case 25:return 23;case 26:return 11;case 27:this.begin("NSTR2");break;case 28:return"NODE_DESCR";case 30:t.getLogger().trace("Starting NSTR"),this.begin("NSTR");break;case 31:return t.getLogger().trace("description:",e.yytext),"NODE_DESCR";case 33:return this.popState(),t.getLogger().trace("node end ))"),"NODE_DEND";case 34:return this.popState(),t.getLogger().trace("node end )"),"NODE_DEND";case 35:return this.popState(),t.getLogger().trace("node end ...",e.yytext),"NODE_DEND";case 36:case 39:case 40:return this.popState(),t.getLogger().trace("node end (("),"NODE_DEND";case 37:case 38:return this.popState(),t.getLogger().trace("node end (-"),"NODE_DEND";case 41:case 42:return t.getLogger().trace("Long description:",e.yytext),21}}),"anonymous"),rules:[/^(?:@\{)/i,/^(?:["])/i,/^(?:["])/i,/^(?:[^\"]+)/i,/^(?:[^}^"]+)/i,/^(?:\})/i,/^(?:\s*%%.*)/i,/^(?:kanban\b)/i,/^(?::::)/i,/^(?:.+)/i,/^(?:\n)/i,/^(?:::icon\()/i,/^(?:[\s]+[\n])/i,/^(?:[\n]+)/i,/^(?:[^\)]+)/i,/^(?:\))/i,/^(?:-\))/i,/^(?:\(-)/i,/^(?:\)\))/i,/^(?:\))/i,/^(?:\(\()/i,/^(?:\{\{)/i,/^(?:\()/i,/^(?:\[)/i,/^(?:[\s]+)/i,/^(?:[^\(\[\n\)\{\}@]+)/i,/^(?:$)/i,/^(?:["][`])/i,/^(?:[^`"]+)/i,/^(?:[`]["])/i,/^(?:["])/i,/^(?:[^"]+)/i,/^(?:["])/i,/^(?:[\)]\))/i,/^(?:[\)])/i,/^(?:[\]])/i,/^(?:\}\})/i,/^(?:\(-)/i,/^(?:-\))/i,/^(?:\(\()/i,/^(?:\()/i,/^(?:[^\)\]\(\}]+)/i,/^(?:.+(?!\(\())/i],conditions:{shapeDataEndBracket:{rules:[],inclusive:!1},shapeDataStr:{rules:[2,3],inclusive:!1},shapeData:{rules:[1,4,5],inclusive:!1},CLASS:{rules:[9,10],inclusive:!1},ICON:{rules:[14,15],inclusive:!1},NSTR2:{rules:[28,29],inclusive:!1},NSTR:{rules:[31,32],inclusive:!1},NODE:{rules:[27,30,33,34,35,36,37,38,39,40,41,42],inclusive:!1},INITIAL:{rules:[0,6,7,8,11,12,13,16,17,18,19,20,21,22,23,24,25,26],inclusive:!0}}};function w(){this.yy={}}return v.lexer=T,g(w,"Parser"),w.prototype=v,v.Parser=w,new w}()).parser=NCt,DCt=NCt})),aEt=y((()=>{ns(),gn(),We(),Cr(),zD(),MCt=[],OCt=[],PCt=0,BCt={},FCt=g((()=>{MCt=[],OCt=[],PCt=0,BCt={}}),"clear"),zCt=g((t=>{if(0===MCt.length)return null;let e=MCt[0].level,r=null;for(let t=MCt.length-1;t>=0;t--)if(MCt[t].level===e&&!r&&(r=MCt[t]),MCt[t].level<e)throw new Error('Items without section detected, found section ("'+MCt[t].label+'")');return t===r?.level?null:r}),"getSection"),jCt=g((function(){return OCt}),"getSections"),UCt=g((function(){let t=[],e=jCt(),r=na();for(let i of e){let e={id:i.id,label:zi(i.label??"",r),isGroup:!0,ticket:i.ticket,shape:"kanbanSection",level:i.level,look:r.look};t.push(e);let n=MCt.filter((t=>t.parentId===i.id));for(let e of n){let n={id:e.id,parentId:i.id,label:zi(e.label??"",r),isGroup:!1,ticket:e?.ticket,priority:e?.priority,assigned:e?.assigned,icon:e?.icon,shape:"kanbanItem",level:e.level,rx:5,ry:5,cssStyles:["text-align: left"]};t.push(n)}}return{nodes:t,edges:[],other:{},config:na()}}),"getData"),WCt=g(((t,e,r,i,n)=>{let a=na(),s=a.mindmap?.padding??me.mindmap.padding;switch(i){case qCt.ROUNDED_RECT:case qCt.RECT:case qCt.HEXAGON:s*=2}let o={id:zi(e,a)||"kbn"+PCt++,level:t,label:zi(r,a),width:a.mindmap?.maxNodeWidth??me.mindmap.maxNodeWidth,padding:s,isGroup:!1};if(void 0!==n){let t;t=n.includes("\n")?n+"\n":"{\n"+n+"\n}";let e=FD(t,{schema:BD});if(e.shape&&(e.shape!==e.shape.toLowerCase()||e.shape.includes("_")))throw new Error(`No such shape: ${e.shape}. Shape names should be lowercase.`);e?.shape&&"kanbanItem"===e.shape&&(o.shape=e?.shape),e?.label&&(o.label=e?.label),e?.icon&&(o.icon=e?.icon.toString()),e?.assigned&&(o.assigned=e?.assigned.toString()),e?.ticket&&(o.ticket=e?.ticket.toString()),e?.priority&&(o.priority=e?.priority)}let l=zCt(t);l?o.parentId=l.id||"kbn"+PCt++:OCt.push(o),MCt.push(o)}),"addNode"),qCt={DEFAULT:0,NO_BORDER:0,ROUNDED_RECT:1,RECT:2,CIRCLE:3,CLOUD:4,BANG:5,HEXAGON:6},YCt=g(((t,e)=>{switch(et.debug("In get type",t,e),t){case"[":return qCt.RECT;case"(":return")"===e?qCt.ROUNDED_RECT:qCt.CLOUD;case"((":return qCt.CIRCLE;case")":return qCt.CLOUD;case"))":return qCt.BANG;case"{{":return qCt.HEXAGON;default:return qCt.DEFAULT}}),"getType"),GCt=g(((t,e)=>{BCt[t]=e}),"setElementForId"),HCt=g((t=>{if(!t)return;let e=na(),r=MCt[MCt.length-1];t.icon&&(r.icon=zi(t.icon,e)),t.class&&(r.cssClasses=zi(t.class,e))}),"decorateNode"),VCt=g((t=>{switch(t){case qCt.DEFAULT:return"no-border";case qCt.RECT:return"rect";case qCt.ROUNDED_RECT:return"rounded-rect";case qCt.CIRCLE:return"circle";case qCt.CLOUD:return"cloud";case qCt.BANG:return"bang";case qCt.HEXAGON:return"hexgon";default:return"no-border"}}),"type2Str"),XCt=g((()=>et),"getLogger"),KCt=g((t=>BCt[t]),"getElementById"),QCt={clear:FCt,addNode:WCt,getSections:jCt,getData:UCt,nodeType:qCt,getType:YCt,setElementForId:GCt,decorateNode:HCt,type2Str:VCt,getLogger:XCt,getElementById:KCt}})),sEt=y((()=>{ns(),We(),bxt(),Un(),Cr(),qj(),YU(),ZCt=g((async(t,e,r,i)=>{et.debug("Rendering kanban diagram\n"+t);let n=i.db.getData(),a=na();a.htmlLabels=!1;let s=dxt(e),o=s.append("g");o.attr("class","sections");let l=s.append("g");l.attr("class","items");let c=n.nodes.filter((t=>t.isGroup)),h=0,u=[],d=25;for(let t of c){let e=a?.kanban?.sectionWidth||200;h+=1,t.x=e*h+10*(h-1)/2,t.width=e,t.y=0,t.height=3*e,t.rx=5,t.ry=5,t.cssClasses=t.cssClasses+" section-"+h;let r=await Bj(o,t);d=Math.max(d,r?.labelBBox?.height),u.push(r)}let p=0;for(let t of c){let e=u[p];p+=1;let r=a?.kanban?.sectionWidth||200,i=3*-r/2+d,s=i,o=n.nodes.filter((e=>e.parentId===t.id));for(let e of o){if(e.isGroup)throw new Error("Groups within groups are not allowed in Kanban diagrams");e.x=t.x,e.width=r-15;let i=(await FU(l,e,{config:a})).node().getBBox();e.y=s+i.height/2,await WU(e),s=e.y+i.height/2+5}let c=e.cluster.select("rect"),h=Math.max(s-i+30,50)+(d-25);c.attr("height",h)}In(void 0,s,a.mindmap?.padding??me.kanban.padding,a.mindmap?.useMaxWidth??me.kanban.useMaxWidth)}),"draw"),JCt={draw:ZCt}})),oEt=y((()=>{yr(),m5(),tEt=g((t=>{let e="";for(let e=0;e<t.THEME_COLOR_LIMIT;e++)t["lineColor"+e]=t["lineColor"+e]||t["cScaleInv"+e],zt(t["lineColor"+e])?t["lineColor"+e]=qt(t["lineColor"+e],20):t["lineColor"+e]=Gt(t["lineColor"+e],20);let r=g(((e,r)=>t.darkMode?Gt(e,r):qt(e,r)),"adjuster");for(let i=0;i<t.THEME_COLOR_LIMIT;i++){let n=""+(17-3*i);e+=`\n    .section-${i-1} rect, .section-${i-1} path, .section-${i-1} circle, .section-${i-1} polygon, .section-${i-1} path  {\n      fill: ${r(t["cScale"+i],10)};\n      stroke: ${r(t["cScale"+i],10)};\n\n    }\n    .section-${i-1} text {\n     fill: ${t["cScaleLabel"+i]};\n    }\n    .node-icon-${i-1} {\n      font-size: 40px;\n      color: ${t["cScaleLabel"+i]};\n    }\n    .section-edge-${i-1}{\n      stroke: ${t["cScale"+i]};\n    }\n    .edge-depth-${i-1}{\n      stroke-width: ${n};\n    }\n    .section-${i-1} line {\n      stroke: ${t["cScaleInv"+i]} ;\n      stroke-width: 3;\n    }\n\n    .disabled, .disabled circle, .disabled text {\n      fill: lightgray;\n    }\n    .disabled text {\n      fill: #efefef;\n    }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${t.background};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .kanban-ticket-link {\n    fill: ${t.background};\n    stroke: ${t.nodeBorder};\n    text-decoration: underline;\n  }\n    `}return e}),"genSections"),eEt=g((t=>`\n  .edge {\n    stroke-width: 3;\n  }\n  ${tEt(t)}\n  .section-root rect, .section-root path, .section-root circle, .section-root polygon  {\n    fill: ${t.git0};\n  }\n  .section-root text {\n    fill: ${t.gitBranchLabel0};\n  }\n  .icon-container {\n    height:100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .edge {\n    fill: none;\n  }\n  .cluster-label, .label {\n    color: ${t.textColor};\n    fill: ${t.textColor};\n    }\n  .kanban-label {\n    dy: 1em;\n    alignment-baseline: middle;\n    text-anchor: middle;\n    dominant-baseline: middle;\n    text-align: center;\n  }\n    ${o5()}\n`),"getStyles"),rEt=eEt})),lEt={};x(lEt,{diagram:()=>cEt});var cEt,hEt,uEt,dEt,pEt,fEt,gEt,yEt,mEt,xEt,bEt,kEt,vEt,TEt,wEt,_Et=y((()=>{nEt(),aEt(),sEt(),oEt(),cEt={db:QCt,renderer:JCt,parser:DCt,styles:rEt}})),SEt=y((()=>{(hEt=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[1,9],r=[1,10],i=[1,5,10,12],n={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,start:3,SANKEY:4,NEWLINE:5,csv:6,opt_eof:7,record:8,csv_tail:9,EOF:10,"field[source]":11,COMMA:12,"field[target]":13,"field[value]":14,field:15,escaped:16,non_escaped:17,DQUOTE:18,ESCAPED_TEXT:19,NON_ESCAPED_TEXT:20,$accept:0,$end:1},terminals_:{2:"error",4:"SANKEY",5:"NEWLINE",10:"EOF",11:"field[source]",12:"COMMA",13:"field[target]",14:"field[value]",18:"DQUOTE",19:"ESCAPED_TEXT",20:"NON_ESCAPED_TEXT"},productions_:[0,[3,4],[6,2],[9,2],[9,0],[7,1],[7,0],[8,5],[15,1],[15,1],[16,3],[17,1]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 7:let t=i.findOrCreateNode(a[o-4].trim().replaceAll('""','"')),e=i.findOrCreateNode(a[o-2].trim().replaceAll('""','"')),r=parseFloat(a[o].trim());i.addLink(t,e,r);break;case 8:case 9:case 11:this.$=a[o];break;case 10:this.$=a[o-1]}}),"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},{5:[1,3]},{6:4,8:5,15:6,16:7,17:8,18:e,20:r},{1:[2,6],7:11,10:[1,12]},t(r,[2,4],{9:13,5:[1,14]}),{12:[1,15]},t(i,[2,8]),t(i,[2,9]),{19:[1,16]},t(i,[2,11]),{1:[2,1]},{1:[2,5]},t(r,[2,2]),{6:17,8:5,15:6,16:7,17:8,18:e,20:r},{15:18,16:7,17:8,18:e,20:r},{18:[1,19]},t(r,[2,3]),{12:[1,20]},t(i,[2,10]),{15:21,16:7,17:8,18:e,20:r},t([1,5,10],[2,7])],defaultActions:{11:[2,1],12:[2,5]},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},a={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{"case-insensitive":!0},performAction:g((function(t,e,r,i){switch(r){case 0:case 1:return this.pushState("csv"),4;case 2:return 10;case 3:return 5;case 4:return 12;case 5:return this.pushState("escaped_text"),18;case 6:return 20;case 7:return this.popState("escaped_text"),18;case 8:return 19}}),"anonymous"),rules:[/^(?:sankey-beta\b)/i,/^(?:sankey\b)/i,/^(?:$)/i,/^(?:((\u000D\u000A)|(\u000A)))/i,/^(?:(\u002C))/i,/^(?:(\u0022))/i,/^(?:([\u0020-\u0021\u0023-\u002B\u002D-\u007E])*)/i,/^(?:(\u0022)(?!(\u0022)))/i,/^(?:(([\u0020-\u0021\u0023-\u002B\u002D-\u007E])|(\u002C)|(\u000D)|(\u000A)|(\u0022)(\u0022))*)/i],conditions:{csv:{rules:[2,3,4,5,6,7,8],inclusive:!1},escaped_text:{rules:[7,8],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8],inclusive:!0}}};function s(){this.yy={}}return n.lexer=a,g(s,"Parser"),s.prototype=n,n.Parser=s,new s}()).parser=hEt,uEt=hEt})),CEt=y((()=>{ns(),gn(),is(),dEt=[],pEt=[],fEt=new Map,gEt=g((()=>{dEt=[],pEt=[],fEt=new Map,Xn()}),"clear"),yEt=class{constructor(t,e,r=0){this.source=t,this.target=e,this.value=r}static{g(this,"SankeyLink")}},mEt=g(((t,e,r)=>{dEt.push(new yEt(t,e,r))}),"addLink"),xEt=class{constructor(t){this.ID=t}static{g(this,"SankeyNode")}},bEt=g((t=>{t=on.sanitizeText(t,na());let e=fEt.get(t);return void 0===e&&(e=new xEt(t),fEt.set(t,e),pEt.push(e)),e}),"findOrCreateNode"),kEt=g((()=>pEt),"getNodes"),vEt=g((()=>dEt),"getLinks"),TEt=g((()=>({nodes:pEt.map((t=>({id:t.ID}))),links:dEt.map((t=>({source:t.source.ID,target:t.target.ID,value:t.value})))})),"getGraph"),wEt={nodesMap:fEt,getConfig:g((()=>na().sankey),"getConfig"),getNodes:kEt,getLinks:vEt,getGraph:TEt,addLink:mEt,findOrCreateNode:bEt,getAccTitle:Qn,setAccTitle:Kn,getAccDescription:Jn,setAccDescription:Zn,getDiagramTitle:ea,setDiagramTitle:ta,clear:gEt}}));function EEt(t,e){let r;if(void 0===e)for(let e of t)null!=e&&(r<e||void 0===r&&e>=e)&&(r=e);else{let i=-1;for(let n of t)null!=(n=e(n,++i,t))&&(r<n||void 0===r&&n>=n)&&(r=n)}return r}var AEt=y((()=>{g(EEt,"max")}));function $Et(t,e){let r;if(void 0===e)for(let e of t)null!=e&&(r>e||void 0===r&&e>=e)&&(r=e);else{let i=-1;for(let n of t)null!=(n=e(n,++i,t))&&(r>n||void 0===r&&n>=n)&&(r=n)}return r}var LEt=y((()=>{g($Et,"min")}));function REt(t,e){let r=0;if(void 0===e)for(let e of t)(e=+e)&&(r+=e);else{let i=-1;for(let n of t)(n=+e(n,++i,t))&&(r+=n)}return r}var IEt=y((()=>{g(REt,"sum")})),NEt=y((()=>{AEt(),LEt(),IEt()}));function DEt(t){return t.target.depth}function MEt(t){return t.depth}function OEt(t,e){return e-1-t.height}function PEt(t,e){return t.sourceLinks.length?t.depth:e-1}function BEt(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?$Et(t.sourceLinks,DEt)-1:0}var FEt=y((()=>{NEt(),g(DEt,"targetDepth"),g(MEt,"left"),g(OEt,"right"),g(PEt,"justify"),g(BEt,"center")}));function zEt(t){return function(){return t}}var jEt=y((()=>{g(zEt,"constant")}));function UEt(t,e){return qEt(t.source,e.source)||t.index-e.index}function WEt(t,e){return qEt(t.target,e.target)||t.index-e.index}function qEt(t,e){return t.y0-e.y0}function YEt(t){return t.value}function GEt(t){return t.index}function HEt(t){return t.nodes}function VEt(t){return t.links}function XEt(t,e){let r=t.get(e);if(!r)throw new Error("missing: "+e);return r}function KEt({nodes:t}){for(let e of t){let t=e.y0,r=t;for(let r of e.sourceLinks)r.y0=t+r.width/2,t+=r.width;for(let t of e.targetLinks)t.y1=r+t.width/2,r+=t.width}}function QEt(){let t,e,r,i=0,n=0,a=1,s=1,o=24,l=8,c=GEt,h=PEt,u=HEt,d=VEt,p=6;function f(){let t={nodes:u.apply(null,arguments),links:d.apply(null,arguments)};return y(t),m(t),x(t),b(t),T(t),KEt(t),t}function y({nodes:t,links:e}){for(let[e,r]of t.entries())r.index=e,r.sourceLinks=[],r.targetLinks=[];let i=new Map(t.map(((e,r)=>[c(e,r,t),e])));for(let[t,r]of e.entries()){r.index=t;let{source:e,target:n}=r;"object"!=typeof e&&(e=r.source=XEt(i,e)),"object"!=typeof n&&(n=r.target=XEt(i,n)),e.sourceLinks.push(r),n.targetLinks.push(r)}if(null!=r)for(let{sourceLinks:e,targetLinks:i}of t)e.sort(r),i.sort(r)}function m({nodes:t}){for(let e of t)e.value=void 0===e.fixedValue?Math.max(REt(e.sourceLinks,YEt),REt(e.targetLinks,YEt)):e.fixedValue}function x({nodes:t}){let e=t.length,r=new Set(t),i=new Set,n=0;for(;r.size;){for(let t of r){t.depth=n;for(let{target:e}of t.sourceLinks)i.add(e)}if(++n>e)throw new Error("circular link");r=i,i=new Set}}function b({nodes:t}){let e=t.length,r=new Set(t),i=new Set,n=0;for(;r.size;){for(let t of r){t.height=n;for(let{source:e}of t.targetLinks)i.add(e)}if(++n>e)throw new Error("circular link");r=i,i=new Set}}function k({nodes:t}){let r=EEt(t,(t=>t.depth))+1,n=(a-i-o)/(r-1),s=new Array(r);for(let e of t){let t=Math.max(0,Math.min(r-1,Math.floor(h.call(null,e,r))));e.layer=t,e.x0=i+t*n,e.x1=e.x0+o,s[t]?s[t].push(e):s[t]=[e]}if(e)for(let t of s)t.sort(e);return s}function v(e){let r=$Et(e,(e=>(s-n-(e.length-1)*t)/REt(e,YEt)));for(let i of e){let e=n;for(let n of i){n.y0=e,n.y1=e+n.value*r,e=n.y1+t;for(let t of n.sourceLinks)t.width=t.value*r}e=(s-e+t)/(i.length+1);for(let t=0;t<i.length;++t){let r=i[t];r.y0+=e*(t+1),r.y1+=e*(t+1)}$(i)}}function T(e){let r=k(e);t=Math.min(l,(s-n)/(EEt(r,(t=>t.length))-1)),v(r);for(let t=0;t<p;++t){let e=Math.pow(.99,t),i=Math.max(1-e,(t+1)/p);_(r,e,i),w(r,e,i)}}function w(t,r,i){for(let n=1,a=t.length;n<a;++n){let a=t[n];for(let t of a){let e=0,i=0;for(let{source:r,value:n}of t.targetLinks){let a=n*(t.layer-r.layer);e+=L(r,t)*a,i+=a}if(!(i>0))continue;let n=(e/i-t.y0)*r;t.y0+=n,t.y1+=n,A(t)}void 0===e&&a.sort(qEt),S(a,i)}}function _(t,r,i){for(let n=t.length-2;n>=0;--n){let a=t[n];for(let t of a){let e=0,i=0;for(let{target:r,value:n}of t.sourceLinks){let a=n*(r.layer-t.layer);e+=R(t,r)*a,i+=a}if(!(i>0))continue;let n=(e/i-t.y0)*r;t.y0+=n,t.y1+=n,A(t)}void 0===e&&a.sort(qEt),S(a,i)}}function S(e,r){let i=e.length>>1,a=e[i];E(e,a.y0-t,i-1,r),C(e,a.y1+t,i+1,r),E(e,s,e.length-1,r),C(e,n,0,r)}function C(e,r,i,n){for(;i<e.length;++i){let a=e[i],s=(r-a.y0)*n;s>1e-6&&(a.y0+=s,a.y1+=s),r=a.y1+t}}function E(e,r,i,n){for(;i>=0;--i){let a=e[i],s=(a.y1-r)*n;s>1e-6&&(a.y0-=s,a.y1-=s),r=a.y0-t}}function A({sourceLinks:t,targetLinks:e}){if(void 0===r){for(let{source:{sourceLinks:t}}of e)t.sort(WEt);for(let{target:{targetLinks:e}}of t)e.sort(UEt)}}function $(t){if(void 0===r)for(let{sourceLinks:e,targetLinks:r}of t)e.sort(WEt),r.sort(UEt)}function L(e,r){let i=e.y0-(e.sourceLinks.length-1)*t/2;for(let{target:n,width:a}of e.sourceLinks){if(n===r)break;i+=a+t}for(let{source:t,width:n}of r.targetLinks){if(t===e)break;i-=n}return i}function R(e,r){let i=r.y0-(r.targetLinks.length-1)*t/2;for(let{source:n,width:a}of r.targetLinks){if(n===e)break;i+=a+t}for(let{target:t,width:n}of e.sourceLinks){if(t===r)break;i-=n}return i}return g(f,"sankey"),f.update=function(t){return KEt(t),t},f.nodeId=function(t){return arguments.length?(c="function"==typeof t?t:zEt(t),f):c},f.nodeAlign=function(t){return arguments.length?(h="function"==typeof t?t:zEt(t),f):h},f.nodeSort=function(t){return arguments.length?(e=t,f):e},f.nodeWidth=function(t){return arguments.length?(o=+t,f):o},f.nodePadding=function(e){return arguments.length?(l=t=+e,f):l},f.nodes=function(t){return arguments.length?(u="function"==typeof t?t:zEt(t),f):u},f.links=function(t){return arguments.length?(d="function"==typeof t?t:zEt(t),f):d},f.linkSort=function(t){return arguments.length?(r=t,f):r},f.size=function(t){return arguments.length?(i=n=0,a=+t[0],s=+t[1],f):[a-i,s-n]},f.extent=function(t){return arguments.length?(i=+t[0][0],a=+t[1][0],n=+t[0][1],s=+t[1][1],f):[[i,n],[a,s]]},f.iterations=function(t){return arguments.length?(p=+t,f):p},g(y,"computeNodeLinks"),g(m,"computeNodeValues"),g(x,"computeNodeDepths"),g(b,"computeNodeHeights"),g(k,"computeNodeLayers"),g(v,"initializeNodeBreadths"),g(T,"computeNodeBreadths"),g(w,"relaxLeftToRight"),g(_,"relaxRightToLeft"),g(S,"resolveCollisions"),g(C,"resolveCollisionsTopToBottom"),g(E,"resolveCollisionsBottomToTop"),g(A,"reorderNodeLinks"),g($,"reorderLinks"),g(L,"targetTop"),g(R,"sourceTop"),f}var ZEt=y((()=>{NEt(),FEt(),jEt(),g(UEt,"ascendingSourceBreadth"),g(WEt,"ascendingTargetBreadth"),g(qEt,"ascendingBreadth"),g(YEt,"value"),g(GEt,"defaultId"),g(HEt,"defaultNodes"),g(VEt,"defaultLinks"),g(XEt,"find"),g(KEt,"computeLinkBreadths"),g(QEt,"Sankey")}));function JEt(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function tAt(){return new JEt}var eAt,rAt,iAt,nAt,aAt,sAt=y((()=>{eAt=Math.PI,nAt=(rAt=2*eAt)-(iAt=1e-6),g(JEt,"Path"),g(tAt,"path"),JEt.prototype=tAt.prototype={constructor:JEt,moveTo:g((function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)}),"moveTo"),closePath:g((function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}),"closePath"),lineTo:g((function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)}),"lineTo"),quadraticCurveTo:g((function(t,e,r,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+r)+","+(this._y1=+i)}),"quadraticCurveTo"),bezierCurveTo:g((function(t,e,r,i,n,a){this._+="C"+ +t+","+ +e+","+ +r+","+ +i+","+(this._x1=+n)+","+(this._y1=+a)}),"bezierCurveTo"),arcTo:g((function(t,e,r,i,n){t=+t,e=+e,r=+r,i=+i,n=+n;var a=this._x1,s=this._y1,o=r-t,l=i-e,c=a-t,h=s-e,u=c*c+h*h;if(n<0)throw new Error("negative radius: "+n);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(u>iAt)if(Math.abs(h*o-l*c)>iAt&&n){var d=r-a,p=i-s,f=o*o+l*l,g=d*d+p*p,y=Math.sqrt(f),m=Math.sqrt(u),x=n*Math.tan((eAt-Math.acos((f+u-g)/(2*y*m)))/2),b=x/m,k=x/y;Math.abs(b-1)>iAt&&(this._+="L"+(t+b*c)+","+(e+b*h)),this._+="A"+n+","+n+",0,0,"+ +(h*d>c*p)+","+(this._x1=t+k*o)+","+(this._y1=e+k*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)}),"arcTo"),arc:g((function(t,e,r,i,n,a){t=+t,e=+e,a=!!a;var s=(r=+r)*Math.cos(i),o=r*Math.sin(i),l=t+s,c=e+o,h=1^a,u=a?i-n:n-i;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>iAt||Math.abs(this._y1-c)>iAt)&&(this._+="L"+l+","+c),r&&(u<0&&(u=u%rAt+rAt),u>nAt?this._+="A"+r+","+r+",0,1,"+h+","+(t-s)+","+(e-o)+"A"+r+","+r+",0,1,"+h+","+(this._x1=l)+","+(this._y1=c):u>iAt&&(this._+="A"+r+","+r+",0,"+ +(u>=eAt)+","+h+","+(this._x1=t+r*Math.cos(n))+","+(this._y1=e+r*Math.sin(n))))}),"arc"),rect:g((function(t,e,r,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +r+"v"+ +i+"h"+-r+"Z"}),"rect"),toString:g((function(){return this._}),"toString")},aAt=tAt})),oAt=y((()=>{sAt()}));function lAt(t){return g((function(){return t}),"constant")}var cAt=y((()=>{g(lAt,"default")}));function hAt(t){return t[0]}function uAt(t){return t[1]}var dAt,pAt=y((()=>{g(hAt,"x"),g(uAt,"y")})),fAt=y((()=>{dAt=Array.prototype.slice}));function gAt(t){return t.source}function yAt(t){return t.target}function mAt(t){var e=gAt,r=yAt,i=hAt,n=uAt,a=null;function s(){var s,o=dAt.call(arguments),l=e.apply(this,o),c=r.apply(this,o);if(a||(a=s=aAt()),t(a,+i.apply(this,(o[0]=l,o)),+n.apply(this,o),+i.apply(this,(o[0]=c,o)),+n.apply(this,o)),s)return a=null,s+""||null}return g(s,"link"),s.source=function(t){return arguments.length?(e=t,s):e},s.target=function(t){return arguments.length?(r=t,s):r},s.x=function(t){return arguments.length?(i="function"==typeof t?t:lAt(+t),s):i},s.y=function(t){return arguments.length?(n="function"==typeof t?t:lAt(+t),s):n},s.context=function(t){return arguments.length?(a=t??null,s):a},s}function xAt(t,e,r,i,n){t.moveTo(e,r),t.bezierCurveTo(e=(e+i)/2,r,e,n,i,n)}function bAt(){return mAt(xAt)}var kAt=y((()=>{oAt(),fAt(),cAt(),pAt(),g(gAt,"linkSource"),g(yAt,"linkTarget"),g(mAt,"link"),g(xAt,"curveHorizontal"),g(bAt,"linkHorizontal")})),vAt=y((()=>{kAt()}));function TAt(t){return[t.source.x1,t.y0]}function wAt(t){return[t.target.x0,t.y1]}function _At(){return bAt().source(TAt).target(wAt)}var SAt,CAt,EAt,AAt,$At,LAt,RAt,IAt=y((()=>{vAt(),g(TAt,"horizontalSource"),g(wAt,"horizontalTarget"),g(_At,"default")})),NAt=y((()=>{ZEt(),FEt(),IAt()})),DAt=y((()=>{SAt=class t{static{g(this,"Uid")}static{this.count=0}static next(e){return new t(e+ ++t.count)}constructor(t){this.id=t,this.href=`#${t}`}toString(){return"url("+this.href+")"}}})),MAt=y((()=>{ns(),QT(),NAt(),Un(),DAt(),CAt={left:MEt,right:OEt,center:BEt,justify:PEt},EAt=g((function(t,e,r,i){let n,{securityLevel:a,sankey:s}=na(),o=sa.sankey;"sandbox"===a&&(n=nh("#i"+e));let l=nh("sandbox"===a?n.nodes()[0].contentDocument.body:"body"),c="sandbox"===a?l.select(`[id="${e}"]`):nh(`[id="${e}"]`),h=s?.width??o.width,u=s?.height??o.width,d=s?.useMaxWidth??o.useMaxWidth,p=s?.nodeAlignment??o.nodeAlignment,f=s?.prefix??o.prefix,y=s?.suffix??o.suffix,m=s?.showValues??o.showValues,x=i.db.getGraph(),b=CAt[p];QEt().nodeId((t=>t.id)).nodeWidth(10).nodePadding(10+(m?15:0)).nodeAlign(b).extent([[0,0],[h,u]])(x);let k=cm(ck);c.append("g").attr("class","nodes").selectAll(".node").data(x.nodes).join("g").attr("class","node").attr("id",(t=>(t.uid=SAt.next("node-")).id)).attr("transform",(function(t){return"translate("+t.x0+","+t.y0+")"})).attr("x",(t=>t.x0)).attr("y",(t=>t.y0)).append("rect").attr("height",(t=>t.y1-t.y0)).attr("width",(t=>t.x1-t.x0)).attr("fill",(t=>k(t.id)));let v=g((({id:t,value:e})=>m?`${t}\n${f}${Math.round(100*e)/100}${y}`:t),"getText");c.append("g").attr("class","node-labels").attr("font-size",14).selectAll("text").data(x.nodes).join("text").attr("x",(t=>t.x0<h/2?t.x1+6:t.x0-6)).attr("y",(t=>(t.y1+t.y0)/2)).attr("dy",(m?"0":"0.35")+"em").attr("text-anchor",(t=>t.x0<h/2?"start":"end")).text(v);let T,w=c.append("g").attr("class","links").attr("fill","none").attr("stroke-opacity",.5).selectAll(".link").data(x.links).join("g").attr("class","link").style("mix-blend-mode","multiply"),_=s?.linkColor??"gradient";if("gradient"===_){let t=w.append("linearGradient").attr("id",(t=>(t.uid=SAt.next("linearGradient-")).id)).attr("gradientUnits","userSpaceOnUse").attr("x1",(t=>t.source.x1)).attr("x2",(t=>t.target.x0));t.append("stop").attr("offset","0%").attr("stop-color",(t=>k(t.source.id))),t.append("stop").attr("offset","100%").attr("stop-color",(t=>k(t.target.id)))}switch(_){case"gradient":T=g((t=>t.uid),"coloring");break;case"source":T=g((t=>k(t.source.id)),"coloring");break;case"target":T=g((t=>k(t.target.id)),"coloring");break;default:T=_}w.append("path").attr("d",_At()).attr("stroke",T).attr("stroke-width",(t=>Math.max(1,t.width))),In(void 0,c,0,d)}),"draw"),AAt={draw:EAt}})),OAt=y((()=>{$At=g((t=>t.replaceAll(/^[^\S\n\r]+|[^\S\n\r]+$/g,"").replaceAll(/([\n\r])+/g,"\n").trim()),"prepareTextForParsing")})),PAt=y((()=>{LAt=g((t=>`.label {\n      font-family: ${t.fontFamily};\n    }`),"getStyles"),RAt=LAt})),BAt={};x(BAt,{diagram:()=>zAt});var FAt,zAt,jAt,UAt,WAt,qAt,YAt,GAt,HAt,VAt,XAt,KAt,QAt=y((()=>{SEt(),CEt(),MAt(),OAt(),PAt(),FAt=uEt.parse.bind(uEt),uEt.parse=t=>FAt($At(t)),zAt={styles:RAt,parser:uEt,db:wEt,renderer:AAt}})),ZAt=y((()=>{Ar(),Cr(),_L(),is(),jAt=me.packet,UAt=class{constructor(){this.packet=[],this.setAccTitle=Kn,this.getAccTitle=Qn,this.setDiagramTitle=ta,this.getDiagramTitle=ea,this.getAccDescription=Jn,this.setAccDescription=Zn}static{g(this,"PacketDB")}getConfig(){let t=G$({...jAt,...Re().packet});return t.showBits&&(t.paddingY+=10),t}getPacket(){return this.packet}pushWord(t){t.length>0&&this.packet.push(t)}clear(){Xn(),this.packet=[]}}})),JAt=y((()=>{jft(),We(),Yft(),ZAt(),WAt=g(((t,e)=>{Uft(t,e);let r=-1,i=[],n=1,{bitsPerRow:a}=e.getConfig();for(let{start:s,end:o,bits:l,label:c}of t.blocks){if(void 0!==s&&void 0!==o&&o<s)throw new Error(`Packet block ${s} - ${o} is invalid. End must be greater than start.`);if(s??=r+1,s!==r+1)throw new Error(`Packet block ${s} - ${o??s} is not contiguous. It should start from ${r+1}.`);if(0===l)throw new Error(`Packet block ${s} is invalid. Cannot have a zero bit field.`);for(o??=s+(l??1)-1,l??=o-s+1,r=o,et.debug(`Packet block ${s} - ${r} with label ${c}`);i.length<=a+1&&e.getPacket().length<1e4;){let[t,r]=qAt({start:s,end:o,bits:l,label:c},n,a);if(i.push(t),t.end+1===n*a&&(e.pushWord(i),i=[],n++),!r)break;({start:s,end:o,bits:l,label:c}=r)}}e.pushWord(i)}),"populate"),qAt=g(((t,e,r)=>{if(void 0===t.start)throw new Error("start should have been set during first phase");if(void 0===t.end)throw new Error("end should have been set during first phase");if(t.start>t.end)throw new Error(`Block start ${t.start} is greater than block end ${t.end}.`);if(t.end+1<=e*r)return[t,void 0];let i=e*r-1,n=e*r;return[{start:t.start,end:i,label:t.label,bits:i-t.start},{start:n,end:t.end,label:t.label,bits:t.end-n}]}),"getNextFittingBlock"),YAt={parser:{yy:void 0},parse:g((async t=>{let e=await Pft("packet",t),r=YAt.parser?.yy;if(!(r instanceof UAt))throw new Error("parser.parser?.yy was not a PacketDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");et.debug(e),WAt(e,r)}),"parse")}})),t$t=y((()=>{bxt(),Un(),GAt=g(((t,e,r,i)=>{let n=i.db,a=n.getConfig(),{rowHeight:s,paddingY:o,bitWidth:l,bitsPerRow:c}=a,h=n.getPacket(),u=n.getDiagramTitle(),d=s+o,p=d*(h.length+1)-(u?0:s),f=l*c+2,g=dxt(e);g.attr("viewbox",`0 0 ${f} ${p}`),Rn(g,p,f,a.useMaxWidth);for(let[t,e]of h.entries())HAt(g,e,t,a);g.append("text").text(u).attr("x",f/2).attr("y",p-d/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")}),"draw"),HAt=g(((t,e,r,{rowHeight:i,paddingX:n,paddingY:a,bitWidth:s,bitsPerRow:o,showBits:l})=>{let c=t.append("g"),h=r*(i+a)+a;for(let t of e){let e=t.start%o*s+1,r=(t.end-t.start+1)*s-n;if(c.append("rect").attr("x",e).attr("y",h).attr("width",r).attr("height",i).attr("class","packetBlock"),c.append("text").attr("x",e+r/2).attr("y",h+i/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(t.label),!l)continue;let a=t.end===t.start,u=h-2;c.append("text").attr("x",e+(a?r/2:0)).attr("y",u).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",a?"middle":"start").text(t.start),a||c.append("text").attr("x",e+r).attr("y",u).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(t.end)}}),"drawWord"),VAt={draw:GAt}})),e$t=y((()=>{_L(),XAt={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},KAt=g((({packet:t}={})=>{let e=G$(XAt,t);return`\n\t.packetByte {\n\t\tfont-size: ${e.byteFontSize};\n\t}\n\t.packetByte.start {\n\t\tfill: ${e.startByteColor};\n\t}\n\t.packetByte.end {\n\t\tfill: ${e.endByteColor};\n\t}\n\t.packetLabel {\n\t\tfill: ${e.labelColor};\n\t\tfont-size: ${e.labelFontSize};\n\t}\n\t.packetTitle {\n\t\tfill: ${e.titleColor};\n\t\tfont-size: ${e.titleFontSize};\n\t}\n\t.packetBlock {\n\t\tstroke: ${e.blockStrokeColor};\n\t\tstroke-width: ${e.blockStrokeWidth};\n\t\tfill: ${e.blockFillColor};\n\t}\n\t`}),"styles")})),r$t={};x(r$t,{diagram:()=>i$t});var i$t,n$t,a$t,s$t,o$t,l$t,c$t,h$t,u$t,d$t,p$t,f$t,g$t,y$t,m$t,x$t,b$t,k$t=y((()=>{ZAt(),JAt(),t$t(),e$t(),i$t={parser:YAt,get db(){return new UAt},renderer:VAt,styles:KAt}})),v$t=y((()=>{Ar(),Cr(),_L(),is(),a$t={axes:[],curves:[],options:n$t={showLegend:!0,ticks:5,max:null,min:0,graticule:"circle"}},s$t=structuredClone(a$t),o$t=me.radar,l$t=g((()=>G$({...o$t,...Re().radar})),"getConfig"),c$t=g((()=>s$t.axes),"getAxes"),h$t=g((()=>s$t.curves),"getCurves"),u$t=g((()=>s$t.options),"getOptions"),d$t=g((t=>{s$t.axes=t.map((t=>({name:t.name,label:t.label??t.name})))}),"setAxes"),p$t=g((t=>{s$t.curves=t.map((t=>({name:t.name,label:t.label??t.name,entries:f$t(t.entries)})))}),"setCurves"),f$t=g((t=>{if(null==t[0].axis)return t.map((t=>t.value));let e=c$t();if(0===e.length)throw new Error("Axes must be populated before curves for reference entries");return e.map((e=>{let r=t.find((t=>t.axis?.$refText===e.name));if(void 0===r)throw new Error("Missing entry for axis "+e.label);return r.value}))}),"computeCurveEntries"),g$t=g((t=>{let e=t.reduce(((t,e)=>(t[e.name]=e,t)),{});s$t.options={showLegend:e.showLegend?.value??n$t.showLegend,ticks:e.ticks?.value??n$t.ticks,max:e.max?.value??n$t.max,min:e.min?.value??n$t.min,graticule:e.graticule?.value??n$t.graticule}}),"setOptions"),y$t=g((()=>{Xn(),s$t=structuredClone(a$t)}),"clear"),m$t={getAxes:c$t,getCurves:h$t,getOptions:u$t,setAxes:d$t,setCurves:p$t,setOptions:g$t,getConfig:l$t,clear:y$t,setAccTitle:Kn,getAccTitle:Qn,setDiagramTitle:ta,getDiagramTitle:ea,getAccDescription:Jn,setAccDescription:Zn}})),T$t=y((()=>{jft(),We(),Yft(),v$t(),x$t=g((t=>{Uft(t,m$t);let{axes:e,curves:r,options:i}=t;m$t.setAxes(e),m$t.setCurves(r),m$t.setOptions(i)}),"populate"),b$t={parse:g((async t=>{let e=await Pft("radar",t);et.debug(e),x$t(e)}),"parse")}}));function w$t(t,e,r,i,n,a,s){let o=e.length,l=Math.min(s.width,s.height)/2;r.forEach(((e,r)=>{if(e.entries.length!==o)return;let c=e.entries.map(((t,e)=>{let r=2*Math.PI*e/o-Math.PI/2,a=_$t(t,i,n,l);return{x:a*Math.cos(r),y:a*Math.sin(r)}}));"circle"===a?t.append("path").attr("d",S$t(c,s.curveTension)).attr("class",`radarCurve-${r}`):"polygon"===a&&t.append("polygon").attr("points",c.map((t=>`${t.x},${t.y}`)).join(" ")).attr("class",`radarCurve-${r}`)}))}function _$t(t,e,r,i){return i*(Math.min(Math.max(t,e),r)-e)/(r-e)}function S$t(t,e){let r=t.length,i=`M${t[0].x},${t[0].y}`;for(let n=0;n<r;n++){let a=t[(n-1+r)%r],s=t[n],o=t[(n+1)%r],l=t[(n+2)%r],c={x:s.x+(o.x-a.x)*e,y:s.y+(o.y-a.y)*e},h={x:o.x-(l.x-s.x)*e,y:o.y-(l.y-s.y)*e};i+=` C${c.x},${c.y} ${h.x},${h.y} ${o.x},${o.y}`}return`${i} Z`}function C$t(t,e,r,i){if(!r)return;let n=3*(i.width/2+i.marginRight)/4,a=3*-(i.height/2+i.marginTop)/4;e.forEach(((e,r)=>{let i=t.append("g").attr("transform",`translate(${n}, ${a+20*r})`);i.append("rect").attr("width",12).attr("height",12).attr("class",`radarLegendBox-${r}`),i.append("text").attr("x",16).attr("y",0).attr("class","radarLegendText").text(e.label)}))}var E$t,A$t,$$t,L$t,R$t,I$t,N$t,D$t,M$t=y((()=>{bxt(),E$t=g(((t,e,r,i)=>{let n=i.db,a=n.getAxes(),s=n.getCurves(),o=n.getOptions(),l=n.getConfig(),c=n.getDiagramTitle(),h=dxt(e),u=A$t(h,l),d=o.max??Math.max(...s.map((t=>Math.max(...t.entries)))),p=o.min,f=Math.min(l.width,l.height)/2;$$t(u,a,f,o.ticks,o.graticule),L$t(u,a,f,l),w$t(u,a,s,p,d,o.graticule,l),C$t(u,s,o.showLegend,l),u.append("text").attr("class","radarTitle").text(c).attr("x",0).attr("y",-l.height/2-l.marginTop)}),"draw"),A$t=g(((t,e)=>{let r=e.width+e.marginLeft+e.marginRight,i=e.height+e.marginTop+e.marginBottom,n=e.marginLeft+e.width/2,a=e.marginTop+e.height/2;return t.attr("viewbox",`0 0 ${r} ${i}`).attr("width",r).attr("height",i),t.append("g").attr("transform",`translate(${n}, ${a})`)}),"drawFrame"),$$t=g(((t,e,r,i,n)=>{if("circle"===n)for(let e=0;e<i;e++){let n=r*(e+1)/i;t.append("circle").attr("r",n).attr("class","radarGraticule")}else if("polygon"===n){let n=e.length;for(let a=0;a<i;a++){let s=r*(a+1)/i,o=e.map(((t,e)=>{let r=2*e*Math.PI/n-Math.PI/2;return`${s*Math.cos(r)},${s*Math.sin(r)}`})).join(" ");t.append("polygon").attr("points",o).attr("class","radarGraticule")}}}),"drawGraticule"),L$t=g(((t,e,r,i)=>{let n=e.length;for(let a=0;a<n;a++){let s=e[a].label,o=2*a*Math.PI/n-Math.PI/2;t.append("line").attr("x1",0).attr("y1",0).attr("x2",r*i.axisScaleFactor*Math.cos(o)).attr("y2",r*i.axisScaleFactor*Math.sin(o)).attr("class","radarAxisLine"),t.append("text").text(s).attr("x",r*i.axisLabelFactor*Math.cos(o)).attr("y",r*i.axisLabelFactor*Math.sin(o)).attr("class","radarAxisLabel")}}),"drawAxes"),g(w$t,"drawCurves"),g(_$t,"relativeRadius"),g(S$t,"closedRoundCurve"),g(C$t,"drawLegend"),R$t={draw:E$t}})),O$t=y((()=>{_L(),vr(),Ar(),I$t=g(((t,e)=>{let r="";for(let i=0;i<t.THEME_COLOR_LIMIT;i++){let n=t[`cScale${i}`];r+=`\n\t\t.radarCurve-${i} {\n\t\t\tcolor: ${n};\n\t\t\tfill: ${n};\n\t\t\tfill-opacity: ${e.curveOpacity};\n\t\t\tstroke: ${n};\n\t\t\tstroke-width: ${e.curveStrokeWidth};\n\t\t}\n\t\t.radarLegendBox-${i} {\n\t\t\tfill: ${n};\n\t\t\tfill-opacity: ${e.curveOpacity};\n\t\t\tstroke: ${n};\n\t\t}\n\t\t`}return r}),"genIndexStyles"),N$t=g((t=>{let e=G$(oe(),Re().themeVariables);return{themeVariables:e,radarOptions:G$(e.radar,t)}}),"buildRadarStyleOptions"),D$t=g((({radar:t}={})=>{let{themeVariables:e,radarOptions:r}=N$t(t);return`\n\t.radarTitle {\n\t\tfont-size: ${e.fontSize};\n\t\tcolor: ${e.titleColor};\n\t\tdominant-baseline: hanging;\n\t\ttext-anchor: middle;\n\t}\n\t.radarAxisLine {\n\t\tstroke: ${r.axisColor};\n\t\tstroke-width: ${r.axisStrokeWidth};\n\t}\n\t.radarAxisLabel {\n\t\tdominant-baseline: middle;\n\t\ttext-anchor: middle;\n\t\tfont-size: ${r.axisLabelFontSize}px;\n\t\tcolor: ${r.axisColor};\n\t}\n\t.radarGraticule {\n\t\tfill: ${r.graticuleColor};\n\t\tfill-opacity: ${r.graticuleOpacity};\n\t\tstroke: ${r.graticuleColor};\n\t\tstroke-width: ${r.graticuleStrokeWidth};\n\t}\n\t.radarLegendText {\n\t\ttext-anchor: start;\n\t\tfont-size: ${r.legendFontSize}px;\n\t\tdominant-baseline: hanging;\n\t}\n\t${I$t(e,r)}\n\t`}),"styles")})),P$t={};x(P$t,{diagram:()=>B$t});var B$t,F$t,z$t,j$t=y((()=>{v$t(),T$t(),M$t(),O$t(),B$t={parser:b$t,db:m$t,renderer:R$t,styles:D$t}})),U$t=y((()=>{(F$t=function(){var t=g((function(t,e,r,i){for(r=r||{},i=t.length;i--;r[t[i]]=e);return r}),"o"),e=[1,15],r=[1,7],i=[1,13],n=[1,14],a=[1,19],s=[1,16],o=[1,17],l=[1,18],c=[8,30],h=[8,10,21,28,29,30,31,39,43,46],u=[1,23],d=[1,24],p=[8,10,15,16,21,28,29,30,31,39,43,46],f=[8,10,15,16,21,27,28,29,30,31,39,43,46],y=[1,49],m={trace:g((function(){}),"trace"),yy:{},symbols_:{error:2,spaceLines:3,SPACELINE:4,NL:5,separator:6,SPACE:7,EOF:8,start:9,BLOCK_DIAGRAM_KEY:10,document:11,stop:12,statement:13,link:14,LINK:15,START_LINK:16,LINK_LABEL:17,STR:18,nodeStatement:19,columnsStatement:20,SPACE_BLOCK:21,blockStatement:22,classDefStatement:23,cssClassStatement:24,styleStatement:25,node:26,SIZE:27,COLUMNS:28,"id-block":29,end:30,NODE_ID:31,nodeShapeNLabel:32,dirList:33,DIR:34,NODE_DSTART:35,NODE_DEND:36,BLOCK_ARROW_START:37,BLOCK_ARROW_END:38,classDef:39,CLASSDEF_ID:40,CLASSDEF_STYLEOPTS:41,DEFAULT:42,class:43,CLASSENTITY_IDS:44,STYLECLASS:45,style:46,STYLE_ENTITY_IDS:47,STYLE_DEFINITION_DATA:48,$accept:0,$end:1},terminals_:{2:"error",4:"SPACELINE",5:"NL",7:"SPACE",8:"EOF",10:"BLOCK_DIAGRAM_KEY",15:"LINK",16:"START_LINK",17:"LINK_LABEL",18:"STR",21:"SPACE_BLOCK",27:"SIZE",28:"COLUMNS",29:"id-block",30:"end",31:"NODE_ID",34:"DIR",35:"NODE_DSTART",36:"NODE_DEND",37:"BLOCK_ARROW_START",38:"BLOCK_ARROW_END",39:"classDef",40:"CLASSDEF_ID",41:"CLASSDEF_STYLEOPTS",42:"DEFAULT",43:"class",44:"CLASSENTITY_IDS",45:"STYLECLASS",46:"style",47:"STYLE_ENTITY_IDS",48:"STYLE_DEFINITION_DATA"},productions_:[0,[3,1],[3,2],[3,2],[6,1],[6,1],[6,1],[9,3],[12,1],[12,1],[12,2],[12,2],[11,1],[11,2],[14,1],[14,4],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[19,3],[19,2],[19,1],[20,1],[22,4],[22,3],[26,1],[26,2],[33,1],[33,2],[32,3],[32,4],[23,3],[23,3],[24,3],[25,3]],performAction:g((function(t,e,r,i,n,a,s){var o=a.length-1;switch(n){case 4:i.getLogger().debug("Rule: separator (NL) ");break;case 5:i.getLogger().debug("Rule: separator (Space) ");break;case 6:i.getLogger().debug("Rule: separator (EOF) ");break;case 7:i.getLogger().debug("Rule: hierarchy: ",a[o-1]),i.setHierarchy(a[o-1]);break;case 8:i.getLogger().debug("Stop NL ");break;case 9:i.getLogger().debug("Stop EOF ");break;case 10:i.getLogger().debug("Stop NL2 ");break;case 11:i.getLogger().debug("Stop EOF2 ");break;case 12:i.getLogger().debug("Rule: statement: ",a[o]),"number"==typeof a[o].length?this.$=a[o]:this.$=[a[o]];break;case 13:i.getLogger().debug("Rule: statement #2: ",a[o-1]),this.$=[a[o-1]].concat(a[o]);break;case 14:i.getLogger().debug("Rule: link: ",a[o],t),this.$={edgeTypeStr:a[o],label:""};break;case 15:i.getLogger().debug("Rule: LABEL link: ",a[o-3],a[o-1],a[o]),this.$={edgeTypeStr:a[o],label:a[o-1]};break;case 18:let e=parseInt(a[o]),r=i.generateId();this.$={id:r,type:"space",label:"",width:e,children:[]};break;case 23:i.getLogger().debug("Rule: (nodeStatement link node) ",a[o-2],a[o-1],a[o]," typestr: ",a[o-1].edgeTypeStr);let n=i.edgeStrToEdgeData(a[o-1].edgeTypeStr);this.$=[{id:a[o-2].id,label:a[o-2].label,type:a[o-2].type,directions:a[o-2].directions},{id:a[o-2].id+"-"+a[o].id,start:a[o-2].id,end:a[o].id,label:a[o-1].label,type:"edge",directions:a[o].directions,arrowTypeEnd:n,arrowTypeStart:"arrow_open"},{id:a[o].id,label:a[o].label,type:i.typeStr2Type(a[o].typeStr),directions:a[o].directions}];break;case 24:i.getLogger().debug("Rule: nodeStatement (abc88 node size) ",a[o-1],a[o]),this.$={id:a[o-1].id,label:a[o-1].label,type:i.typeStr2Type(a[o-1].typeStr),directions:a[o-1].directions,widthInColumns:parseInt(a[o],10)};break;case 25:i.getLogger().debug("Rule: nodeStatement (node) ",a[o]),this.$={id:a[o].id,label:a[o].label,type:i.typeStr2Type(a[o].typeStr),directions:a[o].directions,widthInColumns:1};break;case 26:i.getLogger().debug("APA123",this?this:"na"),i.getLogger().debug("COLUMNS: ",a[o]),this.$={type:"column-setting",columns:"auto"===a[o]?-1:parseInt(a[o])};break;case 27:i.getLogger().debug("Rule: id-block statement : ",a[o-2],a[o-1]);i.generateId();this.$={...a[o-2],type:"composite",children:a[o-1]};break;case 28:i.getLogger().debug("Rule: blockStatement : ",a[o-2],a[o-1],a[o]);let s=i.generateId();this.$={id:s,type:"composite",label:"",children:a[o-1]};break;case 29:i.getLogger().debug("Rule: node (NODE_ID separator): ",a[o]),this.$={id:a[o]};break;case 30:i.getLogger().debug("Rule: node (NODE_ID nodeShapeNLabel separator): ",a[o-1],a[o]),this.$={id:a[o-1],label:a[o].label,typeStr:a[o].typeStr,directions:a[o].directions};break;case 31:i.getLogger().debug("Rule: dirList: ",a[o]),this.$=[a[o]];break;case 32:i.getLogger().debug("Rule: dirList: ",a[o-1],a[o]),this.$=[a[o-1]].concat(a[o]);break;case 33:i.getLogger().debug("Rule: nodeShapeNLabel: ",a[o-2],a[o-1],a[o]),this.$={typeStr:a[o-2]+a[o],label:a[o-1]};break;case 34:i.getLogger().debug("Rule: BLOCK_ARROW nodeShapeNLabel: ",a[o-3],a[o-2]," #3:",a[o-1],a[o]),this.$={typeStr:a[o-3]+a[o],label:a[o-2],directions:a[o-1]};break;case 35:case 36:this.$={type:"classDef",id:a[o-1].trim(),css:a[o].trim()};break;case 37:this.$={type:"applyClass",id:a[o-1].trim(),styleClass:a[o].trim()};break;case 38:this.$={type:"applyStyles",id:a[o-1].trim(),stylesStr:a[o].trim()}}}),"anonymous"),table:[{9:1,10:[1,2]},{1:[3]},{10:e,11:3,13:4,19:5,20:6,21:r,22:8,23:9,24:10,25:11,26:12,28:i,29:n,31:a,39:s,43:o,46:l},{8:[1,20]},t(c,[2,12],{13:4,19:5,20:6,22:8,23:9,24:10,25:11,26:12,11:21,10:e,21:r,28:i,29:n,31:a,39:s,43:o,46:l}),t(h,[2,16],{14:22,15:u,16:d}),t(h,[2,17]),t(h,[2,18]),t(h,[2,19]),t(h,[2,20]),t(h,[2,21]),t(h,[2,22]),t(p,[2,25],{27:[1,25]}),t(h,[2,26]),{19:26,26:12,31:a},{10:e,11:27,13:4,19:5,20:6,21:r,22:8,23:9,24:10,25:11,26:12,28:i,29:n,31:a,39:s,43:o,46:l},{40:[1,28],42:[1,29]},{44:[1,30]},{47:[1,31]},t(f,[2,29],{32:32,35:[1,33],37:[1,34]}),{1:[2,7]},t(c,[2,13]),{26:35,31:a},{31:[2,14]},{17:[1,36]},t(p,[2,24]),{10:e,11:37,13:4,14:22,15:u,16:d,19:5,20:6,21:r,22:8,23:9,24:10,25:11,26:12,28:i,29:n,31:a,39:s,43:o,46:l},{30:[1,38]},{41:[1,39]},{41:[1,40]},{45:[1,41]},{48:[1,42]},t(f,[2,30]),{18:[1,43]},{18:[1,44]},t(p,[2,23]),{18:[1,45]},{30:[1,46]},t(h,[2,28]),t(h,[2,35]),t(h,[2,36]),t(h,[2,37]),t(h,[2,38]),{36:[1,47]},{33:48,34:y},{15:[1,50]},t(h,[2,27]),t(f,[2,33]),{38:[1,51]},{33:52,34:y,38:[2,31]},{31:[2,15]},t(f,[2,34]),{38:[2,32]}],defaultActions:{20:[2,7],23:[2,14],50:[2,15],52:[2,32]},parseError:g((function(t,e){if(!e.recoverable){var r=new Error(t);throw r.hash=e,r}this.trace(t)}),"parseError"),parse:g((function(t){var e=this,r=[0],i=[],n=[null],a=[],s=this.table,o="",l=0,c=0,h=0,u=a.slice.call(arguments,1),d=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);d.setInput(t,p.yy),p.yy.lexer=d,p.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var y=d.yylloc;a.push(y);var m=d.options&&d.options.ranges;function x(){var t;return"number"!=typeof(t=i.pop()||d.lex()||1)&&(t instanceof Array&&(t=(i=t).pop()),t=e.symbols_[t]||t),t}"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError,g((function(t){r.length=r.length-2*t,n.length=n.length-t,a.length=a.length-t}),"popStack"),g(x,"lex");for(var b,k,v,T,w,_,S,C,E,A={};;){if(v=r[r.length-1],this.defaultActions[v]?T=this.defaultActions[v]:((null===b||typeof b>"u")&&(b=x()),T=s[v]&&s[v][b]),typeof T>"u"||!T.length||!T[0]){var $="";for(_ in E=[],s[v])this.terminals_[_]&&_>2&&E.push("'"+this.terminals_[_]+"'");$=d.showPosition?"Parse error on line "+(l+1)+":\n"+d.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==b?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError($,{text:d.match,token:this.terminals_[b]||b,line:d.yylineno,loc:y,expected:E})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+b);switch(T[0]){case 1:r.push(b),n.push(d.yytext),a.push(d.yylloc),r.push(T[1]),b=null,k?(b=k,k=null):(c=d.yyleng,o=d.yytext,l=d.yylineno,y=d.yylloc,h>0&&h--);break;case 2:if(S=this.productions_[T[1]][1],A.$=n[n.length-S],A._$={first_line:a[a.length-(S||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(S||1)].first_column,last_column:a[a.length-1].last_column},m&&(A._$.range=[a[a.length-(S||1)].range[0],a[a.length-1].range[1]]),typeof(w=this.performAction.apply(A,[o,c,l,p.yy,T[1],n,a].concat(u)))<"u")return w;S&&(r=r.slice(0,-1*S*2),n=n.slice(0,-1*S),a=a.slice(0,-1*S)),r.push(this.productions_[T[1]][0]),n.push(A.$),a.push(A._$),C=s[r[r.length-2]][r[r.length-1]],r.push(C);break;case 3:return!0}}return!0}),"parse")},x={EOF:1,parseError:g((function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)}),"parseError"),setInput:g((function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this}),"setInput"),input:g((function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t}),"input"),unput:g((function(t){var e=t.length,r=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this}),"unput"),more:g((function(){return this._more=!0,this}),"more"),reject:g((function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"reject"),less:g((function(t){this.unput(this.match.slice(t))}),"less"),pastInput:g((function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")}),"pastInput"),upcomingInput:g((function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")}),"upcomingInput"),showPosition:g((function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"}),"showPosition"),test_match:g((function(t,e){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],r=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1}),"test_match"),next:g((function(){if(this.done)return this.EOF;var t,e,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!e||r[0].length>e[0].length)){if(e=r,i=a,this.options.backtrack_lexer){if(!1!==(t=this.test_match(r,n[a])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,n[i]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}),"next"),lex:g((function(){return this.next()||this.lex()}),"lex"),begin:g((function(t){this.conditionStack.push(t)}),"begin"),popState:g((function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]}),"popState"),_currentRules:g((function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules}),"_currentRules"),topState:g((function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"}),"topState"),pushState:g((function(t){this.begin(t)}),"pushState"),stateStackSize:g((function(){return this.conditionStack.length}),"stateStackSize"),options:{},performAction:g((function(t,e,r,i){switch(r){case 0:return t.getLogger().debug("Found block-beta"),10;case 1:return t.getLogger().debug("Found id-block"),29;case 2:return t.getLogger().debug("Found block"),10;case 3:t.getLogger().debug(".",e.yytext);break;case 4:t.getLogger().debug("_",e.yytext);break;case 5:return 5;case 6:return e.yytext=-1,28;case 7:return e.yytext=e.yytext.replace(/columns\s+/,""),t.getLogger().debug("COLUMNS (LEX)",e.yytext),28;case 8:case 76:case 77:case 99:this.pushState("md_string");break;case 9:return"MD_STR";case 10:case 34:case 79:this.popState();break;case 11:this.pushState("string");break;case 12:t.getLogger().debug("LEX: POPPING STR:",e.yytext),this.popState();break;case 13:return t.getLogger().debug("LEX: STR end:",e.yytext),"STR";case 14:return e.yytext=e.yytext.replace(/space\:/,""),t.getLogger().debug("SPACE NUM (LEX)",e.yytext),21;case 15:return e.yytext="1",t.getLogger().debug("COLUMNS (LEX)",e.yytext),21;case 16:return 42;case 17:return"LINKSTYLE";case 18:return"INTERPOLATE";case 19:return this.pushState("CLASSDEF"),39;case 20:return this.popState(),this.pushState("CLASSDEFID"),"DEFAULT_CLASSDEF_ID";case 21:return this.popState(),this.pushState("CLASSDEFID"),40;case 22:return this.popState(),41;case 23:return this.pushState("CLASS"),43;case 24:return this.popState(),this.pushState("CLASS_STYLE"),44;case 25:return this.popState(),45;case 26:return this.pushState("STYLE_STMNT"),46;case 27:return this.popState(),this.pushState("STYLE_DEFINITION"),47;case 28:return this.popState(),48;case 29:return this.pushState("acc_title"),"acc_title";case 30:return this.popState(),"acc_title_value";case 31:return this.pushState("acc_descr"),"acc_descr";case 32:return this.popState(),"acc_descr_value";case 33:this.pushState("acc_descr_multiline");break;case 35:return"acc_descr_multiline_value";case 36:return 30;case 37:case 38:case 40:case 41:case 44:return this.popState(),t.getLogger().debug("Lex: (("),"NODE_DEND";case 39:return this.popState(),t.getLogger().debug("Lex: ))"),"NODE_DEND";case 42:return this.popState(),t.getLogger().debug("Lex: (-"),"NODE_DEND";case 43:return this.popState(),t.getLogger().debug("Lex: -)"),"NODE_DEND";case 45:return this.popState(),t.getLogger().debug("Lex: ]]"),"NODE_DEND";case 46:return this.popState(),t.getLogger().debug("Lex: ("),"NODE_DEND";case 47:return this.popState(),t.getLogger().debug("Lex: ])"),"NODE_DEND";case 48:case 49:return this.popState(),t.getLogger().debug("Lex: /]"),"NODE_DEND";case 50:return this.popState(),t.getLogger().debug("Lex: )]"),"NODE_DEND";case 51:return this.popState(),t.getLogger().debug("Lex: )"),"NODE_DEND";case 52:return this.popState(),t.getLogger().debug("Lex: ]>"),"NODE_DEND";case 53:return this.popState(),t.getLogger().debug("Lex: ]"),"NODE_DEND";case 54:return t.getLogger().debug("Lexa: -)"),this.pushState("NODE"),35;case 55:return t.getLogger().debug("Lexa: (-"),this.pushState("NODE"),35;case 56:return t.getLogger().debug("Lexa: ))"),this.pushState("NODE"),35;case 57:case 59:case 60:case 61:case 64:return t.getLogger().debug("Lexa: )"),this.pushState("NODE"),35;case 58:return t.getLogger().debug("Lex: ((("),this.pushState("NODE"),35;case 62:return t.getLogger().debug("Lexc: >"),this.pushState("NODE"),35;case 63:return t.getLogger().debug("Lexa: (["),this.pushState("NODE"),35;case 65:case 66:case 67:case 68:case 69:case 70:case 71:return this.pushState("NODE"),35;case 72:return t.getLogger().debug("Lexa: ["),this.pushState("NODE"),35;case 73:return this.pushState("BLOCK_ARROW"),t.getLogger().debug("LEX ARR START"),37;case 74:return t.getLogger().debug("Lex: NODE_ID",e.yytext),31;case 75:return t.getLogger().debug("Lex: EOF",e.yytext),8;case 78:return"NODE_DESCR";case 80:t.getLogger().debug("Lex: Starting string"),this.pushState("string");break;case 81:t.getLogger().debug("LEX ARR: Starting string"),this.pushState("string");break;case 82:return t.getLogger().debug("LEX: NODE_DESCR:",e.yytext),"NODE_DESCR";case 83:t.getLogger().debug("LEX POPPING"),this.popState();break;case 84:t.getLogger().debug("Lex: =>BAE"),this.pushState("ARROW_DIR");break;case 85:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (right): dir:",e.yytext),"DIR";case 86:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (left):",e.yytext),"DIR";case 87:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (x):",e.yytext),"DIR";case 88:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (y):",e.yytext),"DIR";case 89:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (up):",e.yytext),"DIR";case 90:return e.yytext=e.yytext.replace(/^,\s*/,""),t.getLogger().debug("Lex (down):",e.yytext),"DIR";case 91:return e.yytext="]>",t.getLogger().debug("Lex (ARROW_DIR end):",e.yytext),this.popState(),this.popState(),"BLOCK_ARROW_END";case 92:return t.getLogger().debug("Lex: LINK","#"+e.yytext+"#"),15;case 93:case 94:case 95:return t.getLogger().debug("Lex: LINK",e.yytext),15;case 96:case 97:case 98:return t.getLogger().debug("Lex: START_LINK",e.yytext),this.pushState("LLABEL"),16;case 100:return t.getLogger().debug("Lex: Starting string"),this.pushState("string"),"LINK_LABEL";case 101:return this.popState(),t.getLogger().debug("Lex: LINK","#"+e.yytext+"#"),15;case 102:case 103:return this.popState(),t.getLogger().debug("Lex: LINK",e.yytext),15;case 104:return t.getLogger().debug("Lex: COLON",e.yytext),e.yytext=e.yytext.slice(1),27}}),"anonymous"),rules:[/^(?:block-beta\b)/,/^(?:block:)/,/^(?:block\b)/,/^(?:[\s]+)/,/^(?:[\n]+)/,/^(?:((\u000D\u000A)|(\u000A)))/,/^(?:columns\s+auto\b)/,/^(?:columns\s+[\d]+)/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]*)/,/^(?:space[:]\d+)/,/^(?:space\b)/,/^(?:default\b)/,/^(?:linkStyle\b)/,/^(?:interpolate\b)/,/^(?:classDef\s+)/,/^(?:DEFAULT\s+)/,/^(?:\w+\s+)/,/^(?:[^\n]*)/,/^(?:class\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:style\s+)/,/^(?:(\w+)+((,\s*\w+)*))/,/^(?:[^\n]*)/,/^(?:accTitle\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*:\s*)/,/^(?:(?!\n||)*[^\n]*)/,/^(?:accDescr\s*\{\s*)/,/^(?:[\}])/,/^(?:[^\}]*)/,/^(?:end\b\s*)/,/^(?:\(\(\()/,/^(?:\)\)\))/,/^(?:[\)]\))/,/^(?:\}\})/,/^(?:\})/,/^(?:\(-)/,/^(?:-\))/,/^(?:\(\()/,/^(?:\]\])/,/^(?:\()/,/^(?:\]\))/,/^(?:\\\])/,/^(?:\/\])/,/^(?:\)\])/,/^(?:[\)])/,/^(?:\]>)/,/^(?:[\]])/,/^(?:-\))/,/^(?:\(-)/,/^(?:\)\))/,/^(?:\))/,/^(?:\(\(\()/,/^(?:\(\()/,/^(?:\{\{)/,/^(?:\{)/,/^(?:>)/,/^(?:\(\[)/,/^(?:\()/,/^(?:\[\[)/,/^(?:\[\|)/,/^(?:\[\()/,/^(?:\)\)\))/,/^(?:\[\\)/,/^(?:\[\/)/,/^(?:\[\\)/,/^(?:\[)/,/^(?:<\[)/,/^(?:[^\(\[\n\-\)\{\}\s\<\>:]+)/,/^(?:$)/,/^(?:["][`])/,/^(?:["][`])/,/^(?:[^`"]+)/,/^(?:[`]["])/,/^(?:["])/,/^(?:["])/,/^(?:[^"]+)/,/^(?:["])/,/^(?:\]>\s*\()/,/^(?:,?\s*right\s*)/,/^(?:,?\s*left\s*)/,/^(?:,?\s*x\s*)/,/^(?:,?\s*y\s*)/,/^(?:,?\s*up\s*)/,/^(?:,?\s*down\s*)/,/^(?:\)\s*)/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?:\s*~~[\~]+\s*)/,/^(?:\s*[xo<]?--\s*)/,/^(?:\s*[xo<]?==\s*)/,/^(?:\s*[xo<]?-\.\s*)/,/^(?:["][`])/,/^(?:["])/,/^(?:\s*[xo<]?--+[-xo>]\s*)/,/^(?:\s*[xo<]?==+[=xo>]\s*)/,/^(?:\s*[xo<]?-?\.+-[xo>]?\s*)/,/^(?::\d+)/],conditions:{STYLE_DEFINITION:{rules:[28],inclusive:!1},STYLE_STMNT:{rules:[27],inclusive:!1},CLASSDEFID:{rules:[22],inclusive:!1},CLASSDEF:{rules:[20,21],inclusive:!1},CLASS_STYLE:{rules:[25],inclusive:!1},CLASS:{rules:[24],inclusive:!1},LLABEL:{rules:[99,100,101,102,103],inclusive:!1},ARROW_DIR:{rules:[85,86,87,88,89,90,91],inclusive:!1},BLOCK_ARROW:{rules:[76,81,84],inclusive:!1},NODE:{rules:[37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,77,80],inclusive:!1},md_string:{rules:[9,10,78,79],inclusive:!1},space:{rules:[],inclusive:!1},string:{rules:[12,13,82,83],inclusive:!1},acc_descr_multiline:{rules:[34,35],inclusive:!1},acc_descr:{rules:[32],inclusive:!1},acc_title:{rules:[30],inclusive:!1},INITIAL:{rules:[0,1,2,3,4,5,6,7,8,11,14,15,16,17,18,19,23,26,29,31,33,36,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,92,93,94,95,96,97,98,104],inclusive:!0}}};function b(){this.yy={}}return m.lexer=x,g(b,"Parser"),b.prototype=m,m.Parser=b,new b}()).parser=F$t,z$t=F$t}));function W$t(t){switch(et.debug("typeStr2Type",t),t){case"[]":return"square";case"()":return et.debug("we have a round"),"round";case"(())":return"circle";case">]":return"rect_left_inv_arrow";case"{}":return"diamond";case"{{}}":return"hexagon";case"([])":return"stadium";case"[[]]":return"subroutine";case"[()]":return"cylinder";case"((()))":return"doublecircle";case"[//]":return"lean_right";case"[\\\\]":return"lean_left";case"[/\\]":return"trapezoid";case"[\\/]":return"inv_trapezoid";case"<[]>":return"block_arrow";default:return"na"}}function q$t(t){return"=="===(et.debug("typeStr2Type",t),t)?"thick":"normal"}function Y$t(t){switch(t.replace(/^[\s-]+|[\s-]+$/g,"")){case"x":return"arrow_cross";case"o":return"arrow_circle";case">":return"arrow_point";default:return""}}var G$t,H$t,V$t,X$t,K$t,Q$t,Z$t,J$t,tLt,eLt,rLt,iLt,nLt,aLt,sLt,oLt,lLt,cLt,hLt,uLt,dLt,pLt,fLt,gLt,yLt,mLt,xLt,bLt,kLt,vLt,TLt,wLt,_Lt,SLt,CLt,ELt,ALt,$Lt,LLt,RLt,ILt,NLt,DLt,MLt=y((()=>{OH(),Ar(),ns(),We(),gn(),is(),G$t=new Map,H$t=[],V$t=new Map,X$t="color",K$t="fill",Q$t=na(),Z$t=new Map,J$t=g((t=>on.sanitizeText(t,Q$t)),"sanitizeText"),tLt=g((function(t,e=""){let r=Z$t.get(t);r||(r={id:t,styles:[],textStyles:[]},Z$t.set(t,r)),e?.split(",").forEach((t=>{let e=t.replace(/([^;]*);/,"$1").trim();if(RegExp(X$t).exec(t)){let t=e.replace(K$t,"bgFill").replace(X$t,K$t);r.textStyles.push(t)}r.styles.push(e)}))}),"addStyleClass"),eLt=g((function(t,e=""){let r=G$t.get(t);null!=e&&(r.styles=e.split(","))}),"addStyle2Node"),rLt=g((function(t,e){t.split(",").forEach((function(t){let r=G$t.get(t);if(void 0===r){let e=t.trim();r={id:e,type:"na",children:[]},G$t.set(e,r)}r.classes||(r.classes=[]),r.classes.push(e)}))}),"setCssClass"),iLt=g(((t,e)=>{let r=t.flat(),i=[],n=r.find((t=>"column-setting"===t?.type))?.columns??-1;for(let t of r)if("number"==typeof n&&n>0&&"column-setting"!==t.type&&"number"==typeof t.widthInColumns&&t.widthInColumns>n&&et.warn(`Block ${t.id} width ${t.widthInColumns} exceeds configured column width ${n}`),t.label&&(t.label=J$t(t.label)),"classDef"!==t.type)if("applyClass"!==t.type)if("applyStyles"!==t.type)if("column-setting"===t.type)e.columns=t.columns??-1;else if("edge"===t.type){let e=(V$t.get(t.id)??0)+1;V$t.set(t.id,e),t.id=e+"-"+t.id,H$t.push(t)}else{t.label||("composite"===t.type?t.label="":t.label=t.id);let e=G$t.get(t.id);if(void 0===e?G$t.set(t.id,t):("na"!==t.type&&(e.type=t.type),t.label!==t.id&&(e.label=t.label)),t.children&&iLt(t.children,t),"space"===t.type){let e=t.width??1;for(let r=0;r<e;r++){let e=MH(t);e.id=e.id+"-"+r,G$t.set(e.id,e),i.push(e)}}else void 0===e&&i.push(t)}else t?.stylesStr&&eLt(t.id,t?.stylesStr);else rLt(t.id,t?.styleClass??"");else tLt(t.id,t.css);e.children=i}),"populateBlockDatabase"),nLt=[],aLt={id:"root",type:"composite",children:[],columns:-1},sLt=g((()=>{et.debug("Clear called"),Xn(),aLt={id:"root",type:"composite",children:[],columns:-1},G$t=new Map([["root",aLt]]),nLt=[],Z$t=new Map,H$t=[],V$t=new Map}),"clear"),g(W$t,"typeStr2Type"),g(q$t,"edgeTypeStr2Type"),g(Y$t,"edgeStrToEdgeData"),oLt=0,lLt=g((()=>(oLt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+oLt)),"generateId"),cLt=g((t=>{aLt.children=t,iLt(t,aLt),nLt=aLt.children}),"setHierarchy"),hLt=g((t=>{let e=G$t.get(t);return e?e.columns?e.columns:e.children?e.children.length:-1:-1}),"getColumns"),uLt=g((()=>[...G$t.values()]),"getBlocksFlat"),dLt=g((()=>nLt||[]),"getBlocks"),pLt=g((()=>H$t),"getEdges"),fLt=g((t=>G$t.get(t)),"getBlock"),gLt=g((t=>{G$t.set(t.id,t)}),"setBlock"),yLt=g((()=>et),"getLogger"),mLt=g((function(){return Z$t}),"getClasses"),xLt={getConfig:g((()=>Re().block),"getConfig"),typeStr2Type:W$t,edgeTypeStr2Type:q$t,edgeStrToEdgeData:Y$t,getLogger:yLt,getBlocksFlat:uLt,getBlocks:dLt,getEdges:pLt,setHierarchy:cLt,getBlock:fLt,setBlock:gLt,getColumns:hLt,getClasses:mLt,clear:sLt,generateId:lLt},bLt=xLt})),OLt=y((()=>{yr(),m5(),kLt=g(((t,e)=>{let r=Dt,i=r(t,"r"),n=r(t,"g"),a=r(t,"b");return It(i,n,a,e)}),"fade"),vLt=g((t=>`.label {\n    font-family: ${t.fontFamily};\n    color: ${t.nodeTextColor||t.textColor};\n  }\n  .cluster-label text {\n    fill: ${t.titleColor};\n  }\n  .cluster-label span,p {\n    color: ${t.titleColor};\n  }\n\n\n\n  .label text,span,p {\n    fill: ${t.nodeTextColor||t.textColor};\n    color: ${t.nodeTextColor||t.textColor};\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon,\n  .node path {\n    fill: ${t.mainBkg};\n    stroke: ${t.nodeBorder};\n    stroke-width: 1px;\n  }\n  .flowchart-label text {\n    text-anchor: middle;\n  }\n  // .flowchart-label .text-outer-tspan {\n  //   text-anchor: middle;\n  // }\n  // .flowchart-label .text-inner-tspan {\n  //   text-anchor: start;\n  // }\n\n  .node .label {\n    text-align: center;\n  }\n  .node.clickable {\n    cursor: pointer;\n  }\n\n  .arrowheadPath {\n    fill: ${t.arrowheadColor};\n  }\n\n  .edgePath .path {\n    stroke: ${t.lineColor};\n    stroke-width: 2.0px;\n  }\n\n  .flowchart-link {\n    stroke: ${t.lineColor};\n    fill: none;\n  }\n\n  .edgeLabel {\n    background-color: ${t.edgeLabelBackground};\n    rect {\n      opacity: 0.5;\n      background-color: ${t.edgeLabelBackground};\n      fill: ${t.edgeLabelBackground};\n    }\n    text-align: center;\n  }\n\n  /* For html labels only */\n  .labelBkg {\n    background-color: ${kLt(t.edgeLabelBackground,.5)};\n    // background-color:\n  }\n\n  .node .cluster {\n    // fill: ${kLt(t.mainBkg,.5)};\n    fill: ${kLt(t.clusterBkg,.5)};\n    stroke: ${kLt(t.clusterBorder,.2)};\n    box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px, rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;\n    stroke-width: 1px;\n  }\n\n  .cluster text {\n    fill: ${t.titleColor};\n  }\n\n  .cluster span,p {\n    color: ${t.titleColor};\n  }\n  /* .cluster div {\n    color: ${t.titleColor};\n  } */\n\n  div.mermaidTooltip {\n    position: absolute;\n    text-align: center;\n    max-width: 200px;\n    padding: 2px;\n    font-family: ${t.fontFamily};\n    font-size: 12px;\n    background: ${t.tertiaryColor};\n    border: 1px solid ${t.border2};\n    border-radius: 2px;\n    pointer-events: none;\n    z-index: 100;\n  }\n\n  .flowchartTitleText {\n    text-anchor: middle;\n    font-size: 18px;\n    fill: ${t.textColor};\n  }\n  ${o5()}\n`),"getStyles"),TLt=vLt})),PLt=y((()=>{We(),wLt=g(((t,e,r,i)=>{e.forEach((e=>{NLt[e](t,r,i)}))}),"insertMarkers"),_Lt=g(((t,e,r)=>{et.trace("Making markers for ",r),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")}),"extension"),SLt=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")}),"composition"),CLt=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")}),"aggregation"),ELt=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",r+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")}),"dependency"),ALt=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",r+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)}),"lollipop"),$Lt=g(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",6).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",12).attr("markerHeight",12).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")}),"point"),LLt=g(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")}),"circle"),RLt=g(((t,e,r)=>{t.append("marker").attr("id",r+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",r+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")}),"cross"),ILt=g(((t,e,r)=>{t.append("defs").append("marker").attr("id",r+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")}),"barb"),NLt={extension:_Lt,composition:SLt,aggregation:CLt,dependency:ELt,lollipop:ALt,point:$Lt,circle:LLt,cross:RLt,barb:ILt},DLt=wLt}));function BLt(t,e){if(0===t||!Number.isInteger(t))throw new Error("Columns must be an integer !== 0.");if(e<0||!Number.isInteger(e))throw new Error("Position must be a non-negative integer."+e);if(t<0)return{px:e,py:0};if(1===t)return{px:0,py:e};return{px:e%t,py:Math.floor(e/t)}}function FLt(t,e,r=0,i=0){et.debug("setBlockSizes abc95 (start)",t.id,t?.size?.x,"block width =",t?.size,"siblingWidth",r),t?.size?.width||(t.size={width:r,height:i,x:0,y:0});let n=0,a=0;if(t.children?.length>0){for(let r of t.children)FLt(r,e);let s=qLt(t);n=s.width,a=s.height,et.debug("setBlockSizes abc95 maxWidth of",t.id,":s children is ",n,a);for(let e of t.children)e.size&&(et.debug(`abc95 Setting size of children of ${t.id} id=${e.id} ${n} ${a} ${JSON.stringify(e.size)}`),e.size.width=n*(e.widthInColumns??1)+WLt*((e.widthInColumns??1)-1),e.size.height=a,e.size.x=0,e.size.y=0,et.debug(`abc95 updating size of ${t.id} children child:${e.id} maxWidth:${n} maxHeight:${a}`));for(let r of t.children)FLt(r,e,n,a);let o=t.columns??-1,l=0;for(let e of t.children)l+=e.widthInColumns??1;let c=t.children.length;o>0&&o<l&&(c=o);let h=Math.ceil(l/c),u=c*(n+WLt)+WLt,d=h*(a+WLt)+WLt;if(u<r){et.debug(`Detected to small sibling: abc95 ${t.id} siblingWidth ${r} siblingHeight ${i} width ${u}`),u=r,d=i;let e=(r-c*WLt-WLt)/c,s=(i-h*WLt-WLt)/h;et.debug("Size indata abc88",t.id,"childWidth",e,"maxWidth",n),et.debug("Size indata abc88",t.id,"childHeight",s,"maxHeight",a),et.debug("Size indata abc88 xSize",c,"padding",WLt);for(let r of t.children)r.size&&(r.size.width=e,r.size.height=s,r.size.x=0,r.size.y=0)}if(et.debug(`abc95 (finale calc) ${t.id} xSize ${c} ySize ${h} columns ${o}${t.children.length} width=${Math.max(u,t.size?.width||0)}`),u<(t?.size?.width||0)){u=t?.size?.width||0;let e=o>0?Math.min(t.children.length,o):t.children.length;if(e>0){let r=(u-e*WLt-WLt)/e;et.debug("abc95 (growing to fit) width",t.id,u,t.size?.width,r);for(let e of t.children)e.size&&(e.size.width=r)}}t.size={width:u,height:d,x:0,y:0}}et.debug("setBlockSizes abc94 (done)",t.id,t?.size?.x,t?.size?.width,t?.size?.y,t?.size?.height)}function zLt(t,e){et.debug(`abc85 layout blocks (=>layoutBlocks) ${t.id} x: ${t?.size?.x} y: ${t?.size?.y} width: ${t?.size?.width}`);let r=t.columns??-1;if(et.debug("layoutBlocks columns abc95",t.id,"=>",r,t),t.children&&t.children.length>0){let i=t?.children[0]?.size?.width??0,n=t.children.length*i+(t.children.length-1)*WLt;et.debug("widthOfChildren 88",n,"posX");let a=0;et.debug("abc91 block?.size?.x",t.id,t?.size?.x);let s=t?.size?.x?t?.size?.x+(-t?.size?.width/2||0):-WLt,o=0;for(let i of t.children){let n=t;if(!i.size)continue;let{width:l,height:c}=i.size,{px:h,py:u}=BLt(r,a);if(u!=o&&(o=u,s=t?.size?.x?t?.size?.x+(-t?.size?.width/2||0):-WLt,et.debug("New row in layout for block",t.id," and child ",i.id,o)),et.debug(`abc89 layout blocks (child) id: ${i.id} Pos: ${a} (px, py) ${h},${u} (${n?.size?.x},${n?.size?.y}) parent: ${n.id} width: ${l}${WLt}`),n.size){let t=l/2;i.size.x=s+WLt+t,et.debug(`abc91 layout blocks (calc) px, pyid:${i.id} startingPos=X${s} new startingPosX${i.size.x} ${t} padding=${WLt} width=${l} halfWidth=${t} => x:${i.size.x} y:${i.size.y} ${i.widthInColumns} (width * (child?.w || 1)) / 2 ${l*(i?.widthInColumns??1)/2}`),s=i.size.x+t,i.size.y=n.size.y-n.size.height/2+u*(c+WLt)+c/2+WLt,et.debug(`abc88 layout blocks (calc) px, pyid:${i.id}startingPosX${s}${WLt}${t}=>x:${i.size.x}y:${i.size.y}${i.widthInColumns}(width * (child?.w || 1)) / 2${l*(i?.widthInColumns??1)/2}`)}i.children&&zLt(i,e);let d=i?.widthInColumns??1;r>0&&(d=Math.min(d,r-a%r)),a+=d,et.debug("abc88 columnsPos",i,a)}}et.debug(`layout blocks (<==layoutBlocks) ${t.id} x: ${t?.size?.x} y: ${t?.size?.y} width: ${t?.size?.width}`)}function jLt(t,{minX:e,minY:r,maxX:i,maxY:n}={minX:0,minY:0,maxX:0,maxY:0}){if(t.size&&"root"!==t.id){let{x:a,y:s,width:o,height:l}=t.size;a-o/2<e&&(e=a-o/2),s-l/2<r&&(r=s-l/2),a+o/2>i&&(i=a+o/2),s+l/2>n&&(n=s+l/2)}if(t.children)for(let a of t.children)({minX:e,minY:r,maxX:i,maxY:n}=jLt(a,{minX:e,minY:r,maxX:i,maxY:n}));return{minX:e,minY:r,maxX:i,maxY:n}}function ULt(t){let e=t.getBlock("root");if(!e)return;FLt(e,t,0,0),zLt(e,t),et.debug("getBlocks",JSON.stringify(e,null,2));let{minX:r,minY:i,maxX:n,maxY:a}=jLt(e);return{x:r,y:i,width:n-r,height:a-i}}var WLt,qLt,YLt=y((()=>{We(),ns(),WLt=na()?.block?.padding??8,g(BLt,"calculateBlockPosition"),qLt=g((t=>{let e=0,r=0;for(let i of t.children){let{width:n,height:a,x:s,y:o}=i.size??{width:0,height:0,x:0,y:0};et.debug("getMaxChildSize abc95 child:",i.id,"width:",n,"height:",a,"x:",s,"y:",o,i.type),"space"!==i.type&&(n>e&&(e=n/(t.widthInColumns??1)),a>r&&(r=a))}return{width:e,height:r}}),"getMaxChildSize"),g(FLt,"setBlockSizes"),g(zLt,"layoutBlocks"),g(jLt,"findBounds"),g(ULt,"layout")}));function GLt(t,e){e&&t.attr("style",e)}function HLt(t,e){let r=nh(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),i=r.append("xhtml:div"),n=t.label,a=t.isNode?"nodeLabel":"edgeLabel",s=i.append("span");return s.html(zi(n,e)),GLt(s,t.labelStyle),s.attr("class",a),GLt(i,t.labelStyle),i.style("display","inline-block"),i.style("white-space","nowrap"),i.attr("xmlns","http://www.w3.org/1999/xhtml"),r.node()}var VLt,XLt,KLt,QLt,ZLt,JLt=y((()=>{QT(),ns(),gn(),We(),DO(),_L(),g(GLt,"applyStyle"),g(HLt,"addHtmlLabel"),VLt=g((async(t,e,r,i)=>{let n=t||"";"object"==typeof n&&(n=n[0]);let a=na();if(Hi(a.flowchart.htmlLabels)){return n=n.replace(/\\n|\n/g,"<br />"),et.debug("vertexText"+n),HLt({isNode:i,label:await IO(TL(n)),labelStyle:e.replace("fill:","color:")},a)}{let t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));let i=[];i="string"==typeof n?n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?n:[];for(let e of i){let i=document.createElementNS("http://www.w3.org/2000/svg","tspan");i.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),i.setAttribute("dy","1em"),i.setAttribute("x","0"),r?i.setAttribute("class","title-row"):i.setAttribute("class","row"),i.textContent=e.trim(),t.appendChild(i)}return t}}),"createLabel"),XLt=VLt})),tRt=y((()=>{We(),KLt=g(((t,e,r,i,n)=>{e.arrowTypeStart&&ZLt(t,"start",e.arrowTypeStart,r,i,n),e.arrowTypeEnd&&ZLt(t,"end",e.arrowTypeEnd,r,i,n)}),"addEdgeMarkers"),QLt={arrow_cross:"cross",arrow_point:"point",arrow_barb:"barb",arrow_circle:"circle",aggregation:"aggregation",extension:"extension",composition:"composition",dependency:"dependency",lollipop:"lollipop"},ZLt=g(((t,e,r,i,n,a)=>{let s=QLt[r];if(!s)return void et.warn(`Unknown arrow type: ${r}`);let o="start"===e?"Start":"End";t.attr(`marker-${e}`,`url(${i}#${n}_${a}-${s}${o})`)}),"addEdgeMarker")}));function eRt(t,e){na().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}var rRt,iRt,nRt,aRt,sRt,oRt,lRt,cRt,hRt,uRt,dRt=y((()=>{We(),JLt(),DO(),QT(),ns(),_L(),gn(),Jj(),Wj(),tRt(),rRt={},iRt={},nRt=g((async(t,e)=>{let r=na(),i=Hi(r.flowchart.htmlLabels),n="markdown"===e.labelType?NO(t,e.label,{style:e.labelStyle,useHtmlLabels:i,addSvgBackground:!0},r):await XLt(e.label,e.labelStyle),a=t.insert("g").attr("class","edgeLabel"),s=a.insert("g").attr("class","label");s.node().appendChild(n);let o,l=n.getBBox();if(i){let t=n.children[0],e=nh(n);l=t.getBoundingClientRect(),e.attr("width",l.width),e.attr("height",l.height)}if(s.attr("transform","translate("+-l.width/2+", "+-l.height/2+")"),rRt[e.id]=a,e.width=l.width,e.height=l.height,e.startLabelLeft){let r=await XLt(e.startLabelLeft,e.labelStyle),i=t.insert("g").attr("class","edgeTerminals"),n=i.insert("g").attr("class","inner");o=n.node().appendChild(r);let a=r.getBBox();n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),iRt[e.id]||(iRt[e.id]={}),iRt[e.id].startLeft=i,eRt(o,e.startLabelLeft)}if(e.startLabelRight){let r=await XLt(e.startLabelRight,e.labelStyle),i=t.insert("g").attr("class","edgeTerminals"),n=i.insert("g").attr("class","inner");o=i.node().appendChild(r),n.node().appendChild(r);let a=r.getBBox();n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),iRt[e.id]||(iRt[e.id]={}),iRt[e.id].startRight=i,eRt(o,e.startLabelRight)}if(e.endLabelLeft){let r=await XLt(e.endLabelLeft,e.labelStyle),i=t.insert("g").attr("class","edgeTerminals"),n=i.insert("g").attr("class","inner");o=n.node().appendChild(r);let a=r.getBBox();n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),i.node().appendChild(r),iRt[e.id]||(iRt[e.id]={}),iRt[e.id].endLeft=i,eRt(o,e.endLabelLeft)}if(e.endLabelRight){let r=await XLt(e.endLabelRight,e.labelStyle),i=t.insert("g").attr("class","edgeTerminals"),n=i.insert("g").attr("class","inner");o=n.node().appendChild(r);let a=r.getBBox();n.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),i.node().appendChild(r),iRt[e.id]||(iRt[e.id]={}),iRt[e.id].endRight=i,eRt(o,e.endLabelRight)}return n}),"insertEdgeLabel"),g(eRt,"setTerminalWidth"),aRt=g(((t,e)=>{et.debug("Moving label abc88 ",t.id,t.label,rRt[t.id],e);let r=e.updatedPath?e.updatedPath:e.originalPath,i=na(),{subGraphTitleTotalMargin:n}=Lj(i);if(t.label){let i=rRt[t.id],a=t.x,s=t.y;if(r){let i=kL.calcLabelPosition(r);et.debug("Moving label "+t.label+" from (",a,",",s,") to (",i.x,",",i.y,") abc88"),e.updatedPath&&(a=i.x,s=i.y)}i.attr("transform",`translate(${a}, ${s+n/2})`)}if(t.startLabelLeft){let e=iRt[t.id].startLeft,i=t.x,n=t.y;if(r){let e=kL.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",r);i=e.x,n=e.y}e.attr("transform",`translate(${i}, ${n})`)}if(t.startLabelRight){let e=iRt[t.id].startRight,i=t.x,n=t.y;if(r){let e=kL.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",r);i=e.x,n=e.y}e.attr("transform",`translate(${i}, ${n})`)}if(t.endLabelLeft){let e=iRt[t.id].endLeft,i=t.x,n=t.y;if(r){let e=kL.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",r);i=e.x,n=e.y}e.attr("transform",`translate(${i}, ${n})`)}if(t.endLabelRight){let e=iRt[t.id].endRight,i=t.x,n=t.y;if(r){let e=kL.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",r);i=e.x,n=e.y}e.attr("transform",`translate(${i}, ${n})`)}}),"positionEdgeLabel"),sRt=g(((t,e)=>{let r=t.x,i=t.y,n=Math.abs(e.x-r),a=Math.abs(e.y-i),s=t.width/2,o=t.height/2;return n>=s||a>=o}),"outsideNode"),oRt=g(((t,e,r)=>{et.debug(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(e)}\n  insidePoint : ${JSON.stringify(r)}\n  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);let i=t.x,n=t.y,a=Math.abs(i-r.x),s=t.width/2,o=r.x<e.x?s-a:s+a,l=t.height/2,c=Math.abs(e.y-r.y),h=Math.abs(e.x-r.x);if(Math.abs(n-e.y)*s>Math.abs(i-e.x)*l){let t=r.y<e.y?e.y-l-n:n-l-e.y;o=h*t/c;let i={x:r.x<e.x?r.x+o:r.x-h+o,y:r.y<e.y?r.y+c-t:r.y-c+t};return 0===o&&(i.x=e.x,i.y=e.y),0===h&&(i.x=e.x),0===c&&(i.y=e.y),et.debug(`abc89 topp/bott calc, Q ${c}, q ${t}, R ${h}, r ${o}`,i),i}{o=r.x<e.x?e.x-s-i:i-s-e.x;let t=c*o/h,n=r.x<e.x?r.x+h-o:r.x-h+o,a=r.y<e.y?r.y+t:r.y-t;return et.debug(`sides calc abc89, Q ${c}, q ${t}, R ${h}, r ${o}`,{_x:n,_y:a}),0===o&&(n=e.x,a=e.y),0===h&&(n=e.x),0===c&&(a=e.y),{x:n,y:a}}}),"intersection"),lRt=g(((t,e)=>{et.debug("abc88 cutPathAtIntersect",t,e);let r=[],i=t[0],n=!1;return t.forEach((t=>{if(sRt(e,t)||n)i=t,n||r.push(t);else{let a=oRt(e,i,t),s=!1;r.forEach((t=>{s=s||t.x===a.x&&t.y===a.y})),r.some((t=>t.x===a.x&&t.y===a.y))||r.push(a),n=!0}})),r}),"cutPathAtIntersect"),cRt=g((function(t,e,r,i,n,a,s){let o=r.points;et.debug("abc88 InsertEdge: edge=",r,"e=",e);let l=!1,c=a.node(e.v);var h=a.node(e.w);h?.intersect&&c?.intersect&&(o=o.slice(1,r.points.length-1),o.unshift(c.intersect(o[0])),o.push(h.intersect(o[o.length-1]))),r.toCluster&&(et.debug("to cluster abc88",i[r.toCluster]),o=lRt(r.points,i[r.toCluster].node),l=!0),r.fromCluster&&(et.debug("from cluster abc88",i[r.fromCluster]),o=lRt(o.reverse(),i[r.fromCluster].node).reverse(),l=!0);let u=o.filter((t=>!Number.isNaN(t.y))),d=hv;r.curve&&("graph"===n||"flowchart"===n)&&(d=r.curve);let p,{x:f,y:g}=Xj(r),y=Vk().x(f).y(g).curve(d);switch(r.thickness){case"normal":p="edge-thickness-normal";break;case"thick":case"invisible":p="edge-thickness-thick";break;default:p=""}switch(r.pattern){case"solid":p+=" edge-pattern-solid";break;case"dotted":p+=" edge-pattern-dotted";break;case"dashed":p+=" edge-pattern-dashed"}let m=t.append("path").attr("d",y(u)).attr("id",r.id).attr("class"," "+p+(r.classes?" "+r.classes:"")).attr("style",r.style),x="";(na().flowchart.arrowMarkerAbsolute||na().state.arrowMarkerAbsolute)&&(x=Gi(!0)),KLt(m,r,x,s,n);let b={};return l&&(b.updatedPath=o),b.originalPath=r.points,b}),"insertEdge")})),pRt=y((()=>{hRt=g((t=>{let e=new Set;for(let r of t)switch(r){case"x":e.add("right"),e.add("left");break;case"y":e.add("up"),e.add("down");break;default:e.add(r)}return e}),"expandAndDeduplicateDirections"),uRt=g(((t,e,r)=>{let i=hRt(t),n=e.height+2*r.padding,a=n/2,s=e.width+2*a+r.padding,o=r.padding/2;return i.has("right")&&i.has("left")&&i.has("up")&&i.has("down")?[{x:0,y:0},{x:a,y:0},{x:s/2,y:2*o},{x:s-a,y:0},{x:s,y:0},{x:s,y:-n/3},{x:s+2*o,y:-n/2},{x:s,y:-2*n/3},{x:s,y:-n},{x:s-a,y:-n},{x:s/2,y:-n-2*o},{x:a,y:-n},{x:0,y:-n},{x:0,y:-2*n/3},{x:-2*o,y:-n/2},{x:0,y:-n/3}]:i.has("right")&&i.has("left")&&i.has("up")?[{x:a,y:0},{x:s-a,y:0},{x:s,y:-n/2},{x:s-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}]:i.has("right")&&i.has("left")&&i.has("down")?[{x:0,y:0},{x:a,y:-n},{x:s-a,y:-n},{x:s,y:0}]:i.has("right")&&i.has("up")&&i.has("down")?[{x:0,y:0},{x:s,y:-a},{x:s,y:-n+a},{x:0,y:-n}]:i.has("left")&&i.has("up")&&i.has("down")?[{x:s,y:0},{x:0,y:-a},{x:0,y:-n+a},{x:s,y:-n}]:i.has("right")&&i.has("left")?[{x:a,y:0},{x:a,y:-o},{x:s-a,y:-o},{x:s-a,y:0},{x:s,y:-n/2},{x:s-a,y:-n},{x:s-a,y:-n+o},{x:a,y:-n+o},{x:a,y:-n},{x:0,y:-n/2}]:i.has("up")&&i.has("down")?[{x:s/2,y:0},{x:0,y:-o},{x:a,y:-o},{x:a,y:-n+o},{x:0,y:-n+o},{x:s/2,y:-n},{x:s,y:-n+o},{x:s-a,y:-n+o},{x:s-a,y:-o},{x:s,y:-o}]:i.has("right")&&i.has("up")?[{x:0,y:0},{x:s,y:-a},{x:0,y:-n}]:i.has("right")&&i.has("down")?[{x:0,y:0},{x:s,y:0},{x:0,y:-n}]:i.has("left")&&i.has("up")?[{x:s,y:0},{x:0,y:-a},{x:s,y:-n}]:i.has("left")&&i.has("down")?[{x:s,y:0},{x:0,y:0},{x:s,y:-n}]:i.has("right")?[{x:a,y:-o},{x:a,y:-o},{x:s-a,y:-o},{x:s-a,y:0},{x:s,y:-n/2},{x:s-a,y:-n},{x:s-a,y:-n+o},{x:a,y:-n+o},{x:a,y:-n+o}]:i.has("left")?[{x:a,y:0},{x:a,y:-o},{x:s-a,y:-o},{x:s-a,y:-n+o},{x:a,y:-n+o},{x:a,y:-n},{x:0,y:-n/2}]:i.has("up")?[{x:a,y:-o},{x:a,y:-n+o},{x:0,y:-n+o},{x:s/2,y:-n},{x:s,y:-n+o},{x:s-a,y:-n+o},{x:s-a,y:-o}]:i.has("down")?[{x:s/2,y:0},{x:0,y:-o},{x:a,y:-o},{x:a,y:-n+o},{x:s-a,y:-n+o},{x:s-a,y:-o},{x:s,y:-o}]:[{x:0,y:0}]}),"getArrowPoints")}));function fRt(t,e){return t.intersect(e)}var gRt,yRt=y((()=>{g(fRt,"intersectNode"),gRt=fRt}));function mRt(t,e,r,i){var n=t.x,a=t.y,s=n-i.x,o=a-i.y,l=Math.sqrt(e*e*o*o+r*r*s*s),c=Math.abs(e*r*s/l);i.x<n&&(c=-c);var h=Math.abs(e*r*o/l);return i.y<a&&(h=-h),{x:n+c,y:a+h}}var xRt,bRt=y((()=>{g(mRt,"intersectEllipse"),xRt=mRt}));function kRt(t,e,r){return xRt(t,e,e,r)}var vRt,TRt=y((()=>{bRt(),g(kRt,"intersectCircle"),vRt=kRt}));function wRt(t,e,r,i){var n,a,s,o,l,c,h,u,d,p,f,g,y;if(n=e.y-t.y,s=t.x-e.x,l=e.x*t.y-t.x*e.y,d=n*r.x+s*r.y+l,p=n*i.x+s*i.y+l,!(0!==d&&0!==p&&_Rt(d,p)||(a=i.y-r.y,o=r.x-i.x,c=i.x*r.y-r.x*i.y,h=a*t.x+o*t.y+c,u=a*e.x+o*e.y+c,0!==h&&0!==u&&_Rt(h,u)||(f=n*o-a*s,0===f))))return g=Math.abs(f/2),{x:(y=s*c-o*l)<0?(y-g)/f:(y+g)/f,y:(y=a*l-n*c)<0?(y-g)/f:(y+g)/f}}function _Rt(t,e){return t*e>0}var SRt,CRt=y((()=>{g(wRt,"intersectLine"),g(_Rt,"sameSign"),SRt=wRt}));function ERt(t,e,r){var i=t.x,n=t.y,a=[],s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach((function(t){s=Math.min(s,t.x),o=Math.min(o,t.y)})):(s=Math.min(s,e.x),o=Math.min(o,e.y));for(var l=i-t.width/2-s,c=n-t.height/2-o,h=0;h<e.length;h++){var u=e[h],d=e[h<e.length-1?h+1:0],p=SRt(t,r,{x:l+u.x,y:c+u.y},{x:l+d.x,y:c+d.y});p&&a.push(p)}return a.length?(a.length>1&&a.sort((function(t,e){var i=t.x-r.x,n=t.y-r.y,a=Math.sqrt(i*i+n*n),s=e.x-r.x,o=e.y-r.y,l=Math.sqrt(s*s+o*o);return a<l?-1:a===l?0:1})),a[0]):t}var ARt,$Rt,LRt,RRt,IRt=y((()=>{CRt(),ARt=ERt,g(ERt,"intersectPolygon")})),NRt=y((()=>{$Rt=g(((t,e)=>{var r,i,n=t.x,a=t.y,s=e.x-n,o=e.y-a,l=t.width/2,c=t.height/2;return Math.abs(o)*l>Math.abs(s)*c?(o<0&&(c=-c),r=0===o?0:c*s/o,i=c):(s<0&&(l=-l),r=l,i=0===s?0:l*o/s),{x:n+r,y:a+i}}),"intersectRect"),LRt=$Rt})),DRt=y((()=>{yRt(),TRt(),bRt(),IRt(),NRt(),RRt={node:gRt,circle:vRt,ellipse:xRt,polygon:ARt,rect:LRt}}));function MRt(t,e,r,i){return t.insert("polygon",":first-child").attr("points",i.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+r/2+")")}var ORt,PRt,BRt,FRt,zRt=y((()=>{JLt(),DO(),ns(),QT(),gn(),_L(),ORt=g((async(t,e,r,i)=>{let n,a=na(),s=e.useHtmlLabels||Hi(a.flowchart.htmlLabels);n=r||"node default";let o,l=t.insert("g").attr("class",n).attr("id",e.domId||e.id),c=l.insert("g").attr("class","label").attr("style",e.labelStyle);o=void 0===e.labelText?"":"string"==typeof e.labelText?e.labelText:e.labelText[0];let h,u=c.node();h="markdown"===e.labelType?NO(c,zi(TL(o),a),{useHtmlLabels:s,width:e.width||a.flowchart.wrappingWidth,classes:"markdown-node-label"},a):u.appendChild(await XLt(zi(TL(o),a),e.labelStyle,!1,i));let d=h.getBBox(),p=e.padding/2;if(Hi(a.flowchart.htmlLabels)){let t=h.children[0],e=nh(h),r=t.getElementsByTagName("img");if(r){let t=""===o.replace(/<img[^>]*>/g,"").trim();await Promise.all([...r].map((e=>new Promise((r=>{function i(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=a.fontSize?a.fontSize:window.getComputedStyle(document.body).fontSize,r=5*parseInt(t,10)+"px";e.style.minWidth=r,e.style.maxWidth=r}else e.style.width="100%";r(e)}g(i,"setupImage"),setTimeout((()=>{e.complete&&i()})),e.addEventListener("error",i),e.addEventListener("load",i)})))))}d=t.getBoundingClientRect(),e.attr("width",d.width),e.attr("height",d.height)}return s?c.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"):c.attr("transform","translate(0, "+-d.height/2+")"),e.centerLabel&&c.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),c.insert("rect",":first-child"),{shapeSvg:l,bbox:d,halfPadding:p,label:c}}),"labelHelper"),PRt=g(((t,e)=>{let r=e.node().getBBox();t.width=r.width,t.height=r.height}),"updateNodeBounds"),g(MRt,"insertPolygonShape")})),jRt=y((()=>{zRt(),We(),ns(),DRt(),BRt=g((async(t,e)=>{e.useHtmlLabels||na().flowchart.htmlLabels||(e.centerLabel=!0);let{shapeSvg:r,bbox:i,halfPadding:n}=await ORt(t,e,"node "+e.classes,!0);et.info("Classes = ",e.classes);let a=r.insert("rect",":first-child");return a.attr("rx",e.rx).attr("ry",e.ry).attr("x",-i.width/2-n).attr("y",-i.height/2-n).attr("width",i.width+e.padding).attr("height",i.height+e.padding),PRt(e,a),e.intersect=function(t){return RRt.rect(e,t)},r}),"note"),FRt=BRt}));function URt(t,e,r,i){let n=[],a=g((t=>{n.push(t,0)}),"addBorder"),s=g((t=>{n.push(0,t)}),"skipBorder");e.includes("t")?(et.debug("add top border"),a(r)):s(r),e.includes("r")?(et.debug("add right border"),a(i)):s(i),e.includes("b")?(et.debug("add bottom border"),a(r)):s(r),e.includes("l")?(et.debug("add left border"),a(i)):s(i),t.attr("stroke-dasharray",n.join(" "))}var WRt,qRt,YRt,GRt,HRt,VRt,XRt,KRt,QRt,ZRt,JRt,tIt,eIt,rIt,iIt,nIt,aIt,sIt,oIt,lIt,cIt,hIt,uIt,dIt,pIt,fIt,gIt,yIt,mIt,xIt=y((()=>{QT(),ns(),gn(),We(),pRt(),JLt(),DRt(),jRt(),zRt(),WRt=g((t=>t?" "+t:""),"formatClass"),qRt=g(((t,e)=>`${e||"node default"}${WRt(t.classes)} ${WRt(t.class)}`),"getClassesFromNode"),YRt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,qRt(e,void 0),!0),n=i.width+e.padding+(i.height+e.padding),a=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}];et.info("Question main (Circle)");let s=MRt(r,n,n,a);return s.attr("style",e.style),PRt(e,s),e.intersect=function(t){return et.warn("Intersect called"),RRt.polygon(e,a,t)},r}),"question"),GRt=g(((t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),i=[{x:0,y:14},{x:14,y:0},{x:0,y:-14},{x:-14,y:0}];return r.insert("polygon",":first-child").attr("points",i.map((function(t){return t.x+","+t.y})).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),e.width=28,e.height=28,e.intersect=function(t){return RRt.circle(e,14,t)},r}),"choice"),HRt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,qRt(e,void 0),!0),n=i.height+e.padding,a=n/4,s=i.width+2*a+e.padding,o=[{x:a,y:0},{x:s-a,y:0},{x:s,y:-n/2},{x:s-a,y:-n},{x:a,y:-n},{x:0,y:-n/2}],l=MRt(r,s,n,o);return l.attr("style",e.style),PRt(e,l),e.intersect=function(t){return RRt.polygon(e,o,t)},r}),"hexagon"),VRt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,void 0,!0),n=i.height+2*e.padding,a=n/2,s=i.width+2*a+e.padding,o=uRt(e.directions,i,e),l=MRt(r,s,n,o);return l.attr("style",e.style),PRt(e,l),e.intersect=function(t){return RRt.polygon(e,o,t)},r}),"block_arrow"),XRt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,qRt(e,void 0),!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:-a/2,y:0},{x:n,y:0},{x:n,y:-a},{x:-a/2,y:-a},{x:0,y:-a/2}];return MRt(r,n,a,s).attr("style",e.style),e.width=n+a,e.height=a,e.intersect=function(t){return RRt.polygon(e,s,t)},r}),"rect_left_inv_arrow"),KRt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,qRt(e),!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:-2*a/6,y:0},{x:n-a/6,y:0},{x:n+2*a/6,y:-a},{x:a/6,y:-a}],o=MRt(r,n,a,s);return o.attr("style",e.style),PRt(e,o),e.intersect=function(t){return RRt.polygon(e,s,t)},r}),"lean_right"),QRt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,qRt(e,void 0),!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:2*a/6,y:0},{x:n+a/6,y:0},{x:n-2*a/6,y:-a},{x:-a/6,y:-a}],o=MRt(r,n,a,s);return o.attr("style",e.style),PRt(e,o),e.intersect=function(t){return RRt.polygon(e,s,t)},r}),"lean_left"),ZRt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,qRt(e,void 0),!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:-2*a/6,y:0},{x:n+2*a/6,y:0},{x:n-a/6,y:-a},{x:a/6,y:-a}],o=MRt(r,n,a,s);return o.attr("style",e.style),PRt(e,o),e.intersect=function(t){return RRt.polygon(e,s,t)},r}),"trapezoid"),JRt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,qRt(e,void 0),!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:a/6,y:0},{x:n-a/6,y:0},{x:n+2*a/6,y:-a},{x:-2*a/6,y:-a}],o=MRt(r,n,a,s);return o.attr("style",e.style),PRt(e,o),e.intersect=function(t){return RRt.polygon(e,s,t)},r}),"inv_trapezoid"),tIt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,qRt(e,void 0),!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:0,y:0},{x:n+a/2,y:0},{x:n,y:-a/2},{x:n+a/2,y:-a},{x:0,y:-a}],o=MRt(r,n,a,s);return o.attr("style",e.style),PRt(e,o),e.intersect=function(t){return RRt.polygon(e,s,t)},r}),"rect_right_inv_arrow"),eIt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,qRt(e,void 0),!0),n=i.width+e.padding,a=n/2,s=a/(2.5+n/50),o=i.height+s+e.padding,l="M 0,"+s+" a "+a+","+s+" 0,0,0 "+n+" 0 a "+a+","+s+" 0,0,0 "+-n+" 0 l 0,"+o+" a "+a+","+s+" 0,0,0 "+n+" 0 l 0,"+-o,c=r.attr("label-offset-y",s).insert("path",":first-child").attr("style",e.style).attr("d",l).attr("transform","translate("+-n/2+","+-(o/2+s)+")");return PRt(e,c),e.intersect=function(t){let r=RRt.rect(e,t),i=r.x-e.x;if(0!=a&&(Math.abs(i)<e.width/2||Math.abs(i)==e.width/2&&Math.abs(r.y-e.y)>e.height/2-s)){let n=s*s*(1-i*i/(a*a));0!=n&&(n=Math.sqrt(n)),n=s-n,t.y-e.y>0&&(n=-n),r.y+=n}return r},r}),"cylinder"),rIt=g((async(t,e)=>{let{shapeSvg:r,bbox:i,halfPadding:n}=await ORt(t,e,"node "+e.classes+" "+e.class,!0),a=r.insert("rect",":first-child"),s=e.positioned?e.width:i.width+e.padding,o=e.positioned?e.height:i.height+e.padding,l=e.positioned?-s/2:-i.width/2-n,c=e.positioned?-o/2:-i.height/2-n;if(a.attr("class","basic label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",l).attr("y",c).attr("width",s).attr("height",o),e.props){let t=new Set(Object.keys(e.props));e.props.borders&&(URt(a,e.props.borders,s,o),t.delete("borders")),t.forEach((t=>{et.warn(`Unknown node property ${t}`)}))}return PRt(e,a),e.intersect=function(t){return RRt.rect(e,t)},r}),"rect"),iIt=g((async(t,e)=>{let{shapeSvg:r,bbox:i,halfPadding:n}=await ORt(t,e,"node "+e.classes,!0),a=r.insert("rect",":first-child"),s=e.positioned?e.width:i.width+e.padding,o=e.positioned?e.height:i.height+e.padding,l=e.positioned?-s/2:-i.width/2-n,c=e.positioned?-o/2:-i.height/2-n;if(a.attr("class","basic cluster composite label-container").attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("x",l).attr("y",c).attr("width",s).attr("height",o),e.props){let t=new Set(Object.keys(e.props));e.props.borders&&(URt(a,e.props.borders,s,o),t.delete("borders")),t.forEach((t=>{et.warn(`Unknown node property ${t}`)}))}return PRt(e,a),e.intersect=function(t){return RRt.rect(e,t)},r}),"composite"),nIt=g((async(t,e)=>{let{shapeSvg:r}=await ORt(t,e,"label",!0);et.trace("Classes = ",e.class);let i=r.insert("rect",":first-child");if(i.attr("width",0).attr("height",0),r.attr("class","label edgeLabel"),e.props){let t=new Set(Object.keys(e.props));e.props.borders&&(URt(i,e.props.borders,0,0),t.delete("borders")),t.forEach((t=>{et.warn(`Unknown node property ${t}`)}))}return PRt(e,i),e.intersect=function(t){return RRt.rect(e,t)},r}),"labelRect"),g(URt,"applyNodePropertyBorders"),aIt=g((async(t,e)=>{let r;r=e.classes?"node "+e.classes:"node default";let i=t.insert("g").attr("class",r).attr("id",e.domId||e.id),n=i.insert("rect",":first-child"),a=i.insert("line"),s=i.insert("g").attr("class","label"),o=e.labelText.flat?e.labelText.flat():e.labelText,l="";l="object"==typeof o?o[0]:o,et.info("Label text abc79",l,o,"object"==typeof o);let c=s.node().appendChild(await XLt(l,e.labelStyle,!0,!0)),h={width:0,height:0};if(Hi(na().flowchart.htmlLabels)){let t=c.children[0],e=nh(c);h=t.getBoundingClientRect(),e.attr("width",h.width),e.attr("height",h.height)}et.info("Text 2",o);let u=o.slice(1,o.length),d=c.getBBox(),p=s.node().appendChild(await XLt(u.join?u.join("<br/>"):u,e.labelStyle,!0,!0));if(Hi(na().flowchart.htmlLabels)){let t=p.children[0],e=nh(p);h=t.getBoundingClientRect(),e.attr("width",h.width),e.attr("height",h.height)}let f=e.padding/2;return nh(p).attr("transform","translate( "+(h.width>d.width?0:(d.width-h.width)/2)+", "+(d.height+f+5)+")"),nh(c).attr("transform","translate( "+(h.width<d.width?0:-(d.width-h.width)/2)+", 0)"),h=s.node().getBBox(),s.attr("transform","translate("+-h.width/2+", "+(-h.height/2-f+3)+")"),n.attr("class","outer title-state").attr("x",-h.width/2-f).attr("y",-h.height/2-f).attr("width",h.width+e.padding).attr("height",h.height+e.padding),a.attr("class","divider").attr("x1",-h.width/2-f).attr("x2",h.width/2+f).attr("y1",-h.height/2-f+d.height+f).attr("y2",-h.height/2-f+d.height+f),PRt(e,n),e.intersect=function(t){return RRt.rect(e,t)},i}),"rectWithTitle"),sIt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,qRt(e,void 0),!0),n=i.height+e.padding,a=i.width+n/4+e.padding,s=r.insert("rect",":first-child").attr("style",e.style).attr("rx",n/2).attr("ry",n/2).attr("x",-a/2).attr("y",-n/2).attr("width",a).attr("height",n);return PRt(e,s),e.intersect=function(t){return RRt.rect(e,t)},r}),"stadium"),oIt=g((async(t,e)=>{let{shapeSvg:r,bbox:i,halfPadding:n}=await ORt(t,e,qRt(e,void 0),!0),a=r.insert("circle",":first-child");return a.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+n).attr("width",i.width+e.padding).attr("height",i.height+e.padding),et.info("Circle main"),PRt(e,a),e.intersect=function(t){return et.info("Circle intersect",e,i.width/2+n,t),RRt.circle(e,i.width/2+n,t)},r}),"circle"),lIt=g((async(t,e)=>{let{shapeSvg:r,bbox:i,halfPadding:n}=await ORt(t,e,qRt(e,void 0),!0),a=r.insert("g",":first-child"),s=a.insert("circle"),o=a.insert("circle");return a.attr("class",e.class),s.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+n+5).attr("width",i.width+e.padding+10).attr("height",i.height+e.padding+10),o.attr("style",e.style).attr("rx",e.rx).attr("ry",e.ry).attr("r",i.width/2+n).attr("width",i.width+e.padding).attr("height",i.height+e.padding),et.info("DoubleCircle main"),PRt(e,s),e.intersect=function(t){return et.info("DoubleCircle intersect",e,i.width/2+n+5,t),RRt.circle(e,i.width/2+n+5,t)},r}),"doublecircle"),cIt=g((async(t,e)=>{let{shapeSvg:r,bbox:i}=await ORt(t,e,qRt(e,void 0),!0),n=i.width+e.padding,a=i.height+e.padding,s=[{x:0,y:0},{x:n,y:0},{x:n,y:-a},{x:0,y:-a},{x:0,y:0},{x:-8,y:0},{x:n+8,y:0},{x:n+8,y:-a},{x:-8,y:-a},{x:-8,y:0}],o=MRt(r,n,a,s);return o.attr("style",e.style),PRt(e,o),e.intersect=function(t){return RRt.polygon(e,s,t)},r}),"subroutine"),hIt=g(((t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),i=r.insert("circle",":first-child");return i.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),PRt(e,i),e.intersect=function(t){return RRt.circle(e,7,t)},r}),"start"),uIt=g(((t,e,r)=>{let i=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),n=70,a=10;"LR"===r&&(n=10,a=70);let s=i.append("rect").attr("x",-1*n/2).attr("y",-1*a/2).attr("width",n).attr("height",a).attr("class","fork-join");return PRt(e,s),e.height=e.height+e.padding/2,e.width=e.width+e.padding/2,e.intersect=function(t){return RRt.rect(e,t)},i}),"forkJoin"),dIt=g(((t,e)=>{let r=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),i=r.insert("circle",":first-child"),n=r.insert("circle",":first-child");return n.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),i.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),PRt(e,n),e.intersect=function(t){return RRt.circle(e,7,t)},r}),"end"),pIt=g((async(t,e)=>{let r,i=e.padding/2;r=e.classes?"node "+e.classes:"node default";let n=t.insert("g").attr("class",r).attr("id",e.domId||e.id),a=n.insert("rect",":first-child"),s=n.insert("line"),o=n.insert("line"),l=0,c=4,h=n.insert("g").attr("class","label"),u=0,d=e.classData.annotations?.[0],p=e.classData.annotations[0]?"«"+e.classData.annotations[0]+"»":"",f=h.node().appendChild(await XLt(p,e.labelStyle,!0,!0)),g=f.getBBox();if(Hi(na().flowchart.htmlLabels)){let t=f.children[0],e=nh(f);g=t.getBoundingClientRect(),e.attr("width",g.width),e.attr("height",g.height)}e.classData.annotations[0]&&(c+=g.height+4,l+=g.width);let y=e.classData.label;void 0!==e.classData.type&&""!==e.classData.type&&(na().flowchart.htmlLabels?y+="&lt;"+e.classData.type+"&gt;":y+="<"+e.classData.type+">");let m=h.node().appendChild(await XLt(y,e.labelStyle,!0,!0));nh(m).attr("class","classTitle");let x=m.getBBox();if(Hi(na().flowchart.htmlLabels)){let t=m.children[0],e=nh(m);x=t.getBoundingClientRect(),e.attr("width",x.width),e.attr("height",x.height)}c+=x.height+4,x.width>l&&(l=x.width);let b=[];e.classData.members.forEach((async t=>{let r=t.getDisplayDetails(),i=r.displayText;na().flowchart.htmlLabels&&(i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let n=h.node().appendChild(await XLt(i,r.cssStyle?r.cssStyle:e.labelStyle,!0,!0)),a=n.getBBox();if(Hi(na().flowchart.htmlLabels)){let t=n.children[0],e=nh(n);a=t.getBoundingClientRect(),e.attr("width",a.width),e.attr("height",a.height)}a.width>l&&(l=a.width),c+=a.height+4,b.push(n)})),c+=8;let k=[];if(e.classData.methods.forEach((async t=>{let r=t.getDisplayDetails(),i=r.displayText;na().flowchart.htmlLabels&&(i=i.replace(/</g,"&lt;").replace(/>/g,"&gt;"));let n=h.node().appendChild(await XLt(i,r.cssStyle?r.cssStyle:e.labelStyle,!0,!0)),a=n.getBBox();if(Hi(na().flowchart.htmlLabels)){let t=n.children[0],e=nh(n);a=t.getBoundingClientRect(),e.attr("width",a.width),e.attr("height",a.height)}a.width>l&&(l=a.width),c+=a.height+4,k.push(n)})),c+=8,d){let t=(l-g.width)/2;nh(f).attr("transform","translate( "+(-1*l/2+t)+", "+-1*c/2+")"),u=g.height+4}let v=(l-x.width)/2;return nh(m).attr("transform","translate( "+(-1*l/2+v)+", "+(-1*c/2+u)+")"),u+=x.height+4,s.attr("class","divider").attr("x1",-l/2-i).attr("x2",l/2+i).attr("y1",-c/2-i+8+u).attr("y2",-c/2-i+8+u),u+=8,b.forEach((t=>{nh(t).attr("transform","translate( "+-l/2+", "+(-1*c/2+u+4)+")");let e=t?.getBBox();u+=(e?.height??0)+4})),u+=8,o.attr("class","divider").attr("x1",-l/2-i).attr("x2",l/2+i).attr("y1",-c/2-i+8+u).attr("y2",-c/2-i+8+u),u+=8,k.forEach((t=>{nh(t).attr("transform","translate( "+-l/2+", "+(-1*c/2+u)+")");let e=t?.getBBox();u+=(e?.height??0)+4})),a.attr("style",e.style).attr("class","outer title-state").attr("x",-l/2-i).attr("y",-c/2-i).attr("width",l+e.padding).attr("height",c+e.padding),PRt(e,a),e.intersect=function(t){return RRt.rect(e,t)},n}),"class_box"),fIt={rhombus:YRt,composite:iIt,question:YRt,rect:rIt,labelRect:nIt,rectWithTitle:aIt,choice:GRt,circle:oIt,doublecircle:lIt,stadium:sIt,hexagon:HRt,block_arrow:VRt,rect_left_inv_arrow:XRt,lean_right:KRt,lean_left:QRt,trapezoid:ZRt,inv_trapezoid:JRt,rect_right_inv_arrow:tIt,cylinder:eIt,start:hIt,end:dIt,note:FRt,subroutine:cIt,fork:uIt,join:uIt,class_box:pIt},gIt={},yIt=g((async(t,e,r)=>{let i,n;if(e.link){let a;"sandbox"===na().securityLevel?a="_top":e.linkTarget&&(a=e.linkTarget||"_blank"),i=t.insert("svg:a").attr("xlink:href",e.link).attr("target",a),n=await fIt[e.shape](i,e,r)}else n=await fIt[e.shape](t,e,r),i=n;return e.tooltip&&n.attr("title",e.tooltip),e.class&&n.attr("class","node default "+e.class),gIt[e.id]=i,e.haveCallback&&gIt[e.id].attr("class",gIt[e.id].attr("class")+" clickable"),i}),"insertNode"),mIt=g((t=>{let e=gIt[t.id];et.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");let r=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+r-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),r}),"positionNode")}));function bIt(t,e,r=!1){let i=t,n="default";(i?.classes?.length||0)>0&&(n=(i?.classes??[]).join(" ")),n+=" flowchart-label";let a,s=0,o="";switch(i.type){case"round":s=5,o="rect";break;case"composite":s=0,o="composite",a=0;break;case"square":case"group":default:o="rect";break;case"diamond":o="question";break;case"hexagon":o="hexagon";break;case"block_arrow":o="block_arrow";break;case"odd":case"rect_left_inv_arrow":o="rect_left_inv_arrow";break;case"lean_right":o="lean_right";break;case"lean_left":o="lean_left";break;case"trapezoid":o="trapezoid";break;case"inv_trapezoid":o="inv_trapezoid";break;case"circle":o="circle";break;case"ellipse":o="ellipse";break;case"stadium":o="stadium";break;case"subroutine":o="subroutine";break;case"cylinder":o="cylinder";break;case"doublecircle":o="doublecircle"}let l=j$(i?.styles??[]),c=i.label,h=i.size??{width:0,height:0,x:0,y:0};return{labelStyle:l.labelStyle,shape:o,labelText:c,rx:s,ry:s,class:n,style:l.style,id:i.id,directions:i.directions,width:h.width,height:h.height,x:h.x,y:h.y,positioned:r,intersect:void 0,type:i.type,padding:a??Re()?.block?.padding??0}}async function kIt(t,e,r){let i=bIt(e,0,!1);if("group"===i.type)return;let n=Re(),a=await yIt(t,i,{config:n}),s=a.node().getBBox(),o=r.getBlock(i.id);o.size={width:s.width,height:s.height,x:0,y:0,node:a},r.setBlock(o),a.remove()}async function vIt(t,e,r){let i=bIt(e,0,!0);if("space"!==r.getBlock(i.id).type){let r=Re();await yIt(t,i,{config:r}),e.intersect=i?.intersect,mIt(i)}}async function TIt(t,e,r,i){for(let n of e)await i(t,n,r),n.children&&await TIt(t,n.children,r,i)}async function wIt(t,e,r){await TIt(t,e,r,kIt)}async function _It(t,e,r){await TIt(t,e,r,vIt)}async function SIt(t,e,r,i,n){let a=new l0({multigraph:!0,compound:!0});a.setGraph({rankdir:"TB",nodesep:10,ranksep:10,marginx:8,marginy:8});for(let t of r)t.size&&a.setNode(t.id,{width:t.size.width,height:t.size.height,intersect:t.intersect});for(let r of e)if(r.start&&r.end){let e=i.getBlock(r.start),s=i.getBlock(r.end);if(e?.size&&s?.size){let i=e.size,o=s.size,l=[{x:i.x,y:i.y},{x:i.x+(o.x-i.x)/2,y:i.y+(o.y-i.y)/2},{x:o.x,y:o.y}];cRt(t,{v:r.start,w:r.end,name:r.id},{...r,arrowTypeEnd:r.arrowTypeEnd,arrowTypeStart:r.arrowTypeStart,points:l,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"},void 0,"block",a,n),r.label&&(await nRt(t,{...r,label:r.label,labelStyle:"stroke: #333; stroke-width: 1.5px;fill:none;",arrowTypeEnd:r.arrowTypeEnd,arrowTypeStart:r.arrowTypeStart,points:l,classes:"edge-thickness-normal edge-pattern-solid flowchart-link LS-a1 LE-b1"}),aRt({...r,x:l[1].x,y:l[1].y},{originalPath:l}))}}}var CIt,EIt,AIt,$It=y((()=>{h0(),Ar(),dRt(),xIt(),_L(),g(bIt,"getNodeFromBlock"),g(kIt,"calculateBlockSize"),g(vIt,"insertBlockPositioned"),g(TIt,"performOperations"),g(wIt,"calculateBlockSizes"),g(_It,"insertBlocks"),g(SIt,"insertEdges")})),LIt=y((()=>{QT(),Ar(),PLt(),We(),Un(),YLt(),$It(),CIt=g((function(t,e){return e.db.getClasses()}),"getClasses"),EIt=g((async function(t,e,r,i){let n,{securityLevel:a,block:s}=Re(),o=i.db;"sandbox"===a&&(n=nh("#i"+e));let l=nh("sandbox"===a?n.nodes()[0].contentDocument.body:"body"),c="sandbox"===a?l.select(`[id="${e}"]`):nh(`[id="${e}"]`);DLt(c,["point","circle","cross"],i.type,e);let h=o.getBlocks(),u=o.getBlocksFlat(),d=o.getEdges(),p=c.insert("g").attr("class","block");await wIt(p,h,o);let f=ULt(o);if(await _It(p,h,o),await SIt(p,d,u,o,e),f){let t=f,e=Math.max(1,Math.round(t.width/t.height*.125)),r=t.height+e+10,i=t.width+10,{useMaxWidth:n}=s;Rn(c,r,i,!!n),et.debug("Here Bounds",f,t),c.attr("viewBox",`${t.x-5} ${t.y-5} ${t.width+10} ${t.height+10}`)}}),"draw"),AIt={draw:EIt,getClasses:CIt}})),RIt={};x(RIt,{diagram:()=>IIt});var IIt,NIt,DIt=y((()=>{U$t(),MLt(),OLt(),LIt(),IIt={parser:z$t,db:bLt,renderer:AIt,styles:TLt}})),MIt=y((()=>{Cr(),Ar(),_L(),mP(),is(),NIt=class{constructor(){this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.setAccTitle=Kn,this.getAccTitle=Qn,this.setDiagramTitle=ta,this.getDiagramTitle=ea,this.getAccDescription=Jn,this.setAccDescription=Zn}static{g(this,"TreeMapDB")}getNodes(){return this.nodes}getConfig(){let t=me,e=Re();return G$({...t.treemap,...e.treemap??{}})}addNode(t,e){this.nodes.push(t),this.levels.set(t,e),0===e&&(this.outerNodes.push(t),this.root??=t)}getRoot(){return{name:"",children:this.outerNodes}}addClass(t,e){let r=this.classes.get(t)??{id:t,styles:[],textStyles:[]},i=e.replace(/\\,/g,"§§§").replace(/,/g,";").replace(/§§§/g,",").split(";");i&&i.forEach((t=>{hP(t)&&(r?.textStyles?r.textStyles.push(t):r.textStyles=[t]),r?.styles?r.styles.push(t):r.styles=[t]})),this.classes.set(t,r)}getClasses(){return this.classes}getStylesForClass(t){return this.classes.get(t)?.styles??[]}clear(){Xn(),this.nodes=[],this.levels=new Map,this.outerNodes=[],this.classes=new Map,this.root=void 0}}}));function OIt(t){if(!t.length)return[];let e=[],r=[];return t.forEach((t=>{let i={name:t.name,children:"Leaf"===t.type?void 0:[]};for(i.classSelector=t?.classSelector,t?.cssCompiledStyles&&(i.cssCompiledStyles=[t.cssCompiledStyles]),"Leaf"===t.type&&void 0!==t.value&&(i.value=t.value);r.length>0&&r[r.length-1].level>=t.level;)r.pop();if(0===r.length)e.push(i);else{let t=r[r.length-1].node;t.children?t.children.push(i):t.children=[i]}"Leaf"!==t.type&&r.push({node:i,level:t.level})})),e}var PIt,BIt,FIt,zIt,jIt,UIt,WIt,qIt,YIt,GIt,HIt=y((()=>{g(OIt,"buildHierarchy")})),VIt=y((()=>{jft(),We(),Yft(),HIt(),MIt(),PIt=g(((t,e)=>{Uft(t,e);let r=[];for(let r of t.TreemapRows??[])"ClassDefStatement"===r.$type&&e.addClass(r.className??"",r.styleText??"");for(let i of t.TreemapRows??[]){let t=i.item;if(!t)continue;let n=i.indent?parseInt(i.indent):0,a=BIt(t),s=t.classSelector?e.getStylesForClass(t.classSelector):[],o=s.length>0?s.join(";"):void 0,l={level:n,name:a,type:t.$type,value:t.value,classSelector:t.classSelector,cssCompiledStyles:o};r.push(l)}let i=OIt(r),n=g(((t,r)=>{for(let i of t)e.addNode(i,r),i.children&&i.children.length>0&&n(i.children,r+1)}),"addNodesRecursively");n(i,0)}),"populate"),BIt=g((t=>t.name?String(t.name):""),"getItemName"),FIt={parser:{yy:void 0},parse:g((async t=>{try{let e=await Pft("treemap",t);et.debug("Treemap AST:",e);let r=FIt.parser?.yy;if(!(r instanceof NIt))throw new Error("parser.parser?.yy was not a TreemapDB. This is due to a bug within Mermaid, please report this issue at https://github.com/mermaid-js/mermaid/issues.");PIt(e,r)}catch(t){throw et.error("Error parsing treemap:",t),t}}),"parse")}})),XIt=y((()=>{bxt(),p5(),Un(),QT(),mP(),Ar(),We(),zIt=10,jIt=g(((t,e,r,i)=>{let n=i.db,a=n.getConfig(),s=a.padding??10,o=n.getDiagramTitle(),l=n.getRoot(),{themeVariables:c}=Re();if(!l)return;let h,u=o?30:0,d=dxt(e),p=a.nodeWidth?a.nodeWidth*zIt:960,f=a.nodeHeight?a.nodeHeight*zIt:500,y=p,m=f+u;d.attr("viewBox",`0 0 ${y} ${m}`),Rn(d,m,y,a.useMaxWidth);try{let t=a.valueFormat||",";if("$0,0"===t)h=g((t=>"$"+Vg(",")(t)),"valueFormat");else if(t.startsWith("$")&&t.includes(",")){let e=/\.\d+/.exec(t),r=e?e[0]:"";h=g((t=>"$"+Vg(","+r)(t)),"valueFormat")}else if(t.startsWith("$")){let e=t.substring(1);h=g((t=>"$"+Vg(e||"")(t)),"valueFormat")}else h=Vg(t)}catch(t){et.error("Error creating format function:",t),h=Vg(",")}let x=cm().range(["transparent",c.cScale0,c.cScale1,c.cScale2,c.cScale3,c.cScale4,c.cScale5,c.cScale6,c.cScale7,c.cScale8,c.cScale9,c.cScale10,c.cScale11]),b=cm().range(["transparent",c.cScalePeer0,c.cScalePeer1,c.cScalePeer2,c.cScalePeer3,c.cScalePeer4,c.cScalePeer5,c.cScalePeer6,c.cScalePeer7,c.cScalePeer8,c.cScalePeer9,c.cScalePeer10,c.cScalePeer11]),k=cm().range([c.cScaleLabel0,c.cScaleLabel1,c.cScaleLabel2,c.cScaleLabel3,c.cScaleLabel4,c.cScaleLabel5,c.cScaleLabel6,c.cScaleLabel7,c.cScaleLabel8,c.cScaleLabel9,c.cScaleLabel10,c.cScaleLabel11]);o&&d.append("text").attr("x",y/2).attr("y",u/2).attr("class","treemapTitle").attr("text-anchor","middle").attr("dominant-baseline","middle").text(o);let v=d.append("g").attr("transform",`translate(0, ${u})`).attr("class","treemapContainer"),T=Ny(l).sum((t=>t.value??0)).sort(((t,e)=>(e.value??0)-(t.value??0))),w=rm().size([p,f]).paddingTop((t=>t.children&&t.children.length>0?35:0)).paddingInner(s).paddingLeft((t=>t.children&&t.children.length>0?zIt:0)).paddingRight((t=>t.children&&t.children.length>0?zIt:0)).paddingBottom((t=>t.children&&t.children.length>0?zIt:0)).round(!0)(T),_=w.descendants().filter((t=>t.children&&t.children.length>0)),S=v.selectAll(".treemapSection").data(_).enter().append("g").attr("class","treemapSection").attr("transform",(t=>`translate(${t.x0},${t.y0})`));S.append("rect").attr("width",(t=>t.x1-t.x0)).attr("height",25).attr("class","treemapSectionHeader").attr("fill","none").attr("fill-opacity",.6).attr("stroke-width",.6).attr("style",(t=>0===t.depth?"display: none;":"")),S.append("clipPath").attr("id",((t,r)=>`clip-section-${e}-${r}`)).append("rect").attr("width",(t=>Math.max(0,t.x1-t.x0-12))).attr("height",25),S.append("rect").attr("width",(t=>t.x1-t.x0)).attr("height",(t=>t.y1-t.y0)).attr("class",((t,e)=>`treemapSection section${e}`)).attr("fill",(t=>x(t.data.name))).attr("fill-opacity",.6).attr("stroke",(t=>b(t.data.name))).attr("stroke-width",2).attr("stroke-opacity",.4).attr("style",(t=>{if(0===t.depth)return"display: none;";let e=uP({cssCompiledStyles:t.data.cssCompiledStyles});return e.nodeStyles+";"+e.borderStyles.join(";")})),S.append("text").attr("class","treemapSectionLabel").attr("x",6).attr("y",12.5).attr("dominant-baseline","middle").text((t=>0===t.depth?"":t.data.name)).attr("font-weight","bold").attr("style",(t=>{if(0===t.depth)return"display: none;";return"dominant-baseline: middle; font-size: 12px; fill:"+k(t.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+uP({cssCompiledStyles:t.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")})).each((function(t){if(0===t.depth)return;let e=nh(this),r=t.data.name;e.text(r);let i,n=t.x1-t.x0;i=!1!==a.showValues&&t.value?n-10-30-10-6:n-6-6;let s=Math.max(15,i),o=e.node();if(o.getComputedTextLength()>s){let t=r;for(;t.length>0;){if(t=r.substring(0,t.length-1),0===t.length){e.text("..."),o.getComputedTextLength()>s&&e.text("");break}if(e.text(t+"..."),o.getComputedTextLength()<=s)break}}})),!1!==a.showValues&&S.append("text").attr("class","treemapSectionValue").attr("x",(t=>t.x1-t.x0-10)).attr("y",12.5).attr("text-anchor","end").attr("dominant-baseline","middle").text((t=>t.value?h(t.value):"")).attr("font-style","italic").attr("style",(t=>{if(0===t.depth)return"display: none;";return"text-anchor: end; dominant-baseline: middle; font-size: 10px; fill:"+k(t.data.name)+"; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"+uP({cssCompiledStyles:t.data.cssCompiledStyles}).labelStyles.replace("color:","fill:")}));let C=w.leaves(),E=v.selectAll(".treemapLeafGroup").data(C).enter().append("g").attr("class",((t,e)=>`treemapNode treemapLeafGroup leaf${e}${t.data.classSelector?` ${t.data.classSelector}`:""}x`)).attr("transform",(t=>`translate(${t.x0},${t.y0})`));E.append("rect").attr("width",(t=>t.x1-t.x0)).attr("height",(t=>t.y1-t.y0)).attr("class","treemapLeaf").attr("fill",(t=>t.parent?x(t.parent.data.name):x(t.data.name))).attr("style",(t=>uP({cssCompiledStyles:t.data.cssCompiledStyles}).nodeStyles)).attr("fill-opacity",.3).attr("stroke",(t=>t.parent?x(t.parent.data.name):x(t.data.name))).attr("stroke-width",3),E.append("clipPath").attr("id",((t,r)=>`clip-${e}-${r}`)).append("rect").attr("width",(t=>Math.max(0,t.x1-t.x0-4))).attr("height",(t=>Math.max(0,t.y1-t.y0-4))),E.append("text").attr("class","treemapLabel").attr("x",(t=>(t.x1-t.x0)/2)).attr("y",(t=>(t.y1-t.y0)/2)).attr("style",(t=>"text-anchor: middle; dominant-baseline: middle; font-size: 38px;fill:"+k(t.data.name)+";"+uP({cssCompiledStyles:t.data.cssCompiledStyles}).labelStyles.replace("color:","fill:"))).attr("clip-path",((t,r)=>`url(#clip-${e}-${r})`)).text((t=>t.data.name)).each((function(t){let e=nh(this),r=t.x1-t.x0,i=t.y1-t.y0,n=e.node(),a=r-8,s=i-8;if(a<10||s<10)return void e.style("display","none");let o=parseInt(e.style("font-size"),10);for(;n.getComputedTextLength()>a&&o>8;)o--,e.style("font-size",`${o}px`);let l=Math.max(6,Math.min(28,Math.round(.6*o))),c=o+2+l;for(;c>s&&o>8&&(o--,l=Math.max(6,Math.min(28,Math.round(.6*o))),!(l<6&&8===o));)e.style("font-size",`${o}px`),c=o+2+l;e.style("font-size",`${o}px`),(n.getComputedTextLength()>a||o<8||s<o)&&e.style("display","none")})),!1!==a.showValues&&E.append("text").attr("class","treemapValue").attr("x",(t=>(t.x1-t.x0)/2)).attr("y",(function(t){return(t.y1-t.y0)/2})).attr("style",(t=>"text-anchor: middle; dominant-baseline: hanging; font-size: 28px;fill:"+k(t.data.name)+";"+uP({cssCompiledStyles:t.data.cssCompiledStyles}).labelStyles.replace("color:","fill:"))).attr("clip-path",((t,r)=>`url(#clip-${e}-${r})`)).text((t=>t.value?h(t.value):"")).each((function(t){let e=nh(this),r=this.parentNode;if(!r)return void e.style("display","none");let i=nh(r).select(".treemapLabel");if(i.empty()||"none"===i.style("display"))return void e.style("display","none");let n=parseFloat(i.style("font-size")),a=Math.max(6,Math.min(28,Math.round(.6*n)));e.style("font-size",`${a}px`);let s=(t.y1-t.y0)/2+n/2+2;e.attr("y",s);let o=t.x1-t.x0,l=t.y1-t.y0-4,c=o-8;e.node().getComputedTextLength()>c||s+a>l||a<6?e.style("display","none"):e.style("display",null)}));let A=a.diagramPadding??8;Q4(d,A,"flowchart",a?.useMaxWidth||!1)}),"draw"),UIt=g((function(t,e){return e.db.getClasses()}),"getClasses"),WIt={draw:jIt,getClasses:UIt}})),KIt=y((()=>{_L(),qIt={sectionStrokeColor:"black",sectionStrokeWidth:"1",sectionFillColor:"#efefef",leafStrokeColor:"black",leafStrokeWidth:"1",leafFillColor:"#efefef",labelColor:"black",labelFontSize:"12px",valueFontSize:"10px",valueColor:"black",titleColor:"black",titleFontSize:"14px"},YIt=g((({treemap:t}={})=>{let e=G$(qIt,t);return`\n  .treemapNode.section {\n    stroke: ${e.sectionStrokeColor};\n    stroke-width: ${e.sectionStrokeWidth};\n    fill: ${e.sectionFillColor};\n  }\n  .treemapNode.leaf {\n    stroke: ${e.leafStrokeColor};\n    stroke-width: ${e.leafStrokeWidth};\n    fill: ${e.leafFillColor};\n  }\n  .treemapLabel {\n    fill: ${e.labelColor};\n    font-size: ${e.labelFontSize};\n  }\n  .treemapValue {\n    fill: ${e.valueColor};\n    font-size: ${e.valueFontSize};\n  }\n  .treemapTitle {\n    fill: ${e.titleColor};\n    font-size: ${e.titleFontSize};\n  }\n  `}),"getStyles"),GIt=YIt})),QIt={};x(QIt,{diagram:()=>ZIt});var ZIt,JIt=y((()=>{MIt(),VIt(),XIt(),KIt(),ZIt={parser:FIt,get db(){return new NIt},renderer:WIt,styles:GIt}})),tNt={};x(tNt,{default:()=>SOt}),yn(),Pn(),zn();var eNt=g((t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t)),"detector"),rNt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(QL(),XL)));return{id:"c4",diagram:t}}),"loader"),iNt={id:"c4",detector:eNt,loader:rNt},nNt="flowchart",aNt=g(((t,e)=>"dagre-wrapper"!==e?.flowchart?.defaultRenderer&&"elk"!==e?.flowchart?.defaultRenderer&&/^\s*graph/.test(t)),"detector"),sNt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(_5(),b5)));return{id:nNt,diagram:t}}),"loader"),oNt={id:nNt,detector:aNt,loader:sNt},lNt="flowchart-v2",cNt=g(((t,e)=>"dagre-d3"!==e?.flowchart?.defaultRenderer&&("elk"===e?.flowchart?.defaultRenderer&&(e.layout="elk"),!(!/^\s*graph/.test(t)||"dagre-wrapper"!==e?.flowchart?.defaultRenderer)||/^\s*flowchart/.test(t))),"detector"),hNt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(_5(),b5)));return{id:lNt,diagram:t}}),"loader"),uNt={id:lNt,detector:cNt,loader:hNt},dNt=g((t=>/^\s*erDiagram/.test(t)),"detector"),pNt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(O5(),D5)));return{id:"er",diagram:t}}),"loader"),fNt={id:"er",detector:dNt,loader:pNt},gNt="gitGraph",yNt=g((t=>/^\s*gitGraph/.test(t)),"detector"),mNt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(myt(),pyt)));return{id:gNt,diagram:t}}),"loader"),xNt={id:gNt,detector:yNt,loader:mNt},bNt="gantt",kNt=g((t=>/^\s*gantt/.test(t)),"detector"),vNt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(gxt(),axt)));return{id:bNt,diagram:t}}),"loader"),TNt={id:bNt,detector:kNt,loader:vNt},wNt="info",_Nt=g((t=>/^\s*info/.test(t)),"detector"),SNt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(Uxt(),vxt)));return{id:wNt,diagram:t}}),"loader"),CNt={id:wNt,detector:_Nt,loader:SNt},ENt=g((t=>/^\s*pie/.test(t)),"detector"),ANt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(Jxt(),Hxt)));return{id:"pie",diagram:t}}),"loader"),$Nt={id:"pie",detector:ENt,loader:ANt},LNt="quadrantChart",RNt=g((t=>/^\s*quadrantChart/.test(t)),"detector"),INt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(Dbt(),Lbt)));return{id:LNt,diagram:t}}),"loader"),NNt={id:LNt,detector:RNt,loader:INt},DNt="xychart",MNt=g((t=>/^\s*xychart(-beta)?/.test(t)),"detector"),ONt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(Qkt(),qkt)));return{id:DNt,diagram:t}}),"loader"),PNt={id:DNt,detector:MNt,loader:ONt},BNt="requirement",FNt=g((t=>/^\s*requirement(Diagram)?/.test(t)),"detector"),zNt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(eTt(),nvt)));return{id:BNt,diagram:t}}),"loader"),jNt={id:BNt,detector:FNt,loader:zNt},UNt="sequence",WNt=g((t=>/^\s*sequenceDiagram/.test(t)),"detector"),qNt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(HTt(),RTt)));return{id:UNt,diagram:t}}),"loader"),YNt={id:UNt,detector:WNt,loader:qNt},GNt="class",HNt=g(((t,e)=>"dagre-wrapper"!==e?.class?.defaultRenderer&&/^\s*classDiagram/.test(t)),"detector"),VNt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(ewt(),JTt)));return{id:GNt,diagram:t}}),"loader"),XNt={id:GNt,detector:HNt,loader:VNt},KNt="classDiagram",QNt=g(((t,e)=>!(!/^\s*classDiagram/.test(t)||"dagre-wrapper"!==e?.class?.defaultRenderer)||/^\s*classDiagram-v2/.test(t)),"detector"),ZNt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(Fwt(),rwt)));return{id:KNt,diagram:t}}),"loader"),JNt={id:KNt,detector:QNt,loader:ZNt},tDt="state",eDt=g(((t,e)=>"dagre-wrapper"!==e?.state?.defaultRenderer&&/^\s*stateDiagram/.test(t)),"detector"),rDt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(P_t(),M_t)));return{id:tDt,diagram:t}}),"loader"),iDt={id:tDt,detector:eDt,loader:rDt},nDt="stateDiagram",aDt=g(((t,e)=>!!(/^\s*stateDiagram-v2/.test(t)||/^\s*stateDiagram/.test(t)&&"dagre-wrapper"===e?.state?.defaultRenderer)),"detector"),sDt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(ySt(),B_t)));return{id:nDt,diagram:t}}),"loader"),oDt={id:nDt,detector:aDt,loader:sDt},lDt="journey",cDt=g((t=>/^\s*journey/.test(t)),"detector"),hDt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(BSt(),DSt)));return{id:lDt,diagram:t}}),"loader"),uDt={id:lDt,detector:cDt,loader:hDt};We(),bxt(),Un();var dDt={draw:g(((t,e,r)=>{et.debug("rendering svg for syntax error\n");let i=dxt(e),n=i.append("g");i.attr("viewBox","0 0 2412 512"),Rn(i,100,512,!0),n.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),n.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),n.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),n.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),n.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),n.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),n.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),n.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)}),"draw")},pDt=dDt,fDt={db:{},renderer:dDt,parser:{parse:g((()=>{}),"parse")}},gDt="timeline",yDt=g((t=>/^\s*timeline/.test(t)),"detector"),mDt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(iEt(),RCt)));return{id:gDt,diagram:t}}),"loader"),xDt={id:gDt,detector:yDt,loader:mDt},bDt="kanban",kDt=g((t=>/^\s*kanban/.test(t)),"detector"),vDt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(_Et(),lEt)));return{id:bDt,diagram:t}}),"loader"),TDt={id:bDt,detector:kDt,loader:vDt},wDt="sankey",_Dt=g((t=>/^\s*sankey(-beta)?/.test(t)),"detector"),SDt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(QAt(),BAt)));return{id:wDt,diagram:t}}),"loader"),CDt={id:wDt,detector:_Dt,loader:SDt},EDt="packet",ADt=g((t=>/^\s*packet(-beta)?/.test(t)),"detector"),$Dt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(k$t(),r$t)));return{id:EDt,diagram:t}}),"loader"),LDt={id:EDt,detector:ADt,loader:$Dt},RDt="radar",IDt=g((t=>/^\s*radar-beta/.test(t)),"detector"),NDt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(j$t(),P$t)));return{id:RDt,diagram:t}}),"loader"),DDt={id:RDt,detector:IDt,loader:NDt},MDt="block",ODt=g((t=>/^\s*block(-beta)?/.test(t)),"detector"),PDt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(DIt(),RIt)));return{id:MDt,diagram:t}}),"loader"),BDt={id:MDt,detector:ODt,loader:PDt};zn(),ns();var FDt="treemap",zDt=g((t=>/^\s*treemap/.test(t)),"detector"),jDt=g((async()=>{let{diagram:t}=await Promise.resolve().then((()=>(JIt(),QIt)));return{id:FDt,diagram:t}}),"loader"),UDt={id:FDt,detector:zDt,loader:jDt},WDt=!1,qDt=g((()=>{WDt||(WDt=!0,ua("error",fDt,(t=>"error"===t.toLowerCase().trim())),ua("---",{db:{clear:g((()=>{}),"clear")},styles:{},renderer:{draw:g((()=>{}),"draw")},parser:{parse:g((()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}),"parse")},init:g((()=>null),"init")},(t=>t.toLowerCase().trimStart().startsWith("---"))),_n(iNt,TDt,JNt,XNt,fNt,TNt,CNt,$Nt,jNt,YNt,uNt,oNt,xDt,xNt,oDt,iDt,uDt,NNt,CDt,LDt,PNt,BDt,DDt,UDt))}),"addDiagrams");We(),zn(),ns();var YDt=g((async()=>{et.debug("Loading registered diagrams");let t=(await Promise.allSettled(Object.entries(Tn).map((async([t,{detector:e,loader:r}])=>{if(r)try{da(t)}catch{try{let{diagram:t,id:i}=await r();ua(i,t,e)}catch(e){throw et.error(`Failed to load external diagram with key ${t}. Removing from detectors.`),delete Tn[t],e}}})))).filter((t=>"rejected"===t.status));if(t.length>0){et.error(`Failed to load ${t.length} external diagrams`);for(let e of t)et.error(e);throw new Error(`Failed to load ${t.length} external diagrams`)}}),"loadRegisteredDiagrams");We(),QT();var GDt="comm",HDt="rule",VDt="decl",XDt=Math.abs,KDt=String.fromCharCode;function QDt(t){return t.trim()}function ZDt(t,e,r){return t.replace(e,r)}function JDt(t,e,r){return t.indexOf(e,r)}function tMt(t,e){return 0|t.charCodeAt(e)}function eMt(t,e,r){return t.slice(e,r)}function rMt(t){return t.length}function iMt(t){return t.length}function nMt(t,e){return e.push(t),t}g(QDt,"trim"),g(ZDt,"replace"),g(JDt,"indexof"),g(tMt,"charat"),g(eMt,"substr"),g(rMt,"strlen"),g(iMt,"sizeof"),g(nMt,"append");var aMt=1,sMt=1,oMt=0,lMt=0,cMt=0,hMt="";function uMt(t,e,r,i,n,a,s,o){return{value:t,root:e,parent:r,type:i,props:n,children:a,line:aMt,column:sMt,length:s,return:"",siblings:o}}function dMt(){return cMt}function pMt(){return cMt=lMt>0?tMt(hMt,--lMt):0,sMt--,10===cMt&&(sMt=1,aMt--),cMt}function fMt(){return cMt=lMt<oMt?tMt(hMt,lMt++):0,sMt++,10===cMt&&(sMt=1,aMt++),cMt}function gMt(){return tMt(hMt,lMt)}function yMt(){return lMt}function mMt(t,e){return eMt(hMt,t,e)}function xMt(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bMt(t){return aMt=sMt=1,oMt=rMt(hMt=t),lMt=0,[]}function kMt(t){return hMt="",t}function vMt(t){return QDt(mMt(lMt-1,_Mt(91===t?t+2:40===t?t+1:t)))}function TMt(t){for(;(cMt=gMt())&&cMt<33;)fMt();return xMt(t)>2||xMt(cMt)>3?"":" "}function wMt(t,e){for(;--e&&fMt()&&!(cMt<48||cMt>102||cMt>57&&cMt<65||cMt>70&&cMt<97););return mMt(t,yMt()+(e<6&&32==gMt()&&32==fMt()))}function _Mt(t){for(;fMt();)switch(cMt){case t:return lMt;case 34:case 39:34!==t&&39!==t&&_Mt(cMt);break;case 40:41===t&&_Mt(t);break;case 92:fMt()}return lMt}function SMt(t,e){for(;fMt()&&t+cMt!==57&&(t+cMt!==84||47!==gMt()););return"/*"+mMt(e,lMt-1)+"*"+KDt(47===t?t:fMt())}function CMt(t){for(;!xMt(gMt());)fMt();return mMt(t,lMt)}function EMt(t){return kMt(AMt("",null,null,null,[""],t=bMt(t),0,[0],t))}function AMt(t,e,r,i,n,a,s,o,l){for(var c=0,h=0,u=s,d=0,p=0,f=0,g=1,y=1,m=1,x=0,b="",k=n,v=a,T=i,w=b;y;)switch(f=x,x=fMt()){case 40:if(108!=f&&58==tMt(w,u-1)){-1!=JDt(w+=ZDt(vMt(x),"&","&\f"),"&\f",XDt(c?o[c-1]:0))&&(m=-1);break}case 34:case 39:case 91:w+=vMt(x);break;case 9:case 10:case 13:case 32:w+=TMt(f);break;case 92:w+=wMt(yMt()-1,7);continue;case 47:switch(gMt()){case 42:case 47:nMt(LMt(SMt(fMt(),yMt()),e,r,l),l),(5==xMt(f||1)||5==xMt(gMt()||1))&&rMt(w)&&" "!==eMt(w,-1,void 0)&&(w+=" ");break;default:w+="/"}break;case 123*g:o[c++]=rMt(w)*m;case 125*g:case 59:case 0:switch(x){case 0:case 125:y=0;case 59+h:-1==m&&(w=ZDt(w,/\f/g,"")),p>0&&(rMt(w)-u||0===g&&47===f)&&nMt(p>32?RMt(w+";",i,r,u-1,l):RMt(ZDt(w," ","")+";",i,r,u-2,l),l);break;case 59:w+=";";default:if(nMt(T=$Mt(w,e,r,c,h,n,o,b,k=[],v=[],u,a),a),123===x)if(0===h)AMt(w,e,T,T,k,a,u,o,v);else{switch(d){case 99:if(110===tMt(w,3))break;case 108:if(97===tMt(w,2))break;default:h=0;case 100:case 109:case 115:}h?AMt(t,T,T,i&&nMt($Mt(t,T,T,0,0,n,o,b,n,k=[],u,v),v),n,v,u,o,i?k:v):AMt(w,T,T,T,[""],v,0,o,v)}}c=h=p=0,g=m=1,b=w="",u=s;break;case 58:u=1+rMt(w),p=f;default:if(g<1)if(123==x)--g;else if(125==x&&0==g++&&125==pMt())continue;switch(w+=KDt(x),x*g){case 38:m=h>0?1:(w+="\f",-1);break;case 44:o[c++]=(rMt(w)-1)*m,m=1;break;case 64:45===gMt()&&(w+=vMt(fMt())),d=gMt(),h=u=rMt(b=w+=CMt(yMt())),x++;break;case 45:45===f&&2==rMt(w)&&(g=0)}}return a}function $Mt(t,e,r,i,n,a,s,o,l,c,h,u){for(var d=n-1,p=0===n?a:[""],f=iMt(p),g=0,y=0,m=0;g<i;++g)for(var x=0,b=eMt(t,d+1,d=XDt(y=s[g])),k=t;x<f;++x)(k=QDt(y>0?p[x]+" "+b:ZDt(b,/&\f/g,p[x])))&&(l[m++]=k);return uMt(t,e,r,0===n?HDt:o,l,c,h,u)}function LMt(t,e,r,i){return uMt(t,e,r,GDt,KDt(dMt()),eMt(t,2,-2),0,i)}function RMt(t,e,r,i,n){return uMt(t,e,r,VDt,eMt(t,0,i),eMt(t,i+1,-1),i,n)}function IMt(t,e){for(var r="",i=0;i<t.length;i++)r+=e(t[i],i,t,e)||"";return r}function NMt(t,e,r,i){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case"@namespace":case VDt:return t.return=t.return||t.value;case GDt:return"";case"@keyframes":return t.return=t.value+"{"+IMt(t.children,i)+"}";case HDt:if(!rMt(t.value=t.props.join(",")))return""}return rMt(r=IMt(t.children,i))?t.return=t.value+"{"+r+"}":""}g(uMt,"node"),g(dMt,"char"),g(pMt,"prev"),g(fMt,"next"),g(gMt,"peek"),g(yMt,"caret"),g(mMt,"slice"),g(xMt,"token"),g(bMt,"alloc"),g(kMt,"dealloc"),g(vMt,"delimit"),g(TMt,"whitespace"),g(wMt,"escaping"),g(_Mt,"delimiter"),g(SMt,"commenter"),g(CMt,"identifier"),g(EMt,"compile"),g(AMt,"parse"),g($Mt,"ruleset"),g(LMt,"comment"),g(RMt,"declaration"),g(IMt,"serialize"),g(NMt,"stringify"),Ni(),mZ(),mxt();function DMt(t,e){t.attr("role","graphics-document document"),""!==e&&t.attr("aria-roledescription",e)}function MMt(t,e,r,i){if(void 0!==t.insert){if(r){let e=`chart-desc-${i}`;t.attr("aria-describedby",e),t.insert("desc",":first-child").attr("id",e).text(r)}if(e){let r=`chart-title-${i}`;t.attr("aria-labelledby",r),t.insert("title",":first-child").attr("id",r).text(e)}}}g(DMt,"setA11yDiagramInfo"),g(MMt,"addSVGa11yTitleDescription"),je(),Ar(),Ar(),ns(),zn(),Fn(),_L();var OMt=class t{constructor(t,e,r,i,n){this.type=t,this.text=e,this.db=r,this.parser=i,this.renderer=n}static{g(this,"Diagram")}static async fromText(e,r={}){let i=Re(),n=wn(e,i);e=vL(e)+"\n";try{da(n)}catch{let t=Cn(n);if(!t)throw new vn(`Diagram ${n} not found.`);let{id:e,diagram:r}=await t();ua(e,r)}let{db:a,parser:s,renderer:o,init:l}=da(n);return s.parser&&(s.parser.yy=a),a.clear?.(),l?.(i),r.title&&a.setDiagramTitle?.(r.title),await s.parse(e),new t(n,e,a,s,o)}async render(t,e){await this.renderer.draw(this.text,t,e,this)}getParser(){return this.parser}getType(){return this.type}};gn();var PMt=[],BMt=g((()=>{PMt.forEach((t=>{t()})),PMt=[]}),"attachFunctions");We();var FMt=g((t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart()),"cleanupComments");function zMt(t){let e=t.match(xn);if(!e)return{text:t,metadata:{}};let r=FD(e[1],{schema:BD})??{};r="object"!=typeof r||Array.isArray(r)?{}:r;let i={};return r.displayMode&&(i.displayMode=r.displayMode.toString()),r.title&&(i.title=r.title.toString()),r.config&&(i.config=r.config),{text:t.slice(e[0].length),metadata:i}}Bn(),zD(),g(zMt,"extractFrontMatter"),_L();var jMt=g((t=>t.replace(/\r\n?/g,"\n").replace(/<(\w+)([^>]*)>/g,((t,e,r)=>"<"+e+r.replace(/="([^"]*)"/g,"='$1'")+">"))),"cleanupText"),UMt=g((t=>{let{text:e,metadata:r}=zMt(t),{displayMode:i,title:n,config:a={}}=r;return i&&(a.gantt||(a.gantt={}),a.gantt.displayMode=i),{title:n,config:a,text:e}}),"processFrontmatter"),WMt=g((t=>{let e=kL.detectInit(t)??{},r=kL.detectDirective(t,"wrap");return Array.isArray(r)?e.wrap=r.some((({type:t})=>"wrap"===t)):"wrap"===r?.type&&(e.wrap=!0),{text:eL(t),directive:e}}),"processDirectives");function qMt(t){let e=jMt(t),r=UMt(e),i=WMt(r.text),n=G$(r.config,i.directive);return{code:t=FMt(i.text),title:r.title,config:n}}function YMt(t){let e=(new TextEncoder).encode(t),r=Array.from(e,(t=>String.fromCodePoint(t))).join("");return btoa(r)}g(qMt,"preprocessDiagram"),Wn(),_r(),_L(),g(YMt,"toBase64");var GMt=["foreignobject"],HMt=["dominant-baseline"];function VMt(t){let e=qMt(t);return De(),Ne(e.config??{}),e}async function XMt(t,e){qDt();try{let{code:e,config:r}=VMt(t);return{diagramType:(await sOt(e)).type,config:r}}catch(t){if(e?.suppressErrors)return!1;throw t}}g(VMt,"processAndSetConfigs"),g(XMt,"parse");var KMt=g(((t,e,r=[])=>`\n.${t} ${e} { ${r.join(" !important; ")} !important; }`),"cssImportantStyles"),QMt=g(((t,e=new Map)=>{let r="";if(void 0!==t.themeCSS&&(r+=`\n${t.themeCSS}`),void 0!==t.fontFamily&&(r+=`\n:root { --mermaid-font-family: ${t.fontFamily}}`),void 0!==t.altFontFamily&&(r+=`\n:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),e instanceof Map){let i=t.htmlLabels??t.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach((t=>{yZ(t.styles)||i.forEach((e=>{r+=KMt(t.id,e,t.styles)})),yZ(t.textStyles)||(r+=KMt(t.id,"tspan",(t?.textStyles||[]).map((t=>t.replace("color","fill")))))}))}return r}),"createCssStyles"),ZMt=g(((t,e,r,i)=>{let n=QMt(t,r);return IMt(EMt(`${i}{${On(e,n,t.themeVariables)}}`),NMt)}),"createUserStyles"),JMt=g(((t="",e,r)=>{let i=t;return!r&&!e&&(i=i.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),i=TL(i),i=i.replace(/<br>/g,"<br/>"),i}),"cleanUpSvgCode"),tOt=g(((t="",e)=>`<iframe style="width:100%;height:${e?.viewBox?.baseVal?.height?e.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;charset=UTF-8;base64,${YMt(`<body style="margin:0">${t}</body>`)}" sandbox="allow-top-navigation-by-user-activation allow-popups">\n  The "iframe" tag is not supported by your browser.\n</iframe>`),"putIntoIFrame"),eOt=g(((t,e,r,i,n)=>{let a=t.append("div");a.attr("id",r),i&&a.attr("style",i);let s=a.append("svg").attr("id",e).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return n&&s.attr("xmlns:xlink",n),s.append("g"),t}),"appendDivSvgG");function rOt(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}g(rOt,"sandboxedIframe");var iOt=g(((t,e,r,i)=>{t.getElementById(e)?.remove(),t.getElementById(r)?.remove(),t.getElementById(i)?.remove()}),"removeExistingElements"),nOt=g((async function(t,e,r){qDt();let i=VMt(e);e=i.code;let n=Re();et.debug(n),e.length>(n?.maxTextSize??5e4)&&(e="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");let a,s,o="#"+t,l="i"+t,c="#"+l,h="d"+t,u="#"+h,d=g((()=>{let t=nh(f?c:u).node();t&&"remove"in t&&t.remove()}),"removeTempElements"),p=nh("body"),f="sandbox"===n.securityLevel,y="loose"===n.securityLevel,m=n.fontFamily;if(void 0!==r){if(r&&(r.innerHTML=""),f){let t=rOt(nh(r),l);p=nh(t.nodes()[0].contentDocument.body),p.node().style.margin=0}else p=nh(r);eOt(p,t,h,`font-family: ${m}`,"http://www.w3.org/1999/xlink")}else{if(iOt(document,t,h,l),f){let t=rOt(nh("body"),l);p=nh(t.nodes()[0].contentDocument.body),p.node().style.margin=0}else p=nh("body");eOt(p,t,h)}try{a=await OMt.fromText(e,{title:i.title})}catch(t){if(n.suppressErrorRendering)throw d(),t;a=await OMt.fromText("error"),s=t}let x=p.select(u).node(),b=a.type,k=x.firstChild,v=k.firstChild,T=a.renderer.getClasses?.(e,a),w=ZMt(n,b,T,o),_=document.createElement("style");_.innerHTML=w,k.insertBefore(_,v);try{await a.renderer.draw(e,t,lxt.version,a)}catch(r){throw n.suppressErrorRendering?d():pDt.draw(e,t,lxt.version),r}let S=p.select(`${u} svg`),C=a.db.getAccTitle?.(),E=a.db.getAccDescription?.();oOt(b,S,C,E),p.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let A=p.select(u).node().innerHTML;if(et.debug("config.arrowMarkerAbsolute",n.arrowMarkerAbsolute),A=JMt(A,f,Hi(n.arrowMarkerAbsolute)),f){let t=p.select(u+" svg").node();A=tOt(A,t)}else y||(A=Ii.sanitize(A,{ADD_TAGS:GMt,ADD_ATTR:HMt,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(BMt(),s)throw s;return d(),{diagramType:b,svg:A,bindFunctions:a.db.bindFunctions}}),"render");function aOt(t={}){let e=Z({},t);e?.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),Ee(e),e?.theme&&e.theme in de?e.themeVariables=de[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=de.default.getThemeVariables(e.themeVariables));let r="object"==typeof e?Ce(e):$e();rt(r.logLevel),qDt()}g(aOt,"initialize");var sOt=g(((t,e={})=>{let{code:r}=qMt(t);return OMt.fromText(r,e)}),"getDiagramFromText");function oOt(t,e,r,i){DMt(e,t),MMt(e,r,i,e.attr("id"))}g(oOt,"addA11yInfo");var lOt=Object.freeze({render:nOt,parse:XMt,getDiagramFromText:sOt,initialize:aOt,getConfig:Re,setConfig:Le,getSiteConfig:$e,updateSiteConfig:Ae,reset:g((()=>{De()}),"reset"),globalReset:g((()=>{De(ke)}),"globalReset"),defaultConfig:ke});rt(Re().logLevel),De(Re()),d5(),_L();var cOt=g(((t,e,r)=>{et.warn(t),Y$(t)?(r&&r(t.str,t.hash),e.push({...t,message:t.str,error:t})):(r&&r(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))}),"handleError"),hOt=g((async function(t={querySelector:".mermaid"}){try{await uOt(t)}catch(e){if(Y$(e)&&et.error(e.str),_Ot.parseError&&_Ot.parseError(e),!t.suppressErrors)throw et.error("Use the suppressErrors option to suppress these errors"),e}}),"run"),uOt=g((async function({postRenderCallback:t,querySelector:e,nodes:r}={querySelector:".mermaid"}){let i,n=lOt.getConfig();if(et.debug((t?"":"No ")+"Callback function found"),r)i=r;else{if(!e)throw new Error("Nodes and querySelector are both undefined");i=document.querySelectorAll(e)}et.debug(`Found ${i.length} diagrams`),void 0!==n?.startOnLoad&&(et.debug("Start On Load: "+n?.startOnLoad),lOt.updateSiteConfig({startOnLoad:n?.startOnLoad}));let a,s=new kL.InitIDGenerator(n.deterministicIds,n.deterministicIDSeed),o=[];for(let e of Array.from(i)){if(et.info("Rendering diagram: "+e.id),e.getAttribute("data-processed"))continue;e.setAttribute("data-processed","true");let r=`mermaid-${s.next()}`;a=e.innerHTML,a=mn(kL.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");let i=kL.detectInit(a);i&&et.debug("Detected early reinit: ",i);try{let{svg:i,bindFunctions:n}=await TOt(r,a,e);e.innerHTML=i,t&&await t(r),n&&n(e)}catch(t){cOt(t,o,_Ot.parseError)}}if(o.length>0)throw o[0]}),"runThrowsErrors"),dOt=g((function(t){lOt.initialize(t)}),"initialize"),pOt=g((async function(t,e,r){et.warn("mermaid.init is deprecated. Please use run instead."),t&&dOt(t);let i={postRenderCallback:r,querySelector:".mermaid"};"string"==typeof e?i.querySelector=e:e&&(e instanceof HTMLElement?i.nodes=[e]:i.nodes=e),await hOt(i)}),"init"),fOt=g((async(t,{lazyLoad:e=!0}={})=>{qDt(),_n(...t),!1===e&&await YDt()}),"registerExternalDiagrams"),gOt=g((function(){if(_Ot.startOnLoad){let{startOnLoad:t}=lOt.getConfig();t&&_Ot.run().catch((t=>et.error("Mermaid failed to initialize",t)))}}),"contentLoaded");typeof document<"u"&&window.addEventListener("load",gOt,!1);var yOt,mOt=g((function(t){_Ot.parseError=t}),"setParseErrorHandler"),xOt=[],bOt=!1,kOt=g((async()=>{if(!bOt){for(bOt=!0;xOt.length>0;){let t=xOt.shift();if(t)try{await t()}catch(t){et.error("Error executing queue",t)}}bOt=!1}}),"executeQueue"),vOt=g((async(t,e)=>new Promise(((r,i)=>{let n=g((()=>new Promise(((n,a)=>{lOt.parse(t,e).then((t=>{n(t),r(t)}),(t=>{et.error("Error parsing",t),_Ot.parseError?.(t),a(t),i(t)}))}))),"performCall");xOt.push(n),kOt().catch(i)}))),"parse"),TOt=g(((t,e,r)=>new Promise(((i,n)=>{let a=g((()=>new Promise(((a,s)=>{lOt.render(t,e,r).then((t=>{a(t),i(t)}),(t=>{et.error("Error parsing",t),_Ot.parseError?.(t),s(t),n(t)}))}))),"performCall");xOt.push(a),kOt().catch(n)}))),"render"),wOt=g((()=>Object.keys(Tn).map((t=>({id:t})))),"getRegisteredDiagramsMetadata"),_Ot={startOnLoad:!0,mermaidAPI:lOt,parse:vOt,render:TOt,init:pOt,run:hOt,registerExternalDiagrams:fOt,registerLayoutLoaders:V4,initialize:dOt,parseError:void 0,contentLoaded:gOt,setParseErrorHandler:mOt,detectType:wn,registerIconPacks:un,getRegisteredDiagramsMetadata:wOt},SOt=_Ot;return yOt=tNt,b(h({},"__esModule",{value:!0}),yOt)})(),
/*! Check if previously processed */
/*!
 * Wait for document loaded before starting the execution
 */
/*! Bundled license information:

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
globalThis.mermaid=globalThis.__esbuild_esm_mermaid_nm.mermaid.default;
//# sourceMappingURL=/sm/e6156f41cc3a9172f125020417959f2594a92b46070e0614f59b8d4289ac07d4.map